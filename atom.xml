<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Hisashiburi</title>
  
  <subtitle>å¥½ä¹…ä¸è§</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://hisashiburidane.github.io/"/>
  <updated>2020-10-02T17:45:07.316Z</updated>
  <id>https://hisashiburidane.github.io/</id>
  
  <author>
    <name>Hisashiburi</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Vue 3</title>
    <link href="https://hisashiburidane.github.io//%E7%AC%94%E8%AE%B0/2020/09/26/Vuejs3/"/>
    <id>https://hisashiburidane.github.io//ç¬”è®°/2020/09/26/Vuejs3/</id>
    <published>2020-09-26T15:06:23.000Z</published>
    <updated>2020-10-02T17:45:07.316Z</updated>
    
    <content type="html"><![CDATA[<p>ç–²äºå·¥ä½œå•¥éƒ½æ²¡å…³æ³¨,çªç„¶å‘ç°vueå‘å¸ƒ3.0äº†,æ¥çœ‹çœ‹æœ‰ä»€ä¹ˆæ–°ç‰¹æ€§,æœ‰æ²¡æœ‰å¼€å§‹å­¦ä¹ çš„å¿…è¦,æ¯•ç«Ÿæˆ‘è¿˜æ˜¯æ¯”è¾ƒå€¾å‘äºReactçš„ğŸ¶</p><a id="more"></a><p>é¦–å…ˆçš„é—®é¢˜æ˜¯è™šæ‹Ÿæœºä¸­ä¸ºäº†ä¸Šæ¬¡å®‰è£…Mock Serverè£…äº†8.xçš„node,viteæŠ¥é”™,æ‰€ä»¥ç¬¬ä¸€æ­¥æ˜¯å®‰è£…nvmä¾¿äºåé¢çš„æµ‹è¯•å¼€å‘</p><h2 id="å®‰è£…ç¯å¢ƒ"><a href="#å®‰è£…ç¯å¢ƒ" class="headerlink" title="å®‰è£…ç¯å¢ƒ"></a>å®‰è£…ç¯å¢ƒ</h2><h3 id="å®‰è£…NVM"><a href="#å®‰è£…NVM" class="headerlink" title="å®‰è£…NVM"></a>å®‰è£…NVM</h3><figure class="highlight sh"><figcaption><span>ä¸‹è½½å¹¶å®‰è£…</span><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL252bS1zaC9udm0=" title="https://github.com/nvm-sh/nvm">nvm-sh/nvm<i class="fa fa-external-link"></i></span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.36.0/install.sh | bash</span><br></pre></td></tr></table></figure><figure class="highlight zsh"><figcaption><span>é…ç½®zshç¯å¢ƒå˜é‡</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cat&gt;&gt;<span class="variable">$HOME</span>/.zshrc&lt;&lt;EOF</span><br><span class="line"><span class="comment"># &gt;&gt;&gt; nvm initialize &gt;&gt;&gt;</span></span><br><span class="line"><span class="comment"># !! NVM !!</span></span><br><span class="line"><span class="built_in">export</span> NVM_DIR=<span class="string">&quot;<span class="variable">$HOME</span>/.nvm&quot;</span></span><br><span class="line">[ -s <span class="string">&quot;<span class="variable">$NVM_DIR</span>/nvm.sh&quot;</span> ] &amp;&amp; \. <span class="string">&quot;<span class="variable">$NVM_DIR</span>/nvm.sh&quot;</span>  <span class="comment"># This loads nvm</span></span><br><span class="line">[ -s <span class="string">&quot;<span class="variable">$NVM_DIR</span>/bash_completion&quot;</span> ] &amp;&amp; \. <span class="string">&quot;<span class="variable">$NVM_DIR</span>/bash_completion&quot;</span>  <span class="comment"># This loads nvm bash_completion</span></span><br><span class="line"><span class="comment"># &lt;&lt;&lt; nvm initialize &lt;&lt;&lt;</span></span><br><span class="line">EOF</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…Python2-7ç¯å¢ƒ"><a href="#å®‰è£…Python2-7ç¯å¢ƒ" class="headerlink" title="å®‰è£…Python2.7ç¯å¢ƒ"></a>å®‰è£…Python2.7ç¯å¢ƒ</h3><p>nvmå®‰è£…node 12.xéœ€è¦python2.7ç¯å¢ƒ,è¿™å¯¹äºæˆ‘è¿™ç§python/nodeéƒ½ä¼šæ¥å›åˆ‡ç‰ˆæœ¬çš„äººå°±çœŸçš„æ˜¯ä¸å‹å¥½â€¦</p><figure class="highlight yaml"><figcaption><span>.condarc</span><span class="exturl" data-url="aHR0cHM6Ly9taXJyb3JzLnR1bmEudHNpbmdodWEuZWR1LmNuL2hlbHAvYW5hY29uZGEv" title="https://mirrors.tuna.tsinghua.edu.cn/help/anaconda/">é…ç½®æ¸…åæº<i class="fa fa-external-link"></i></span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">channels:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">defaults</span></span><br><span class="line"><span class="attr">show_channel_urls:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">channel_alias:</span> <span class="string">https://mirrors.tuna.tsinghua.edu.cn/anaconda</span></span><br><span class="line"><span class="attr">default_channels:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/pro</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2</span></span><br><span class="line"><span class="attr">custom_channels:</span></span><br><span class="line">  <span class="attr">conda-forge:</span> <span class="string">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span></span><br><span class="line">  <span class="attr">msys2:</span> <span class="string">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span></span><br><span class="line">  <span class="attr">bioconda:</span> <span class="string">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span></span><br><span class="line">  <span class="attr">menpo:</span> <span class="string">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span></span><br><span class="line">  <span class="attr">pytorch:</span> <span class="string">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span></span><br><span class="line">  <span class="attr">simpleitk:</span> <span class="string">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span></span><br></pre></td></tr></table></figure><figure class="highlight zsh"><figcaption><span>åˆ›å»ºpython2.7ç¯å¢ƒå¹¶åˆ‡æ¢</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºåä¸ºpy2çš„è™šæ‹Ÿç¯å¢ƒå¹¶ä¸”æŒ‡å®šPythonçš„ç‰ˆæœ¬ä¸º2.7</span></span><br><span class="line">conda create --name py2 Python=2.7</span><br><span class="line"><span class="comment"># åˆ‡æ¢python2.7ç¯å¢ƒ</span></span><br><span class="line">conda activate py2</span><br></pre></td></tr></table></figure><h3 id="å®‰è£…Nodejs-12-x"><a href="#å®‰è£…Nodejs-12-x" class="headerlink" title="å®‰è£…Nodejs 12.x"></a>å®‰è£…Nodejs 12.x</h3><p>ä¹‹åå¼€å§‹å®‰è£…ltsç‰ˆæœ¬çš„node</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> nvm install 12 --lts</span></span><br><span class="line">Downloading and installing node v12.18.4...</span><br><span class="line">Downloading https://nodejs.org/dist/v12.18.4/node-v12.18.4-linux-x64.tar.xz...</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment">############################################################################################################################################################## 100.0%</span></span></span><br><span class="line">Computing checksum with sha256sum</span><br><span class="line">Checksums matched!</span><br><span class="line">Now using node v12.18.4 (npm v6.14.6)</span><br><span class="line">Creating default alias: default -&gt; 12 (-&gt; v12.18.4)</span><br></pre></td></tr></table></figure><h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><figure class="highlight shell"><figcaption><span>é€šè¿‡viteå·¥å…·åˆ›å»ºé¡¹ç›®</span><span class="exturl" data-url="aHR0cHM6Ly92dWUzanMuY24vZG9jcy96aC9ndWlkZS9pbnN0YWxsYXRpb24uaHRtbCN2aXRl" title="https://vue3js.cn/docs/zh/guide/installation.html#vite">vue3js.cn<i class="fa fa-external-link"></i></span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> npm install -g nrm <span class="comment"># å®‰è£…nrmå·¥å…·ç”¨äºåˆ‡æ¢é•œåƒ</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> nrm use taobao <span class="comment"># ä½¿ç”¨æ·˜å®é•œåƒ</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npm init vite-app magicyang <span class="comment"># åˆ›å»ºmagicyangé¡¹ç›®</span></span></span><br><span class="line">npx: installed 7 in 5.187s</span><br><span class="line">Scaffolding project in /home/centos/workspace/magicyang...</span><br><span class="line"></span><br><span class="line">Done. Now run:</span><br><span class="line"></span><br><span class="line">  cd magicyang</span><br><span class="line">  npm install (or `yarn`)</span><br><span class="line">  npm run dev (or `yarn dev`)</span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> magicyang <span class="comment"># åˆ‡æ¢åˆ°é¡¹ç›®è·¯å¾„</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npm install <span class="comment"># å®‰è£…ä¾èµ–</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npm run dev <span class="comment"># å¯åŠ¨å¼€å‘æœåŠ¡</span></span></span><br></pre></td></tr></table></figure><p>åˆ°æ­¤ä¸ºæ­¢,ä¸€ä¸ªhello worldé¡¹ç›®å°±åˆ›å»ºå®Œæˆäº†.<br><strong>æˆ‘ç‰¹å–µçš„åˆ«çš„ä¸è¯´è¿™ä¸ªå¯åŠ¨é€Ÿåº¦æ˜¯çœŸæ»´ç‰›é€¼!</strong></p><p>ä»hello worldçš„ç»„ä»¶ä¸­çœ‹,è¯­æ³•å’Œå‰ä¸€ä»£è¿˜æ˜¯åŸºæœ¬ä¿æŒä¸€è‡´çš„,ä¸è¿‡ç¿»äº†ç¿»æ„Ÿè§‰ç ´åæ€§çš„ä¿®æ”¹è¿˜æ˜¯å¾ˆå¤šçš„,æœ‰ç©ºæ…¢æ…¢çœ‹å§,å…ˆçœ‹çœ‹è®¾è®¡æ€è·¯å’Œç†å¿µå†è¯´</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>&#123;&#123; msg &#125;&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;count++&quot;</span>&gt;</span>count is: &#123;&#123; count &#125;&#125;<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Edit <span class="tag">&lt;<span class="name">code</span>&gt;</span>components/HelloWorld.vue<span class="tag">&lt;/<span class="name">code</span>&gt;</span> to test hot module replacement.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line"><span class="javascript">  name: <span class="string">&#x27;HelloWorld&#x27;</span>,</span></span><br><span class="line">  props: &#123;</span><br><span class="line"><span class="javascript">    msg: <span class="built_in">String</span></span></span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line">      count: 0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç–²äºå·¥ä½œå•¥éƒ½æ²¡å…³æ³¨,çªç„¶å‘ç°vueå‘å¸ƒ3.0äº†,æ¥çœ‹çœ‹æœ‰ä»€ä¹ˆæ–°ç‰¹æ€§,æœ‰æ²¡æœ‰å¼€å§‹å­¦ä¹ çš„å¿…è¦,æ¯•ç«Ÿæˆ‘è¿˜æ˜¯æ¯”è¾ƒå€¾å‘äºReactçš„ğŸ¶&lt;/p&gt;
    
    </summary>
    
      <category term="ç¬”è®°" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
  </entry>
  
  <entry>
    <title>Easy Mock</title>
    <link href="https://hisashiburidane.github.io//%E7%AC%94%E8%AE%B0/2020/09/19/Easy-Mock/"/>
    <id>https://hisashiburidane.github.io//ç¬”è®°/2020/09/19/Easy-Mock/</id>
    <published>2020-09-19T14:55:44.000Z</published>
    <updated>2020-10-02T16:51:16.450Z</updated>
    
    <content type="html"><![CDATA[<p>å›½äº§è½¯ä»¶,æœäº†å¾ˆå¤šèµ„æ–™å¥½åƒå¤–å›½äººä¸æ˜¯å¾ˆåœ¨æ„ mock server è¿™ä¸ªä¸œè¥¿?</p><a id="more"></a><h2 id="ä¾èµ–ç¯å¢ƒ"><a href="#ä¾èµ–ç¯å¢ƒ" class="headerlink" title="ä¾èµ–ç¯å¢ƒ"></a>ä¾èµ–ç¯å¢ƒ</h2><p>å°è§„æ¨¡çš„åº”ç”¨,ä½¿ç”¨ docker å®‰è£…å®Œå…¨è¶³å¤Ÿç”¨äº†,å¯ä»¥å‚è€ƒ<a href="/2020/09/15/CentOSå¸¸è§é—®é¢˜/#docker" title="CentOSå¸¸è§é—®é¢˜#docker">è¿™é‡Œ</a></p><h3 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h3><figure class="highlight shell"><figcaption><span>Dockerå®‰è£…MongoDB</span><span class="exturl" data-url="aHR0cHM6Ly9odWIuZG9ja2VyLmNvbS9fL21vbmdv" title="https://hub.docker.com/_/mongo">DockerHub/mongo<i class="fa fa-external-link"></i></span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker pull mongo</span></span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/mongo</span><br><span class="line">5d9821c94847: Pull complete</span><br><span class="line">a610eae58dfc: Pull complete</span><br><span class="line">a40e0eb9f140: Pull complete</span><br><span class="line">3242ba6cef1f: Pull complete</span><br><span class="line">8ade7416f0cf: Pull complete</span><br><span class="line">cd8d2aab224e: Pull complete</span><br><span class="line">9d8c2ff7f392: Pull complete</span><br><span class="line">d29b99c4ab4c: Pull complete</span><br><span class="line">5d1ed7c1266e: Pull complete</span><br><span class="line">77f31d60b382: Pull complete</span><br><span class="line">e328c48077a2: Pull complete</span><br><span class="line">31085c577c4a: Pull complete</span><br><span class="line">Digest: sha256:ebcdb042054d9974c8c3160d761b0bdb39b55115448242de1a5161c124ddb0af</span><br><span class="line">Status: Downloaded newer image for mongo:latest</span><br><span class="line">docker.io/library/mongo:latest</span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºå¹¶å¯åŠ¨dockerå®¹å™¨</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker run -itd --name mongo -p 27017:27017 mongo --auth</span></span><br><span class="line">46b83cc20eb4c7270cb961ea00a6ac0df6ffdc1ff0ac6921e3eef546e163eb46</span><br></pre></td></tr></table></figure><figure class="highlight shell"><figcaption><span>åˆ›å»ºç”¨æˆ·</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">exec</span> -it mongo mongo admin</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºä¸€ä¸ªåä¸º root,å¯†ç ä¸º p@ssw0rd çš„ç”¨æˆ·ã€‚</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">  db.createUser(&#123; user:<span class="string">&#x27;root&#x27;</span>,<span class="built_in">pwd</span>:<span class="string">&#x27;p@ssw0rd&#x27;</span>,roles:[ &#123; role:<span class="string">&#x27;userAdminAnyDatabase&#x27;</span>, db: <span class="string">&#x27;admin&#x27;</span>&#125;]&#125;);</span></span><br><span class="line">Successfully added user: &#123;</span><br><span class="line">&quot;user&quot; : &quot;root&quot;,</span><br><span class="line"> &quot;roles&quot; : [</span><br><span class="line">  &#123;</span><br><span class="line">   &quot;role&quot; : &quot;userAdminAnyDatabase&quot;,</span><br><span class="line">   &quot;db&quot; : &quot;admin&quot;</span><br><span class="line">  &#125;</span><br><span class="line"> ]</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#</span><span class="bash"> å°è¯•ä½¿ç”¨ä¸Šé¢åˆ›å»ºçš„ç”¨æˆ·ä¿¡æ¯è¿›è¡Œè¿æ¥ã€‚</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> db.auth(<span class="string">&#x27;root&#x27;</span>, <span class="string">&#x27;p@ssw0rd&#x27;</span>)</span></span><br><span class="line">1</span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ›å»ºä¸€ä¸ªåä¸º easymockï¼Œå¯†ç ä¸º p@ssw0rd çš„ç”¨æˆ·,å…·å¤‡easymockæ•°æ®åº“çš„è¯»å†™æƒé™</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> db.createUser(&#123; user:<span class="string">&#x27;easymock&#x27;</span>,<span class="built_in">pwd</span>:<span class="string">&#x27;p@ssw0rd&#x27;</span>,roles:[<span class="string">&quot;root&quot;</span>]&#125;);</span></span><br><span class="line">Successfully added user: &#123; &quot;user&quot; : &quot;easymock&quot;, &quot;roles&quot; : [ &quot;root&quot; ] &#125;</span><br></pre></td></tr></table></figure><h3 id="Redis"><a href="#Redis" class="headerlink" title="Redis"></a>Redis</h3><figure class="highlight shell"><figcaption><span>Dockerå®‰è£…Redis</span><span class="exturl" data-url="aHR0cHM6Ly9odWIuZG9ja2VyLmNvbS9fL3JlZGlz" title="https://hub.docker.com/_/redis">DockerHub/redis<i class="fa fa-external-link"></i></span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker pull redis</span></span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/redis</span><br><span class="line">d121f8d1c412: Pull complete</span><br><span class="line">2f9874741855: Pull complete</span><br><span class="line">d92da09ebfd4: Pull complete</span><br><span class="line">bdfa64b72752: Pull complete</span><br><span class="line">e748e6f663b9: Pull complete</span><br><span class="line">eb1c8b66e2a1: Pull complete</span><br><span class="line">Digest: sha256:1cfb205a988a9dae5f025c57b92e9643ec0e7ccff6e66bc639d8a5f95bba928c</span><br><span class="line">Status: Downloaded newer image for redis:latest</span><br><span class="line">docker.io/library/redis:latest</span><br><span class="line"><span class="meta">$</span><span class="bash"> docker run -itd --name redis -p 6379:6379 redis</span></span><br><span class="line">997037310c17fb6109a42c3432fa910dc2e20ded8b863a9c572e022cc932f4cf</span><br></pre></td></tr></table></figure><figure class="highlight shell"><figcaption><span>ä½¿ç”¨Redis-Cliç™»å½•</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker <span class="built_in">exec</span> -it redis /bin/bash</span></span><br><span class="line">root@997037310c17:/data# redis-cli</span><br><span class="line">127.0.0.1:6379&gt; hkeys all;</span><br><span class="line">(empty array)</span><br></pre></td></tr></table></figure><h3 id="nodejs"><a href="#nodejs" class="headerlink" title="nodejs"></a>nodejs</h3><p>å®é™…æµ‹è¯•ä¸‹æ¥,EasyMock<code>ä¸æ”¯æŒ10.xå’Œ12.xçš„nodeç¯å¢ƒ</code>,å› æ­¤éœ€è¦å®‰è£…<a href="https://nodejs.org/dist/latest-v8.x/"><code>8.x</code></a></p><figure class="highlight shell"><figcaption><span>å®‰è£…NodeJS</span><span class="exturl" data-url="aHR0cHM6Ly9ub2RlanMub3JnL2Rpc3QvbGF0ZXN0LXY4Lngv" title="https://nodejs.org/dist/latest-v8.x/">nodejs-v8.x-latest<i class="fa fa-external-link"></i></span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> ä¸‹è½½å‹ç¼©åŒ…</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> wget https://nodejs.org/dist/latest-v8.x/node-v8.17.0-linux-x64.tar.xz</span></span><br><span class="line">--2020-09-20 07:48:29--  https://nodejs.org/dist/latest-v8.x/node-v8.17.0-linux-x64.tar.xz</span><br><span class="line">Resolving nodejs.org (nodejs.org)... 104.20.22.46, 104.20.23.46, 2606:4700:10::6814:172e, ...</span><br><span class="line">Connecting to nodejs.org (nodejs.org)|104.20.22.46|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 11820040 (11M) [application/x-xz]</span><br><span class="line">Saving to: &#x27;node-v8.17.0-linux-x64.tar.xz&#x27;</span><br><span class="line"></span><br><span class="line">node-v8.17.0-linux-x64.tar.xz          100%[=========================================================================&gt;]  11.27M  77.9KB/s    in 78s</span><br><span class="line"></span><br><span class="line">2020-09-20 07:49:48 (148 KB/s) - &#x27;node-v8.17.0-linux-x64.tar.xz&#x27; saved [11820040/11820040]</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> è§£å‹</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> xz -d ./node-v8.17.0-linux-x64.tar.xz &amp;&amp; tar -xvf ./node-v8.17.0-linux-x64.tar</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ›´æ”¹è·¯å¾„</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> mv ./node-v8.17.0-linux-x64 <span class="variable">$HOME</span>/deployment/nodejs</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> å†™å…¥ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cat&gt;&gt;<span class="variable">$HOME</span>/.bash_profile&lt;&lt;EOF</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> NODE ENV</span></span><br><span class="line">export NODEPATH=$HOME/deployment/nodejs</span><br><span class="line">export PATH=\$PATH:$NODEPATH/bin</span><br><span class="line">EOF</span><br><span class="line"><span class="meta">#</span><span class="bash"> åˆ·æ–°ç¯å¢ƒå˜é‡</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">source</span> <span class="variable">$HOME</span>/.bash_profile</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> node --version</span></span><br><span class="line">v8.17.0</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…-EasyMock"><a href="#å®‰è£…-EasyMock" class="headerlink" title="å®‰è£… EasyMock"></a>å®‰è£… EasyMock</h2><figure class="highlight shell"><figcaption><span>å®‰è£…EasyMock</span><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Vhc3ktbW9jay9lYXN5LW1vY2s=" title="https://github.com/easy-mock/easy-mock">EasyMock<i class="fa fa-external-link"></i></span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> git <span class="built_in">clone</span> https://github.com/easy-mock/easy-mock.git</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">cd</span> easy-mock &amp;&amp; npm install</span></span><br><span class="line">npm WARN ajv-keywords@2.1.1 requires a peer of ajv@^5.0.0 but none is installed. You must install peer dependencies yourself.</span><br><span class="line">npm WARN easy-mock@1.6.0 No repository field.</span><br><span class="line">npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.1.3 (node_modules/fsevents):</span><br><span class="line">npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.1.3: wanted &#123;&quot;os&quot;:&quot;darwin&quot;,&quot;arch&quot;:&quot;any&quot;&#125; (current: &#123;&quot;os&quot;:&quot;linux&quot;,&quot;arch&quot;:&quot;x64&quot;&#125;)</span><br><span class="line"></span><br><span class="line">audited 1820 packages in 18.413s</span><br><span class="line">found 1850 vulnerabilities (928 low, 140 moderate, 780 high, 2 critical)</span><br><span class="line">  run `npm audit fix` to fix them, or `npm audit` for details</span><br></pre></td></tr></table></figure><figure class="highlight json"><figcaption><span>ä¿®æ”¹é…ç½®æ–‡ä»¶</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;port&quot;</span>: <span class="number">7300</span>,</span><br><span class="line">  <span class="attr">&quot;host&quot;</span>: <span class="string">&quot;0.0.0.0&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;pageSize&quot;</span>: <span class="number">30</span>,</span><br><span class="line">  <span class="attr">&quot;proxy&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">  <span class="comment">// &quot;db&quot;: &quot;mongodb://admin:&#x27;p@ssw0rd&#x27;@localhost:27017/easy-mock&quot;,</span></span><br><span class="line">  <span class="attr">&quot;db&quot;</span>: <span class="string">&quot;mongodb://localhost/easy-mock&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;unsplashClientId&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;redis&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;keyPrefix&quot;</span>: <span class="string">&quot;[Easy Mock]&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;port&quot;</span>: <span class="number">6379</span>,</span><br><span class="line">    <span class="attr">&quot;host&quot;</span>: <span class="string">&quot;localhost&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;db&quot;</span>: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;blackList&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;projects&quot;</span>: [], <span class="comment">// projectIdï¼Œä¾‹ï¼š&quot;5a4495e16ef711102113e500&quot;</span></span><br><span class="line">    <span class="attr">&quot;ips&quot;</span>: [] <span class="comment">// ipï¼Œä¾‹ï¼š&quot;127.0.0.1&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;rateLimit&quot;</span>: &#123;</span><br><span class="line">    <span class="comment">// https://github.com/koajs/ratelimit</span></span><br><span class="line">    <span class="attr">&quot;max&quot;</span>: <span class="number">1000</span>,</span><br><span class="line">    <span class="attr">&quot;duration&quot;</span>: <span class="number">1000</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;jwt&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;expire&quot;</span>: <span class="string">&quot;14 days&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;secret&quot;</span>: <span class="string">&quot;shared-secret&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;upload&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;types&quot;</span>: [<span class="string">&quot;.jpg&quot;</span>, <span class="string">&quot;.jpeg&quot;</span>, <span class="string">&quot;.png&quot;</span>, <span class="string">&quot;.gif&quot;</span>, <span class="string">&quot;.json&quot;</span>, <span class="string">&quot;.yml&quot;</span>, <span class="string">&quot;.yaml&quot;</span>],</span><br><span class="line">    <span class="attr">&quot;size&quot;</span>: <span class="number">5242880</span>,</span><br><span class="line">    <span class="attr">&quot;dir&quot;</span>: <span class="string">&quot;../public/upload&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;expire&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;types&quot;</span>: [<span class="string">&quot;.json&quot;</span>, <span class="string">&quot;.yml&quot;</span>, <span class="string">&quot;.yaml&quot;</span>],</span><br><span class="line">      <span class="attr">&quot;day&quot;</span>: <span class="number">-1</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;ldap&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;server&quot;</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// è®¾ç½® server ä»£è¡¨å¯ç”¨ LDAP ç™»å½•ã€‚ä¾‹ï¼š&quot;ldap://localhost:389&quot; æˆ– &quot;ldaps://localhost:389&quot;ï¼ˆä½¿ç”¨ SSLï¼‰</span></span><br><span class="line">    <span class="attr">&quot;bindDN&quot;</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// ç”¨æˆ·åï¼Œä¾‹ï¼š&quot;cn=admin,dc=example,dc=com&quot;</span></span><br><span class="line">    <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;filter&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;base&quot;</span>: <span class="string">&quot;&quot;</span>, <span class="comment">// æŸ¥è¯¢ç”¨æˆ·çš„è·¯å¾„ï¼Œä¾‹ï¼š&quot;dc=example,dc=com&quot;</span></span><br><span class="line">      <span class="attr">&quot;attributeName&quot;</span>: <span class="string">&quot;&quot;</span> <span class="comment">// æŸ¥è¯¢å­—æ®µï¼Œä¾‹ï¼š&quot;mail&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;fe&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;copyright&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;storageNamespace&quot;</span>: <span class="string">&quot;easy-mock_&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;timeout&quot;</span>: <span class="number">25000</span>,</span><br><span class="line">    <span class="attr">&quot;publicPath&quot;</span>: <span class="string">&quot;/dist/&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight shell"><figcaption><span>è¿è¡Œ</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> å…¨å±€å®‰è£…pm2</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npm install -g --registry=http://registry.npm.taobao.org/ pm2</span></span><br><span class="line">/home/centos/deployment/nodejs/bin/pm2 -&gt; /home/centos/deployment/nodejs/lib/node_modules/pm2/bin/pm2</span><br><span class="line">/home/centos/deployment/nodejs/bin/pm2-docker -&gt; /home/centos/deployment/nodejs/lib/node_modules/pm2/bin/pm2-docker</span><br><span class="line">/home/centos/deployment/nodejs/bin/pm2-dev -&gt; /home/centos/deployment/nodejs/lib/node_modules/pm2/bin/pm2-dev</span><br><span class="line">/home/centos/deployment/nodejs/bin/pm2-runtime -&gt; /home/centos/deployment/nodejs/lib/node_modules/pm2/bin/pm2-runtime</span><br><span class="line">npm WARN notsup Unsupported engine for mkdirp@1.0.4: wanted: &#123;&quot;node&quot;:&quot;&gt;=10&quot;&#125; (current: &#123;&quot;node&quot;:&quot;8.17.0&quot;,&quot;npm&quot;:&quot;6.13.4&quot;&#125;)</span><br><span class="line">npm WARN notsup Not compatible with your version of node/npm: mkdirp@1.0.4</span><br><span class="line">npm WARN notsup Unsupported engine for semver@7.3.2: wanted: &#123;&quot;node&quot;:&quot;&gt;=10&quot;&#125; (current: &#123;&quot;node&quot;:&quot;8.17.0&quot;,&quot;npm&quot;:&quot;6.13.4&quot;&#125;)</span><br><span class="line">npm WARN notsup Not compatible with your version of node/npm: semver@7.3.2</span><br><span class="line">npm WARN notsup Unsupported engine for semver@7.2.3: wanted: &#123;&quot;node&quot;:&quot;&gt;=10&quot;&#125; (current: &#123;&quot;node&quot;:&quot;8.17.0&quot;,&quot;npm&quot;:&quot;6.13.4&quot;&#125;)</span><br><span class="line">npm WARN notsup Not compatible with your version of node/npm: semver@7.2.3</span><br><span class="line">npm WARN ws@7.2.5 requires a peer of bufferutil@^4.0.1 but none is installed. You must install peer dependencies yourself.</span><br><span class="line">npm WARN ws@7.2.5 requires a peer of utf-8-validate@^5.0.2 but none is installed. You must install peer dependencies yourself.</span><br><span class="line">npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@2.1.3 (node_modules/pm2/node_modules/fsevents):</span><br><span class="line">npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@2.1.3: wanted &#123;&quot;os&quot;:&quot;darwin&quot;,&quot;arch&quot;:&quot;any&quot;&#125; (current: &#123;&quot;os&quot;:&quot;linux&quot;,&quot;arch&quot;:&quot;x64&quot;&#125;)</span><br><span class="line"></span><br><span class="line">+ pm2@4.4.1</span><br><span class="line">added 186 packages from 191 contributors in 16.098s</span><br><span class="line"><span class="meta">#</span><span class="bash"> ç¼–è¯‘é¡¹ç›®</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> npm run build</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> NODE_ENV=production pm2 start app.js</span></span><br></pre></td></tr></table></figure><a href="/%E7%AC%94%E8%AE%B0/2020/09/15/CentOS%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/" title="Dockerçš„å®‰è£…">Dockerçš„å®‰è£…</a>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å›½äº§è½¯ä»¶,æœäº†å¾ˆå¤šèµ„æ–™å¥½åƒå¤–å›½äººä¸æ˜¯å¾ˆåœ¨æ„ mock server è¿™ä¸ªä¸œè¥¿?&lt;/p&gt;
    
    </summary>
    
      <category term="ç¬”è®°" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
  </entry>
  
  <entry>
    <title>CentOSå¸¸è§é—®é¢˜</title>
    <link href="https://hisashiburidane.github.io//%E7%AC%94%E8%AE%B0/2020/09/15/CentOS%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/"/>
    <id>https://hisashiburidane.github.io//ç¬”è®°/2020/09/15/CentOSå¸¸è§é—®é¢˜/</id>
    <published>2020-09-15T03:45:42.000Z</published>
    <updated>2020-09-20T12:34:46.196Z</updated>
    
    <content type="html"><![CDATA[<p>è®°å½•ä¸€äº›æ¯”è¾ƒåç›´è§‰çš„é—®é¢˜,ä»¥åå¯ä»¥å¿«é€Ÿæ£€ç´¢è§£å†³</p><a id="more"></a><h2 id="é…ç½®-authorized-keys-ä¹‹åæ— æ³•å…å¯†ç ç™»å½•"><a href="#é…ç½®-authorized-keys-ä¹‹åæ— æ³•å…å¯†ç ç™»å½•" class="headerlink" title="é…ç½® authorized_keys ä¹‹åæ— æ³•å…å¯†ç ç™»å½•"></a>é…ç½® authorized_keys ä¹‹åæ— æ³•å…å¯†ç ç™»å½•</h2><p>é€šå¸¸æ˜¯ç”±äº authorized_keys æ–‡ä»¶æƒé™é—®é¢˜å¯¼è‡´çš„</p><p>é…ç½®æ–‡ä»¶<code>/etc/ssh/sshd_config</code>,é…ç½®é¡¹éƒ½æ¯”è¾ƒå¸¸è§„,æœ‰ä¸¤ä¸ªæƒé™è¦æ³¨æ„</p><figure class="highlight zsh"><figcaption><span>ä¿®æ”¹æƒé™</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># rw</span></span><br><span class="line">chmod 600 .ssh/authorized_keys</span><br><span class="line"><span class="comment"># rwx</span></span><br><span class="line">chmod 700 .ssh</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹æ–‡ä»¶è®¿é—®æƒé™ä¹‹åæ­£å¸¸</p><h2 id="åˆ›å»ºæ–°ç”¨æˆ·"><a href="#åˆ›å»ºæ–°ç”¨æˆ·" class="headerlink" title="åˆ›å»ºæ–°ç”¨æˆ·"></a>åˆ›å»ºæ–°ç”¨æˆ·</h2><p>ä¾‹å¦‚ç”¨æˆ·åä¸º zhangsan</p><figure class="highlight zsh"><figcaption><span>åˆ›å»ºè¶…çº§ç®¡ç†å‘˜</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºç”¨æˆ·</span></span><br><span class="line">adduser zhangsan</span><br><span class="line"><span class="comment"># åˆ›å»ºå¯†ç </span></span><br><span class="line">passwd zhangsan</span><br><span class="line"><span class="comment"># è·å–è¶…çº§ç®¡ç†å‘˜æ–‡ä»¶è·¯å¾„</span></span><br><span class="line">whereis sudoers</span><br><span class="line"><span class="comment"># sudoers: /etc/sudoers.d /etc/sudoers /usr/share/man/man5/sudoers.5.gz</span></span><br><span class="line"><span class="comment"># èµ‹äºˆç®¡ç†å‘˜é…ç½®æ–‡ä»¶å†™å…¥æƒé™</span></span><br><span class="line">chmod u+w /etc/sudoers</span><br><span class="line"><span class="comment"># ç¼–è¾‘åä¿å­˜</span></span><br><span class="line"><span class="comment"># åˆ é™¤é…ç½®æ–‡ä»¶çš„å†™å…¥æƒé™</span></span><br><span class="line">chmod u-x /etc/sudoers</span><br></pre></td></tr></table></figure><figure class="highlight"><figcaption><span>/etc/sudoers</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Next comes the main part: which users can run what software on</span></span><br><span class="line"><span class="comment">## which machines (the sudoers file can be shared between multiple</span></span><br><span class="line"><span class="comment">## systems).</span></span><br><span class="line"><span class="comment">## Syntax:</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">##      user    MACHINE=COMMANDS</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## The COMMANDS section may have other options added to it.</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## Allow root to run any commands anywhere</span></span><br><span class="line">root    ALL=(ALL)       ALL</span><br><span class="line">centos  ALL=(ALL)       ALL</span><br></pre></td></tr></table></figure><h2 id="æ¸…åé•œåƒ"><a href="#æ¸…åé•œåƒ" class="headerlink" title="æ¸…åé•œåƒ"></a>æ¸…åé•œåƒ</h2><h3 id="yum"><a href="#yum" class="headerlink" title="yum"></a>yum</h3><p>ä¿®æ”¹<code>/etc/yum.repos.d/CentOS-Base.repo</code></p><figure class="highlight ini"><figcaption><span>/etc/yum.repos.d/CentOS-Base.repo</span><span class="exturl" data-url="aHR0cHM6Ly9taXJyb3JzLnR1bmEudHNpbmdodWEuZWR1LmNuL2hlbHAvY2VudG9zLw==" title="https://mirrors.tuna.tsinghua.edu.cn/help/centos/">CentOSé•œåƒä½¿ç”¨å¸®åŠ©<i class="fa fa-external-link"></i></span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CentOS-Base.repo</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># The mirror system uses the connecting IP address of the client and the</span></span><br><span class="line"><span class="comment"># update status of each mirror to pick mirrors that are updated to and</span></span><br><span class="line"><span class="comment"># geographically close to the client.  You should use this for CentOS updates</span></span><br><span class="line"><span class="comment"># unless you are manually picking other mirrors.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># If the mirrorlist= does not work for you, as a fall back you can try the</span></span><br><span class="line"><span class="comment"># remarked out baseurl= line instead.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="section">[BaseOS]</span></span><br><span class="line"><span class="attr">name</span>=CentOS-<span class="variable">$releasever</span> - Base</span><br><span class="line"><span class="attr">baseurl</span>=https://mirrors.tuna.tsinghua.edu.cn/centos/<span class="variable">$releasever</span>/BaseOS/<span class="variable">$basearch</span>/os/</span><br><span class="line"><span class="comment">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=BaseOS&amp;infra=$infra</span></span><br><span class="line"><span class="attr">enabled</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">gpgcheck</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">gpgkey</span>=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centos<span class="literal">off</span>icial</span><br><span class="line"></span><br><span class="line"><span class="section">[AppStream]</span></span><br><span class="line"><span class="attr">name</span>=CentOS-<span class="variable">$releasever</span> - AppStream</span><br><span class="line"><span class="attr">baseurl</span>=https://mirrors.tuna.tsinghua.edu.cn/centos/<span class="variable">$releasever</span>/AppStream/<span class="variable">$basearch</span>/os/</span><br><span class="line"><span class="comment">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=AppStream&amp;infra=$infra</span></span><br><span class="line"><span class="attr">enabled</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">gpgcheck</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">gpgkey</span>=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centos<span class="literal">off</span>icial</span><br><span class="line"></span><br><span class="line"><span class="section">[PowerTools]</span></span><br><span class="line"><span class="attr">name</span>=CentOS-<span class="variable">$releasever</span> - PowerTools</span><br><span class="line"><span class="attr">baseurl</span>=https://mirrors.tuna.tsinghua.edu.cn/centos/<span class="variable">$releasever</span>/PowerTools/<span class="variable">$basearch</span>/os/</span><br><span class="line"><span class="comment">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=PowerTools&amp;infra=$infra</span></span><br><span class="line"><span class="attr">enabled</span>=<span class="number">0</span></span><br><span class="line"><span class="attr">gpgcheck</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">gpgkey</span>=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centos<span class="literal">off</span>icial</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#additional packages that may be useful</span></span><br><span class="line"><span class="section">[extras]</span></span><br><span class="line"><span class="attr">name</span>=CentOS-<span class="variable">$releasever</span> - Extras</span><br><span class="line"><span class="attr">baseurl</span>=https://mirrors.tuna.tsinghua.edu.cn/centos/<span class="variable">$releasever</span>/extras/<span class="variable">$basearch</span>/os/</span><br><span class="line"><span class="comment">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=extras</span></span><br><span class="line"><span class="attr">enabled</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">gpgcheck</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">gpgkey</span>=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centos<span class="literal">off</span>icial</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#additional packages that extend functionality of existing packages</span></span><br><span class="line"><span class="section">[centosplus]</span></span><br><span class="line"><span class="attr">name</span>=CentOS-<span class="variable">$releasever</span> - Plus</span><br><span class="line"><span class="attr">baseurl</span>=https://mirrors.tuna.tsinghua.edu.cn/centos/<span class="variable">$releasever</span>/centosplus/<span class="variable">$basearch</span>/os/</span><br><span class="line"><span class="comment">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=centosplus</span></span><br><span class="line"><span class="attr">gpgcheck</span>=<span class="number">1</span></span><br><span class="line"><span class="attr">enabled</span>=<span class="number">0</span></span><br><span class="line"><span class="attr">gpgkey</span>=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-centos<span class="literal">off</span>icial</span><br></pre></td></tr></table></figure><figure class="highlight bash"><figcaption><span>æ¸…é™¤yumç¼“å­˜</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ¸…é™¤ç¼“å­˜</span></span><br><span class="line">$ sudo yum makecache</span><br></pre></td></tr></table></figure><h3 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h3><h4 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h4><figure class="highlight zsh"><figcaption><span>é…ç½®Dockeræºé•œåƒ</span><span class="exturl" data-url="aHR0cHM6Ly9taXJyb3JzLnR1bmEudHNpbmdodWEuZWR1LmNuL2hlbHAvZG9ja2VyLWNlLw==" title="https://mirrors.tuna.tsinghua.edu.cn/help/docker-ce/">Docker Community Edition é•œåƒä½¿ç”¨å¸®åŠ©<i class="fa fa-external-link"></i></span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ é™¤ä¹‹å‰å®‰è£…çš„è½¯ä»¶</span></span><br><span class="line">$ sudo yum remove docker docker-common docker-selinux docker-engine</span><br><span class="line"><span class="comment"># å®˜æ–¹åˆ é™¤</span></span><br><span class="line">$ sudo yum remove docker \</span><br><span class="line">                  docker-client \</span><br><span class="line">                  docker-client-latest \</span><br><span class="line">                  docker-common \</span><br><span class="line">                  docker-latest \</span><br><span class="line">                  docker-latest-logrotate \</span><br><span class="line">                  docker-logrotate \</span><br><span class="line">                  docker-engine</span><br><span class="line"><span class="comment"># å®‰è£…ä¾èµ–</span></span><br><span class="line">$ sudo yum install -y yum-utils device-mapper-persistent-data lvm2</span><br><span class="line"><span class="comment"># æ ¹æ®å‘è¡Œç‰ˆä¸‹è½½repoæ–‡ä»¶</span></span><br><span class="line">$ wget -O /etc/yum.repos.d/docker-ce.repo https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line"><span class="comment"># æ›¿æ¢ä»“åº“åœ°å€</span></span><br><span class="line">$ sudo sed -i <span class="string">&#x27;s+download.docker.com+mirrors.tuna.tsinghua.edu.cn/docker-ce+&#x27;</span> /etc/yum.repos.d/docker-ce.repo</span><br><span class="line"><span class="comment"># å®‰è£…</span></span><br><span class="line">$ sudo yum makecache fast</span><br><span class="line">$ sudo yum install docker-ce --nobest -y</span><br><span class="line"><span class="comment"># $ sudo dnf install docker-ce --nobest -y</span></span><br><span class="line"><span class="comment"># $ sudo yum install docker-ce</span></span><br></pre></td></tr></table></figure><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h4><p>åˆ°æ­¤ä¸ºæ­¢,é root ç”¨æˆ·åœ¨æ‰§è¡Œ<code>docker</code>å‘½ä»¤æ—¶ä¼šé‡åˆ°æƒé™ä¸è¶³çš„æƒ…å†µ,éœ€è¦åœ¨ docker ç”¨æˆ·ç»„ä¸­æ·»åŠ å½“å‰ç”¨æˆ·</p><figure class="highlight shell"><figcaption><span>æ·»åŠ ç”¨æˆ·åˆ°Dockeråˆ†ç»„</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> docker ps</span></span><br><span class="line">Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get http://%2Fvar%2Frun%2Fdocker.sock/v1.40/containers/json: dial unix /var/run/docker.sock: connect: permission denied</span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo groupadd docker <span class="comment">#æ·»åŠ dockerç”¨æˆ·ç»„</span></span></span><br><span class="line">groupadd: group &#x27;docker&#x27; already exists</span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo gpasswd -a <span class="variable">$USER</span> docker <span class="comment">#å°†ç™»é™†ç”¨æˆ·åŠ å…¥åˆ°dockerç”¨æˆ·ç»„ä¸­</span></span></span><br><span class="line">[sudo] password for centos:</span><br><span class="line">Adding user centos to group docker</span><br><span class="line"><span class="meta">$</span><span class="bash"> newgrp docker <span class="comment">#æ›´æ–°ç”¨æˆ·ç»„</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> docker ps</span></span><br><span class="line">Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?</span><br><span class="line"><span class="meta">$</span><span class="bash"> systemctl start docker</span></span><br><span class="line">==== AUTHENTICATING FOR org.freedesktop.systemd1.manage-units ====</span><br><span class="line">Authentication is required to start &#x27;docker.service&#x27;.</span><br><span class="line">Authenticating as: root</span><br><span class="line">Password:</span><br><span class="line">==== AUTHENTICATION COMPLETE ====</span><br><span class="line"><span class="meta">$</span><span class="bash"> docker ps</span></span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</span><br></pre></td></tr></table></figure><h4 id="é…ç½®é•œåƒæº"><a href="#é…ç½®é•œåƒæº" class="headerlink" title="é…ç½®é•œåƒæº"></a>é…ç½®é•œåƒæº</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> æ·»åŠ ç½‘æ˜“æº</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> vi /etc/docker/daemon.json</span></span><br><span class="line">&#123;</span><br><span class="line">    &quot;registry-mirrors&quot;: [ &quot;https://hub-mirror.c.163.com/&quot;,</span><br><span class="line">                          &quot;https://registry.docker-cn.com/&quot;,</span><br><span class="line">                          &quot;https://dockerhub.azk8s.cn/&quot;,</span><br><span class="line">                          &quot;https://docker.mirrors.ustc.edu.cn/&quot;,</span><br><span class="line">                          &quot;https://mirror.ccs.tencentyun.com/&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><table><thead><tr><th>æä¾›æ–¹</th><th>åœ°å€</th></tr></thead><tbody><tr><td>ç½‘æ˜“</td><td><code>https://hub-mirror.c.163.com</code></td></tr><tr><td>docker ä¸­å›½</td><td><code>https://registry.docker-cn.com</code></td></tr><tr><td>Azure</td><td><code>https://dockerhub.azk8s.cn</code></td></tr><tr><td>ä¸­ç§‘å¤§</td><td><code>https://docker.mirrors.ustc.edu.cn</code></td></tr><tr><td>è…¾è®¯äº‘</td><td><code>https://mirror.ccs.tencentyun.com</code></td></tr></tbody></table><h2 id="dnf"><a href="#dnf" class="headerlink" title="dnf"></a>dnf</h2><p><span class="exturl" data-url="aHR0cHM6Ly9tYW4ubGludXhkZS5uZXQvZG5m" title="https://man.linuxde.net/dnf">dnf<i class="fa fa-external-link"></i></span>æ˜¯æ–°ä¸€ä»£çš„ rpm è½¯ä»¶åŒ…ç®¡ç†å·¥å…·,æ®è¯´å°†ä¼šå–ä»£ yum.</p><p>DNF åŒ…ç®¡ç†å™¨å…‹æœäº† YUM åŒ…ç®¡ç†å™¨çš„ä¸€äº›ç“¶é¢ˆï¼Œæå‡äº†åŒ…æ‹¬ç”¨æˆ·ä½“éªŒï¼Œå†…å­˜å ç”¨ï¼Œä¾èµ–åˆ†æï¼Œè¿è¡Œé€Ÿåº¦ç­‰å¤šæ–¹é¢çš„å†…å®¹ã€‚DNF ä½¿ç”¨ RPM, libsolv å’Œ hawkey åº“è¿›è¡ŒåŒ…ç®¡ç†æ“ä½œã€‚å°½ç®¡å®ƒæ²¡æœ‰é¢„è£…åœ¨ CentOS å’Œ RHEL 7 ä¸­ï¼Œä½†ä½ å¯ä»¥åœ¨ä½¿ç”¨ YUM çš„åŒæ—¶ä½¿ç”¨ DNF ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œè·å¾—å…³äº DNF çš„æ›´å¤šçŸ¥è¯†ï¼š<span class="exturl" data-url="aHR0cDovL3d3dy50ZWNtaW50LmNvbS9kbmYtbmV4dC1nZW5lcmF0aW9uLXBhY2thZ2UtbWFuYWdlbWVudC11dGlsaXR5LWZvci1saW51eC8=" title="http://www.tecmint.com/dnf-next-generation-package-management-utility-for-linux/">ã€Š DNF ä»£æ›¿ YUM ï¼Œä½ æ‰€ä¸çŸ¥é“çš„ç¼˜ç”±ã€‹<i class="fa fa-external-link"></i></span></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è®°å½•ä¸€äº›æ¯”è¾ƒåç›´è§‰çš„é—®é¢˜,ä»¥åå¯ä»¥å¿«é€Ÿæ£€ç´¢è§£å†³&lt;/p&gt;
    
    </summary>
    
      <category term="ç¬”è®°" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
  </entry>
  
  <entry>
    <title>Airflow</title>
    <link href="https://hisashiburidane.github.io//%E7%AC%94%E8%AE%B0/2020/09/13/Airflow/"/>
    <id>https://hisashiburidane.github.io//ç¬”è®°/2020/09/13/Airflow/</id>
    <published>2020-09-13T13:32:17.000Z</published>
    <updated>2020-09-19T12:39:05.082Z</updated>
    
    <content type="html"><![CDATA[<p>Airflowæ˜¯ä¸€ä¸ªç¤¾åŒºåˆ›å»ºçš„å¹³å°,ç”¨äºä»¥ç¼–ç¨‹çš„æ–¹å¼åˆ›ä½œ,è°ƒåº¦å’Œç›‘æ§å·¥ä½œæµ.</p><a id="more"></a><h2 id="è®¾è®¡åŸåˆ™"><a href="#è®¾è®¡åŸåˆ™" class="headerlink" title="è®¾è®¡åŸåˆ™"></a>è®¾è®¡åŸåˆ™</h2><ul><li>å¯ä¼¸ç¼©,Airflowæ‹¥æœ‰æ¨¡å—åŒ–çš„æ¶æ„,é€šè¿‡ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—æ¥ç¼–æ’ä»»æ„æ•°é‡çš„worker,å…·å¤‡æ— é™æ‰©å±•çš„èƒ½åŠ›.</li><li>åŠ¨æ€æ€§,Airflowç®¡é“é€šè¿‡Pythonä»£ç é…ç½®,å¯ä»¥åŠ¨æ€ç”Ÿæˆç®¡é“,å¯ä»¥åŠ¨æ€å®ä¾‹åŒ–ç®¡é“ä»£ç .</li><li>å¯æ‰©å±•,å¯ä»¥è½»æ¾çš„å®šä¹‰è‡ªå·±çš„è¿ç®—ç¬¦,æ‰§è¡Œç¨‹åºå¹¶ä¸”æ‰©å±•ä»£ç åº“,é€‚ç”¨äºæŠ½è±¡çº§åˆ«çš„ç¯å¢ƒé€‚é….</li><li>ä¼˜é›…,Airflowç®¡é“ç®€å•æ˜“ç”¨,ä½¿ç”¨å¼ºå¤§çš„Jinjaæ¨¡æ¿å¼•æ“ä½¿å¾—è„šæœ¬å¯ä»¥å®ç°å‚æ•°åŒ–.</li></ul><h2 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h2><h3 id="çº¯Python"><a href="#çº¯Python" class="headerlink" title="çº¯Python"></a>çº¯Python</h3><blockquote><p>æ²¡æœ‰å‘½ä»¤è¡Œæˆ–è€…xmlçš„é»‘é­”æ³•.<br>ä½¿ç”¨å®Œæ•´çš„Pythonç‰¹æ€§æ¥åˆ›å»ºæ‚¨çš„å·¥ä½œæµ.<br>ä½¿ç”¨æ—¶é—´æ ¼å¼æ¥è°ƒåº¦ä»»åŠ¡,ä½¿ç”¨å¾ªç¯åŠ¨æ€çš„åˆ›å»ºä»»åŠ¡,ä»è€Œå…è®¸ç”¨æˆ·å®Œå…¨æŒ‰ç…§è‡ªå·±çš„æ„æ„¿åˆ›å»ºå·¥ä½œæµ.</p></blockquote><h3 id="æœ‰ç”¨çš„ç•Œé¢"><a href="#æœ‰ç”¨çš„ç•Œé¢" class="headerlink" title="æœ‰ç”¨çš„ç•Œé¢"></a>æœ‰ç”¨çš„ç•Œé¢</h3><blockquote><p>ä½¿ç”¨Webåº”ç”¨æ¥ç›‘æ§,è°ƒåº¦å’Œç®¡ç†å·¥ä½œæµ.<br>æ— éœ€å­¦ä¹ é™ˆæ—§çš„ç±»cronæ¥å£.<br>é€šè¿‡æ´æ‚‰æ—¥å¿—å®ç°æ´æ‚‰å·²å®Œæˆå’Œæ­£åœ¨è¿›è¡Œçš„ä»»åŠ¡çŠ¶æ€.</p></blockquote><h3 id="ä¸°å¯Œçš„é›†æˆ"><a href="#ä¸°å¯Œçš„é›†æˆ" class="headerlink" title="ä¸°å¯Œçš„é›†æˆ"></a>ä¸°å¯Œçš„é›†æˆ</h3><blockquote><p>Airflowæä¾›äº†å¾ˆå¤šå³æ’å³ç”¨çš„è¿ç®—ç¬¦,å¯ä»¥ç«‹å³ç”¨ä¸ç®¡ç†Google CloudPlatform,Amazon Web Services,Microsoft Azureå’Œå…¶ä»–çš„äº‘æœåŠ¡ä¸­çš„ä»»åŠ¡.<br>è¿™ä½¿å¾—Airflowå¯ä»¥å¾ˆæ–¹ä¾¿çš„é›†æˆåˆ°ç°æœ‰çš„åŸºç¡€æ¶æ„ä¸­.</p></blockquote><h3 id="æ˜“ç”¨"><a href="#æ˜“ç”¨" class="headerlink" title="æ˜“ç”¨"></a>æ˜“ç”¨</h3><blockquote><p>ä»»ä½•å…·æœ‰PythonçŸ¥è¯†çš„äººéƒ½å¯ä»¥éƒ¨ç½²å·¥ä½œæµ.<br>Apache Airflowä¸é™åˆ¶ç®¡é“çš„èŒƒå›´,ä½ å¯ä»¥ç”¨å®ƒæ¥æ„å»ºæœºå™¨å­¦ä¹ æ¨¡å‹,äº¤æ¢æ•°æ®æˆ–è€…ç®¡ç†åŸºç¡€æ¶æ„.</p></blockquote><h3 id="å¼€æº"><a href="#å¼€æº" class="headerlink" title="å¼€æº"></a>å¼€æº</h3><blockquote><p>æ‚¨å¯ä»¥é€šè¿‡æ‰“å¼€PRæ¥åˆ†äº«è‡ªå·±çš„æ”¹è¿›.<br>ç®€å•,æ²¡æœ‰é˜»ç¢,æ²¡æœ‰å†—é•¿çš„è¿‡ç¨‹.<br>Airflowæœ‰è®¸å¤šæ´»è·ƒçš„ç”¨æˆ·æ„¿æ„åˆ†äº«ä»–ä»¬çš„ç»éªŒ.</p></blockquote><h2 id="æ¦‚è§ˆ"><a href="#æ¦‚è§ˆ" class="headerlink" title="æ¦‚è§ˆ"></a>æ¦‚è§ˆ</h2><blockquote><p>ä½¿ç”¨Airflowæ¥ç¼–å†™ç”±ä¸åŒä»»åŠ¡ç»„æˆçš„DAG(æœ‰å‘æ— ç¯å›¾)å·¥ä½œæµ.<br>Airflowè°ƒåº¦å™¨ä¼šæ ¹æ®æŒ‡å®šçš„ä¾èµ–å…³ç³»åœ¨ä¸€ç³»åˆ—workerèŠ‚ç‚¹ä¸Šæ‰§è¡Œä»»åŠ¡.<br>ä¸°å¯Œçš„å‘½ä»¤è¡Œå·¥å…·ä½¿å¾—åœ¨DAGä¸Šæ‰§è¡Œå¤æ‚çš„æ‰‹æœ¯å˜å¾—è½»è€Œæ˜“ä¸¾.<br>ä¸°å¯Œçš„UIä½¿å¾—æŸ¥çœ‹ç”Ÿäº§ä¸­è¿è¡Œçš„ç®¡é“,ç›‘æ§è¿›åº¦å’Œæ’é™¤æ•…éšœå˜å¾—å®¹æ˜“.</p></blockquote><p>å°†å·¥ä½œæµå®šä¹‰ä¸ºä»£ç æ—¶,å®ƒä»¬å°†å˜å¾—æ›´åŠ æ˜“äºç»´æŠ¤,ç‰ˆæœ¬åŒ–,æ˜“äºæµ‹è¯•å’Œåä½œ.</p><h3 id="Beyond-the-Horizon"><a href="#Beyond-the-Horizon" class="headerlink" title="Beyond the Horizon"></a>Beyond the Horizon</h3><blockquote><p>Airflowä¸æ˜¯æ•°æ®æµè§£å†³æ–¹æ¡ˆ.<br>ä»»åŠ¡ä¸ä¼šå°†æ•°æ®åœ¨ä»»åŠ¡è§ä¼ é€’(å°½ç®¡ä»»åŠ¡å¯ä»¥äº¤æ¢å…ƒæ•°æ®).<br>Airflowä¸å±äºSpark Streamingæˆ–è€…Stormçš„èŒƒç•´,å®ƒæ›´ç±»ä¼¼äºOozieæˆ–è€…Azkaban.<br>å·¥ä½œæµé€šå¸¸è¢«è®¤ä¸ºæ˜¯é™æ€çš„æˆ–è€…æ˜¯ç¼“æ…¢å˜åŒ–çš„.<br>å¯ä»¥è®¤ä¸ºå·¥ä½œæµä¸­çš„ä»»åŠ¡ç»“æ„æ¯”æ•°æ®åº“ç»“æ„çš„åŠ¨æ€æ€§æ›´å¼º.<br>Airflowå·¥ä½œæµè¢«è®¤ä¸ºæ˜¯ä»»åŠ¡çš„è¿ç»­æ‰§è¡Œè¿‡ç¨‹,ä½¿å¾—å·¥ä½œå•å…ƒçš„è¿ç»­æ€§å˜å¾—æ›´æ¸…æ™°.</p></blockquote><h2 id="å…¥é—¨"><a href="#å…¥é—¨" class="headerlink" title="å…¥é—¨"></a>å…¥é—¨</h2><p>Airflowçš„å®‰è£…ååˆ†å¿«é€Ÿå’Œç›´æ¥</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># airflow needs a home, ~/airflow is the default,</span></span><br><span class="line"><span class="comment"># but you can lay foundation somewhere else if you prefer</span></span><br><span class="line"><span class="comment"># (optional)</span></span><br><span class="line"><span class="comment"># airflowéœ€è¦ä¸€ä¸ªä¸»ç›®å½•,é»˜è®¤æ˜¯~/airflow,ä¹Ÿå¯ä»¥æ ¹æ®å–œå¥½ä¿®æ”¹(å¯é€‰)</span></span><br><span class="line"><span class="built_in">export</span> AIRFLOW_HOME=~/airflow</span><br><span class="line"></span><br><span class="line"><span class="comment"># install from pypi using pip</span></span><br><span class="line"><span class="comment"># é€šè¿‡pipåœ¨pypiä¸Šå®‰è£…</span></span><br><span class="line">pip install apache-airflow</span><br><span class="line"></span><br><span class="line"><span class="comment"># initialize the database</span></span><br><span class="line"><span class="comment"># åˆå§‹åŒ–æ•°æ®åº“</span></span><br><span class="line">airflow initdb</span><br><span class="line"></span><br><span class="line"><span class="comment"># start the web server, default port is 8080</span></span><br><span class="line"><span class="comment"># å¯åŠ¨webæœåŠ¡,é»˜è®¤ç«¯å£ä¸º8080</span></span><br><span class="line">airflow webserver -p 8080</span><br><span class="line"></span><br><span class="line"><span class="comment"># start the scheduler</span></span><br><span class="line"><span class="comment"># å¼€å¯è°ƒåº¦å™¨</span></span><br><span class="line">airflow scheduler</span><br><span class="line"></span><br><span class="line"><span class="comment"># visit localhost:8080 in the browser and enable the example dag in the home page</span></span><br><span class="line"><span class="comment"># é€šè¿‡æµè§ˆå™¨æµè§ˆhttp://localhost:8080</span></span><br><span class="line"><span class="comment"># å¹¶ä¸”åœ¨ä¸»é¡µä¸­å¼€å¯ç¤ºä¾‹DAG</span></span><br></pre></td></tr></table></figure><p>é€šè¿‡æ‰§è¡Œä¸Šè¿°å‘½ä»¤,Airflowå°†ä¼šåˆ›å»º<code>$AIRFLOW_HOME</code>æ–‡ä»¶å¤¹å¹¶ä¸”æ”¾ç½®ä¸€ä¸ªå¸¦æœ‰é»˜è®¤è®¾ç½®çš„<code>airflow.cfg</code>æ–‡ä»¶,ä½¿å¾—ç”¨æˆ·å¯ä»¥å¿«é€Ÿå…¥é—¨.<br>å¯ä»¥é€šè¿‡<code>$AIRFLOW_HOME/airflow.cfg</code>æˆ–è€…WebUIä¸­çš„<code>Admin-Configuration</code>æ¥è§‚å¯Ÿé…ç½®æ–‡ä»¶.<br>webæœåŠ¡å™¨çš„PIDæ–‡ä»¶å­˜å‚¨åœ¨<code>$AIRFLOW_HOME/airflow-webserver.pid</code>.<br>å½“webæœåŠ¡å™¨ç”±systemdå¯åŠ¨æ—¶,PIDæ–‡ä»¶å­˜å‚¨åœ¨<code>/run/airflow/webserver.pid</code>è·¯å¾„.</p><p>é™¤æ­¤ä¹‹å¤–,Airflowä½¿ç”¨sqliteæ•°æ®åº“,ç”±äºä½¿ç”¨æ­¤æ•°æ®åº“ä¸å…·å¤‡å¹¶è¡Œèƒ½åŠ›.<br>Airflowä¸<code>airflow.executors.sequential_executor.SequentialExecutor</code>ç»“åˆä½¿ç”¨,åè€…åªç”¨äºé¡ºåºè¿è¡Œä»»åŠ¡å®ä¾‹.</p><p>è¿™é‡Œæœ‰ä¸€äº›è§¦å‘ä»»åŠ¡å®ä¾‹çš„å‘½ä»¤.<br>è¿è¡Œä»¥ä¸‹å‘½ä»¤æ—¶åº”è¯¥å¯ä»¥åœ¨example1çš„DAGä¸­æŸ¥çœ‹ä½œä¸šçš„çŠ¶æ€å˜æ›´.</p><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># run your first task instance</span></span><br><span class="line">airflow run example_bash_operator runme_0 2020-09-13</span><br><span class="line"><span class="comment"># run a backfill over 2 days</span></span><br><span class="line">airflow backfill example_bash_operator -s 2020-09-13 -e 2020-09-14</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Airflowæ˜¯ä¸€ä¸ªç¤¾åŒºåˆ›å»ºçš„å¹³å°,ç”¨äºä»¥ç¼–ç¨‹çš„æ–¹å¼åˆ›ä½œ,è°ƒåº¦å’Œç›‘æ§å·¥ä½œæµ.&lt;/p&gt;
    
    </summary>
    
      <category term="ç¬”è®°" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Workflow" scheme="https://hisashiburidane.github.io/tags/Workflow/"/>
    
  </entry>
  
  <entry>
    <title>Azkaban</title>
    <link href="https://hisashiburidane.github.io//%E7%AC%94%E8%AE%B0/2020/09/13/Azkaban/"/>
    <id>https://hisashiburidane.github.io//ç¬”è®°/2020/09/13/Azkaban/</id>
    <published>2020-09-13T12:11:12.000Z</published>
    <updated>2020-09-19T12:39:05.082Z</updated>
    
    <content type="html"><![CDATA[<p>Azkaban æ˜¯ä¸€æ¬¾ç”±é¢†è‹±åˆ›å»º,ç”¨äº Hadoop ä»»åŠ¡åœºæ™¯çš„åˆ†å¸ƒå¼æ‰¹é‡å·¥ä½œæµä»»åŠ¡è°ƒåº¦å·¥å…·.Azkaban è§£å†³äº†ä»»åŠ¡ä¾èµ–å¾ªåºçš„é—®é¢˜,å¹¶ä¸”æä¾›äº†ç®€å•æ˜“ç”¨çš„ WebUI æ¥å£,ç”¨äºç»´æŠ¤å’Œè·Ÿè¸ªæ‚¨çš„å·¥ä½œæµ.</p><a id="more"></a><p>Azkaban å…·æœ‰ä»¥ä¸‹ç‰¹æ€§</p><ul><li>é€‚ç”¨äºä»»æ„ç‰ˆæœ¬çš„ Hadoop</li><li>ç®€å•æ˜“ç”¨çš„ WebUI</li><li>ä¾¿æ·çš„åŸºäº web/http çš„å·¥ä½œæµä¸Šä¼ åŠŸèƒ½</li><li>é¡¹ç›®å·¥ä½œç©ºé—´</li><li>å·¥ä½œæµè°ƒåº¦</li><li>æ¨¡å—åŒ–å’Œæ’ä»¶åŒ–</li><li>æˆæƒå’Œè®¤è¯</li><li>è¿½è¸ªç”¨æˆ·è¡Œä¸º</li><li>å¤±è´¥/æˆåŠŸçš„é‚®ä»¶æé†’</li><li>SLA æŠ¥è­¦ä»¥åŠè‡ªåŠ¨å–æ¶ˆ</li><li>å¤±è´¥ä»»åŠ¡é‡è¯•</li></ul><p>Azkaban åœ¨è®¾è®¡æ—¶ä¸»è¦è€ƒè™‘åˆ°æ˜“ç”¨æ€§.å®ƒåœ¨é¢†è‹±å·²ç»ä½¿ç”¨äº†ä¸€äº›å¹´ä»½,é©±åŠ¨äº†å…¬å¸çš„å¾ˆå¤š Hadoop å’Œæ•°æ®ä»“åº“å¤„ç†å·¥ä½œ.</p><h2 id="å…¥é—¨"><a href="#å…¥é—¨" class="headerlink" title="å…¥é—¨"></a>å…¥é—¨</h2><p>Azkaban 3.0 ä¹‹åçš„ç‰ˆæœ¬æä¾›ä¸¤ç§æ¨¡å¼:</p><ol><li><code>solo-server</code>æ¨¡å¼,åŸºäºåµŒå…¥çš„<code>H2</code>æ•°æ®åº“,web æœåŠ¡å™¨å’Œæ‰§è¡ŒæœåŠ¡å™¨åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­è¿è¡Œ,é€‚ç”¨äºå­¦ä¹ ç ”ç©¶åœºæ™¯,åŒæ ·é€‚ç”¨äºå°è§„æ¨¡çš„ç”¨æˆ·æ¡ˆä¾‹.</li><li>åˆ†å¸ƒå¼å¤šæ‰§è¡Œè€…(<code>distributed multiple-executor</code>)æ¨¡å¼,åŸºäºä¸»ä»æ¨¡å¼çš„ MySQL æ•°æ®åº“,web æœåŠ¡å™¨å’Œæ‰§è¡ŒæœåŠ¡å™¨åˆ†åˆ«åœ¨ä¸åŒçš„æœåŠ¡å™¨ä¸Šè¿è¡Œ,è¿™æ ·å‡çº§å’Œç»´æŠ¤å·¥ä½œå°†ä¸ä¼šå½±å“ç”¨æˆ·,å¤šæœåŠ¡å™¨çš„é…ç½®ä½¿å¾— Azkaban ç³»ç»Ÿå…·å¤‡äº†æ›´é«˜çš„é²æ£’æ€§å’Œæ‰©å±•èƒ½åŠ›.</li></ol><p>éƒ¨ç½²é€šå¸¸åˆ†ä¸ºä»¥ä¸‹æ­¥éª¤:</p><ul><li>é…ç½®æ•°æ®åº“</li><li>é…ç½®ç”¨äºå¤šæ‰§è¡Œè€…çš„æ•°æ®åº“</li><li>ä¸‹è½½å¹¶åœ¨æ•°æ®ä¸­é…ç½®çš„æ¯ä¸ªæ‰§è¡Œè€…æœåŠ¡å™¨ä¸Šå®‰è£…<code>Executor Server</code></li><li>å®‰è£… Azkaban æ’ä»¶</li><li>å®‰è£… Web æœåŠ¡</li></ul><p>ä¸‹é¢å°†ä¸ºå¤§å®¶ä»‹ç»å¦‚ä½•é…ç½® Azkaban</p><h2 id="ä»æºç ç¼–è¯‘"><a href="#ä»æºç ç¼–è¯‘" class="headerlink" title="ä»æºç ç¼–è¯‘"></a>ä»æºç ç¼–è¯‘</h2><p>Azkaban çš„ç¼–è¯‘ä½¿ç”¨ Gradle å·¥å…·,éœ€è¦ Java8 ä»¥ä¸Šçš„ç‰ˆæœ¬</p><p>åœ¨<code>*nix</code>è®¾å¤‡ä¸Šæ‰§è¡Œä¸‹åˆ—å‘½ä»¤(ä¾‹å¦‚ Linux/MacOS)</p><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Build Azkaben</span></span><br><span class="line">./gradlew build</span><br><span class="line"></span><br><span class="line"><span class="comment"># Clean the build</span></span><br><span class="line">./gradlew clean</span><br><span class="line"></span><br><span class="line"><span class="comment"># Build and install distributions</span></span><br><span class="line">./gradlew installDist</span><br><span class="line"></span><br><span class="line"><span class="comment"># Run tests</span></span><br><span class="line">./gradlew <span class="built_in">test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Build without running tests</span></span><br><span class="line">./gradlew build -x <span class="built_in">test</span></span><br></pre></td></tr></table></figure><h3 id="Solo-Serverå…¥é—¨"><a href="#Solo-Serverå…¥é—¨" class="headerlink" title="Solo Serverå…¥é—¨"></a><code>Solo Server</code>å…¥é—¨</h3><p>solo server æ˜¯ Azkaban çš„å•å®ä¾‹ç‹¬ç«‹è¿è¡Œæ¨¡å¼,æœ‰ä»¥ä¸‹ä¼˜åŠ¿:</p><ul><li>æ˜“äºå®‰è£…,ä¸éœ€è¦ MySQL å®ä¾‹,åŒ…å«äº† H2 ä½œä¸ºä¸»è¦çš„æŒä¹…åŒ–å­˜å‚¨</li><li>æ˜“äºè£…é…,Web æœåŠ¡å™¨å’Œæ‰§è¡ŒæœåŠ¡å™¨åœ¨åŒä¸€ä¸ªè¿›ç¨‹ä¸­è¿è¡Œ</li><li>åŒ…å«å…¨ç‰¹æ€§,åŒ…å«äº† Azkaban çš„å®Œæ•´ç‰¹æ€§</li></ul><h4 id="å®‰è£…Solo-Server"><a href="#å®‰è£…Solo-Server" class="headerlink" title="å®‰è£…Solo Server"></a>å®‰è£…<code>Solo Server</code></h4><ul><li>å…‹éš†ä»“åº“</li></ul><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/azkaban/azkaban.git</span><br></pre></td></tr></table></figure><ul><li>æ„å»ºå¹¶åˆ›å»ºå®‰è£…åŒ…</li></ul><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> azkaban; ./gradlew build installDist</span><br></pre></td></tr></table></figure><ul><li>å¯åŠ¨ solo server</li></ul><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> azkaban-solo-server/build/install/azkaban-solo-server; bin/start-solo.sh</span><br></pre></td></tr></table></figure><p>Azkaban ç‹¬ç«‹æœåŠ¡å™¨åº”è¯¥å…¨éƒ¨é…ç½®å®Œæˆ,é€šè¿‡ç›‘å¬é»˜è®¤ç«¯å£<code>8081</code>çš„æ–¹å¼æ¥å—ç½‘ç»œè¯·æ±‚.æ‰€ä»¥,æ‰“å¼€æµè§ˆå™¨æ£€æŸ¥<code>http://localhost:8081/</code>.é»˜è®¤çš„ç™»å½•ç”¨æˆ·åå¯†ç åœ¨é…ç½®æ–‡ä»¶ä¸­<code>conf/azkaban.xml</code>é…ç½®.</p><p>å…³é—­æœåŠ¡</p><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/shutdown-solo.sh</span><br></pre></td></tr></table></figure><h2 id="ç¼–è¯‘é—®é¢˜"><a href="#ç¼–è¯‘é—®é¢˜" class="headerlink" title="ç¼–è¯‘é—®é¢˜"></a>ç¼–è¯‘é—®é¢˜</h2><p>Azkabanä¾èµ–äºJavaFXä¸­çš„åŒ…,ä½†æ˜¯ç”±äºOpenJDKé»˜è®¤æ²¡æœ‰åŒ…å«,æ‰€ä»¥é»˜è®¤ç¼–è¯‘ä¼šæŠ¥é”™</p><h3 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h3><p>CentOSç¯å¢ƒä¸‹,å®˜æ–¹çš„æºæ²¡æœ‰åŒ…å«openjfx,å¯ä»¥é€‰æ‹©æ‰‹åŠ¨ç¼–è¯‘å®‰è£…,ä¹Ÿå¯ä»¥é€‰æ‹©å®‰è£…Oracle JDK(é»˜è®¤åŒ…å«JavaFX)</p><h3 id="å®‰è£…OpenJFX"><a href="#å®‰è£…OpenJFX" class="headerlink" title="å®‰è£…OpenJFX"></a>å®‰è£…OpenJFX</h3><p>Ubuntuç³»ç»Ÿä¸‹ç›´æ¥æ‰§è¡Œ</p><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install openjfx</span><br></pre></td></tr></table></figure><h3 id="æ·»åŠ mavené•œåƒ"><a href="#æ·»åŠ mavené•œåƒ" class="headerlink" title="æ·»åŠ mavené•œåƒ"></a>æ·»åŠ mavené•œåƒ</h3><p>ç¼–è¯‘è¿‡ç¨‹ä¸­gradleä¼šå»ä»“åº“ä¸­ä¸‹è½½ç›¸å…³ä¾èµ–,æ·»åŠ aliyuné•œåƒä»“åº“</p><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">allprojects</span> &#123;</span><br><span class="line">  apply plugin: <span class="string">&#x27;jacoco&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">repositories</span> &#123;</span><br><span class="line">    maven &#123;</span><br><span class="line">        url <span class="string">&#x27;https://maven.aliyun.com/repository/public&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    mavenLocal()</span><br><span class="line">    mavenCentral()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ—¶åŒº"><a href="#æ—¶åŒº" class="headerlink" title="æ—¶åŒº"></a>æ—¶åŒº</h3><p>Azkabané»˜è®¤é…ç½®ä¸ºç¾å›½/æ´›æ‰çŸ¶æ—¶åŒº,ä¸ä¸­å›½æœ‰15ä¸ªå°æ—¶çš„æ—¶å·®,æ”¹ä¸ºäºšæ´²/ä¸Šæµ·</p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># default.timezone.id=America/Los_Angeles</span></span><br><span class="line"><span class="meta">default.timezone.id</span>=<span class="string">Asia/Shanghai</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Azkaban æ˜¯ä¸€æ¬¾ç”±é¢†è‹±åˆ›å»º,ç”¨äº Hadoop ä»»åŠ¡åœºæ™¯çš„åˆ†å¸ƒå¼æ‰¹é‡å·¥ä½œæµä»»åŠ¡è°ƒåº¦å·¥å…·.Azkaban è§£å†³äº†ä»»åŠ¡ä¾èµ–å¾ªåºçš„é—®é¢˜,å¹¶ä¸”æä¾›äº†ç®€å•æ˜“ç”¨çš„ WebUI æ¥å£,ç”¨äºç»´æŠ¤å’Œè·Ÿè¸ªæ‚¨çš„å·¥ä½œæµ.&lt;/p&gt;
    
    </summary>
    
      <category term="ç¬”è®°" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="Workflow" scheme="https://hisashiburidane.github.io/tags/Workflow/"/>
    
  </entry>
  
  <entry>
    <title>EntityFramework</title>
    <link href="https://hisashiburidane.github.io//%E7%AC%94%E8%AE%B0/2020/06/07/EntityFramework/"/>
    <id>https://hisashiburidane.github.io//ç¬”è®°/2020/06/07/EntityFramework/</id>
    <published>2020-06-07T13:12:45.000Z</published>
    <updated>2020-06-07T16:16:07.400Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä»€ä¹ˆæ˜¯-EntityFramework"><a href="#ä»€ä¹ˆæ˜¯-EntityFramework" class="headerlink" title="ä»€ä¹ˆæ˜¯ EntityFramework"></a>ä»€ä¹ˆæ˜¯ EntityFramework</h2><p>EntityFramework æ˜¯ä¸€æ¬¾ ORM æ¡†æ¶(å¯¹è±¡å…³ç³»æ˜ å°„ Object Relational Mappingï¼Œç®€ç§° ORMï¼‰ï¼Œå¯ä»¥ä½¿.NET å¼€å‘äººå‘˜èƒ½å¤Ÿä½¿ç”¨ç‰¹å®šé¢†åŸŸçš„å…³ç³»å‹æ•°æ®ã€‚å¼€å‘äººå‘˜æ— éœ€åƒå¾€å¸¸ä¸€æ ·ç¼–å†™å¤§é‡çš„æ•°æ®è®¿é—®ä»£ç ã€‚</p><a id="more"></a><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><blockquote><p>å¦‚æœå¯¹<code>.Net Core</code>/<code>å‘½ä»¤è¡Œæ“ä½œ</code>/<code>C#è¯­è¨€</code>ä¸€çªä¸é€šçš„å»ºè®®ä¸ç”¨å¾€ä¸‹çœ‹äº†â€¦</p></blockquote><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>é¦–å…ˆå®‰è£…<span class="exturl" data-url="aHR0cHM6Ly9kb3RuZXQubWljcm9zb2Z0LmNvbS9kb3dubG9hZA==" title="https://dotnet.microsoft.com/download">.NetCore SDK<i class="fa fa-external-link"></i></span>,ä¹‹ååˆ›å»ºä¸€ä¸ªæ–°çš„.Net Core é¡¹ç›®,å®‰è£…<code>EF Core</code></p><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºä¸€ä¸ªæ–°çš„æ§åˆ¶å°é¡¹ç›®,åå­—å«åš&quot;EFGetStarted&quot;</span></span><br><span class="line">dotnet new console -o EFGetStarted</span><br><span class="line"><span class="comment"># åˆ‡æ¢åˆ°é¡¹ç›®è·¯å¾„</span></span><br><span class="line"><span class="built_in">cd</span> EFGetStarted</span><br><span class="line"><span class="comment"># ä»NuGetæ·»åŠ ç›¸å…³çš„åŒ…ä¾èµ–,ä¹Ÿå¯ä»¥é€šè¿‡VisualStudioçš„ç®¡ç†å™¨å®‰è£…,ä¸èµ˜è¿°</span></span><br><span class="line"><span class="comment"># SQLite</span></span><br><span class="line">dotnet add package Microsoft.EntityFrameworkCore.Sqlite</span><br><span class="line"><span class="comment"># PostgreSQL</span></span><br><span class="line">dotnet add package Npgsql.EntityFrameworkCore.PostgreSQL</span><br><span class="line"><span class="comment"># MSSQL</span></span><br><span class="line">dotnet add package Microsoft.EntityFrameworkCore.SqlServer</span><br></pre></td></tr></table></figure><h3 id="Code-First"><a href="#Code-First" class="headerlink" title="Code First"></a>Code First</h3><p>ç¤ºä¾‹ä»£ç åˆ›å»ºäº†ä¸€ä¸ªç®€å•çš„åšå®¢æ¨¡å‹ç¤ºä¾‹,åŒ…å«äº† Blog å’Œ Post ç±»çš„å®šä¹‰,ä»¥åŠ DbContext</p><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> Microsoft.EntityFrameworkCore;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">EFGetStarted</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">BloggingContext</span> : <span class="title">DbContext</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> DbSet&lt;Blog&gt; Blogs &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> DbSet&lt;Post&gt; Posts &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> <span class="keyword">override</span> <span class="keyword">void</span> <span class="title">OnConfiguring</span>(<span class="params">DbContextOptionsBuilder options</span>)</span></span><br><span class="line"><span class="function"></span>            =&gt; options.UseSqlite(<span class="string">&quot;Data Source=blogging.db&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Blog</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">int</span> BlogId &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">string</span> Url &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">List</span>&lt;<span class="title">Post</span>&gt; Posts</span> &#123; <span class="keyword">get</span>; &#125; = <span class="keyword">new</span> List&lt;Post&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Post</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">int</span> PostId &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">string</span> Title &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">string</span> Content &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> <span class="keyword">int</span> BlogId &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">        <span class="keyword">public</span> Blog Blog &#123; <span class="keyword">get</span>; <span class="keyword">set</span>; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="åˆ›å»ºæ•°æ®åº“"><a href="#åˆ›å»ºæ•°æ®åº“" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h3><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…dotnet-efå·¥å…·</span></span><br><span class="line">dotnet tool install --global dotnet-ef</span><br><span class="line"><span class="comment"># å®‰è£…EFè®¾è®¡å™¨</span></span><br><span class="line">dotnet add package Microsoft.EntityFrameworkCore.Design</span><br><span class="line"><span class="comment"># æ ¹æ®ä»£ç åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ç‰ˆæœ¬</span></span><br><span class="line">dotnet ef migrations add InitialCreate</span><br><span class="line"><span class="comment"># å°†æ•°æ®åº“ç‰ˆæœ¬æ›´æ–°è‡³å½“å‰</span></span><br><span class="line">dotnet ef database update</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œå®Œæˆä¸Šè¿°ä»£ç ä¹‹å,é¡¹ç›®ä¸­å°†ä¼šå¤šå‡ºä¸€ä¸ª<code>blogging.db</code>æ–‡ä»¶,æ˜¯ Sqlite çš„æ•°æ®åº“æ–‡ä»¶,å…¶ä¸­åŒ…å«äº†ä¸‰å¼ è¡¨</p><ul><li><code>Blogs</code>:å­˜å‚¨ Blogs ç±»å¯¹è±¡</li><li><code>Posts</code>:å­˜å‚¨ Posts ç±»å¯¹è±¡</li><li><code>__EFMigrationsHistory</code>:å­˜å‚¨å¯¹åº”çš„ EF éƒ¨ç½²å†å²ä¿¡æ¯</li></ul><h3 id="è°ƒç”¨æ•°æ®åº“æ–¹æ³•"><a href="#è°ƒç”¨æ•°æ®åº“æ–¹æ³•" class="headerlink" title="è°ƒç”¨æ•°æ®åº“æ–¹æ³•"></a>è°ƒç”¨æ•°æ®åº“æ–¹æ³•</h3><figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> EFGetStarted.Models;</span><br><span class="line"><span class="keyword">using</span> System.Linq;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">EFGetStarted</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>        &#123;</span><br><span class="line">            <span class="keyword">using</span> (<span class="keyword">var</span> db = <span class="keyword">new</span> BlogContext())</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">// Create</span></span><br><span class="line">                Console.WriteLine(<span class="string">&quot;Inserting a new blog&quot;</span>);</span><br><span class="line">                db.Add(<span class="keyword">new</span> Blog &#123; Url = <span class="string">&quot;http://blogs.msdn.com/adonet&quot;</span> &#125;);</span><br><span class="line">                db.SaveChanges();</span><br><span class="line"></span><br><span class="line">                <span class="comment">// Read</span></span><br><span class="line">                Console.WriteLine(<span class="string">&quot;Querying for a blog&quot;</span>);</span><br><span class="line">                <span class="keyword">var</span> blog = db.Blogs</span><br><span class="line">                    .OrderBy(b =&gt; b.BlogId)</span><br><span class="line">                    .First();</span><br><span class="line"></span><br><span class="line">                <span class="comment">// Update</span></span><br><span class="line">                Console.WriteLine(<span class="string">&quot;Updating the blog and adding a post&quot;</span>);</span><br><span class="line">                blog.Url = <span class="string">&quot;https://devblogs.microsoft.com/dotnet&quot;</span>;</span><br><span class="line">                blog.Posts.Add(</span><br><span class="line">                    <span class="keyword">new</span> Post</span><br><span class="line">                    &#123;</span><br><span class="line">                        Title = <span class="string">&quot;Hello World&quot;</span>,</span><br><span class="line">                        Content = <span class="string">&quot;I wrote an app using EF Core!&quot;</span></span><br><span class="line">                    &#125;);</span><br><span class="line">                db.SaveChanges();</span><br><span class="line"></span><br><span class="line">                <span class="comment">// Delete</span></span><br><span class="line">                Console.WriteLine(<span class="string">&quot;Delete the blog&quot;</span>);</span><br><span class="line">                db.Remove(blog);</span><br><span class="line">                db.SaveChanges();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åŒ…å«äº†å¯¹æ•°æ®åº“çš„ CRUD æ“ä½œ,ä¾‹å­åˆ°æ­¤ç»“æŸ,å¯ä»¥çœ‹åˆ°å…¨ç¨‹æˆ‘ä»¬æ²¡æœ‰è¿›è¡Œä»»ä½•å®é™…çš„æ•°æ®åº“æ“ä½œ,åŒ…æ‹¬:</p><ul><li>è®¾è®¡æ•°æ®åº“</li><li>åˆ›å»ºæ•°æ®åº“åŠè¡¨ç»“æ„</li><li>ä½¿ç”¨ client ç¨‹åºè¿æ¥æ•°æ®åº“</li><li>ç¼–å†™ SQL è¿›è¡Œæ•°æ®åº“æ“ä½œ</li></ul><p>è¿™å°±æ˜¯ ORM æ¡†æ¶çš„ä¼˜ç‚¹:å±è”½äº†ç¹å¤çš„æ•°æ®åº“æ“ä½œç»†èŠ‚,è®©ç”¨æˆ·ä¸“æ³¨äºä¸šåŠ¡æ¨¡å‹çš„å»ºç«‹</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ä»€ä¹ˆæ˜¯-EntityFramework&quot;&gt;&lt;a href=&quot;#ä»€ä¹ˆæ˜¯-EntityFramework&quot; class=&quot;headerlink&quot; title=&quot;ä»€ä¹ˆæ˜¯ EntityFramework&quot;&gt;&lt;/a&gt;ä»€ä¹ˆæ˜¯ EntityFramework&lt;/h2&gt;&lt;p&gt;EntityFramework æ˜¯ä¸€æ¬¾ ORM æ¡†æ¶(å¯¹è±¡å…³ç³»æ˜ å°„ Object Relational Mappingï¼Œç®€ç§° ORMï¼‰ï¼Œå¯ä»¥ä½¿.NET å¼€å‘äººå‘˜èƒ½å¤Ÿä½¿ç”¨ç‰¹å®šé¢†åŸŸçš„å…³ç³»å‹æ•°æ®ã€‚å¼€å‘äººå‘˜æ— éœ€åƒå¾€å¸¸ä¸€æ ·ç¼–å†™å¤§é‡çš„æ•°æ®è®¿é—®ä»£ç ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="ç¬”è®°" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
  </entry>
  
  <entry>
    <title>Prometheus</title>
    <link href="https://hisashiburidane.github.io//%E7%AC%94%E8%AE%B0/2020/03/15/Prometheus/"/>
    <id>https://hisashiburidane.github.io//ç¬”è®°/2020/03/15/Prometheus/</id>
    <published>2020-03-15T08:25:33.000Z</published>
    <updated>2020-03-15T12:30:23.146Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Prometheusä»‹ç»"><a href="#Prometheusä»‹ç»" class="headerlink" title="Prometheusä»‹ç»"></a>Prometheusä»‹ç»</h2><p>Prometheus æ˜¯ä¸€æ¬¾å¼€æºçš„ç³»ç»Ÿç›‘æ§å’ŒæŠ¥è­¦å·¥å…·åŒ…,ä¸»è¦æä¾›äº†ä»¥ä¸‹åŠŸèƒ½</p><blockquote><ol><li>å¤šç»´æ•°æ®æ¨¡å‹,ç”¨<code>key-value</code>çš„æ–¹å¼æ ‡è¯†æ—¶åºæ•°æ®</li><li>PromQL,åˆ©ç”¨è¿™ç§æ•°æ®ç±»å‹çš„çµæ´»çš„æŸ¥è¯¢è¯­è¨€</li><li>äº’ä¸ç›¸å…³çš„åˆ†å¸ƒå¼å­˜å‚¨,å•ç‹¬çš„æœåŠ¡èŠ‚ç‚¹ä¹‹é—´äº’ç›¸ç‹¬ç«‹</li><li>é€šè¿‡åŸºäº HTTP åè®®çš„æ‹‰å–å¼çš„æ—¶åºæ•°æ®çš„æ”¶é›†</li><li>æ”¯æŒé€šè¿‡ä¸­é—´ä»¶ç½‘å…³çš„æ–¹å¼æ¨é€æ—¶åºæ•°æ®</li><li>å¯ä»¥é€šè¿‡é™æ€çš„é…ç½®æ–‡ä»¶å’Œâ€æœåŠ¡å‘ç°â€æŠ€æœ¯å‘ç°ç›‘æ§ç›®æ ‡</li><li>ä¸°å¯Œçš„å›¾å½¢åŒ–æ¨¡å‹å’Œä»ªè¡¨ç›˜æ”¯æŒ</li></ol></blockquote><a id="more"></a><p>Prometheusçš„ç”Ÿæ€ç³»ç»ŸåŒ…å«äº†ä¸°å¯Œçš„ç»„ä»¶,å¹¶ä¸”å¾ˆå¤šç»„ä»¶æ˜¯å¯é€‰çš„,å¯ä»¥æ ¹æ®éœ€æ±‚çµæ´»æ­å»º</p><blockquote><ol><li>ä¸»ç¨‹åº<code>Prometheus Server</code>,ç”¨æ¥è·å–å’Œå­˜å‚¨æ—¶åºæ•°æ®</li><li>ä¸°å¯Œçš„ç”¨äºæ£€æµ‹åº”ç”¨ç¨‹åºçŠ¶æ€çš„å®¢æˆ·ç«¯åº“</li><li>æ”¯æŒçŸ­æœŸä»»åŠ¡çš„æ¨é€ç½‘å…³</li><li>é’ˆå¯¹ä¸åŒæœåŠ¡çš„<code>exporter</code>æœåŠ¡,ä¾‹å¦‚æ”¯æŒ<code>HAProxy/StatsD/Graphite</code>ç­‰</li><li>æŠ¥è­¦ç®¡ç†å™¨,ç”¨äºæŠ¥è­¦ç®¡ç†</li><li>ä¸°å¯Œçš„æ”¯æŒå·¥å…·</li></ol></blockquote><p>ç¨‹åºæ¶æ„</p><p><img data-src="prometheus_architecture.png" alt="Prometheusæ¶æ„å›¾"></p><p>Prometheusç›´æ¥æˆ–è€…é€šè¿‡ä¸­é—´æ¨é€ç½‘å…³æ”¶é›†å„ç§æ£€æµ‹æŒ‡æ ‡,å®ƒæŠŠæ‰€æœ‰æ”¶é›†åˆ°çš„æ•°æ®å­˜å‚¨åˆ°æœ¬åœ°,å¹¶ä¸”æ ¹æ®è§„åˆ™å¯¹æ•°æ®è¿›è¡Œèšåˆ,å¹¶ä¸”è®°å½•æ ¹æ®å·²æœ‰çš„æ•°æ®è®°å½•æ–°çš„æ—¶åºæ•°æ®è®°å½•æˆ–è€…æ˜¯æŠ¥è­¦.é€šå¸¸,Prometheusä½¿ç”¨Grafanaæ¥å¯è§†åŒ–æ•°æ®.</p><h2 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h2><p>ä»¥ä¸‹ç¤ºä¾‹éƒ½æ¥è‡ªå®˜æ–¹ç½‘ç«™</p><h3 id="å®‰è£…Prometheus"><a href="#å®‰è£…Prometheus" class="headerlink" title="å®‰è£…Prometheus"></a>å®‰è£…Prometheus</h3><p>é¦–å…ˆ,åœ¨å®˜ç½‘ä¸‹è½½ç¨‹åºåŒ…åˆ°æŒ‡å®šä½ç½®,ä¹‹åæ ¹æ®å‘½ä»¤æç¤ºå¼€å§‹è§£å‹è¿è¡Œ</p><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è§£å‹å‘½ä»¤</span></span><br><span class="line">tar xvfz prometheus-*.tar.gz</span><br><span class="line"><span class="comment"># è¿›å…¥ç¨‹åºç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> prometheus-*</span><br><span class="line"><span class="comment"># æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯,è¯´æ˜ç¨‹åºå¯ä»¥æ­£å¸¸è¿è¡Œ</span></span><br><span class="line">./prometheus --<span class="built_in">help</span></span><br><span class="line">usage: prometheus [&lt;flags&gt;]</span><br><span class="line"></span><br><span class="line">The Prometheus monitoring server</span><br><span class="line"></span><br><span class="line">Flags:</span><br><span class="line">  -h, --<span class="built_in">help</span>                     Show context-sensitive <span class="built_in">help</span> (also try</span><br><span class="line">                                 --help-long and --help-man).</span><br><span class="line">      --version                  Show application version.</span><br><span class="line">      --config.file=<span class="string">&quot;prometheus.yml&quot;</span>  </span><br><span class="line">                                 Prometheus configuration file path.</span><br><span class="line">      --web.listen-address=<span class="string">&quot;0.0.0.0:9090&quot;</span>  </span><br><span class="line">                                 Address to listen on <span class="keyword">for</span> UI, API, and</span><br><span class="line">                                 telemetry.</span><br></pre></td></tr></table></figure><h3 id="é…ç½®Prometheus"><a href="#é…ç½®Prometheus" class="headerlink" title="é…ç½®Prometheus"></a>é…ç½®Prometheus</h3><p>Prometheusç¨‹åºé€šè¿‡YAMLå’Œå‘½ä»¤è¡Œå‚æ•°æ–‡ä»¶è¿›è¡Œé…ç½®,è¯¦ç»†çš„é…ç½®é¡¹åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‚è€ƒ<span class="exturl" data-url="aHR0cHM6Ly9wcm9tZXRoZXVzLmlvL2RvY3MvcHJvbWV0aGV1cy9sYXRlc3QvY29uZmlndXJhdGlvbi9jb25maWd1cmF0aW9uLw==" title="https://prometheus.io/docs/prometheus/latest/configuration/configuration/">Prometheuså®˜ç½‘çš„è¯´æ˜æ–‡æ¡£<i class="fa fa-external-link"></i></span></p><p>å‘½ä»¤è¡Œå‚æ•°é€šå¸¸ç”¨æ¥é…ç½®ç³»ç»Ÿå‚æ•°,ä¾‹å¦‚å­˜å‚¨ä½ç½®/ç¡¬ç›˜å’Œå†…å­˜çš„ç”¨é‡ç­‰,é…ç½®æ–‡ä»¶é€šå¸¸å®šä¹‰äº†æ‰€æœ‰ç›¸å…³çš„æ•°æ®æ”¶é›†æ‰åš/å®ä¾‹/è§„åˆ™æ–‡ä»¶ç­‰.</p><p>æ­¤å¤–,Prometheusè¿è¡Œæ—¶å¯ä»¥é‡è½½é…ç½®,å¦‚æœé…ç½®æ–‡ä»¶ç¼–å†™æœ‰æ ¼å¼é”™è¯¯,åˆ™é…ç½®é¡¹ä¸ä¼šç”Ÿæ•ˆ.é‡è½½é…ç½®é€šå¸¸é€šè¿‡ä¸¤ç§æ–¹å¼:</p><ol><li>SIGHUPè¿›ç¨‹,ä¾‹å¦‚<code>kill HUP</code></li><li>é€šè¿‡HTTP POSTè¯·æ±‚<code>/-/reload</code>åœ°å€</li></ol><p>Prometheusæ”¯æŒå¤šç§æœåŠ¡å‘ç°é…ç½®,ä¾‹å¦‚å¸¸ç”¨çš„Kubernetes/Consul/Static Filesæ–¹å¼,å¯ä»¥åŠ¨æ€æ”¹å˜ç›‘å¬çš„å†…å®¹</p><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># my global config å…¨å±€é…ç½®</span></span><br><span class="line"><span class="attr">global:</span></span><br><span class="line">  <span class="comment"># è®¾ç½®æ•°æ®è·å–é—´éš”(ç§’),é»˜è®¤ä¸ºä¸€åˆ†é’Ÿ</span></span><br><span class="line">  <span class="attr">scrape_interval:</span>     <span class="string">15s</span> <span class="comment"># Set the scrape interval to every 15 seconds. Default is every 1 minute.</span></span><br><span class="line">  <span class="comment"># è§„åˆ™æ‰§è¡Œé—´éš”(ç§’),é»˜è®¤ä¸ºä¸€åˆ†é’Ÿ</span></span><br><span class="line">  <span class="attr">evaluation_interval:</span> <span class="string">15s</span> <span class="comment"># Evaluate rules every 15 seconds. The default is every 1 minute.</span></span><br><span class="line">  <span class="comment"># æ•°æ®è·å–è¶…æ—¶æ—¶é—´å…¨å±€é»˜è®¤è®¾ç½®ä¸º10ç§’</span></span><br><span class="line">  <span class="comment"># scrape_timeout is set to the global default (10s).</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Alertmanager configuration</span></span><br><span class="line"><span class="comment"># æŠ¥è­¦ç®¡ç†é…ç½®</span></span><br><span class="line"><span class="attr">alerting:</span></span><br><span class="line">  <span class="attr">alertmanagers:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">static_configs:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">targets:</span></span><br><span class="line">      <span class="comment"># æŠ¥è­¦æœåŠ¡å™¨çš„ç›®æ ‡åœ°å€:ç«¯å£</span></span><br><span class="line">      <span class="comment"># - alertmanager:9093</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Load rules once and periodically evaluate them according to the global &#x27;evaluation_interval&#x27;.</span></span><br><span class="line"><span class="comment"># åŠ è½½è§„åˆ™æ–‡ä»¶,å¹¶ä¸”æ ¹æ®&#x27;evaluation_interval&#x27;é…ç½®çš„å‘¨æœŸæ‰§è¡Œ</span></span><br><span class="line"><span class="attr">rule_files:</span></span><br><span class="line">  <span class="comment"># - &quot;first_rules.yml&quot;</span></span><br><span class="line">  <span class="comment"># - &quot;second_rules.yml&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># A scrape configuration containing exactly one endpoint to scrape:</span></span><br><span class="line"><span class="comment"># Here it&#x27;s Prometheus itself.</span></span><br><span class="line"><span class="comment"># ä¸€ä¸ªscrapeé…ç½®åŒ…å«äº†ä¸€ä¸ªendpoint</span></span><br><span class="line"><span class="comment"># é»˜è®¤é…ç½®çš„ç¬¬ä¸€ä¸ªæ˜¯PrometheusæœåŠ¡æœ¬èº«çš„endpoint</span></span><br><span class="line"><span class="attr">scrape_configs:</span></span><br><span class="line">  <span class="comment"># The job name is added as a label `job=&lt;job_name&gt;` to any timeseries scraped from this config.</span></span><br><span class="line">  <span class="comment"># job_nameå°†ä¼šè¢«ä½œä¸ºjob=&lt;job_name&gt;çš„labelæ·»åŠ </span></span><br><span class="line">  <span class="bullet">-</span> <span class="attr">job_name:</span> <span class="string">&#x27;prometheus&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># metrics_path defaults to &#x27;/metrics&#x27;</span></span><br><span class="line">    <span class="comment"># scheme defaults to &#x27;http&#x27;.</span></span><br><span class="line">    <span class="comment"># æŒ‡æ ‡è·¯å¾„é»˜è®¤ä¸º&#x27;/metrics&#x27;</span></span><br><span class="line">    <span class="comment"># åè®®é»˜è®¤ä¸º&#x27;http&#x27;</span></span><br><span class="line">    <span class="attr">static_configs:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">targets:</span> [<span class="string">&#x27;128.1.6.73:9090&#x27;</span>]</span><br></pre></td></tr></table></figure><p>é…ç½®æ–‡ä»¶æ”¯æŒä»¥ä¸‹å‡ ç§æ•°æ®ç±»å‹å®šä¹‰:</p><ol><li><code>boolean</code>: å¸ƒå°”å€¼,<code>true/false</code></li><li><code>duration</code>: æŒç»­æ—¶é—´,ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼è§„åˆ™<code>[0-9]+(ms|[smhdwy])</code></li><li><code>labelname</code>: å­—ç¬¦ä¸²,ç¬¦åˆæ­£åˆ™è¡¨è¾¾å¼è§„åˆ™<code>[a-zA-Z_][a-zA-Z0-9_]*</code></li><li><code>labelvalue</code>: unicodeå­—ç¬¦ä¸²</li><li><code>filename</code>: å½“å‰å·¥ä½œç›®å½•ä¸‹çš„å¯ç”¨è·¯å¾„</li><li><code>host</code>: å¯ç”¨çš„ä¸»æœºå/IPåœ°å€:ç«¯å£å·</li><li><code>path</code>: å¯ç”¨çš„URLè·¯å¾„</li><li><code>scheme</code>: åè®®ç±»å‹,<code>http/https</code></li><li><code>string</code>: å¸¸è§„å­—ç¬¦ä¸²</li><li><code>secret</code>: å¸¸è§„å­—ç¬¦ä¸²,ä¾‹å¦‚å¯†ç /tokenç­‰</li><li><code>tmpl_string</code>: æ¨¡æ¿å­—ç¬¦ä¸²</li></ol><h4 id="global"><a href="#global" class="headerlink" title="global"></a>global</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">global:</span></span><br><span class="line">  <span class="comment"># How frequently to scrape targets by default.</span></span><br><span class="line">  [ <span class="attr">scrape_interval:</span> <span class="string">&lt;duration&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="string">1m</span> ]</span><br><span class="line"></span><br><span class="line">  <span class="comment"># How long until a scrape request times out.</span></span><br><span class="line">  [ <span class="attr">scrape_timeout:</span> <span class="string">&lt;duration&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="string">10s</span> ]</span><br><span class="line"></span><br><span class="line">  <span class="comment"># How frequently to evaluate rules.</span></span><br><span class="line">  [ <span class="attr">evaluation_interval:</span> <span class="string">&lt;duration&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="string">1m</span> ]</span><br><span class="line"></span><br><span class="line">  <span class="comment"># The labels to add to any time series or alerts when communicating with</span></span><br><span class="line">  <span class="comment"># external systems (federation, remote storage, Alertmanager).</span></span><br><span class="line">  <span class="attr">external_labels:</span></span><br><span class="line">    [ <span class="string">&lt;labelname&gt;:</span> <span class="string">&lt;labelvalue&gt;</span> <span class="string">...</span> ]</span><br><span class="line"></span><br><span class="line">  <span class="comment"># File to which PromQL queries are logged.</span></span><br><span class="line">  <span class="comment"># Reloading the configuration will reopen the file.</span></span><br><span class="line">  [ <span class="attr">query_log_file:</span> <span class="string">&lt;string&gt;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Rule files specifies a list of globs. Rules and alerts are read from</span></span><br><span class="line"><span class="comment"># all matching files.</span></span><br><span class="line"><span class="attr">rule_files:</span></span><br><span class="line">  [ <span class="bullet">-</span> <span class="string">&lt;filepath_glob&gt;</span> <span class="string">...</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># A list of scrape configurations.</span></span><br><span class="line"><span class="attr">scrape_configs:</span></span><br><span class="line">  [ <span class="bullet">-</span> <span class="string">&lt;scrape_config&gt;</span> <span class="string">...</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Alerting specifies settings related to the Alertmanager.</span></span><br><span class="line"><span class="attr">alerting:</span></span><br><span class="line">  <span class="attr">alert_relabel_configs:</span></span><br><span class="line">    [ <span class="bullet">-</span> <span class="string">&lt;relabel_config&gt;</span> <span class="string">...</span> ]</span><br><span class="line">  <span class="attr">alertmanagers:</span></span><br><span class="line">    [ <span class="bullet">-</span> <span class="string">&lt;alertmanager_config&gt;</span> <span class="string">...</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Settings related to the remote write feature.</span></span><br><span class="line"><span class="attr">remote_write:</span></span><br><span class="line">  [ <span class="bullet">-</span> <span class="string">&lt;remote_write&gt;</span> <span class="string">...</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Settings related to the remote read feature.</span></span><br><span class="line"><span class="attr">remote_read:</span></span><br><span class="line">  [ <span class="bullet">-</span> <span class="string">&lt;remote_read&gt;</span> <span class="string">...</span> ]</span><br></pre></td></tr></table></figure><h4 id="scrape"><a href="#scrape" class="headerlink" title="scrape"></a>scrape</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The job name assigned to scraped metrics by default.</span></span><br><span class="line"><span class="attr">job_name:</span> <span class="string">&lt;job_name&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># How frequently to scrape targets from this job.</span></span><br><span class="line">[ <span class="attr">scrape_interval:</span> <span class="string">&lt;duration&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="string">&lt;global_config.scrape_interval&gt;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Per-scrape timeout when scraping this job.</span></span><br><span class="line">[ <span class="attr">scrape_timeout:</span> <span class="string">&lt;duration&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="string">&lt;global_config.scrape_timeout&gt;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># The HTTP resource path on which to fetch metrics from targets.</span></span><br><span class="line">[ <span class="attr">metrics_path:</span> <span class="string">&lt;path&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="string">/metrics</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># honor_labels controls how Prometheus handles conflicts between labels that are</span></span><br><span class="line"><span class="comment"># already present in scraped data and labels that Prometheus would attach</span></span><br><span class="line"><span class="comment"># server-side (&quot;job&quot; and &quot;instance&quot; labels, manually configured target</span></span><br><span class="line"><span class="comment"># labels, and labels generated by service discovery implementations).</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># If honor_labels is set to &quot;true&quot;, label conflicts are resolved by keeping label</span></span><br><span class="line"><span class="comment"># values from the scraped data and ignoring the conflicting server-side labels.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># If honor_labels is set to &quot;false&quot;, label conflicts are resolved by renaming</span></span><br><span class="line"><span class="comment"># conflicting labels in the scraped data to &quot;exported_&lt;original-label&gt;&quot; (for</span></span><br><span class="line"><span class="comment"># example &quot;exported_instance&quot;, &quot;exported_job&quot;) and then attaching server-side</span></span><br><span class="line"><span class="comment"># labels.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Setting honor_labels to &quot;true&quot; is useful for use cases such as federation and</span></span><br><span class="line"><span class="comment"># scraping the Pushgateway, where all labels specified in the target should be</span></span><br><span class="line"><span class="comment"># preserved.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Note that any globally configured &quot;external_labels&quot; are unaffected by this</span></span><br><span class="line"><span class="comment"># setting. In communication with external systems, they are always applied only</span></span><br><span class="line"><span class="comment"># when a time series does not have a given label yet and are ignored otherwise.</span></span><br><span class="line">[ <span class="attr">honor_labels:</span> <span class="string">&lt;boolean&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="literal">false</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># honor_timestamps controls whether Prometheus respects the timestamps present</span></span><br><span class="line"><span class="comment"># in scraped data.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># If honor_timestamps is set to &quot;true&quot;, the timestamps of the metrics exposed</span></span><br><span class="line"><span class="comment"># by the target will be used.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># If honor_timestamps is set to &quot;false&quot;, the timestamps of the metrics exposed</span></span><br><span class="line"><span class="comment"># by the target will be ignored.</span></span><br><span class="line">[ <span class="attr">honor_timestamps:</span> <span class="string">&lt;boolean&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="literal">true</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Configures the protocol scheme used for requests.</span></span><br><span class="line">[ <span class="attr">scheme:</span> <span class="string">&lt;scheme&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="string">http</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Optional HTTP URL parameters.</span></span><br><span class="line"><span class="attr">params:</span></span><br><span class="line">  [ <span class="string">&lt;string&gt;:</span> [<span class="string">&lt;string&gt;</span>, <span class="string">...</span>] ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Sets the `Authorization` header on every scrape request with the</span></span><br><span class="line"><span class="comment"># configured username and password.</span></span><br><span class="line"><span class="comment"># password and password_file are mutually exclusive.</span></span><br><span class="line"><span class="attr">basic_auth:</span></span><br><span class="line">  [ <span class="attr">username:</span> <span class="string">&lt;string&gt;</span> ]</span><br><span class="line">  [ <span class="attr">password:</span> <span class="string">&lt;secret&gt;</span> ]</span><br><span class="line">  [ <span class="attr">password_file:</span> <span class="string">&lt;string&gt;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Sets the `Authorization` header on every scrape request with</span></span><br><span class="line"><span class="comment"># the configured bearer token. It is mutually exclusive with `bearer_token_file`.</span></span><br><span class="line">[ <span class="attr">bearer_token:</span> <span class="string">&lt;secret&gt;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Sets the `Authorization` header on every scrape request with the bearer token</span></span><br><span class="line"><span class="comment"># read from the configured file. It is mutually exclusive with `bearer_token`.</span></span><br><span class="line">[ <span class="attr">bearer_token_file:</span> <span class="string">/path/to/bearer/token/file</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Configures the scrape request&#x27;s TLS settings.</span></span><br><span class="line"><span class="attr">tls_config:</span></span><br><span class="line">  [ <span class="string">&lt;tls_config&gt;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Optional proxy URL.</span></span><br><span class="line">[ <span class="attr">proxy_url:</span> <span class="string">&lt;string&gt;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># List of Azure service discovery configurations.</span></span><br><span class="line"><span class="attr">azure_sd_configs:</span></span><br><span class="line">  [ <span class="bullet">-</span> <span class="string">&lt;azure_sd_config&gt;</span> <span class="string">...</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># List of Consul service discovery configurations.</span></span><br><span class="line"><span class="attr">consul_sd_configs:</span></span><br><span class="line">  [ <span class="bullet">-</span> <span class="string">&lt;consul_sd_config&gt;</span> <span class="string">...</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># List of DNS service discovery configurations.</span></span><br><span class="line"><span class="attr">dns_sd_configs:</span></span><br><span class="line">  [ <span class="bullet">-</span> <span class="string">&lt;dns_sd_config&gt;</span> <span class="string">...</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># List of EC2 service discovery configurations.</span></span><br><span class="line"><span class="attr">ec2_sd_configs:</span></span><br><span class="line">  [ <span class="bullet">-</span> <span class="string">&lt;ec2_sd_config&gt;</span> <span class="string">...</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># List of OpenStack service discovery configurations.</span></span><br><span class="line"><span class="attr">openstack_sd_configs:</span></span><br><span class="line">  [ <span class="bullet">-</span> <span class="string">&lt;openstack_sd_config&gt;</span> <span class="string">...</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># List of file service discovery configurations.</span></span><br><span class="line"><span class="attr">file_sd_configs:</span></span><br><span class="line">  [ <span class="bullet">-</span> <span class="string">&lt;file_sd_config&gt;</span> <span class="string">...</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># List of GCE service discovery configurations.</span></span><br><span class="line"><span class="attr">gce_sd_configs:</span></span><br><span class="line">  [ <span class="bullet">-</span> <span class="string">&lt;gce_sd_config&gt;</span> <span class="string">...</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># List of Kubernetes service discovery configurations.</span></span><br><span class="line"><span class="attr">kubernetes_sd_configs:</span></span><br><span class="line">  [ <span class="bullet">-</span> <span class="string">&lt;kubernetes_sd_config&gt;</span> <span class="string">...</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># List of Marathon service discovery configurations.</span></span><br><span class="line"><span class="attr">marathon_sd_configs:</span></span><br><span class="line">  [ <span class="bullet">-</span> <span class="string">&lt;marathon_sd_config&gt;</span> <span class="string">...</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># List of AirBnB&#x27;s Nerve service discovery configurations.</span></span><br><span class="line"><span class="attr">nerve_sd_configs:</span></span><br><span class="line">  [ <span class="bullet">-</span> <span class="string">&lt;nerve_sd_config&gt;</span> <span class="string">...</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># List of Zookeeper Serverset service discovery configurations.</span></span><br><span class="line"><span class="attr">serverset_sd_configs:</span></span><br><span class="line">  [ <span class="bullet">-</span> <span class="string">&lt;serverset_sd_config&gt;</span> <span class="string">...</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># List of Triton service discovery configurations.</span></span><br><span class="line"><span class="attr">triton_sd_configs:</span></span><br><span class="line">  [ <span class="bullet">-</span> <span class="string">&lt;triton_sd_config&gt;</span> <span class="string">...</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># List of labeled statically configured targets for this job.</span></span><br><span class="line"><span class="attr">static_configs:</span></span><br><span class="line">  [ <span class="bullet">-</span> <span class="string">&lt;static_config&gt;</span> <span class="string">...</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># List of target relabel configurations.</span></span><br><span class="line"><span class="attr">relabel_configs:</span></span><br><span class="line">  [ <span class="bullet">-</span> <span class="string">&lt;relabel_config&gt;</span> <span class="string">...</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># List of metric relabel configurations.</span></span><br><span class="line"><span class="attr">metric_relabel_configs:</span></span><br><span class="line">  [ <span class="bullet">-</span> <span class="string">&lt;relabel_config&gt;</span> <span class="string">...</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Per-scrape limit on number of scraped samples that will be accepted.</span></span><br><span class="line"><span class="comment"># If more than this number of samples are present after metric relabelling</span></span><br><span class="line"><span class="comment"># the entire scrape will be treated as failed. 0 means no limit.</span></span><br><span class="line">[ <span class="attr">sample_limit:</span> <span class="string">&lt;int&gt;</span> <span class="string">|</span> <span class="string">default</span> <span class="string">=</span> <span class="number">0</span> ]</span><br></pre></td></tr></table></figure><h4 id="tls"><a href="#tls" class="headerlink" title="tls"></a>tls</h4><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># CA certificate to validate API server certificate with.</span></span><br><span class="line">[ <span class="attr">ca_file:</span> <span class="string">&lt;filename&gt;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Certificate and key files for client cert authentication to the server.</span></span><br><span class="line">[ <span class="attr">cert_file:</span> <span class="string">&lt;filename&gt;</span> ]</span><br><span class="line">[ <span class="attr">key_file:</span> <span class="string">&lt;filename&gt;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># ServerName extension to indicate the name of the server.</span></span><br><span class="line"><span class="comment"># https://tools.ietf.org/html/rfc4366#section-3.1</span></span><br><span class="line">[ <span class="attr">server_name:</span> <span class="string">&lt;string&gt;</span> ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Disable validation of the server certificate.</span></span><br><span class="line">[ <span class="attr">insecure_skip_verify:</span> <span class="string">&lt;boolean&gt;</span> ]</span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h3><p>å¯åŠ¨PrometheusæœåŠ¡ä¹‹å,å¯ä»¥é€šè¿‡æµè§ˆå™¨è®¿é—®åœ°å€,ä¾‹å¦‚<code>http://128.1.10.22:9090</code>è®¿é—®</p><h4 id="Graph"><a href="#Graph" class="headerlink" title="Graph"></a>Graph</h4><p>å›¾å½¢ç•Œé¢ä¸­,åœ¨Consoleä¸­è¾“å…¥è¡¨è¾¾å¼,ä¾‹å¦‚<code>prometheus_target_interval_length_seconds</code>,å³å¯åœ¨é¡µé¢ä¸ŠæŸ¥è¯¢å¯¹åº”çš„æŒ‡æ ‡æ•°æ®,å¹¶ä¸”å±•ç¤ºåœ¨å›¾å½¢ä¸Šç»˜åˆ¶å‡ºç›¸å…³æ›²çº¿</p><blockquote><p>prometheus_target_interval_length_seconds{quantile=â€0.99â€} 99%å»¶è¿Ÿ<br>count(prometheus_target_interval_length_seconds) è¿”å›å®ç°åºåˆ—çš„æ•°é‡<br>rate(prometheus_tsdb_head_chunks_created_total[1m]) ä¸€åˆ†é’Ÿå†…çš„tsdbå—åˆ›å»ºæ•°é‡</p></blockquote><h2 id="æ¯”è¾ƒ"><a href="#æ¯”è¾ƒ" class="headerlink" title="æ¯”è¾ƒ"></a>æ¯”è¾ƒ</h2><h3 id="Prometheus-VS-Graphite"><a href="#Prometheus-VS-Graphite" class="headerlink" title="Prometheus VS. Graphite"></a>Prometheus VS. Graphite</h3><h4 id="æ€»ä½“"><a href="#æ€»ä½“" class="headerlink" title="æ€»ä½“"></a>æ€»ä½“</h4><p>Graphiteä¸“æ³¨äºæˆä¸º<code>å…·æœ‰æŸ¥è¯¢è¯­è¨€å’Œå›¾å½¢çš„æ—¶åºæ•°æ®åº“</code>,å…¶ä»–é—®é¢˜ç”±å¤–éƒ¨ç»„ä»¶è§£å†³.</p><p>Prometheusæ˜¯ä¸€ä¸ª<code>å…¨é¢çš„ç›‘æ§ç³»ç»Ÿ</code>,åŒ…æ‹¬<code>åŸºäºæ—¶é—´åºåˆ—</code>çš„æ•°æ®åº“çš„<code>æ•°æ®è·å–/å­˜å‚¨/æŸ¥è¯¢/å¯è§†åŒ–/æŠ¥è­¦</code>.å…·æœ‰<code>åˆ¤æ–­å¼‚å¸¸çš„çŸ¥è¯†</code>.</p><h4 id="æ•°æ®æ¨¡å‹"><a href="#æ•°æ®æ¨¡å‹" class="headerlink" title="æ•°æ®æ¨¡å‹"></a>æ•°æ®æ¨¡å‹</h4><p>ä¸¤è€…éƒ½èƒ½å¤Ÿå­˜å‚¨æ—¶åºæ•°æ®,åŒºåˆ«åœ¨äº<br>Prometheusçš„åŸæ•°æ®æ›´åŠ ä¸°å¯Œ,<br>Graphiteçš„æŒ‡æ ‡åç§°ç”±<code>.</code>è¿›è¡Œåˆ†å‰²,é€šè¿‡è¿™ç§æ–¹å¼éšå«ä»£è¡¨æ•°æ®çš„ç»´åº¦,<br>Prometheusé€šè¿‡<code>é”®å€¼å¯¹</code>çš„labelä»£è¡¨æ•°æ®çš„ç»´åº¦,ä½œä¸ºæŒ‡æ ‡åç§°çš„é™„åŠ ä¿¡æ¯,é€šè¿‡è¿™ç§æ–¹å¼å®ç°æŸ¥è¯¢è¯­è¨€æ›´å¥½çš„æ•°æ®èšåˆæ“ä½œ,ä¾‹å¦‚<code>filter/group/mach</code></p><p>æ­¤å¤–,å°¤å…¶æ˜¯å½“Graphiteå’ŒStatsDç»“åˆä½¿ç”¨æ—¶,é€šå¸¸åªåœ¨å—ç›‘è§†çš„å®åŠ›ä¸Šå­˜å‚¨èšåˆæ•°æ®,è€Œä¸æ˜¯å°†å®ä¾‹ä¿ç•™ä¸ºä¸€ä¸ªèƒ½å¤Ÿä¸‹é’»åˆ†æé—®é¢˜çš„ç»´åº¦.</p><h4 id="å­˜å‚¨"><a href="#å­˜å‚¨" class="headerlink" title="å­˜å‚¨"></a>å­˜å‚¨</h4><p>Graphiteçš„æ•°æ®åœ¨æœ¬åœ°ä»¥<code>Whisper</code>çš„æ ¼å¼å­˜å‚¨,è¿™æ˜¯ä¸€ç§RRDé£æ ¼çš„æ•°æ®åº“,å°†æ•°æ®ä»¥å¸¸è§„çš„é—´éš”å­˜å‚¨.æ¯ä¸€ä¸ªæ—¶é—´åºåˆ—å•ç‹¬å­˜æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶,æ–°çš„æ ·æœ¬å°†åœ¨ä¸€å®šæ—¶é—´ä¹‹åè¦†ç›–åŸæœ‰çš„æ ·æœ¬(å¾…æ˜ç¡®å«ä¹‰).</p><p>Prometheusé‡‡ç”¨ç±»ä¼¼çš„æ–¹æ³•,ä¸ºæ¯ä¸€ä¸ªæ—¶é—´åºåˆ—åˆ›é€ ä¸€ä¸ªæ–°çš„æœ¬åœ°æ–‡ä»¶,ä½†æ˜¯å…è®¸æ•°æ®ä»¥ä»»æ„çš„é—´éš”æ”¶é›†,å¯ä»¥å’Œæ•°æ®æ”¶é›†æˆ–è€…è§„åˆ™çš„æ‰§è¡Œä¿æŒä¸€è‡´.ç”±äºæ–°çš„æ ·æœ¬åªæ˜¯ç®€å•çš„é€šè¿‡appendçš„æ–¹å¼æ·»åŠ ,æ—§æ•°æ®å¯ä»¥å­˜å‚¨ä»»æ„æ—¶é—´.PrometheusåŒæ ·é€‚ç”¨äºè®¸å¤šçŸ­æœŸçš„,æˆ–è€…æ˜¯ç»å¸¸å˜åŒ–çš„æ—¶é—´åºåˆ—é›†åˆ.</p><h4 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>Prometheusæä¾›äº†æ›´ä¸°å¯Œçš„æ•°æ®æ¨¡å‹å’ŒæŸ¥è¯¢è¯­è¨€,å¯ä»¥æ›´å®¹æ˜“çš„å¯åŠ¨å¹¶ä¸”é›†æˆè‡³ä½ çš„ç¯å¢ƒ.å¦‚æœä½ æƒ³è¦ä¸€ä¸ªé›†ç¾¤æ–¹æ¡ˆæ¥ä¿å­˜é•¿æ—¶é—´çš„å†å²æ•°æ®,Graphiteå¯èƒ½æ˜¯æ›´å¥½çš„é€‰æ‹©.</p><h3 id="Prometheus-VS-InfluxDB"><a href="#Prometheus-VS-InfluxDB" class="headerlink" title="Prometheus VS. InfluxDB"></a>Prometheus VS. InfluxDB</h3><p>InfluxDBæ˜¯ä¸€ä¸ªå¼€æºçš„æ—¶é—´åºåˆ—æ•°æ®åº“,å¯ä»¥é€‰æ‹©å•†ä¸šç‰ˆæœ¬çš„å¯ä¼¸ç¼©/é›†ç¾¤é…ç½®.InfluxDBçš„æå‡ºæ¯”Prometheusçš„å¼€å‘æ—¶é—´è¦æ™šä¸€å¹´,æ‰€ä»¥æˆ‘ä»¬æ²¡æœ‰åŠæ³•å°†å®ƒä½œä¸ºä¸€ä¸ªæ›¿ä»£æ–¹æ¡ˆ.ä¸¤ä¸ªè½¯ä»¶ä¹‹é—´å­˜åœ¨ç€ä¸€äº›æ˜¾è‘—çš„å·®å¼‚,å¹¶ä¸”é’ˆå¯¹ä¸åŒåœºæ™¯è¿›è¡Œåº”ç”¨.</p><h4 id="æ€»ä½“æƒ…å†µ"><a href="#æ€»ä½“æƒ…å†µ" class="headerlink" title="æ€»ä½“æƒ…å†µ"></a>æ€»ä½“æƒ…å†µ</h4><p>ä¸ºäº†å…¬å¹³çš„æ¯”è¾ƒ,æˆ‘ä»¬å¿…é¡»è€ƒè™‘å°†InfluxDBå’Œ<code>Kapacitor</code>ä¸€èµ·ä½¿ç”¨,å®ç°å’ŒPrometheusä¸€æ ·çš„åŠŸèƒ½åœºæ™¯.</p><p>InfluxDBçš„å·®å¼‚å’ŒGraphiteç±»ä¼¼,åŒºåˆ«åœ¨äºInfuxDBæä¾›äº†å¯æŒç»­çš„æŸ¥è¯¢,å’ŒPrometheusçš„è®°å½•è§„åˆ™ç›¸åŒ.</p><p>Kapacitorçš„èŒƒå›´æ˜¯Prometheusè®°å½•è§„åˆ™/è­¦æŠ¥è§„åˆ™/Alertmanagerçš„é€šçŸ¥åŠŸèƒ½çš„ç»„åˆ.Prometheusæä¾›äº†æ›´å¼ºå¤§çš„æŸ¥è¯¢è¯­è¨€æ¥è¿›è¡Œå›¾å½¢æ˜¾ç¤ºå’Œè­¦æŠ¥,å¹¶ä¸”Prometheus Alertmanagerè¿˜æä¾›äº†åˆ†ç»„/é‡å¤æ•°æ®åˆ é™¤/é™éŸ³çš„åŠŸèƒ½.</p><h4 id="æ•°æ®æ¨¡å‹-å­˜å‚¨"><a href="#æ•°æ®æ¨¡å‹-å­˜å‚¨" class="headerlink" title="æ•°æ®æ¨¡å‹/å­˜å‚¨"></a>æ•°æ®æ¨¡å‹/å­˜å‚¨</h4><p>ä¸Prometheusä¸€æ ·,InfluxDBæ•°æ®æ¨¡å‹ä¹Ÿå°†é”®å€¼å¯¹ä½œä¸ºæ ‡ç­¾,ç§°ä¸º<code>tag</code>.æ­¤å¤–,InfluxDBè¿˜æœ‰ç¬¬äºŒçº§æ ‡ç­¾,ç§°ä¸º<code>field</code>,ä½¿ç”¨èŒƒå›´å—åˆ°æ›´å¤šé™åˆ¶. InfluxDBæ”¯æŒæœ€é«˜è¾¾åäº¿åˆ†ä¹‹ä¸€ç§’åˆ†è¾¨ç‡çš„æ—¶é—´æˆ³,ä»¥åŠ<code>float64,int64,boolå’Œå­—ç¬¦ä¸²æ•°æ®ç±»å‹</code>.ç›¸æ¯”ä¹‹ä¸‹,Prometheusæ”¯æŒ<code>float64</code>æ•°æ®ç±»å‹,å¯¹å­—ç¬¦ä¸²å’Œæ¯«ç§’åˆ†è¾¨ç‡æ—¶é—´æˆ³çš„æ”¯æŒæœ‰é™.</p><p>InfluxDBä½¿ç”¨<a href="https://blog.raintank.io/logs-and-metrics-and-graphs-oh-my/" title="log-structured merge tree for storage with a write ahead log"><code>log-structured merge tree for storage with a write ahead log</code></a>æ¥å­˜å‚¨å¸¦æœ‰æŒ‰æ—¶é—´åˆ†ç‰‡çš„é¢„å†™æ—¥å¿—çš„å­˜å‚¨.ä¸Prometheusæ¯ä¸ªæ—¶é—´åºåˆ—çš„ä»…é™„åŠ æ–‡ä»¶ç›¸æ¯”,æ­¤æ–¹æ³•æ›´é€‚åˆäº‹ä»¶è®°å½•.</p><p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmluZmx1eGRhdGEuY29tL2luZmx1eGRiL3YxLjcvY29uY2VwdHMvc3RvcmFnZV9lbmdpbmUv" title="https://docs.influxdata.com/influxdb/v1.7/concepts/storage_engine/">Logs and Metrics and Graphs, Oh My!<i class="fa fa-external-link"></i></span> è¿™ç¯‡æ–‡ç« æè¿°äº†äº‹ä»¶æ—¥å¿—å’ŒæŒ‡æ ‡è®°å½•çš„åŒºåˆ«.</p><h4 id="æ¶æ„"><a href="#æ¶æ„" class="headerlink" title="æ¶æ„"></a>æ¶æ„</h4><p>PrometheusæœåŠ¡ç‹¬ç«‹è¿è¡Œ,ä»…ä»…ä¾èµ–äºå„è‡ªçš„æœ¬åœ°å­˜å‚¨å’Œæ ¸å¿ƒåŠŸèƒ½:scraping,è§„åˆ™å¤„ç†å’ŒæŠ¥è­¦.å¼€æºç‰ˆæœ¬çš„InfluxDBçš„åŠŸèƒ½ä¹Ÿç±»ä¼¼.</p><p>å•†ä¸šç‰ˆçš„InfuxDBæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼å­˜å‚¨é›†ç¾¤,å­˜å‚¨å’ŒæŸ¥è¯¢ç”±å¤šä¸ªèŠ‚ç‚¹ä¸€æ¬¡å¤„ç†.</p><p>è¿™æ„å‘³ç€å•†ä¸šç‰ˆçš„InfluxDBæ›´æ˜“äºæ°´å¹³æ‰©å±•,ä½†æ˜¯åŒæ ·æ„å‘³ç€ä½ ä¸å¾—ä¸ä»ä¸€å¼€å§‹å°±ç®¡ç†å¤æ‚çš„åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿ.Prometheusæ›´æ˜“äºä½¿ç”¨,ä½†æ˜¯ç»å¸¸éœ€è¦æ ¹æ®äº§å“/æœåŠ¡/æ•°æ®ä¸­å¿ƒæˆ–è€…ç±»ä¼¼æ–¹é¢çš„åŸå› å¯¹æœåŠ¡è¿›è¡Œç¢ç‰‡åŒ–,ä»¥å®ç°ä¼¸ç¼©æ€§.å„è‡ªç‹¬ç«‹çš„æœåŠ¡å™¨(å¯ä»¥å¹¶è¡Œå†—ä½™è¿è¡Œ)å¯ä»¥æä¾›æ›´å¥½çš„å¯é æ€§å’Œæ•…éšœéš”ç¦».</p><p>Kapacitorçš„å¼€æºå‘å¸ƒæ²¡æœ‰ä¸ºè§„åˆ™/æŠ¥è­¦/é€šçŸ¥åŠŸèƒ½å†…ç½®åˆ†å¸ƒå¼/å†—ä½™é€‰é¡¹,å¯ä»¥é€šè¿‡ç”¨æˆ·æ‰‹åŠ¨åˆ†ç‰‡å®ç°ä¼¸ç¼©æ‰©å±•,å’ŒPrometheusç±»ä¼¼.Infuxæä¾›äº†ä¼ä¸šçº§çš„Kapacitor,æ”¯æŒåˆ†å¸ƒå¼é«˜å¯ç”¨çš„æŠ¥è­¦ç³»ç»Ÿ.</p><p>ç›¸æ¯”ä¹‹ä¸‹,Prometheuså’ŒAlertmanageré€šè¿‡å¼€æºçš„å†—ä½™é€‰é¡¹,å¯ä»¥å¯åŠ¨Prometheusçš„å†—ä½™å‰¯æœ¬å¹¶å¯ç”¨Alertmanagerçš„é«˜å¯ç”¨æ¨¡å¼.</p><h4 id="æ€»ç»“-1"><a href="#æ€»ç»“-1" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>è¿™ä¸¤ä¸ªç³»ç»Ÿå…·æœ‰å¾ˆå¤šç›¸ä¼¼ä¹‹å¤„.ä¾‹å¦‚:åŒæ ·å…·æœ‰æ ‡ç­¾(labels/tags)ä¸ºå¤šç»´æŒ‡æ ‡æä¾›ä¾¿æ·çš„æ”¯æŒ.åŒæ ·ä½¿ç”¨åŸºç¡€çš„æ•°æ®å‹ç¼©ç®—æ³•.åŒæ ·å…·æœ‰å¹¿æ³›çš„æ‰©å±•æ€§,åŒ…æ‹¬äº’ç›¸ä¹‹é—´çš„é›†æˆ.ä¸¤è€…éƒ½å…·æœ‰<code>hooks</code>,å¯ä»¥è®©è¿›ä¸€æ­¥å¯¹å®ƒä»¬è¿›è¡Œæ‰©å±•,ä¾‹å¦‚ä½¿ç”¨ç»Ÿè®¡å·¥å…·åˆ†ææ•°æ®æˆ–è€…æ‰§è¡Œè‡ªåŠ¨æ“ä½œ.</p><p>InfluxDBåœ¨ä»¥ä¸‹æ–¹é¢è¡¨ç°çš„æ›´å¥½:</p><ol><li>å¤„ç†æ—¶é—´æ—¥å¿—,</li><li>å•†ä¸šç‰ˆæä¾›äº†é›†ç¾¤åŠŸèƒ½,åœ¨é•¿æœŸçš„æ•°æ®å­˜å‚¨ä¸­è¡¨ç°æ›´å¥½</li><li>æ•°æ®è§†å›¾ä½¿å¾—ä¸åŒå‰¯æœ¬ä¹‹é—´çš„æ•°æ®ä¿æŒä¸€è‡´</li></ol><p>Prometheusåœ¨ä»¥ä¸‹æ–¹é¢è¡¨ç°çš„æ›´å¥½:</p><ol><li>æŒ‡æ ‡æ•°æ®çš„åº”ç”¨(å¯¹åº”æ—¶é—´æ—¥å¿—),</li><li>æ›´å¼ºå¤§çš„æŸ¥è¯¢è¯­è¨€,æŠ¥è­¦å’Œé€šçŸ¥åŠŸèƒ½,</li><li>é«˜å¯ç”¨å’Œæ­£å¸¸ä½¿ç”¨(uptime)çš„å›¾å½¢/æŠ¥è­¦åŠŸèƒ½.</li></ol><p>InfluxDBä¸»è¦ç”±ä¸€ä¸ªç‹¬ç«‹çš„å•†ä¸šå…¬å¸ç»´æŠ¤æ ¸å¿ƒä»£ç ,å¹¶æä¾›é«˜çº§ç‰¹æ€§,ä¾‹å¦‚é—­æºçš„çš„é›†ç¾¤/æ‰˜ç®¡/æ”¯æŒ.Prometheusæ˜¯ä¸€ä¸ªå®Œå…¨å¼€æºçš„ç‹¬ç«‹é¡¹ç›®,ç”±è®¸å¤šå…¬å¸å’Œä¸ªäººç»´æŠ¤,å…¶ä¸­ä¸€äº›è¿˜æä¾›å•†ä¸šæœåŠ¡å’Œæ”¯æŒ(ä¾‹å¦‚é˜¿é‡Œäº‘).</p><h3 id="Prometheus-VS-OpenTSDB"><a href="#Prometheus-VS-OpenTSDB" class="headerlink" title="Prometheus VS. OpenTSDB"></a>Prometheus VS. OpenTSDB</h3><p>OpenTSDBæ˜¯ä¸€ä¸ªåŸºäºHadoopå’ŒHBaseçš„åˆ†å¸ƒå¼æ—¶é—´åºåˆ—æ•°æ®åº“.</p><h4 id="æ€»ä½“-1"><a href="#æ€»ä½“-1" class="headerlink" title="æ€»ä½“"></a>æ€»ä½“</h4><p>å’ŒGraphiteç±»ä¼¼</p><h4 id="æ•°æ®æ¨¡å‹-1"><a href="#æ•°æ®æ¨¡å‹-1" class="headerlink" title="æ•°æ®æ¨¡å‹"></a>æ•°æ®æ¨¡å‹</h4><p>OpenTSDBçš„æ•°æ®æ¨¡å‹å‡ ä¹å’ŒPrometheusä¸€è‡´:æ—¶é—´åºåˆ—ç”±ä¸€ç³»åˆ—çš„é”®å€¼å¯¹å®šä¹‰(OpenTSDBçš„tagså¯¹åº”Prometheusçš„labels).æ‰€æœ‰çš„æŒ‡æ ‡æ•°æ®å­˜åœ¨ä¸€èµ·,é™åˆ¶æŒ‡æ ‡çš„åŸºæ•°.æœ‰ä¸€äº›ç»†å¾®çš„å·®åˆ«:Premetheuså…è®¸æ ‡ç­¾å€¼ä¸­åŒ…å«ä»»æ„å­—ç¬¦,è€ŒOpenTSDBçš„é™åˆ¶æ›´ä¸¥æ ¼.OpenTSDBç¼ºå°‘æŸ¥è¯¢è¯­è¨€,åªèƒ½é€šè¿‡APIè¿›è¡Œç®€å•çš„æŸ¥è¯¢,èšåˆå’Œæ•°å­¦è¿ç®—.</p><h4 id="å­˜å‚¨-1"><a href="#å­˜å‚¨-1" class="headerlink" title="å­˜å‚¨"></a>å­˜å‚¨</h4><p>OpenTSDBçš„å­˜å‚¨å®ç°åŸºäºHadoopå’ŒHBase,æ„å‘³ç€OpenTSDBå¯ä»¥å¾ˆè½»æ˜“çš„å®ç°æ°´å¹³æ‰©å±•,ä½†æ˜¯ä½ ä¸å¾—ä¸ä»ä¸€å¼€å§‹å°±æ¥å—è¿è¡ŒHadoop/HBaseé›†ç¾¤çš„å¤æ‚æ€§.</p><p>Prometheusçš„åˆå§‹ä½¿ç”¨æ›´åŠ ç®€å•,ä½†æ˜¯ä¸€å•è¶…å‡ºäº†å•ä¸ªèŠ‚ç‚¹çš„å®¹é‡,å°±éœ€è¦æ˜¾å¼çš„è¿›è¡Œåˆ†ç‰‡.</p><h4 id="æ€»ç»“-2"><a href="#æ€»ç»“-2" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h4><p>Prometheusæä¾›äº†æ›´ä¸°å¯Œçš„æŸ¥è¯¢è¯­è¨€,å¯ä»¥å¤„ç†æ›´å¤§åŸºæ•°çš„æŒ‡æ ‡,å¹¶ä¸”æ„æˆäº†å®Œæ•´çš„ç›‘è§†ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†.å¦‚æœä½ å·²ç»åœ¨è¿è¡ŒHadoop,å¹¶ä¸”é‡è§†é•¿æœŸå­˜å‚¨çš„ä¼˜åŠ¿,OpenTSDBå°†æ˜¯æ›´å¥½çš„é€‰æ‹©.</p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;Prometheusä»‹ç»&quot;&gt;&lt;a href=&quot;#Prometheusä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;Prometheusä»‹ç»&quot;&gt;&lt;/a&gt;Prometheusä»‹ç»&lt;/h2&gt;&lt;p&gt;Prometheus æ˜¯ä¸€æ¬¾å¼€æºçš„ç³»ç»Ÿç›‘æ§å’ŒæŠ¥è­¦å·¥å…·åŒ…,ä¸»è¦æä¾›äº†ä»¥ä¸‹åŠŸèƒ½&lt;/p&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;å¤šç»´æ•°æ®æ¨¡å‹,ç”¨&lt;code&gt;key-value&lt;/code&gt;çš„æ–¹å¼æ ‡è¯†æ—¶åºæ•°æ®&lt;/li&gt;
&lt;li&gt;PromQL,åˆ©ç”¨è¿™ç§æ•°æ®ç±»å‹çš„çµæ´»çš„æŸ¥è¯¢è¯­è¨€&lt;/li&gt;
&lt;li&gt;äº’ä¸ç›¸å…³çš„åˆ†å¸ƒå¼å­˜å‚¨,å•ç‹¬çš„æœåŠ¡èŠ‚ç‚¹ä¹‹é—´äº’ç›¸ç‹¬ç«‹&lt;/li&gt;
&lt;li&gt;é€šè¿‡åŸºäº HTTP åè®®çš„æ‹‰å–å¼çš„æ—¶åºæ•°æ®çš„æ”¶é›†&lt;/li&gt;
&lt;li&gt;æ”¯æŒé€šè¿‡ä¸­é—´ä»¶ç½‘å…³çš„æ–¹å¼æ¨é€æ—¶åºæ•°æ®&lt;/li&gt;
&lt;li&gt;å¯ä»¥é€šè¿‡é™æ€çš„é…ç½®æ–‡ä»¶å’Œâ€æœåŠ¡å‘ç°â€æŠ€æœ¯å‘ç°ç›‘æ§ç›®æ ‡&lt;/li&gt;
&lt;li&gt;ä¸°å¯Œçš„å›¾å½¢åŒ–æ¨¡å‹å’Œä»ªè¡¨ç›˜æ”¯æŒ&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="ç¬”è®°" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
  </entry>
  
  <entry>
    <title>Reactå­¦ä¹ </title>
    <link href="https://hisashiburidane.github.io//%E7%AC%94%E8%AE%B0/2019/06/29/React%E5%AD%A6%E4%B9%A0/"/>
    <id>https://hisashiburidane.github.io//ç¬”è®°/2019/06/29/Reactå­¦ä¹ /</id>
    <published>2019-06-29T07:28:05.000Z</published>
    <updated>2020-10-12T16:05:05.199Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ä¹ æƒ¯æ€§å¨é€¼å¨"><a href="#ä¹ æƒ¯æ€§å¨é€¼å¨" class="headerlink" title="ä¹ æƒ¯æ€§å¨é€¼å¨"></a>ä¹ æƒ¯æ€§å¨é€¼å¨</h2><p>ç„¶åå‰ä¸€æ®µå·¥ä½œå®‰æ’äº†ä¸ªå†™å‰ç«¯çš„æ´»,ä¹‹å‰çœ‹è¿‡çš„ vue.js åˆæ¡èµ·æ¥çœ‹äº†çœ‹,é¡ºä¾¿å°±åˆè†¨èƒ€äº†è§‰å¾—è‡ªå·±å¯ä»¥é¡ºæ‰‹æŠŠ ES5/TS/Angular/React/ReactNative/Weex/Flutter/Dart ä»€ä¹ˆçš„ä¸€èµ·çœ‹äº†.<br>åˆè§‰å¾— Webpack/Babel/ESLint/TSLint/CSS/Less/Sass ä»€ä¹ˆçš„ä¹Ÿæ²¡ä»€ä¹ˆéš¾çš„,ç„¶åå°±å­å“§å­å“§çš„çœ‹äº†å‡ å¤©æ–‡æ¡£,ç„¶åå‘ç°,å…¶å®éœ€è¦æ²‰ä¸‹å¿ƒæ¥å­¦ä¸€ä¸‹çš„ä¸œè¥¿è¿˜æŒºå¤šçš„â€¦<br>è™½ç„¶ä¸»è¦ä¹Ÿä¸æ˜¯åšè¿™ä¸ª,ä¸è¿‡äº†è§£ä¸€ä¸‹ä¹Ÿæ²¡ä»€ä¹ˆåå¤„,æ•´ç†ä¸€ä¸‹è‡ªå·±å­¦ä¹  React çš„ä¸œè¥¿å§,å…‰çœ‹ä¸å­¦è¿˜æ˜¯å¼Ÿå¼Ÿ.</p><a id="more"></a><h2 id="React"><a href="#React" class="headerlink" title="React"></a>React</h2><p>ä»‹ç»å°±ä¸å¤šè¯´äº†,æ— éå°±æ˜¯èµ·æº Facebook ç”¨äº instgram çš„é¡¹ç›®å¼€å‘,è¡€ç»Ÿé«˜è´µ,åº”ç”¨å¹¿æ³›,å„ç§ä¼˜ç‚¹,ç›´æ¥å¼€å§‹æ­£é¢˜</p><h3 id="React-æ˜¯ä»€ä¹ˆ"><a href="#React-æ˜¯ä»€ä¹ˆ" class="headerlink" title="React æ˜¯ä»€ä¹ˆ"></a>React æ˜¯ä»€ä¹ˆ</h3><blockquote><p>React-ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“</p></blockquote><p>å®è´¨ä¸Š,React æ˜¯ä¸€ä¸ªå‰ç«¯åº“/æ¡†æ¶,ç”¨æˆ·é€šè¿‡ç¼–å†™ JavaScript+HTML+CSS ä»£ç å®ç°ç½‘é¡µçš„å¸ƒå±€,å±•ç¤º,äº¤äº’ç­‰åŠŸèƒ½.<br>ä¼ ç»Ÿé€»è¾‘ä¸‹,æˆ‘ä»¬ç¼–å†™ä¸€ä¸ªç½‘é¡µé¦–å…ˆè¦æ–°å»ºä¸€ä¸ª html é¡µé¢,ç„¶ååœ¨é¡µé¢ä¸Šè®¾è®¡å¥½æˆ‘ä»¬çš„é¡µé¢æ ·å¼å’Œå¸ƒå±€,é€šè¿‡ JavaScript ä»£ç å“åº”é¡µé¢çš„äº¤äº’äº‹ä»¶,è¯·æ±‚æ•°æ®,å¹¶ä¸”é€šè¿‡ç›´æ¥æ“ä½œé¡µé¢å…ƒç´ çš„æ–¹å¼å®ç°åŠŸèƒ½,è¿™ä¸ªæ—¶å€™æœ€å¸¸ç”¨çš„åº“æ˜¯ <code>JQuery</code>.<br>ä½†æ˜¯åæ¥,å¯èƒ½æ˜¯äººä»¬å‘ç°è¿™ç§æ“ä½œé¡µé¢å…ƒç´ çš„æ–¹å¼ä»£ç æœ‰å¾ˆå¤šå†—ä½™,ç”¨æˆ·åœ¨å…³æ³¨å®é™…ä¸šåŠ¡é€»è¾‘çš„åŒæ—¶ä¹Ÿä¼šè¿‡åº¦çš„å…³æ³¨ä¸é¡µé¢å…ƒç´ çš„æ“ä½œé€»è¾‘,äºæ˜¯å¼€å§‹å°è¯•ç€å°†é€»è¾‘ç¼–å†™å’Œé¡µé¢å…ƒç´ çš„æ“ä½œæ¸æ¸éš”ç¦»å¼€,<code>JQuery</code>å…¶å®èƒ½å¤Ÿå®ç°ä¸€éƒ¨åˆ†ç›®æ ‡,ä½†æ˜¯è¿˜ä¸å¤Ÿ,ç”¨æˆ·åªæ˜¯åœ¨é€‰æ‹©å’Œæ“ä½œé¡µé¢å…ƒç´ æ—¶æ›´åŠ çš„æ–¹ä¾¿,ä½†æ˜¯å¹¶æ²¡æœ‰æŠ›å¼€è¿™ä¸€éƒ¨åˆ†å·¥ä½œ.<br>å†åæ¥,äººä»¬å°è¯•ç€å°†é¡µé¢å…ƒç´ çš„æ“ä½œå°è£…çš„æ›´æ·±,å°½å¯èƒ½çš„å±è”½ç”¨æˆ·å¯¹äºé¡µé¢å…ƒç´ çš„æ“ä½œ,ä½¿å¾—ç”¨æˆ·æ›´ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘æœ¬èº«,è¿™æ—¶å€™å°±å‡ºç°äº†<code>MVC</code>/<code>MVVM</code>ç­‰è®¾è®¡æ€æƒ³,ä¹Ÿå‡ºç°äº†å„ç§å„æ ·çš„æ¡†æ¶.<br>ç›®å‰è¯´èµ·æ¥æœ€æµè¡Œçš„æ¡†æ¶,æ— éæ˜¯<code>React</code>,<code>Angular</code>,<code>Vue.js</code>,å„è‡ªæœ‰è‡ªå·±çš„è®¾è®¡ç†å¿µ,æˆ‘ç°åœ¨çš„å­¦ä¹ é™¤äº†åˆæ­¥æŒæ¡è¿™äº›æŠ€æœ¯æœ¬èº«ä¹‹å¤–,æ›´é‡è¦çš„åœ¨äºå­¦ä¹ å…¶è®¾è®¡æ€æƒ³,æ‹“å±•è§†é‡.</p><p>æœ¬æ¥æƒ³ç¿»å¢™ç™½å«–<span class="exturl" data-url="aHR0cHM6Ly93d3cucmVhY3Rqcy5vcmcv" title="https://www.reactjs.org/">å®˜ç½‘<i class="fa fa-external-link"></i></span>çš„ä¿¡æ¯,æ— å¥ˆæ–­äº†ä»£ç†â€¦æš‚ä¸”ç»“åˆä¹‹å‰çœ‹çš„è§†é¢‘å’Œä¸­æ–‡ç½‘ç«™çš„ä¿¡æ¯å¼€å§‹å§ â”‘(ï¿£ Ğ” ï¿£)â”</p><blockquote><p>React æ˜¯ä¸€ä¸ªå£°æ˜å¼ï¼Œé«˜æ•ˆä¸”çµæ´»çš„ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„ JavaScript åº“ã€‚ä½¿ç”¨ React å¯ä»¥å°†ä¸€äº›ç®€çŸ­ã€ç‹¬ç«‹çš„ä»£ç ç‰‡æ®µç»„åˆæˆå¤æ‚çš„ UI ç•Œé¢ï¼Œè¿™äº›ä»£ç ç‰‡æ®µè¢«ç§°ä½œâ€œç»„ä»¶â€ã€‚</p></blockquote><h3 id="æ­å»ºå¼€å‘ç¯å¢ƒ"><a href="#æ­å»ºå¼€å‘ç¯å¢ƒ" class="headerlink" title="æ­å»ºå¼€å‘ç¯å¢ƒ"></a>æ­å»ºå¼€å‘ç¯å¢ƒ</h3><p>éšç€å‰ç«¯æŠ€æœ¯çš„å‘å±•,ä» html+js+css+assets çš„æ„å»ºæ–¹å¼å˜åŒ–åˆ°äº†ç°åœ¨é€šè¿‡å„ç§å·¥å…·,ä¸“é—¨çš„ cli å·¥å…·,npx,è„šæ‰‹æ¶.<br>ä¼˜ç‚¹:ç®€å•æ˜“ç”¨,æ–°æ‰‹å¯ä»¥å¿«é€Ÿå¼€å§‹ä»£ç çš„ç¼–å†™<br>ç¼ºç‚¹:å°±æ˜¯å¦‚æœæ˜¯æ–°æ‰‹,å¼€å§‹å¼€å‘ä¹‹åé‡åˆ°ä¸€äº›éœ€æ±‚çš„æ—¶å€™æ‰‹è¶³æ— æª,ä¸€è„¸è’™è”½<br>å› æ­¤,è„šæ‰‹æ¶/cli å¯ä»¥ç”¨,ä½†æ˜¯è‡ªå·±åŠ¨æ‰‹ä¹Ÿè¦ä¼š,çŸ¥å·±çŸ¥å½¼</p><p>ä¾‹å¦‚å®˜æ–¹æä¾›çš„æœ€ç®€å•çš„æ–¹å¼</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app my-app</span><br></pre></td></tr></table></figure><p>è¿™å¥å‘½ä»¤ä¼šåœ¨å½“å‰è·¯å¾„åˆ›å»ºä¸€ä¸ª my-app çš„æ–‡ä»¶å¤¹,å¹¶ä¸”åˆå§‹åŒ–ä¸€ä¸ª react é¡¹ç›®,åŒ…å«äº†æ‰“åŒ…ç¯å¢ƒ,åŸºç¡€åº“(React/ReactDom ç­‰),npm è„šæœ¬å‘½ä»¤ç­‰,åœ¨å‘½ä»¤æ‰§è¡Œå®Œæˆä¹‹åå¯ä»¥ç›´æ¥åˆ‡æ¢åˆ°ç›®å½•ä¸‹æ‰§è¡Œ npm start,å°±çœ‹åˆ°äº†ä¸€ä¸ª Hello World ç¨‹åº<br><strong><em>But</em></strong>,è¿™ç§æ–¹å¼å¥½åƒä¸å¤ªç¬¦åˆç›®å‰çš„ä¸»æµæ¨¡å¼,webpack+babel+loader+plugin+webpack-dev-serverâ€¦.æ‰€ä»¥æˆ‘ä¹Ÿå°±è·‘ä¸€ä¸‹,ç„¶ååˆ‡æ¢åˆ° webpack</p><h4 id="å®‰è£…-devDependencies"><a href="#å®‰è£…-devDependencies" class="headerlink" title="å®‰è£… devDependencies"></a>å®‰è£… devDependencies</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mkdir my-app</span><br><span class="line"><span class="built_in">cd</span> my-app</span><br><span class="line">npm init</span><br><span class="line"><span class="comment"># æ¥ä¸‹æ¥å›è½¦å›è½¦å›è½¦å›è½¦....</span></span><br><span class="line"><span class="comment"># ç„¶åå¼€å§‹å®‰è£…ä¾èµ–åŒ…</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># webpackå·¥å…·,æä¾›äº†æ‰“åŒ…,è¿è¡Œ,çƒ­åŠ è½½ç­‰åŠŸèƒ½,é›†æˆbabel,html-webpack-plugin,style-loaderç­‰æ’ä»¶</span></span><br><span class="line">npm install webpack webpack-cli webpack-dev-server webpack-merge html-webpack-plugin -D</span><br><span class="line"><span class="comment"># reactåŸºç¡€ç¯å¢ƒ,react+react-dom,scriptsåœ¨è¿™é‡Œåº”è¯¥æ²¡ç”¨åˆ°</span></span><br><span class="line">npm install react react-dom -D <span class="comment">#react-scripts</span></span><br><span class="line"><span class="comment"># babelç»„ä»¶,åŒ…æ‹¬babelæ ¸å¿ƒå’Œjsxæ”¯æŒ</span></span><br><span class="line">npm install babel-core jsx-loader -D</span><br><span class="line"><span class="comment"># æ ·å¼æ‰“åŒ…æ’ä»¶</span></span><br><span class="line">npm install style-loader css-loader sass-loader url-loader file-loader -D</span><br></pre></td></tr></table></figure><h4 id="é…ç½®åŸºç¡€ç¯å¢ƒ"><a href="#é…ç½®åŸºç¡€ç¯å¢ƒ" class="headerlink" title="é…ç½®åŸºç¡€ç¯å¢ƒ"></a>é…ç½®åŸºç¡€ç¯å¢ƒ</h4><h5 id="Webpack"><a href="#Webpack" class="headerlink" title="Webpack"></a>Webpack</h5><p><code>configs/webpack.common.js</code>é€šç”¨é…ç½®,åŒ…å«äº†:</p><ol><li>æ‰“åŒ…æ¨¡å¼(development/production)çš„è®¾ç½®</li><li>é¡¹ç›®å…¥å£(entry)</li><li>é¡¹ç›®è¾“å‡º(output)è®¾ç½®</li><li>æ’ä»¶,åŒ…å« jsx è¯­æ³•æ¨¡å—,sass/css ç¼–è¯‘æ¨¡å—</li><li>ä¼˜åŒ–é…ç½® optimization</li><li>webpack-dev-server é…ç½®</li><li>åŒä¹‰è¯(alias)é…ç½®</li><li>HtmlWebPackPlugin/HotModuleReplacementPlugin é…ç½®</li></ol><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">&quot;webpack&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebPackPlugin = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> APP_PATH = path.join(__dirname, <span class="string">&quot;../src&quot;</span>);</span><br><span class="line"><span class="keyword">const</span> DIST_PATH = path.join(__dirname, <span class="string">&quot;../dist&quot;</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function">(<span class="params">env, argv</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> PROD_MODE = argv.mode === <span class="string">&quot;production&quot;</span> ? <span class="literal">true</span> : <span class="literal">false</span>;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    entry: &#123;</span><br><span class="line">      main: path.resolve(__dirname, APP_PATH, <span class="string">&quot;app.jsx&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    output: &#123;</span><br><span class="line">      path: path.resolve(DIST_PATH),</span><br><span class="line">      filename: <span class="string">&quot;[name].[hash].js&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="built_in">module</span>: &#123;</span><br><span class="line">      rules: [</span><br><span class="line">        &#123; <span class="attr">test</span>: <span class="regexp">/\.jsx|js$/</span>, use: [<span class="string">&quot;babel-loader&quot;</span>] &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          test: <span class="regexp">/\.scss|css$/</span>,</span><br><span class="line">          use: [<span class="string">&quot;style-loader&quot;</span>, <span class="string">&quot;css-loader&quot;</span>, <span class="string">&quot;sass-loader&quot;</span>],</span><br><span class="line">          include: [APP_PATH, <span class="regexp">/bootstrap.min.css/</span>]</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;,</span><br><span class="line">    optimization: &#123;</span><br><span class="line">      splitChunks: &#123;</span><br><span class="line">        chunks: <span class="string">&quot;async&quot;</span>,</span><br><span class="line">        minSize: <span class="number">30000</span>,</span><br><span class="line">        maxSize: <span class="number">0</span>,</span><br><span class="line">        minChunks: <span class="number">1</span>,</span><br><span class="line">        maxAsyncRequests: <span class="number">5</span>,</span><br><span class="line">        maxInitialRequests: <span class="number">3</span>,</span><br><span class="line">        automaticNameDelimiter: <span class="string">&quot;~&quot;</span>,</span><br><span class="line">        name: <span class="literal">true</span>,</span><br><span class="line">        cacheGroups: &#123;</span><br><span class="line">          common: &#123;</span><br><span class="line">            name: <span class="string">&quot;common&quot;</span>,</span><br><span class="line">            chunks: <span class="string">&quot;initial&quot;</span>,</span><br><span class="line">            priority: <span class="number">2</span>,</span><br><span class="line">            minChunks: <span class="number">2</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      runtimeChunk: &#123;</span><br><span class="line">        name: <span class="string">&quot;runtime&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    devServer: &#123;</span><br><span class="line">      hot: <span class="literal">true</span>,</span><br><span class="line">      inline: <span class="literal">true</span></span><br><span class="line">    &#125;,</span><br><span class="line">    resolve: &#123;</span><br><span class="line">      alias: &#123;</span><br><span class="line">        <span class="string">&quot;@&quot;</span>: APP_PATH</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    plugins: [</span><br><span class="line">      <span class="keyword">new</span> HtmlWebPackPlugin(&#123;</span><br><span class="line">        filename: <span class="string">&quot;index.html&quot;</span>,</span><br><span class="line">        template: <span class="string">&quot;./src/index.html&quot;</span>,</span><br><span class="line">        minify: &#123;</span><br><span class="line">          removeComments: PROD_MODE,</span><br><span class="line">          collapseWhitespace: PROD_MODE</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;),</span><br><span class="line">      <span class="keyword">new</span> webpack.HotModuleReplacementPlugin()</span><br><span class="line">    ]</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><code>configs/webpack.dev.js</code>åŒ…å«äº†å¼€å‘æ¨¡å¼ä¸‹,DevServer çš„ä¸€äº›é…ç½®</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = <span class="function">(<span class="params">env, argv</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> Merge(CommonConfig(env, argv), &#123;</span><br><span class="line">    mode: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">    devServer: &#123;</span><br><span class="line">      contentBase: path.join(__dirname, <span class="string">&quot;./dist&quot;</span>),</span><br><span class="line">      compress: <span class="literal">true</span>,</span><br><span class="line">      port: <span class="number">9000</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h5 id="Babel"><a href="#Babel" class="headerlink" title="Babel"></a>Babel</h5><p>æä¾›äº† jsx è¯­æ³•å’Œ es6 è¯­æ³•ç‰¹æ€§çš„æ”¯æŒ</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;plugins&quot;</span>: [</span><br><span class="line">    <span class="string">&quot;@babel/plugin-transform-react-jsx&quot;</span>,</span><br><span class="line">    <span class="string">&quot;@babel/plugin-proposal-class-properties&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="é…ç½®-npm-å‘½ä»¤"><a href="#é…ç½®-npm-å‘½ä»¤" class="headerlink" title="é…ç½® npm å‘½ä»¤"></a>é…ç½® npm å‘½ä»¤</h5><p>è¿™é‡Œä¸»è¦æ˜¯æ·»åŠ <code>dev</code>å’Œ<code>build</code>è¿è¡Œå‘½ä»¤</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;my-app&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;1.0.0&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;description&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;main&quot;</span>: <span class="string">&quot;index.js&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;test&quot;</span>: <span class="string">&quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;dev&quot;</span>: <span class="string">&quot;webpack-dev-server --mode development --open --config configs/webpack.dev.js&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;build&quot;</span>: <span class="string">&quot;webpack --mode production --config configs/webpack.prod.js&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;license&quot;</span>: <span class="string">&quot;ISC&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;babel-core&quot;</span>: <span class="string">&quot;^6.26.3&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;css-loader&quot;</span>: <span class="string">&quot;^3.0.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;file-loader&quot;</span>: <span class="string">&quot;^4.0.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;html-webpack-plugin&quot;</span>: <span class="string">&quot;^3.2.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;jsx-loader&quot;</span>: <span class="string">&quot;^0.13.2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;node-sass&quot;</span>: <span class="string">&quot;^4.12.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;react&quot;</span>: <span class="string">&quot;^16.8.6&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;react-dom&quot;</span>: <span class="string">&quot;^16.8.6&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;react-scripts&quot;</span>: <span class="string">&quot;^3.0.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;sass-loader&quot;</span>: <span class="string">&quot;^7.1.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;style-loader&quot;</span>: <span class="string">&quot;^0.23.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;url-loader&quot;</span>: <span class="string">&quot;^2.0.1&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;webpack&quot;</span>: <span class="string">&quot;^4.35.0&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;webpack-cli&quot;</span>: <span class="string">&quot;^3.3.5&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;webpack-dev-server&quot;</span>: <span class="string">&quot;^3.7.2&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;webpack-merge&quot;</span>: <span class="string">&quot;^4.2.1&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span>: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="å…¥å£æ–‡ä»¶"><a href="#å…¥å£æ–‡ä»¶" class="headerlink" title="å…¥å£æ–‡ä»¶"></a>å…¥å£æ–‡ä»¶</h4><p><code>src/index.html</code>,æŒ‚è½½æ¸²æŸ“çš„å…ƒç´ <code>id=&quot;app&quot;</code></p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;ie=edge&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><p><code>src/app.jsx</code>,åŒ…å«äº†<code>APPç»„ä»¶</code>çš„å®šä¹‰,ä»¥åŠ React çš„å…ƒç´ æŒ‚è½½</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDom <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">APP</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">  &#125;</span><br><span class="line">  render = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDom.render(<span class="xml"><span class="tag">&lt;<span class="name">APP</span> /&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">&quot;app&quot;</span>));</span><br></pre></td></tr></table></figure><p>è‡³æ­¤,Hello World é¡¹ç›®åˆ›å»ºæˆåŠŸ,è¿è¡Œ<code>npm run dev</code>,å³å¯è¿è¡Œé¡¹ç›®,çœ‹åˆ° HelloWorld æ•ˆæœ</p><h2 id="TodoList-ç¤ºä¾‹"><a href="#TodoList-ç¤ºä¾‹" class="headerlink" title="TodoList ç¤ºä¾‹"></a>TodoList ç¤ºä¾‹</h2><p>è¿™ä¸ªè¦æ¯” hello world æ›´å®Œæ•´ä¸€äº›</p><ol><li>åŒ…å«äº† props,å¹¶ä¸”å¯ä»¥åŒ…å« state å’Œ children,refs ç­‰,èƒ½å¤ŸåŒºåˆ† state å’Œ props çš„ä¸åŒåº”ç”¨åœºæ™¯</li><li>åŒ…å«äº† render å‡½æ•°</li><li>å¯ä»¥åŒ…å«ç”Ÿå‘½å‘¨æœŸå‡½æ•°</li></ol><p><code>src/components/TodoList.jsx</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">TodoList</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> list = props.list.map(<span class="function"><span class="params">o</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;o.id&#125;</span>&gt;</span>&#123;o.content&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> <span class="xml"><span class="tag">&lt;<span class="name">ul</span>&gt;</span>&#123;list&#125;<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span>;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>src/app.jsx</code></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> ReactDom <span class="keyword">from</span> <span class="string">&quot;react-dom&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> TodoList <span class="keyword">from</span> <span class="string">&quot;@/components/TodoList.jsx&quot;</span>;</span><br><span class="line"><span class="comment">// æ„å»ºæ•°æ®</span></span><br><span class="line"><span class="keyword">let</span> todo = &#123;</span><br><span class="line">  todo: [<span class="string">&quot;ä¹°è°ƒæ–™&quot;</span>, <span class="string">&quot;çƒ§æ°´&quot;</span>, <span class="string">&quot;ç£¨åˆ€&quot;</span>, <span class="string">&quot;æ€ç‰›&quot;</span>, <span class="string">&quot;å–ç‰›å¥¶&quot;</span>, <span class="string">&quot;åƒç‰›è‚‰&quot;</span>].map(<span class="function">(<span class="params">k, v</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">id</span>: v, <span class="attr">content</span>: k &#125;;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">APP</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="built_in">super</span>(props);</span><br><span class="line">  &#125;</span><br><span class="line">  render = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;TodoList list=&#123;todo&#125; /&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ReactDom.render(<span class="xml"><span class="tag">&lt;<span class="name">APP</span> /&gt;</span></span>, <span class="built_in">document</span>.getElementById(<span class="string">&quot;app&quot;</span>));</span><br></pre></td></tr></table></figure><h2 id="å¾…ç»­"><a href="#å¾…ç»­" class="headerlink" title="å¾…ç»­"></a>å¾…ç»­</h2><p>å…¶å®è¿™ä¸ªä¸œè¥¿ä¸€å†™èµ·æ¥å°±æ²¡å®Œ,ç†Ÿç»ƒçš„å®Œå…¨ä¸ç”¨çœ‹æˆ‘è¿™äº›ç½—é‡Œå§å—¦çš„ä¸€å †æœ‰çš„æ²¡çš„,å®˜æ–¹æ–‡æ¡£æœ€å¥½.ä¸ä¼šçš„,å°±åªèƒ½è·Ÿç€å¤åˆ¶ç²˜è´´æ•²å‘½ä»¤,å‡ºäº†é—®é¢˜å°±æ‡µé€¼â€¦</p><ol><li style="list-style: none"><input type="checkbox"></input> webpack</li><li style="list-style: none"><input type="checkbox"></input> loader</li><li style="list-style: none"><input type="checkbox"></input> plugin</li><li style="list-style: none"><input type="checkbox"></input> dev-server</li><li style="list-style: none"><input type="checkbox"></input> npm</li><li style="list-style: none"><input type="checkbox"></input> babel</li><li style="list-style: none"><input type="checkbox"></input> es6 å„ç§æ–°ç‰¹æ€§</li><li style="list-style: none"><input type="checkbox"></input> jsx</li></ol><p>å…¶å® webpack è¿™ä¸ªä¸œè¥¿æˆ‘ä¹Ÿç”¨çš„ä¸ç†Ÿ,æ¯•ç«Ÿç”¨çš„ä¸å¤š,è€Œä¸”è¿™ä¸ªè¿­ä»£çš„æ„Ÿè§‰æ˜¯æœ‰ç‚¹å¿«â€¦å„ç§æ–°ç‰¹æ€§,æ–°æ’ä»¶,æ–°é…ç½®,æ–°å†™æ³• (â•¯ï¹â•°)<br>å…ˆå†™åˆ°è¿™é‡Œå§,æ…¢æ…¢è¡¥â€¦</p><ol><li>ReactDOM.render</li><li><code>React.Component</code>/<code>constructor</code>/<code>render</code></li><li>state/props/children</li><li>ç”Ÿå‘½å‘¨æœŸå‡½æ•°<code>componentDidMount</code>/<code>componentWillUnmount</code></li><li>è®¾è®¡æ€æƒ³</li><li>äº‹ä»¶å¤„ç†</li><li>Debugger with Visual Studio Code</li></ol>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;ä¹ æƒ¯æ€§å¨é€¼å¨&quot;&gt;&lt;a href=&quot;#ä¹ æƒ¯æ€§å¨é€¼å¨&quot; class=&quot;headerlink&quot; title=&quot;ä¹ æƒ¯æ€§å¨é€¼å¨&quot;&gt;&lt;/a&gt;ä¹ æƒ¯æ€§å¨é€¼å¨&lt;/h2&gt;&lt;p&gt;ç„¶åå‰ä¸€æ®µå·¥ä½œå®‰æ’äº†ä¸ªå†™å‰ç«¯çš„æ´»,ä¹‹å‰çœ‹è¿‡çš„ vue.js åˆæ¡èµ·æ¥çœ‹äº†çœ‹,é¡ºä¾¿å°±åˆè†¨èƒ€äº†è§‰å¾—è‡ªå·±å¯ä»¥é¡ºæ‰‹æŠŠ ES5/TS/Angular/React/ReactNative/Weex/Flutter/Dart ä»€ä¹ˆçš„ä¸€èµ·çœ‹äº†.&lt;br&gt;åˆè§‰å¾— Webpack/Babel/ESLint/TSLint/CSS/Less/Sass ä»€ä¹ˆçš„ä¹Ÿæ²¡ä»€ä¹ˆéš¾çš„,ç„¶åå°±å­å“§å­å“§çš„çœ‹äº†å‡ å¤©æ–‡æ¡£,ç„¶åå‘ç°,å…¶å®éœ€è¦æ²‰ä¸‹å¿ƒæ¥å­¦ä¸€ä¸‹çš„ä¸œè¥¿è¿˜æŒºå¤šçš„â€¦&lt;br&gt;è™½ç„¶ä¸»è¦ä¹Ÿä¸æ˜¯åšè¿™ä¸ª,ä¸è¿‡äº†è§£ä¸€ä¸‹ä¹Ÿæ²¡ä»€ä¹ˆåå¤„,æ•´ç†ä¸€ä¸‹è‡ªå·±å­¦ä¹  React çš„ä¸œè¥¿å§,å…‰çœ‹ä¸å­¦è¿˜æ˜¯å¼Ÿå¼Ÿ.&lt;/p&gt;
    
    </summary>
    
      <category term="ç¬”è®°" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="å‰ç«¯å¼€å‘" scheme="https://hisashiburidane.github.io/tags/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>Selenium</title>
    <link href="https://hisashiburidane.github.io//selenium/2017/06/01/Selenium/"/>
    <id>https://hisashiburidane.github.io//selenium/2017/06/01/Selenium/</id>
    <published>2017-06-01T13:15:12.000Z</published>
    <updated>2018-09-08T09:20:09.768Z</updated>
    
    <content type="html"><![CDATA[<p>å†™çš„æœ€è®¤çœŸçš„ä¸œè¥¿,ç°åœ¨å…¶å®æƒ³åˆ æ‰äº†å‘µå‘µ<br><a id="more"></a></p><h1 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h1><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><h4 id="å®‰è£…python"><a href="#å®‰è£…python" class="headerlink" title="å®‰è£…python"></a>å®‰è£…python</h4><ol><li>å®˜ç½‘<span class="exturl" data-url="aHR0cHM6Ly93d3cucHl0aG9uLm9yZy9kb3dubG9hZHMv" title="https://www.python.org/downloads/">ä¸‹è½½<i class="fa fa-external-link"></i></span>å®‰è£…åŒ…,å®‰è£…åˆ°ç›®æ ‡ä½ç½®</li><li>å®‰è£…å®Œæˆåå³é”®ç‚¹å‡»<code>æˆ‘çš„ç”µè„‘</code>-&gt;<code>å±æ€§</code>-&gt;<code>é«˜çº§ç³»ç»Ÿè®¾ç½®</code>-&gt;<code>ç¯å¢ƒå˜é‡</code>,å°†pythonå®‰è£…çš„è·¯å¾„æ·»åŠ åˆ°PATHé‡Œé¢,ä¾‹å¦‚<code>;c:\python2.6</code>.è¿™é‡Œæ³¨æ„å¦‚æœæ˜¯ç›´æ¥åœ¨æ–‡æœ¬åé¢è¿½åŠ çš„è¯è®°å¾—å‰é¢è¦åŠ åˆ†å·<code>;</code>.æ·»åŠ å®Œæˆä¹‹åå†å‘½ä»¤è¡Œä¸­è¾“å…¥pythonèƒ½å¤Ÿè¿›å…¥python shell,è¯´æ˜å®‰è£…æˆåŠŸ</li></ol><h4 id="å®‰è£…pip"><a href="#å®‰è£…pip" class="headerlink" title="å®‰è£…pip"></a>å®‰è£…pip</h4><blockquote><p>pip is already installed if youâ€™re using Python 2 &gt;=2.7.9 or Python 3 &gt;=3.4 binaries downloaded from python.org, but youâ€™ll need to upgrade pip.</p></blockquote><p>å®˜ç½‘çš„è¯´æ³•æ˜¯2.7.9ä»¥åŠ3.4ç‰ˆæœ¬ä»¥ä¸Šçš„pythonå®‰è£…åå·²ç»åŒ…å«äº†pip,ä¸éœ€è¦å¦å¤–å®‰è£…,æ‰§è¡Œ<code>pip install</code>å‘½ä»¤å®‰è£…æœ€æ–°ç‰ˆæœ¬å³å¯(å‚æ•°-Uè¡¨ç¤ºå®‰è£…æˆ–æ›´æ–°è‡³æœ€æ–°ç‰ˆ)</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -U pip</span><br></pre></td></tr></table></figure><p>ç‰ˆæœ¬ä¸æ»¡è¶³æ—¶,é¦–å…ˆä¸‹è½½<span class="exturl" data-url="aHR0cHM6Ly9ib290c3RyYXAucHlwYS5pby9nZXQtcGlwLnB5" title="https://bootstrap.pypa.io/get-pip.py">get-pip<i class="fa fa-external-link"></i></span>æ–‡ä»¶,å¹¶åœ¨å‘½ä»¤è¡Œä¸­åˆ‡æ¢è‡³æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„æ‰§è¡Œæ–‡ä»¶<br>è¿™é‡Œåæ§½ä¸€ä¸‹windowsçš„cmdå®åœ¨ä¸å¥½ç”¨,powershellä¹Ÿä¸€èˆ¬,æ¨èä¸€ä¸ªæš‚æ—¶æ„Ÿè§‰è¿˜ä¸é”™çš„å‘½ä»¤è¡Œå·¥å…·<span class="exturl" data-url="aHR0cDovL2NtZGVyLm5ldC8=" title="http://cmder.net/">cmder<i class="fa fa-external-link"></i></span><br><span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2NtZGVyZGV2L2NtZGVyL3JlbGVhc2VzL2Rvd25sb2FkL3YxLjMuMi9jbWRlci56aXA=" title="https://github.com/cmderdev/cmder/releases/download/v1.3.2/cmder.zip">ä¸‹è½½åœ°å€<i class="fa fa-external-link"></i></span></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ‡æ¢è‡³æŒ‡å®šè·¯å¾„</span></span><br><span class="line"><span class="built_in">cd</span> xxxx/xxxx</span><br><span class="line"><span class="comment"># æ‰§è¡Œ</span></span><br><span class="line">python ./get-pip.py</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…selenium"><a href="#å®‰è£…selenium" class="headerlink" title="å®‰è£…selenium"></a>å®‰è£…selenium</h4><p><span class="exturl" data-url="aHR0cHM6Ly9weXBpLnB5dGhvbi5vcmcvcHlwaS9zZWxlbml1bQ==" title="https://pypi.python.org/pypi/selenium">å®˜ç½‘é“¾æ¥<i class="fa fa-external-link"></i></span><br>å®‰è£…å®Œæˆ<code>pip</code>ä¹‹å,ä½¿ç”¨å‘½ä»¤å®‰è£…<code>selenium</code>åŒ…</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ pip install -U selenium</span><br><span class="line">Collecting selenium</span><br><span class="line">  Downloading selenium-3.4.3-py2.py3-none-any.whl (931kB)</span><br><span class="line">    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 942kB 191kB/s</span><br><span class="line">Installing collected packages: selenium</span><br><span class="line">Successfully installed selenium-3.4.3</span><br></pre></td></tr></table></figure><h4 id="ä¸‹è½½WebDriver"><a href="#ä¸‹è½½WebDriver" class="headerlink" title="ä¸‹è½½WebDriver"></a>ä¸‹è½½WebDriver</h4><h5 id="ChromeDriver"><a href="#ChromeDriver" class="headerlink" title="ChromeDriver"></a>ChromeDriver</h5><p><span class="exturl" data-url="aHR0cHM6Ly9zaXRlcy5nb29nbGUuY29tL2EvY2hyb21pdW0ub3JnL2Nocm9tZWRyaXZlci9kb3dubG9hZHM=" title="https://sites.google.com/a/chromium.org/chromedriver/downloads">chrome-driver<i class="fa fa-external-link"></i></span></p><ul><li><p>æˆªæ­¢ç›®å‰æœ€æ–°çš„windowsç‰ˆæœ¬çš„driverçš„<span class="exturl" data-url="aHR0cHM6Ly9jaHJvbWVkcml2ZXIuc3RvcmFnZS5nb29nbGVhcGlzLmNvbS8yLjI5L2Nocm9tZWRyaXZlcl93aW4zMi56aXA=" title="https://chromedriver.storage.googleapis.com/2.29/chromedriver_win32.zip">ä¸‹è½½åœ°å€<i class="fa fa-external-link"></i></span></p></li><li><p>å°†è§£å‹åçš„<code>chromedriver.exe</code>æ–‡ä»¶æ”¾åœ¨æŒ‡å®šè·¯å¾„,ä¾‹å¦‚<code>D:\Selenium\chromedriver.exe</code>è·¯å¾„ä¸‹,å°†<code>D:\Selenium\</code>ç›®å½•æ·»åŠ è‡³ç¯å¢ƒå˜é‡<code>PATH</code>ä¸­</p></li></ul><h4 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.common.exceptions <span class="keyword">import</span> TimeoutException</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> WebDriverWait <span class="comment"># available since 2.4.0</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC <span class="comment"># available since 2.26.0</span></span><br><span class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªchromeè¿›ç¨‹driver</span></span><br><span class="line">driver = webdriver.Chrome()</span><br><span class="line"><span class="comment"># æ‰“å¼€æŒ‡å®šé¡µé¢</span></span><br><span class="line">driver.get(<span class="string">&quot;http://www.baidu.com&quot;</span>)</span><br><span class="line">driver.</span><br><span class="line"><span class="comment"># å°†æµè§ˆå™¨å½“å‰çš„æ ‡é¢˜æ‰“å°å‡ºæ¥</span></span><br><span class="line"><span class="keyword">print</span> driver.title</span><br><span class="line"><span class="comment"># å®šä½åˆ°é¡µé¢ä¸­çš„å…·ä½“å…ƒç´ ,è¿™é‡Œéœ€è¦ä¸€ç‚¹htmlçš„çŸ¥è¯†,æˆ–è€…ç›´æ¥æµè§ˆå™¨åˆ‡æ¢åˆ°å¼€å‘è€…æ¨¡å¼æŸ¥çœ‹xpath&amp;cssselector</span></span><br><span class="line">inputElement = driver.find_element_by_name(<span class="string">&quot;wd&quot;</span>)</span><br><span class="line"><span class="comment"># å¡«å†™æœç´¢å†…å®¹</span></span><br><span class="line">inputElement.send_keys(<span class="string">&quot;cheese!&quot;</span>)</span><br><span class="line"><span class="comment"># æäº¤inputæ§ä»¶ä¸­çš„å†…å®¹</span></span><br><span class="line">inputElement.submit()</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># è¿™é‡Œæ˜¯ç­‰å¾…é¡µé¢çŠ¶æ€æ”¹å˜çš„æ–¹æ³•,WebDriverWait(driver,10)ä»£è¡¨å®šçš„è¿›ç¨‹ç­‰å¾…10ç§’,ç›´åˆ°ç¬¦åˆuntil()ä¸­çš„å‚æ•°ç¬¦åˆæˆ–æ˜¯è¶…è¿‡äº†ç­‰å¾…æ—¶é—´</span></span><br><span class="line">    WebDriverWait(driver, <span class="number">10</span>).until(EC.title_contains(<span class="string">&quot;cheese!&quot;</span>))</span><br><span class="line">    <span class="comment">#å¦ä¸€ç§å†™æ³•</span></span><br><span class="line">    wait = WebDriverWait(driver,<span class="number">10</span>)</span><br><span class="line">    element = wait.until(EC.title_contains(<span class="string">&quot;cheese!&quot;</span>))</span><br><span class="line">    <span class="comment"># cheese!_ç™¾åº¦æœç´¢</span></span><br><span class="line">    <span class="keyword">print</span> driver.title</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    driver.quit()</span><br></pre></td></tr></table></figure><h3 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pip install selenium</span><br><span class="line">vi ~/.bash_profile</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$HOME</span>/Documents/workspace/Selenium:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">dr = webdriver.Chrome()</span><br><span class="line"><span class="comment"># æµ‹è¯•å®Œæˆåè®°å¾—å…³é—­è¿›ç¨‹</span></span><br><span class="line">dr.quit()</span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸçš„è¯è¿™é‡Œåº”è¯¥æ˜¾ç¤ºä¸€ä¸ªç©ºçš„æµè§ˆå™¨<br><img data-src="chromedriver_empty.png" alt="chromedriver_empty"></p><h2 id="Introducing-the-Selenium-WebDriver-API-by-Example"><a href="#Introducing-the-Selenium-WebDriver-API-by-Example" class="headerlink" title="Introducing the Selenium-WebDriver API by Example"></a>Introducing the Selenium-WebDriver API by Example</h2><p>ç…§æ¬å®˜ç½‘çš„ä¾‹å­</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.common.exceptions <span class="keyword">import</span> TimeoutException</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> WebDriverWait <span class="comment"># available since 2.4.0</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC <span class="comment"># available since 2.26.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªchromeè¿›ç¨‹driver</span></span><br><span class="line">driver = webdriver.Chrome()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å¼€æŒ‡å®šé¡µé¢</span></span><br><span class="line">driver.get(<span class="string">&quot;http://www.baidu.com&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†æµè§ˆå™¨å½“å‰çš„æ ‡é¢˜æ‰“å°å‡ºæ¥</span></span><br><span class="line"><span class="keyword">print</span> driver.title</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä½åˆ°é¡µé¢ä¸­çš„å…·ä½“å…ƒç´ ,è¿™é‡Œéœ€è¦ä¸€ç‚¹htmlçš„çŸ¥è¯†,æˆ–è€…ç›´æ¥æµè§ˆå™¨åˆ‡æ¢åˆ°å¼€å‘è€…æ¨¡å¼æŸ¥çœ‹xpath&amp;cssselector</span></span><br><span class="line">inputElement = driver.find_element_by_name(<span class="string">&quot;wd&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¡«å†™æœç´¢å†…å®¹</span></span><br><span class="line">inputElement.send_keys(<span class="string">&quot;cheese!&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æäº¤inputæ§ä»¶ä¸­çš„å†…å®¹</span></span><br><span class="line">inputElement.submit()</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># è¿™é‡Œæ˜¯ç­‰å¾…é¡µé¢çŠ¶æ€æ”¹å˜çš„æ–¹æ³•,WebDriverWait(driver,10)ä»£è¡¨å®šçš„è¿›ç¨‹ç­‰å¾…10ç§’,ç›´åˆ°ç¬¦åˆuntil()ä¸­çš„å‚æ•°ç¬¦åˆæˆ–æ˜¯è¶…è¿‡äº†ç­‰å¾…æ—¶é—´</span></span><br><span class="line">    WebDriverWait(driver, <span class="number">10</span>).until(EC.title_contains(<span class="string">&quot;cheese!&quot;</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">#å¦ä¸€ç§å†™æ³•</span></span><br><span class="line">    wait = WebDriverWait(driver,<span class="number">10</span>)</span><br><span class="line">    element = wait.until(EC.title_contains(<span class="string">&quot;cheese!&quot;</span>))</span><br><span class="line">    <span class="comment"># cheese!_ç™¾åº¦æœç´¢</span></span><br><span class="line">    <span class="keyword">print</span> driver.title</span><br><span class="line"></span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    driver.quit()</span><br></pre></td></tr></table></figure><p>ä¸Šé¢å·®ä¸å¤šå°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­äº†,å®é™…æ“ä½œè¿‡ç¨‹ä¸­æœ‰ä¸€äº›åœ°æ–¹çµæ´»è¿ç”¨å°±å¥½</p><h3 id="æ‰“å¼€æµè§ˆå™¨"><a href="#æ‰“å¼€æµè§ˆå™¨" class="headerlink" title="æ‰“å¼€æµè§ˆå™¨"></a>æ‰“å¼€æµè§ˆå™¨</h3><p>è¿™é‡Œä¸åŒæµè§ˆå™¨çš„è¯éœ€è¦<span class="exturl" data-url="aHR0cDovL3d3dy5zZWxlbml1bWhxLm9yZy9kb3dubG9hZC8=" title="http://www.seleniumhq.org/download/">ä¸‹è½½<i class="fa fa-external-link"></i></span>å¯¹åº”çš„webdriver,å¹¶ä¸”å°†æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„æ·»åŠ åˆ°ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="comment"># æ–°å»ºå®ä¾‹</span></span><br><span class="line">driver = webdriver.Chrome()</span><br><span class="line"><span class="comment"># è®¾ç½®å¤§å°</span></span><br><span class="line">driver.set_window_size(<span class="number">240</span>, <span class="number">320</span>)</span><br><span class="line"><span class="comment"># æœ€å¤§åŒ–</span></span><br><span class="line">driver.maximize_window()</span><br><span class="line"><span class="comment"># è·å–é¡µé¢title</span></span><br><span class="line">driver.title</span><br><span class="line"><span class="comment"># è·å–é¡µé¢å½“å‰url</span></span><br><span class="line">driver.current_url</span><br></pre></td></tr></table></figure><h3 id="å…³é—­æµè§ˆå™¨"><a href="#å…³é—­æµè§ˆå™¨" class="headerlink" title="å…³é—­æµè§ˆå™¨"></a>å…³é—­æµè§ˆå™¨</h3><p>æµ‹è¯•çš„è¯ä¸€èˆ¬åœ¨ä¸»ç¨‹åºçš„finallyé‡Œé¢è°ƒç”¨<code>driver.quit()</code>,ä¸ç„¶æœ‰æ—¶å€™ä¼šå› ä¸ºå¼‚å¸¸å¯¼è‡´æ²¡æœ‰é€€å‡ºè¿›ç¨‹,ç„¶åæµ‹è¯•çš„æœºå­ä¼šå¼€å¾ˆå¤šä¸ªè¿›ç¨‹ç„¶åå¡çš„ä¸è¡Œâ€¦</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">driver = webdriver.Chrome()</span><br><span class="line"></span><br><span class="line">driver.quit()</span><br></pre></td></tr></table></figure><h3 id="æ‰“å¼€é¡µé¢"><a href="#æ‰“å¼€é¡µé¢" class="headerlink" title="æ‰“å¼€é¡µé¢"></a>æ‰“å¼€é¡µé¢</h3><p>ä»¥ç™¾åº¦ä¸ºä¾‹</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line">driver = webdriver.Chrome()</span><br><span class="line">driver.get(<span class="string">&#x27;http://www.baidu.com&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="å®šä½UIå…ƒç´ "><a href="#å®šä½UIå…ƒç´ " class="headerlink" title="å®šä½UIå…ƒç´ "></a>å®šä½UIå…ƒç´ </h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;content-type&quot;</span> <span class="attr">content</span>=<span class="string">&quot;text/html;charset=utf-8&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Form<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">async</span>=<span class="string">&quot;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">&quot;http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css&quot;</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>simple login form<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">&quot;form-horizontal&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;control-group&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;control-label&quot;</span> <span class="attr">for</span>=<span class="string">&quot;inputEmail&quot;</span>&gt;</span>Email<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;controls&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;inputEmail&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Email&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;control-group&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;control-label&quot;</span> <span class="attr">for</span>=<span class="string">&quot;inputPassword&quot;</span>&gt;</span>Password<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;controls&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;inputPassword&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;Password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;control-group&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;controls&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">&quot;checkbox&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;checkbox&quot;</span>&gt;</span> Remember me</span><br><span class="line">          <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">class</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>Sign in<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;#&quot;</span>&gt;</span>register<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">if</span> <span class="string">&#x27;HTTP_PROXY&#x27;</span><span class="keyword">in</span> os.environ: <span class="keyword">del</span> os.environ[<span class="string">&#x27;HTTP_PROXY&#x27;</span>]</span><br><span class="line"></span><br><span class="line">dr = webdriver.Chrome()</span><br><span class="line">file_path = <span class="string">&#x27;file:///&#x27;</span> + os.path.abspath(<span class="string">&#x27;form.html&#x27;</span>)</span><br><span class="line"><span class="keyword">print</span> file_path</span><br><span class="line"></span><br><span class="line">dr.get(file_path)</span><br><span class="line"></span><br><span class="line"><span class="comment"># by id</span></span><br><span class="line">dr.find_element_by_id(<span class="string">&#x27;inputEmail&#x27;</span>).click()</span><br><span class="line"></span><br><span class="line"><span class="comment"># by name</span></span><br><span class="line">dr.find_element_by_name(<span class="string">&#x27;password&#x27;</span>).click()</span><br><span class="line"></span><br><span class="line"><span class="comment"># by tagname</span></span><br><span class="line"><span class="keyword">print</span> dr.find_element_by_tag_name(<span class="string">&#x27;form&#x27;</span>).get_attribute(<span class="string">&#x27;class&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># by class_name</span></span><br><span class="line">e = dr.find_element_by_class_name(<span class="string">&#x27;controls&#x27;</span>)</span><br><span class="line">dr.execute_script(<span class="string">&#x27;$(arguments[0]).fadeOut().fadeIn()&#x27;</span>, e)</span><br><span class="line">sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># by link text</span></span><br><span class="line">link = dr.find_element_by_link_text(<span class="string">&#x27;register&#x27;</span>)</span><br><span class="line">dr.execute_script(<span class="string">&#x27;$(arguments[0]).fadeOut().fadeIn()&#x27;</span>, link)</span><br><span class="line">sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># by partial link text</span></span><br><span class="line">link = dr.find_element_by_partial_link_text(<span class="string">&#x27;reg&#x27;</span>)</span><br><span class="line">dr.execute_script(<span class="string">&#x27;$(arguments[0]).fadeOut().fadeIn()&#x27;</span>, link)</span><br><span class="line">sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># by css selector</span></span><br><span class="line">div = dr.find_element_by_css_selector(<span class="string">&#x27;.controls&#x27;</span>)</span><br><span class="line">dr.execute_script(<span class="string">&#x27;$(arguments[0]).fadeOut().fadeIn()&#x27;</span>, div)</span><br><span class="line">sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># by xpath</span></span><br><span class="line">dr.find_element_by_xpath(<span class="string">&#x27;/html/body/form/div[3]/div/label/input&#x27;</span>).click()</span><br><span class="line"></span><br><span class="line">sleep(<span class="number">2</span>)</span><br><span class="line">dr.quit()</span><br></pre></td></tr></table></figure><h4 id="by-id"><a href="#by-id" class="headerlink" title="by id"></a>by id</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;coolestWidgetEvah&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å†™æ³•ä¸€</span></span><br><span class="line">element = driver.find_element_by_id(<span class="string">&quot;coolestWidgetEvah&quot;</span>)</span><br><span class="line"><span class="comment"># å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line">element = driver.find_element(by=By.ID, value=<span class="string">&quot;coolestWidgetEvah&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="by-class"><a href="#by-class" class="headerlink" title="by class"></a>by class</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cheese&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>Cheddar<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;cheese&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>Gouda<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å†™æ³•ä¸€</span></span><br><span class="line">cheeses = driver.find_elements_by_class_name(<span class="string">&quot;cheese&quot;</span>)</span><br><span class="line"><span class="comment"># å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line">cheeses = driver.find_elements(By.CLASS_NAME, <span class="string">&quot;cheese&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="by-tag"><a href="#by-tag" class="headerlink" title="by tag"></a>by tag</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">&quot;...&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å†™æ³•äºŒ</span></span><br><span class="line">frame = driver.find_element_by_tag_name(<span class="string">&quot;iframe&quot;</span>)</span><br><span class="line"><span class="comment"># å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line">frame = driver.find_element(By.TAG_NAME, <span class="string">&quot;iframe&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="by-name"><a href="#by-name" class="headerlink" title="by name"></a>by name</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;cheese&quot;</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span>/&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å†™æ³•ä¸€</span></span><br><span class="line">cheese = driver.find_element_by_name(<span class="string">&quot;cheese&quot;</span>)</span><br><span class="line"><span class="comment"># å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line">cheese = driver.find_element(By.NAME, <span class="string">&quot;cheese&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="by-link-text"><a href="#by-link-text" class="headerlink" title="by link text"></a>by link text</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.google.com/search?q=cheese&quot;</span>&gt;</span>cheese<span class="tag">&lt;/<span class="name">a</span>&gt;</span>&gt;</span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å†™æ³•ä¸€</span></span><br><span class="line">cheese = driver.find_element_by_link_text(<span class="string">&quot;cheese&quot;</span>)</span><br><span class="line"><span class="comment"># å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line">cheese = driver.find_element(By.LINK_TEXT, <span class="string">&quot;cheese&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="by-partial-link-text"><a href="#by-partial-link-text" class="headerlink" title="by partial link text"></a>by partial link text</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://www.google.com/search?q=cheese&quot;</span>&gt;</span>search for cheese<span class="tag">&lt;/<span class="name">a</span>&gt;</span>&gt;</span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å†™æ³•ä¸€</span></span><br><span class="line">cheese = driver.find_element_by_partial_link_text(<span class="string">&quot;cheese&quot;</span>)</span><br><span class="line"><span class="comment"># å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line">cheese = driver.find_element(By.PARTIAL_LINK_TEXT, <span class="string">&quot;cheese&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="by-css"><a href="#by-css" class="headerlink" title="by css"></a>by css</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;food&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;dairy&quot;</span>&gt;</span>milk<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;dairy aged&quot;</span>&gt;</span>cheese<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å†™æ³•ä¸€</span></span><br><span class="line">cheese = driver.find_element_by_css_selector(<span class="string">&quot;#food span.dairy.aged&quot;</span>)</span><br><span class="line"><span class="comment"># å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line">cheese = driver.find_element(By.CSS_SELECTOR, <span class="string">&quot;#food span.dairy.aged&quot;</span>)</span><br></pre></td></tr></table></figure><h4 id="by-xpath"><a href="#by-xpath" class="headerlink" title="by xpath"></a>by xpath</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;example&quot;</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">INPUT</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;other&quot;</span> /&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å†™æ³•ä¸€</span></span><br><span class="line">inputs = driver.find_elements_by_xpath(<span class="string">&quot;//input&quot;</span>)</span><br><span class="line"><span class="comment"># å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line">inputs = driver.find_elements(By.XPATH, <span class="string">&quot;//input&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="æ‰§è¡ŒJavaScript"><a href="#æ‰§è¡ŒJavaScript" class="headerlink" title="æ‰§è¡ŒJavaScript"></a>æ‰§è¡ŒJavaScript</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># execute_scriptçš„å‚æ•°å°±æ˜¯è¦æ‰§è¡Œçš„JavaScriptä»£ç </span></span><br><span class="line">element = driver.execute_script(<span class="string">&quot;return $(&#x27;.cheese&#x27;)[0]&quot;</span>)</span><br><span class="line"><span class="comment"># è·å–labelå…ƒç´ </span></span><br><span class="line">labels = driver.find_elements_by_tag_name(<span class="string">&quot;label&quot;</span>)</span><br><span class="line">inputs = driver.execute_script(</span><br><span class="line">    <span class="string">&quot;var labels = arguments[0], inputs = []; for (var i=0; i &lt; labels.length; i++)&#123;&quot;</span> +</span><br><span class="line">    <span class="string">&quot;inputs.push(document.getElementById(labels[i].getAttribute(&#x27;for&#x27;))); &#125; return inputs;&quot;</span>, labels)</span><br></pre></td></tr></table></figure><h3 id="è·å–æ–‡æœ¬å†…å®¹"><a href="#è·å–æ–‡æœ¬å†…å®¹" class="headerlink" title="è·å–æ–‡æœ¬å†…å®¹"></a>è·å–æ–‡æœ¬å†…å®¹</h3><p>é¦–å…ˆå®šä½åˆ°ç›®æ ‡å…ƒç´ ,ç„¶åå–<code>text</code>å±æ€§</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä½å…ƒç´ </span></span><br><span class="line">element = driver.find_element_by_id(<span class="string">&quot;element_id&quot;</span>)</span><br><span class="line"><span class="comment"># å–text</span></span><br><span class="line">element.text</span><br></pre></td></tr></table></figure><h3 id="è¾“å…¥å†…å®¹"><a href="#è¾“å…¥å†…å®¹" class="headerlink" title="è¾“å…¥å†…å®¹"></a>è¾“å…¥å†…å®¹</h3><p>é€‰æ‹©ä¸‹æ‹‰æ¡†</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä½åˆ°é¡µé¢å…ƒç´ </span></span><br><span class="line">select = driver.find_element_by_tag_name(<span class="string">&quot;select&quot;</span>)</span><br><span class="line"><span class="comment"># è·å–é¡µé¢å…ƒç´ çš„ç›¸å…³å±æ€§</span></span><br><span class="line">allOptions = select.find_elements_by_tag_name(<span class="string">&quot;option&quot;</span>)</span><br><span class="line"><span class="comment"># éå†æ“ä½œ</span></span><br><span class="line"><span class="keyword">for</span> option <span class="keyword">in</span> allOptions:</span><br><span class="line">    <span class="keyword">print</span> <span class="string">&quot;Value is: &quot;</span> + option.get_attribute(<span class="string">&quot;value&quot;</span>)</span><br><span class="line">    option.click()</span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># available since 2.12</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> Select</span><br><span class="line"><span class="comment"># ç›´æ¥å®šä½åˆ°ä¸€ä¸ªselectå¯¹è±¡</span></span><br><span class="line">select = Select(driver.find_element_by_tag_name(<span class="string">&quot;select&quot;</span>))</span><br><span class="line"><span class="comment"># å°è£…å¥½çš„æ–¹æ³•,ä¸éœ€è¦é€šè¿‡å¤æ‚çš„å…ƒç´ å±æ€§è·å–å°±å¯ä»¥æ“ä½œå¯¹è±¡</span></span><br><span class="line"><span class="comment"># å–æ¶ˆé€‰æ‹©</span></span><br><span class="line">select.deselect_all()</span><br><span class="line"><span class="comment"># é€šè¿‡å¯è§çš„æ–‡æœ¬å†…å®¹é€‰æ‹©æ˜¾ç¤ºä¸º&quot;Edam&quot;çš„å…ƒç´ </span></span><br><span class="line">select.select_by_visible_text(<span class="string">&quot;Edam&quot;</span>)</span><br></pre></td></tr></table></figure><h3 id="ç‚¹å‡»äº‹ä»¶"><a href="#ç‚¹å‡»äº‹ä»¶" class="headerlink" title="ç‚¹å‡»äº‹ä»¶"></a>ç‚¹å‡»äº‹ä»¶</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä½åˆ°submitæ§ä»¶</span></span><br><span class="line">submit = driver.find_element_by_id(<span class="string">&quot;submit&quot;</span>)</span><br><span class="line"><span class="comment"># æ¨¡æ‹Ÿç‚¹å‡»æ“ä½œ</span></span><br><span class="line">submit.click()</span><br><span class="line"><span class="comment"># å¯ä»¥ç®€å•å†™ä¸º</span></span><br><span class="line">driver.find_element_by_id(<span class="string">&quot;submit&quot;</span>).click()</span><br><span class="line"><span class="comment"># webdriverä¼šéå†æ•´ä¸ªDOM,æŸ¥æ‰¾å¯ä»¥submitçš„å…ƒç´ ,å¦‚æœæ²¡æœ‰æ‰¾åˆ°ä¼šæŠ›å¼‚å¸¸,ä¸æ¨èä½¿ç”¨</span></span><br><span class="line">element.submit()</span><br></pre></td></tr></table></figure><h3 id="åˆ‡æ¢é¡µé¢"><a href="#åˆ‡æ¢é¡µé¢" class="headerlink" title="åˆ‡æ¢é¡µé¢"></a>åˆ‡æ¢é¡µé¢</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;somewhere.html&quot;</span> <span class="attr">target</span>=<span class="string">&quot;windowName&quot;</span>&gt;</span>Click here to open a new window<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ‡æ¢è‡³åä¸ºwindowNameçš„çª—å£</span></span><br><span class="line">driver.switch_to.window(<span class="string">&quot;windowName&quot;</span>)</span><br><span class="line"><span class="comment"># é€šè¿‡handleéå†çš„æ–¹å¼åˆ‡æ¢çª—å£</span></span><br><span class="line"><span class="keyword">for</span> handle <span class="keyword">in</span> driver.window_handles:</span><br><span class="line">    driver.switch_to.window(handle)</span><br><span class="line"><span class="comment"># åˆ‡æ¢è‡³frame</span></span><br><span class="line">driver.switch_to.frame(<span class="string">&quot;frameName&quot;</span>)</span><br><span class="line"><span class="comment"># åˆ‡æ¢è‡³alert</span></span><br><span class="line">alert = driver.switch_to.alert</span><br></pre></td></tr></table></figure><h3 id="å¯¼èˆª"><a href="#å¯¼èˆª" class="headerlink" title="å¯¼èˆª"></a>å¯¼èˆª</h3><p>ç®€å•çš„æ¨¡æ‹Ÿæµè§ˆå™¨çš„å†å²å¯¼èˆªåŠŸèƒ½,æ„Ÿè§‰ç”¨çš„ä¸å¤š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æµè§ˆå™¨å‰è¿›</span></span><br><span class="line">driver.forward()</span><br><span class="line"><span class="comment"># æµè§ˆå™¨åé€€</span></span><br><span class="line">driver.back()</span><br></pre></td></tr></table></figure><p>sample</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">if</span> <span class="string">&#x27;HTTP_PROXY&#x27;</span><span class="keyword">in</span> os.environ: <span class="keyword">del</span> os.environ[<span class="string">&#x27;HTTP_PROXY&#x27;</span>]</span><br><span class="line"></span><br><span class="line">dr = webdriver.Chrome()</span><br><span class="line"></span><br><span class="line">first_url = <span class="string">&#x27;http://www.baidu.com&#x27;</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;now access %s&quot;</span> %(first_url)</span><br><span class="line"></span><br><span class="line">dr.get(first_url)</span><br><span class="line">sleep(<span class="number">1</span>)</span><br><span class="line">second_url = <span class="string">&#x27;http://www.news.baidu.com&#x27;</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;now access %s&quot;</span> %(second_url)</span><br><span class="line">dr.get(second_url)</span><br><span class="line">sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;back to %s&quot;</span> %(first_url)</span><br><span class="line">dr.back()</span><br><span class="line">sleep(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;forward to %s&quot;</span> %(second_url)</span><br><span class="line">dr.forward()</span><br><span class="line">sleep(<span class="number">1</span>)</span><br><span class="line">dr.quit()</span><br></pre></td></tr></table></figure><h3 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Go to the correct domain</span></span><br><span class="line">driver.get(<span class="string">&quot;http://www.example.com&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Now set the cookie. Here&#x27;s one for the entire domain</span></span><br><span class="line"><span class="comment"># the cookie name here is &#x27;key&#x27; and its value is &#x27;value&#x27;</span></span><br><span class="line">driver.add_cookie(&#123;<span class="string">&#x27;name&#x27;</span>:<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;value&#x27;</span>:<span class="string">&#x27;value&#x27;</span>, <span class="string">&#x27;path&#x27;</span>:<span class="string">&#x27;/&#x27;</span>&#125;)</span><br><span class="line"><span class="comment"># additional keys that can be passed in are:</span></span><br><span class="line"><span class="comment"># &#x27;domain&#x27; -&gt; String,</span></span><br><span class="line"><span class="comment"># &#x27;secure&#x27; -&gt; Boolean,</span></span><br><span class="line"><span class="comment"># &#x27;expiry&#x27; -&gt; Milliseconds since the Epoch it should expire.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># And now output all the available cookies for the current URL</span></span><br><span class="line"><span class="keyword">for</span> cookie <span class="keyword">in</span> driver.get_cookies():</span><br><span class="line">    <span class="keyword">print</span> <span class="string">&quot;%s -&gt; %s&quot;</span> % (cookie[<span class="string">&#x27;name&#x27;</span>], cookie[<span class="string">&#x27;value&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># You can delete cookies in 2 ways</span></span><br><span class="line"><span class="comment"># By name</span></span><br><span class="line">driver.delete_cookie(<span class="string">&quot;CookieName&quot;</span>)</span><br><span class="line"><span class="comment"># Or all of them</span></span><br><span class="line">driver.delete_all_cookies()</span><br></pre></td></tr></table></figure><h3 id="ä»£ç†"><a href="#ä»£ç†" class="headerlink" title="ä»£ç†"></a>ä»£ç†</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">profile = webdriver.FirefoxProfile()</span><br><span class="line">profile.set_preference(<span class="string">&quot;general.useragent.override&quot;</span>, <span class="string">&quot;some UA string&quot;</span>)</span><br><span class="line">driver = webdriver.Firefox(profile)</span><br></pre></td></tr></table></figure><h1 id="æ‹–æ”¾"><a href="#æ‹–æ”¾" class="headerlink" title="æ‹–æ”¾"></a>æ‹–æ”¾</h1><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver.common.action_chains <span class="keyword">import</span> ActionChains</span><br><span class="line"><span class="comment"># è¦æ‹–æ‹½(drag)çš„å…ƒç´ </span></span><br><span class="line">element = driver.find_element_by_name(<span class="string">&quot;source&quot;</span>)</span><br><span class="line"><span class="comment"># è¦é‡Šæ”¾ä½ç½®çš„ç›®æ ‡å…ƒç´ </span></span><br><span class="line">target =  driver.find_element_by_name(<span class="string">&quot;target&quot;</span>)</span><br><span class="line"><span class="comment"># æ‹–æ‹½elementå…ƒç´ è‡³targetå…ƒç´ æ‰€åœ¨çš„ä½ç½®</span></span><br><span class="line">ActionChains(driver).drag_and_drop(element, target).perform()</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å†™çš„æœ€è®¤çœŸçš„ä¸œè¥¿,ç°åœ¨å…¶å®æƒ³åˆ æ‰äº†å‘µå‘µ&lt;br&gt;
    
    </summary>
    
      <category term="selenium" scheme="https://hisashiburidane.github.io/categories/selenium/"/>
    
    
  </entry>
  
  <entry>
    <title>Yield</title>
    <link href="https://hisashiburidane.github.io//python/yield/2017/06/01/yield/"/>
    <id>https://hisashiburidane.github.io//python/yield/2017/06/01/yield/</id>
    <published>2017-06-01T11:22:18.000Z</published>
    <updated>2018-09-08T09:20:09.772Z</updated>
    
    <content type="html"><![CDATA[<p>yieldè¿™ä¸ªå…³é”®å­—æ˜¯ä¹‹å‰çœ‹çˆ¬è™«æ¡†æ¶çš„æ—¶å€™demoé‡Œé¢ç”¨åˆ°è¿‡çš„,å½“æ—¶å¿ƒæƒ…ä¹Ÿä¸å¥½,æ²¡å¿ƒæ€ç¢ç£¨,ä»Šå¤©çªç„¶çœ‹åˆ°ä¸€ç¯‡è¿˜ä¸é”™çš„æ–‡ç« ,æ„Ÿè§‰è®²çš„å¤Ÿæ¸…æ¥š,åšä¸ªç¬”è®°<br><span class="exturl" data-url="aHR0cHM6Ly93d3cuaWJtLmNvbS9kZXZlbG9wZXJ3b3Jrcy9jbi9vcGVuc291cmNlL29zLWNuLXB5dGhvbi15aWVsZC8=" title="https://www.ibm.com/developerworks/cn/opensource/os-cn-python-yield/">å‚è€ƒé“¾æ¥<i class="fa fa-external-link"></i></span><br><a id="more"></a><br>æŒ‰ç…§æˆ‘ç°åœ¨çš„ç†è§£,yieldçš„ä½œç”¨å°±æ˜¯è¿”å›ä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡,ç”¨ä¾‹å­çœ‹ä¸€ä¸‹å§</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">feb</span>(<span class="params">max</span>):</span></span><br><span class="line">    n,a,b=<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> n&lt;max:</span><br><span class="line">        <span class="keyword">yield</span> b</span><br><span class="line">        a,b=b,a+b</span><br><span class="line">        n+=<span class="number">1</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªç”Ÿæˆæ–æ³¢é‚£å¥‘æ•°åˆ—çš„æ–¹æ³•äº†,è°ƒç”¨æ–¹æ³•å°±è·Ÿrangeä¸€æ ·</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = feb(<span class="number">20</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> x:</span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure><figure class="highlight angelscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="number">5</span></span><br><span class="line"><span class="number">8</span></span><br><span class="line"><span class="number">13</span></span><br><span class="line"><span class="number">21</span></span><br><span class="line"><span class="number">34</span></span><br><span class="line"><span class="number">55</span></span><br><span class="line"><span class="number">89</span></span><br><span class="line"><span class="number">144</span></span><br><span class="line"><span class="number">233</span></span><br><span class="line"><span class="number">377</span></span><br><span class="line"><span class="number">610</span></span><br><span class="line"><span class="number">987</span></span><br><span class="line"><span class="number">1597</span></span><br><span class="line"><span class="number">2584</span></span><br><span class="line"><span class="number">4181</span></span><br><span class="line"><span class="number">6765</span></span><br></pre></td></tr></table></figure><p>ç®€å•åœ°è®²ï¼Œyield çš„ä½œç”¨å°±æ˜¯æŠŠä¸€ä¸ªå‡½æ•°å˜æˆä¸€ä¸ª generatorï¼Œå¸¦æœ‰ yield çš„å‡½æ•°ä¸å†æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼ŒPython è§£é‡Šå™¨ä¼šå°†å…¶è§†ä¸ºä¸€ä¸ª generatorï¼Œè°ƒç”¨ fab(5) ä¸ä¼šæ‰§è¡Œ fab å‡½æ•°ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ª iterable å¯¹è±¡ï¼åœ¨ for å¾ªç¯æ‰§è¡Œæ—¶ï¼Œæ¯æ¬¡å¾ªç¯éƒ½ä¼šæ‰§è¡Œ fab å‡½æ•°å†…éƒ¨çš„ä»£ç ï¼Œæ‰§è¡Œåˆ° yield b æ—¶ï¼Œfab å‡½æ•°å°±è¿”å›ä¸€ä¸ªè¿­ä»£å€¼ï¼Œä¸‹æ¬¡è¿­ä»£æ—¶ï¼Œä»£ç ä» yield b çš„ä¸‹ä¸€æ¡è¯­å¥ç»§ç»­æ‰§è¡Œï¼Œè€Œå‡½æ•°çš„æœ¬åœ°å˜é‡çœ‹èµ·æ¥å’Œä¸Šæ¬¡ä¸­æ–­æ‰§è¡Œå‰æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œäºæ˜¯å‡½æ•°ç»§ç»­æ‰§è¡Œï¼Œç›´åˆ°å†æ¬¡é‡åˆ° yieldã€‚</p><p>ä¸€ä¸ªå¸¦æœ‰ yield çš„å‡½æ•°å°±æ˜¯ä¸€ä¸ª generatorï¼Œå®ƒå’Œæ™®é€šå‡½æ•°ä¸åŒï¼Œç”Ÿæˆä¸€ä¸ª generator çœ‹èµ·æ¥åƒå‡½æ•°è°ƒç”¨ï¼Œä½†ä¸ä¼šæ‰§è¡Œä»»ä½•å‡½æ•°ä»£ç ï¼Œç›´åˆ°å¯¹å…¶è°ƒç”¨ next()ï¼ˆåœ¨ for å¾ªç¯ä¸­ä¼šè‡ªåŠ¨è°ƒç”¨ next()ï¼‰æ‰å¼€å§‹æ‰§è¡Œã€‚è™½ç„¶æ‰§è¡Œæµç¨‹ä»æŒ‰å‡½æ•°çš„æµç¨‹æ‰§è¡Œï¼Œä½†æ¯æ‰§è¡Œåˆ°ä¸€ä¸ª yield è¯­å¥å°±ä¼šä¸­æ–­ï¼Œå¹¶è¿”å›ä¸€ä¸ªè¿­ä»£å€¼ï¼Œä¸‹æ¬¡æ‰§è¡Œæ—¶ä» yield çš„ä¸‹ä¸€ä¸ªè¯­å¥ç»§ç»­æ‰§è¡Œã€‚çœ‹èµ·æ¥å°±å¥½åƒä¸€ä¸ªå‡½æ•°åœ¨æ­£å¸¸æ‰§è¡Œçš„è¿‡ç¨‹ä¸­è¢« yield ä¸­æ–­äº†æ•°æ¬¡ï¼Œæ¯æ¬¡ä¸­æ–­éƒ½ä¼šé€šè¿‡ yield è¿”å›å½“å‰çš„è¿­ä»£å€¼ã€‚</p><p>è¯•äº†ä¸€ä¸‹ä¸‹é¢ä¸€æ®µä»£ç </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">h</span>():</span></span><br><span class="line">    print(<span class="string">&#x27;wenchuan&#x27;</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">5</span></span><br><span class="line">    print(<span class="string">&#x27;fighting&#x27;</span>)</span><br><span class="line">c=h()</span><br><span class="line">c.__next__()</span><br><span class="line"><span class="comment"># &gt;&gt;&gt; c.__next__()</span></span><br><span class="line"><span class="comment"># webchuan</span></span><br><span class="line"><span class="comment"># 5</span></span><br><span class="line"><span class="comment"># &gt;&gt;&gt; c.__next__()</span></span><br><span class="line"><span class="comment"># fighting</span></span><br><span class="line"><span class="comment"># Traceback (most recent call last):</span></span><br><span class="line"><span class="comment">#   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span></span><br><span class="line"><span class="comment"># StopIteration</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥æ¸…æ™°çš„çœ‹åˆ°,æ‰§è¡Œç¬¬ä¸€æ¬¡next()æ–¹æ³•æ—¶,åˆ°yieldå°±åœæ­¢äº†,ç›´åˆ°å†æ¬¡è°ƒç”¨next(),æ‰“å°å‡ºäº†fightingè¿™ä¸ªå•è¯,ç„¶åæŠ›å‡ºäº†è¿­ä»£ç»“æŸçš„å¼‚å¸¸<br>è¿˜æœ‰ä¸ªsend,æ…¢æ…¢æ¶ˆåŒ–,ç­‰æˆ‘æŠŠseleniumå†™å®Œå†å›æ¥è¡¥â€¦</p><p>x.send()çš„ä½œç”¨æ˜¯ä¼ é€’ä¸€ä¸ªå€¼ç»™generator,å¯ä»¥æ ¹æ®å€¼æ”¹å˜è¿­ä»£å™¨çš„çŠ¶æ€</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">h</span>(<span class="params">max</span>):</span></span><br><span class="line">    n=<span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> n&lt;max:</span><br><span class="line">        x=(<span class="keyword">yield</span> n)</span><br><span class="line">        <span class="keyword">if</span> x <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            n=x</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            n+=<span class="number">1</span></span><br><span class="line">            </span><br><span class="line">x=h(<span class="number">1000</span>)</span><br><span class="line">x.__next__()</span><br><span class="line"><span class="number">0</span></span><br><span class="line">x.__next__()</span><br><span class="line"><span class="number">1</span></span><br><span class="line">......</span><br><span class="line">x.__next__()</span><br><span class="line"><span class="number">100</span></span><br><span class="line">x.send(<span class="number">500</span>)</span><br><span class="line"><span class="number">500</span></span><br><span class="line">x.__next__()</span><br><span class="line"><span class="number">501</span></span><br></pre></td></tr></table></figure><p>åŸºæœ¬ææ¸…æ¥šè¿™ä¸ªä¸œè¥¿æ€ä¹ˆç”¨äº†,ä¸‹ä¸€èŠ‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;yieldè¿™ä¸ªå…³é”®å­—æ˜¯ä¹‹å‰çœ‹çˆ¬è™«æ¡†æ¶çš„æ—¶å€™demoé‡Œé¢ç”¨åˆ°è¿‡çš„,å½“æ—¶å¿ƒæƒ…ä¹Ÿä¸å¥½,æ²¡å¿ƒæ€ç¢ç£¨,ä»Šå¤©çªç„¶çœ‹åˆ°ä¸€ç¯‡è¿˜ä¸é”™çš„æ–‡ç« ,æ„Ÿè§‰è®²çš„å¤Ÿæ¸…æ¥š,åšä¸ªç¬”è®°&lt;br&gt;&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly93d3cuaWJtLmNvbS9kZXZlbG9wZXJ3b3Jrcy9jbi9vcGVuc291cmNlL29zLWNuLXB5dGhvbi15aWVsZC8=&quot; title=&quot;https://www.ibm.com/developerworks/cn/opensource/os-cn-python-yield/&quot;&gt;å‚è€ƒé“¾æ¥&lt;i class=&quot;fa fa-external-link&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;br&gt;
    
    </summary>
    
      <category term="python" scheme="https://hisashiburidane.github.io/categories/python/"/>
    
      <category term="yield" scheme="https://hisashiburidane.github.io/categories/python/yield/"/>
    
    
  </entry>
  
  <entry>
    <title>Keras</title>
    <link href="https://hisashiburidane.github.io//%E7%AC%94%E8%AE%B0/keras/2017/05/16/keras/"/>
    <id>https://hisashiburidane.github.io//ç¬”è®°/keras/2017/05/16/keras/</id>
    <published>2017-05-15T17:11:51.000Z</published>
    <updated>2018-12-09T06:59:15.675Z</updated>
    
    <content type="html"><![CDATA[<p>å…¬å¸è¦åšä¸€ä¸ªç®€å•çš„æœºå™¨å­¦ä¹ é¡¹ç›®,ç”¨æ¥é¢„æµ‹ä¸€äº›æˆ‘ä»¬æ— æ³•ç”¨å› æœå…³ç³»æ¨å¯¼å‡ºæ¥çš„å…³ç³»<br>ç®€å•çœ‹äº†çœ‹æœºå™¨å­¦ä¹ çš„ä¸€äº›ç›¸å…³çŸ¥è¯†,æ•°å­¦ä¸å¥½,ç†è§£ä¸æ·±,å…ˆå­¦å­¦æ¡†æ¶æ€ä¹ˆç”¨å§,æ•°å­¦çš„äº‹æƒ…,ä¹Ÿåªå¥½æ…¢æ…¢æ¥äº†<br>/(ã„’oã„’)/~~<br><a id="more"></a><br>å…¶å®ä¹‹å‰å·²ç»ç¨å¾®åšäº†ä¸€ç‚¹,ä½†æ˜¯æ˜¯ç”ŸæŠ„çš„ä»£ç <br>ç°åœ¨éœ€è¦æŠŠè®­ç»ƒæ¨¡å‹ç¨å¾®æ”¹ä¸€ä¸‹,æ•°æ®ä»åŸæ¥çš„0/1å˜æˆäº†ä¸€ä¸ªä¸€ç»´æ•°ç»„,æ­£å¥½ç»“åˆä¹‹å‰æŠ„çš„ä»£ç ç†è§£ä¸€ä¸‹kerasçš„ç”¨æ³•<br>kerasçš„ä½¿ç”¨æ–¹æ³•å¤§æ¦‚å°±æ˜¯ä¸‹é¢è¿™ä¸€æ®µä»£ç ,å»ºç«‹æ¨¡å‹,ç„¶åå¸¦å…¥æ•°æ®,models.fit(â€¦.)ç®—å°±å¥½äº†<br>å…³äºæ·±åº¦å­¦ä¹ ,çœŸæœ‰èƒ½åŠ›ä»åŸå§‹çš„æ•°å­¦åŸç†å¼€å§‹æ¨å¯¼è‚¯å®šæ˜¯æœ€å¥½çš„<br>åƒæˆ‘è¿™ç§èœé¸¡,å¼ºçƒˆæ¨èå…ˆæŠŠç©ä¸€ä¸‹Googleçš„<span class="exturl" data-url="aHR0cDovL3BsYXlncm91bmQudGVuc29yZmxvdy5vcmcv" title="http://playground.tensorflow.org/">TensorFlowPlayground<i class="fa fa-external-link"></i></span>è¿™ä¸ªé¡¹ç›®</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> Sequential</span><br><span class="line"><span class="keyword">from</span> keras.layers <span class="keyword">import</span> Dense,Activation</span><br><span class="line"><span class="comment"># For a single-input model with 2 classes (binary classification):</span></span><br><span class="line">model = Sequential()</span><br><span class="line">model.add(Dense(<span class="number">32</span>, activation=<span class="string">&#x27;relu&#x27;</span>, input_dim=<span class="number">100</span>))</span><br><span class="line">model.add(Dense(<span class="number">1</span>, activation=<span class="string">&#x27;sigmoid&#x27;</span>))</span><br><span class="line">model.compile(optimizer=<span class="string">&#x27;rmsprop&#x27;</span>,</span><br><span class="line">              loss=<span class="string">&#x27;binary_crossentropy&#x27;</span>,</span><br><span class="line">              metrics=[<span class="string">&#x27;accuracy&#x27;</span>])</span><br><span class="line"><span class="comment"># Generate dummy data</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">data = np.random.random((<span class="number">1000</span>, <span class="number">100</span>))</span><br><span class="line">labels = np.random.randint(<span class="number">2</span>, size=(<span class="number">1000</span>, <span class="number">1</span>))</span><br><span class="line"><span class="comment"># Train the model, iterating on the data in batches of 32 samples</span></span><br><span class="line">model.fit(data, labels, epochs=<span class="number">10</span>, batch_size=<span class="number">32</span>)</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç å…¶å®å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„è®­ç»ƒæ¨¡å‹äº†,å†ç•¥å¾®æ€è€ƒæ€è€ƒå§,ä»Šå¤©å…ˆç®€å•å†™åˆ°è¿™é‡Œ.<br>å¥½ä¹…æ²¡æœ‰æ›´æ–°åšå®¢,å…¶å®ä¹Ÿæ²¡å¤ªå¤šè¥å…»,æ…¢æ…¢ç§¯ç´¯å§,è¯´ä¸å®šå“ªä¸€å¤©ä¹Ÿæœ‰äººèƒ½é¡ºç€æˆ‘çš„æ–‡ç« å’Œæ€è·¯è§£å†³ä¸€äº›å…¥é—¨çš„é—®é¢˜å‘¢?</p><p>è¿™é‡Œè®°å½•ä¸€ä¸ªåœ°å€<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2xha3NoYXlnL3RlbnNvcmZsb3ctYnVpbGQ=" title="https://github.com/lakshayg/tensorflow-build">tensorflow-build<i class="fa fa-external-link"></i></span>,æœ‰ç¼–è¯‘åçš„TensorFlowåŒ…,æ®è¯´æ˜¯å¯ä»¥æé€Ÿ,ç”¨äºç”Ÿäº§ç¯å¢ƒ,ä¸è¿‡æˆ‘åœ¨è‡ªå·±ç”µè„‘ä¸Šæµ‹è¯•çš„æ€§èƒ½ä¹Ÿæ˜¯æœ‰é™â€¦</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å…¬å¸è¦åšä¸€ä¸ªç®€å•çš„æœºå™¨å­¦ä¹ é¡¹ç›®,ç”¨æ¥é¢„æµ‹ä¸€äº›æˆ‘ä»¬æ— æ³•ç”¨å› æœå…³ç³»æ¨å¯¼å‡ºæ¥çš„å…³ç³»&lt;br&gt;ç®€å•çœ‹äº†çœ‹æœºå™¨å­¦ä¹ çš„ä¸€äº›ç›¸å…³çŸ¥è¯†,æ•°å­¦ä¸å¥½,ç†è§£ä¸æ·±,å…ˆå­¦å­¦æ¡†æ¶æ€ä¹ˆç”¨å§,æ•°å­¦çš„äº‹æƒ…,ä¹Ÿåªå¥½æ…¢æ…¢æ¥äº†&lt;br&gt;/(ã„’oã„’)/~~&lt;br&gt;
    
    </summary>
    
      <category term="ç¬”è®°" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/"/>
    
      <category term="keras" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/keras/"/>
    
    
      <category term="keras" scheme="https://hisashiburidane.github.io/tags/keras/"/>
    
  </entry>
  
  <entry>
    <title>Docker(1-3)</title>
    <link href="https://hisashiburidane.github.io//%E7%AC%94%E8%AE%B0/docker/2017/04/30/docker-1-3/"/>
    <id>https://hisashiburidane.github.io//ç¬”è®°/docker/2017/04/30/docker-1-3/</id>
    <published>2017-04-30T08:05:21.000Z</published>
    <updated>2020-09-20T05:09:37.169Z</updated>
    
    <content type="html"><![CDATA[<p>æŠ½ç©ºçœ‹ä¸€ä¸‹<span class="exturl" data-url="aHR0cHM6Ly93d3cuZG9ja2VyLmNvbS8=" title="https://www.docker.com/">Docker<i class="fa fa-external-link"></i></span><br><a id="more"></a></p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h3 id="CentOS"><a href="#CentOS" class="headerlink" title="CentOS"></a>CentOS</h3><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#</span></span><br><span class="line">$ sudo yum install -y yum-utils</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">$ sudo yum-config-manager \</span><br><span class="line">    --add-repo \</span><br><span class="line">    https://download.docker.com/linux/centos/docker-ce.repo</span><br><span class="line"><span class="comment"># å®‰è£…ç›¸å…³å·¥å…·</span></span><br><span class="line">$ sudo yum install docker-ce docker-ce-cli containerd.io</span><br><span class="line"><span class="comment"># å¯åŠ¨dockeræœåŠ¡</span></span><br><span class="line">$ systemctl start docker</span><br></pre></td></tr></table></figure><h3 id="Ubuntu"><a href="#Ubuntu" class="headerlink" title="Ubuntu"></a>Ubuntu</h3><p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZ2V0LXN0YXJ0ZWQv" title="https://docs.docker.com/get-started/">å®˜æ–¹æ–‡æ¡£<i class="fa fa-external-link"></i></span></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get -y install \</span><br><span class="line">  apt-transport-https \</span><br><span class="line">  ca-certificates \</span><br><span class="line">  curl</span><br><span class="line"></span><br><span class="line">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><br><span class="line"></span><br><span class="line">sudo add-apt-repository \</span><br><span class="line">       <span class="string">&quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span></span><br><span class="line"><span class="string">       <span class="subst">$(lsb_release -cs)</span> \</span></span><br><span class="line"><span class="string">       stable&quot;</span></span><br><span class="line"></span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get -y install docker-ce</span><br></pre></td></tr></table></figure><p>HelloWorld<br>ç½‘ç»œåŸå› å¯èƒ½ä¼šæ‹‰ä¸åˆ°é•œåƒ,è¿™é‡Œå°±å¯ä»¥è€ƒè™‘<a href="#æ”¹ç”¨é•œåƒä»“åº“" title="æ”¹ç”¨é•œåƒä»“åº“">æ”¹é•œåƒä»“åº“</a>äº†</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker run hello-world</span><br><span class="line">Unable to find image <span class="string">&#x27;hello-world:latest&#x27;</span> locally</span><br><span class="line">latest: Pulling from library/hello-world</span><br><span class="line">78445dd45222: Pull complete </span><br><span class="line">Digest: sha256:c5515758d4c5e1e838e9cd307f6c6a0d620b5e07e6f927b07d05f6d12a1ac8d7</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> hello-world:latest</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">To generate this message, Docker took the following steps:</span><br><span class="line"> 1. The Docker client contacted the Docker daemon.</span><br><span class="line"> 2. The Docker daemon pulled the <span class="string">&quot;hello-world&quot;</span> image from the Docker Hub.</span><br><span class="line"> 3. The Docker daemon created a new container from that image <span class="built_in">which</span> runs the</span><br><span class="line">    executable that produces the output you are currently reading.</span><br><span class="line"> 4. The Docker daemon streamed that output to the Docker client, <span class="built_in">which</span> sent it</span><br><span class="line">    to your terminal.</span><br><span class="line"></span><br><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class="line"> $ docker run -it ubuntu bash</span><br><span class="line"></span><br><span class="line">Share images, automate workflows, and more with a free Docker ID:</span><br><span class="line"> https://cloud.docker.com/</span><br><span class="line"></span><br><span class="line">For more examples and ideas, visit:</span><br><span class="line"> https://docs.docker.com/engine/userguide/</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å…¶ä»–ç³»ç»Ÿå®‰è£…è¿‡ç¨‹å¤§å·®ä¸å·®å§</p><h2 id="å®¹å™¨"><a href="#å®¹å™¨" class="headerlink" title="å®¹å™¨"></a>å®¹å™¨</h2><p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZ2V0LXN0YXJ0ZWQvcGFydDIv" title="https://docs.docker.com/get-started/part2/">å®˜æ–¹æ–‡æ¡£<i class="fa fa-external-link"></i></span></p><h3 id="é…ç½®ç¯å¢ƒ"><a href="#é…ç½®ç¯å¢ƒ" class="headerlink" title="é…ç½®ç¯å¢ƒ"></a>é…ç½®ç¯å¢ƒ</h3><p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å­˜æ”¾ç›¸å…³çš„æ–‡ä»¶<br>é¦–å…ˆæ˜¯<code>Dockerfile</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Use an official Python runtime as a base image</span></span><br><span class="line">FROM python:2.7-slim</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set the working directory to /app</span></span><br><span class="line">WORKDIR /app</span><br><span class="line"></span><br><span class="line"><span class="comment"># Copy the current directory contents into the container at /app</span></span><br><span class="line">ADD . /app</span><br><span class="line"></span><br><span class="line"><span class="comment"># Install any needed packages specified in requirements.txt</span></span><br><span class="line">RUN pip install -r requirements.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># Make port 80 available to the world outside this container</span></span><br><span class="line">EXPOSE 80</span><br><span class="line"></span><br><span class="line"><span class="comment"># Define environment variable</span></span><br><span class="line">ENV NAME World</span><br><span class="line"></span><br><span class="line"><span class="comment"># Run app.py when the container launches</span></span><br><span class="line">CMD [<span class="string">&quot;python&quot;</span>, <span class="string">&quot;app.py&quot;</span>]</span><br></pre></td></tr></table></figure><blockquote><p>This Dockerfile refers to a couple of things we havenâ€™t created yet, namely app.py and requirements.txt. Letâ€™s get those in place next.</p></blockquote><p>ç„¶åæ˜¯<code>requirements.txt</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Flask</span><br><span class="line">Redis</span><br></pre></td></tr></table></figure><p>æœ€åæ˜¯<code>app.py</code></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> redis <span class="keyword">import</span> Redis, RedisError</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="comment"># Connect to Redis</span></span><br><span class="line">redis = Redis(host=<span class="string">&quot;redis&quot;</span>, db=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(&quot;/&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span>():</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        visits = redis.incr(<span class="string">&#x27;counter&#x27;</span>)</span><br><span class="line">    <span class="keyword">except</span> RedisError:</span><br><span class="line">        visits = <span class="string">&quot;&lt;i&gt;cannot connect to Redis, counter disabled&lt;/i&gt;&quot;</span></span><br><span class="line"></span><br><span class="line">    html = <span class="string">&quot;&lt;h3&gt;Hello &#123;name&#125;!&lt;/h3&gt;&quot;</span> \</span><br><span class="line">           <span class="string">&quot;&lt;b&gt;Hostname:&lt;/b&gt; &#123;hostname&#125;&lt;br/&gt;&quot;</span> \</span><br><span class="line">           <span class="string">&quot;&lt;b&gt;Visits:&lt;/b&gt; &#123;visits&#125;&quot;</span></span><br><span class="line">    <span class="keyword">return</span> html.format(name=os.getenv(<span class="string">&#x27;NAME&#x27;</span>, <span class="string">&quot;world&quot;</span>), hostname=socket.gethostname(), visits=visits)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    app.run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>, port=<span class="number">80</span>)</span><br></pre></td></tr></table></figure><h3 id="æ”¹ç”¨é•œåƒä»“åº“"><a href="#æ”¹ç”¨é•œåƒä»“åº“" class="headerlink" title="æ”¹ç”¨é•œåƒä»“åº“"></a>æ”¹ç”¨é•œåƒä»“åº“</h3><p>å®˜æ–¹çš„ä»“åº“åœ°å€æ˜¯åœ¨æ˜¯å¤ªå¡å¤ªå¡å¤ªå¡äº†,è€Œä¸”å¾ˆå®¹æ˜“æ–­å¼€,è‡ªå·±æ³¨å†Œäº†ä¸€ä¸ªé˜¿é‡Œçš„,é€Ÿåº¦ä¸å¾ˆå¿«ä½†æ˜¯è¿˜ç®—ç¨³å®š<br>è¿™é‡Œæ˜¯<span class="exturl" data-url="aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMjYwOTEyNzEvYXJ0aWNsZS9kZXRhaWxzLzUxNTAxNzY4" title="http://blog.csdn.net/qq_26091271/article/details/51501768">å‚è€ƒæ–‡ç« <i class="fa fa-external-link"></i></span></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ vi /etc/default/docker</span><br><span class="line">DOCKER_OPTS=<span class="string">&quot;--registry-mirror=http://registry.cn-hangzhou.aliyuncs.com/sayonara/private&quot;</span></span><br><span class="line"><span class="comment"># é‡å¯æœåŠ¡ä½¿é…ç½®ç”Ÿæ•ˆ</span></span><br><span class="line">$ service docker restart</span><br></pre></td></tr></table></figure><h3 id="build"><a href="#build" class="headerlink" title="build"></a>build</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ ls</span><br><span class="line">Dockerfile app.py requirements.txt</span><br><span class="line"><span class="comment"># åé¢æœ‰ä¸ªç‚¹,åº”è¯¥æ˜¯å½“å‰è·¯å¾„çš„æ„æ€</span></span><br><span class="line">$ docker build -t friendlyhello .</span><br><span class="line">$ docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">friendlyhello       latest              8b3b8bb5ae50        20 seconds ago      194 MB</span><br><span class="line">python              2.7-slim            7fd4e5a52ace        3 days ago          182 MB</span><br><span class="line">hello-world         latest              48b5124b2768        3 months ago        1.84 kB</span><br></pre></td></tr></table></figure><h3 id="Run-the-app"><a href="#Run-the-app" class="headerlink" title="Run the app"></a>Run the app</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨å®¹å™¨å†…å¯åŠ¨åº”ç”¨,å¹¶ä¸”å°†åœ°å€æ˜ å°„åˆ°å¤–éƒ¨çš„4000ç«¯å£</span></span><br><span class="line"><span class="comment"># è¿™é‡Œåº”ç”¨èµ·æ¥äº†æ²¡é—®é¢˜,ä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆè®¿é—®ä¸€ç›´ä¸æ­£å¸¸,å¥½åƒredisæœ‰ç‚¹é—®é¢˜</span></span><br><span class="line">$ docker run -p 4000:80 friendlyhello</span><br><span class="line"> * Running on http://0.0.0.0:80/ (Press CTRL+C to quit)</span><br><span class="line"><span class="comment"># æŸ¥çœ‹å¯åŠ¨çš„dockeråº”ç”¨</span></span><br><span class="line">$ docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                  NAMES</span><br><span class="line">d7c99c812184        friendlyhello       <span class="string">&quot;python app.py&quot;</span>     2 minutes ago       Up 2 minutes        0.0.0.0:4000-&gt;80/tcp   kind_bose</span><br><span class="line"><span class="comment"># åœæ­¢åº”ç”¨</span></span><br><span class="line">$ docker stop d7c99c812184</span><br></pre></td></tr></table></figure><h3 id="å‘å¸ƒå®¹å™¨"><a href="#å‘å¸ƒå®¹å™¨" class="headerlink" title="å‘å¸ƒå®¹å™¨"></a>å‘å¸ƒå®¹å™¨</h3><p>è¿™ä¸ªå°±ç±»ä¼¼npmå’Œbowerçš„å‘å¸ƒäº†,ç§æœ‰åº“çš„è¯æ–‡æ¡£æŒ‡å‘<span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZGF0YWNlbnRlci9kdHIvMi4yL2d1aWRlcy8=" title="https://docs.docker.com/datacenter/dtr/2.2/guides/">Docker Trusted Registry<i class="fa fa-external-link"></i></span>,ç”¨åˆ°äº†å†çœ‹,æ‡’å¾—æ³¨å†Œè´¦å·äº†,å°±è®°å½•ä¸€ä¸‹å‘½ä»¤å§</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ docker login</span><br><span class="line"><span class="comment"># Login with your Docker ID to push and pull images from Docker Hub. If you don&#x27;t have a Docker ID, head over to https://hub.docker.com to create one.</span></span><br><span class="line">$ docker tag friendlyhello username/repository:tag</span><br><span class="line">$ docker push username/repository:tag</span><br><span class="line"><span class="comment"># è¿™é‡Œç±»ä¼¼ç¬¬ä¸€æ­¥docker run hello-world,ä»è¿œç¨‹ä»“åº“ç›´æ¥å¯åŠ¨å®¹å™¨</span></span><br><span class="line">$ docker run -p 4000:80 username/repository:tag</span><br></pre></td></tr></table></figure><h3 id="ç›¸å…³å‘½ä»¤"><a href="#ç›¸å…³å‘½ä»¤" class="headerlink" title="ç›¸å…³å‘½ä»¤"></a>ç›¸å…³å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">docker build -t friendlyname .  <span class="comment"># Create image using this directory&#x27;s Dockerfile</span></span><br><span class="line">docker run -p 4000:80 friendlyname  <span class="comment"># Run &quot;friendlyname&quot; mapping port 4000 to 80</span></span><br><span class="line">docker run -d -p 4000:80 friendlyname         <span class="comment"># Same thing, but in detached mode</span></span><br><span class="line">docker ps                                 <span class="comment"># See a list of all running containers</span></span><br><span class="line">docker stop &lt;<span class="built_in">hash</span>&gt;                     <span class="comment"># Gracefully stop the specified container</span></span><br><span class="line">docker ps -a           <span class="comment"># See a list of all containers, even the ones not running</span></span><br><span class="line">docker <span class="built_in">kill</span> &lt;<span class="built_in">hash</span>&gt;                   <span class="comment"># Force shutdown of the specified container</span></span><br><span class="line">docker rm &lt;<span class="built_in">hash</span>&gt;              <span class="comment"># Remove the specified container from this machine</span></span><br><span class="line">docker rm $(docker ps -a -q)           <span class="comment"># Remove all containers from this machine</span></span><br><span class="line">docker images -a                               <span class="comment"># Show all images on this machine</span></span><br><span class="line">docker rmi &lt;imagename&gt;            <span class="comment"># Remove the specified image from this machine</span></span><br><span class="line">docker rmi $(docker images -q)             <span class="comment"># Remove all images from this machine</span></span><br><span class="line">docker login             <span class="comment"># Log in this CLI session using your Docker credentials</span></span><br><span class="line">docker tag &lt;image&gt; username/repository:tag  <span class="comment"># Tag &lt;image&gt; for upload to registry</span></span><br><span class="line">docker push username/repository:tag            <span class="comment"># Upload tagged image to registry</span></span><br><span class="line">docker run username/repository:tag                   <span class="comment"># Run image from a registry</span></span><br></pre></td></tr></table></figure><h2 id="æœåŠ¡"><a href="#æœåŠ¡" class="headerlink" title="æœåŠ¡"></a>æœåŠ¡</h2><p><span class="exturl" data-url="aHR0cHM6Ly9kb2NzLmRvY2tlci5jb20vZ2V0LXN0YXJ0ZWQvcGFydDMv" title="https://docs.docker.com/get-started/part3/">å®˜æ–¹æ–‡æ¡£<i class="fa fa-external-link"></i></span></p><blockquote><p>In a distributed application, different pieces of the app are called â€œservices.â€ For example, if you imagine a video sharing site, there will probably be a service for storing application data in a database, a service for video transcoding in the background after a user uploads something, a service for the front-end, and so on.</p></blockquote><blockquote><p>A service really just means, â€œcontainers in production.â€ A service only runs one image, but it codifies the way that image runs â€“ what ports it should use, how many replicas of the container should run so the service has the capacity it needs, and so on. Scaling a service changes the number of container instances running that piece of software, assigning more computing resources to the service in the process.</p></blockquote><blockquote><p>Luckily itâ€™s very easy to define, run, and scale services with the Docker platform â€“ just write a docker-compose.yml file.</p></blockquote><p>éƒ¨ç½²æœåŠ¡å¤§æ¦‚æ˜¯è¿™æ ·çš„è¿‡ç¨‹</p><ol><li>åˆ›å»ºä¸€ä¸ªå®¹å™¨</li><li>å¹¶ä¸”å‘å¸ƒå‡ºæ¥</li><li>é€šè¿‡<code>docker-compose.yml</code>é…ç½®æœåŠ¡</li><li>é€šè¿‡dockerè¿è¡Œ</li></ol><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&quot;3&quot;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">web:</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">username/repository:tag</span></span><br><span class="line">    <span class="attr">deploy:</span></span><br><span class="line">      <span class="attr">replicas:</span> <span class="number">5</span></span><br><span class="line">      <span class="attr">resources:</span></span><br><span class="line">        <span class="attr">limits:</span></span><br><span class="line">          <span class="attr">cpus:</span> <span class="string">&quot;0.1&quot;</span></span><br><span class="line">          <span class="attr">memory:</span> <span class="string">50M</span></span><br><span class="line">      <span class="attr">restart_policy:</span></span><br><span class="line">        <span class="attr">condition:</span> <span class="string">on-failure</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;80:80&quot;</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">webnet</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">webnet:</span></span><br></pre></td></tr></table></figure><p><code>docker-compose.yml</code>è¿™ä¸ªæ–‡ä»¶å‘Šè¯‰Dockeråšäº”ä»¶äº‹</p><ol><li>å¯åŠ¨äº”ä¸ªæŒ‡å®šçš„å®¹å™¨çº¿ç¨‹,å‘½åä¸º<code>web</code>,é™åˆ¶æ¯ä¸ªçº¿ç¨‹æœ€å¤šå ç”¨10%çš„CPUèµ„æºå’Œ50MBçš„å†…å­˜</li><li>æœåŠ¡æ•…éšœç«‹åˆ»é‡å¯</li><li>æ˜ å°„æœåŠ¡å™¨çš„80ç«¯å£åˆ°æœåŠ¡çš„80ç«¯å£</li><li>é€šè¿‡<code>webnet</code>è¿›è¡Œè´Ÿè½½å‡è¡¡,å®¹å™¨é€šè¿‡ä¸´æ—¶ç«¯å£(an ephemeral port)å°†è‡ªå·±å‘å¸ƒåˆ°<code>web</code>æœåŠ¡çš„80ç«¯å£</li><li>ä½¿ç”¨é»˜è®¤è®¾ç½®å®šä¹‰<code>webnet</code>(è´Ÿè½½å‡è¡¡ç½‘ç»œ)</li></ol><h3 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h3><p>ä½¿ç”¨<code>docker stack deploy</code>å‘½ä»¤ä¹‹å‰éœ€è¦å…ˆæ‰§è¡Œä¸‹åˆ—å‘½ä»¤,å¦åˆ™å°†æç¤º<code>this node is not a swarm manager</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ docker swarm init</span><br><span class="line"><span class="comment"># éƒ¨ç½²</span></span><br><span class="line">$ docker stack deploy -c docker-compose.yml getstartedlab</span><br><span class="line"><span class="comment"># æŸ¥çœ‹åŠ è½½çš„å®¹å™¨åˆ—è¡¨</span></span><br><span class="line">$ docker stack ps getstartedlab</span><br></pre></td></tr></table></figure><h3 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h3><p>ç›´æ¥ä¿®æ”¹<code>docker-compose.yml</code>æ–‡ä»¶,é‡æ–°éƒ¨ç½²æœåŠ¡,å³å¯æ‰©å±•åº”ç”¨çš„é…ç½®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Dockerä¼šè‡ªåŠ¨æ›´æ–°é…ç½®,ä¸éœ€è¦åœæ‰ç°æœ‰çš„æœåŠ¡</span></span><br><span class="line">$ docker stack deploy -c docker-compose.yml getstartedlab</span><br><span class="line"><span class="comment"># Take down the app</span></span><br><span class="line">$ docker stack rm getstartedlab</span><br></pre></td></tr></table></figure><h3 id="ç›¸å…³å‘½ä»¤-1"><a href="#ç›¸å…³å‘½ä»¤-1" class="headerlink" title="ç›¸å…³å‘½ä»¤"></a>ç›¸å…³å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker stack ls              <span class="comment"># List all running applications on this Docker host</span></span><br><span class="line">docker stack deploy -c &lt;composefile&gt; &lt;appname&gt;  <span class="comment"># Run the specified Compose file</span></span><br><span class="line">docker stack services &lt;appname&gt;       <span class="comment"># List the services associated with an app</span></span><br><span class="line">docker stack ps &lt;appname&gt;   <span class="comment"># List the running containers associated with an app</span></span><br><span class="line">docker stack rm &lt;appname&gt;                             <span class="comment"># Tear down an application</span></span><br></pre></td></tr></table></figure><p>å…ˆå†™åˆ°è¿™é‡Œ,é›†ç¾¤ä»€ä¹ˆçš„ç”¨åˆ°äº†å†è¯´â€¦æ„Ÿè§‰è¿™æ˜¯è¿ç»´çš„ä¸œè¥¿</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æŠ½ç©ºçœ‹ä¸€ä¸‹&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly93d3cuZG9ja2VyLmNvbS8=&quot; title=&quot;https://www.docker.com/&quot;&gt;Docker&lt;i class=&quot;fa fa-external-link&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;br&gt;
    
    </summary>
    
      <category term="ç¬”è®°" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/"/>
    
      <category term="docker" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/docker/"/>
    
    
      <category term="docker" scheme="https://hisashiburidane.github.io/tags/docker/"/>
    
  </entry>
  
  <entry>
    <title>å‘½ä»¤è¡Œä¸­æ‰“å¼€Vscode</title>
    <link href="https://hisashiburidane.github.io//%E7%AC%94%E8%AE%B0/%E5%91%BD%E4%BB%A4%E9%85%8D%E7%BD%AE/2017/04/28/%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%AD%E6%89%93%E5%BC%80vscode/"/>
    <id>https://hisashiburidane.github.io//ç¬”è®°/å‘½ä»¤é…ç½®/2017/04/28/å‘½ä»¤è¡Œä¸­æ‰“å¼€vscode/</id>
    <published>2017-04-27T17:11:42.000Z</published>
    <updated>2020-10-12T16:06:25.713Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸åœçš„æ•²å‘½ä»¤å…¶å®å¾ˆéº»çƒ¦,å°¤å…¶macä¸‹é¢çš„æ–‡ä»¶ç³»ç»Ÿä¸æ˜¯å¾ˆä¹ æƒ¯,æ¯æ¬¡ç”¨vscodeæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å¤¹æ—¶è¦æåŠå¤©,å¾ˆæ˜¯ä¸æ–¹ä¾¿<br>è¯•äº†ä¸€ä¸‹alias(åŒä¹‰è¯),æ„Ÿè§‰éå¸¸å¥½ç”¨</p><a id="more"></a><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®ç¯å¢ƒå˜é‡</span></span><br><span class="line">$ vim ~/.bash_profile</span><br><span class="line"><span class="comment"># æ·»åŠ å¦‚ä¸‹å†…å®¹</span></span><br><span class="line"><span class="comment"># vscæ‰“å¼€vscodeæ–‡ä»¶</span></span><br><span class="line"><span class="built_in">alias</span> vsc=<span class="string">&quot;&#x27;/Applications/Visual Studio Code.app/Contents/Resources/app/bin/code&#x27;&quot;</span></span><br><span class="line"><span class="comment"># å®šä¹‰vsc-hexoå‘½ä»¤,è¾“å…¥å³å¯æ‰“å¼€vscodeå¹¶ä¸”æ‰“å¼€hexoè·¯å¾„,å…¶ä»–æ–‡ä»¶é…ç½®ç›¸åŒ</span></span><br><span class="line"><span class="built_in">alias</span> vsc-hexo=<span class="string">&quot;vsc /Users/liudongmeng/Documents/GitHub/Hexo/&quot;</span></span><br></pre></td></tr></table></figure><p>åŒæ ·å¯ä»¥é…ç½®ä¸€äº›sshçš„åŒä¹‰è¯,ä¸ç”¨æ¯æ¬¡éƒ½ç”¨æˆ·å+ipè¾“åŠå¤©,æˆ‘åæ­£åˆ‡æ¢ä¸å¤ªè¿‡æ¥â€¦</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸åœçš„æ•²å‘½ä»¤å…¶å®å¾ˆéº»çƒ¦,å°¤å…¶macä¸‹é¢çš„æ–‡ä»¶ç³»ç»Ÿä¸æ˜¯å¾ˆä¹ æƒ¯,æ¯æ¬¡ç”¨vscodeæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å¤¹æ—¶è¦æåŠå¤©,å¾ˆæ˜¯ä¸æ–¹ä¾¿&lt;br&gt;è¯•äº†ä¸€ä¸‹alias(åŒä¹‰è¯),æ„Ÿè§‰éå¸¸å¥½ç”¨&lt;/p&gt;
    
    </summary>
    
      <category term="ç¬”è®°" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/"/>
    
      <category term="å‘½ä»¤é…ç½®" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/%E5%91%BD%E4%BB%A4%E9%85%8D%E7%BD%AE/"/>
    
    
  </entry>
  
  <entry>
    <title>2017-04-27</title>
    <link href="https://hisashiburidane.github.io//%E6%97%A5%E8%AE%B0/%E5%90%90%E6%A7%BD/2017/04/27/2017-04-27/"/>
    <id>https://hisashiburidane.github.io//æ—¥è®°/åæ§½/2017/04/27/2017-04-27/</id>
    <published>2017-04-27T15:59:16.000Z</published>
    <updated>2020-10-12T16:10:07.918Z</updated>
    
    <content type="html"><![CDATA[<p>æ™šä¸Šéšä¾¿çœ‹ç‚¹ä¸œè¥¿,å¿ƒæƒ…ä¸å¥½åƒåƒåƒ,æ”¶æ‹¾æ”¶æ‹¾,å°±å¢¨è¿¹åˆ°è¿™ä¸ªç‚¹äº†</p><a id="more"></a><p>è£…äº†ä¸ª VPN è¿åˆ°å…¬å¸,æ‰¾äº†ä¸ª remote desktop å·¥å…·å‡†å¤‡è¿œç¨‹åˆ°è‡ªå·±ç”µè„‘ä¸Šçœ‹çœ‹,ç„¶åå°±å‘ç°è‡ªå·±ç”µè„‘ ping ä¸é€šâ€¦<br>è²Œä¼¼æ˜¯ä¼‘çœ äº†å›§,è€ƒè™‘ä¸€ä¸‹äº”ä¸€è¦ä¸è¦å¼€ä¸€ä¸ªå‡æœŸ,ä¸è¿‡ 80 è¿˜æ˜¯èƒ½è¿ä¸Šçš„<br>ç°åœ¨ä¹Ÿæ²¡å¿ƒæƒ…å¤„ç†é‚£ä¸ª unixODBC çš„é—®é¢˜â€¦è¢« web æ•´çš„ä¸€å¤´åŒ…<br>ç£¨ç£¨å”§å”§åšäº†ä¸€å¤©,ç»“æœä¸‹ç­çš„æ—¶å€™å…¨éƒ½å›æ»šäº†.<br>æœ‰ç‚¹é€’å½’çš„ä¾èµ–å…³ç³»+å¼‚æ­¥/åŒæ­¥çš„æ§åˆ¶,çœŸæ˜¯ä¸ä¼šå•Šâ€¦çƒ¦çš„è¦æ­»<br>ä¸æ˜¯ä¸ç†è§£ä¸ºä»€ä¹ˆå¼‚æ­¥,å°±æ˜¯ä¸çŸ¥é“åœ¨ä¸ç¡®å®šæœ‰å¤šå°‘ä¸ª then çš„æƒ…å†µä¸‹æ€ä¹ˆå†™è¿™ä¸ªä»£ç â€¦<br>ç„¶åçˆ¬è™«æœ€è¿‘æ²¡çœ‹,NLP ä¹Ÿæ²¡çœ‹,ML ä¹Ÿæ²¡çœ‹,ç®—æ³•ä¹Ÿæ²¡çœ‹â€¦â€¦<br>å‡ ä¸ªç½‘ç«™ä»€ä¹ˆçš„å…ˆè®°ä¸‹æ¥å§,ä¸€å †ä¸€å †çš„ä¸œè¥¿,æ ¹æœ¬çœ‹ä¸è¿‡æ¥ ğŸ˜”<br><span class="exturl" data-url="aHR0cHM6Ly93d3cuY291cnNlcmEub3JnLw==" title="https://www.coursera.org/">Coursera|OnlineCoursesFromTopUniversities.JoinforFree<i class="fa fa-external-link"></i></span><br><span class="exturl" data-url="aHR0cHM6Ly93d3cuY291cnNlcmEub3JnL2xlYXJuL21hY2hpbmUtbGVhcm5pbmc=" title="https://www.coursera.org/learn/machine-learning">MachineLearning-StanfordUniversity|Coursera<i class="fa fa-external-link"></i></span><br><span class="exturl" data-url="aHR0cHM6Ly93d3cudGVkLmNvbQ==" title="https://www.ted.com">TED:Ideasworthspreading<i class="fa fa-external-link"></i></span><br><span class="exturl" data-url="aHR0cDovL3d3dy5jc2llLm50dS5lZHUudHcvfmh0bGluL21vb2Mv" title="http://www.csie.ntu.edu.tw/~htlin/mooc/">mooc<i class="fa fa-external-link"></i></span><br>æ‹¿äº†ä¸¤æœ¬ä¹¦å›æ¥å«æ•å¤´<br>å¿ƒæƒ…å¾ˆç³Ÿ,å¾ˆä½è½,å¾ˆå¤±è½,æœ‰ç‚¹æš´èº,æœ‰ç‚¹ç‹‚èº<br>æ—¥å¤ä¸€æ—¥</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æ™šä¸Šéšä¾¿çœ‹ç‚¹ä¸œè¥¿,å¿ƒæƒ…ä¸å¥½åƒåƒåƒ,æ”¶æ‹¾æ”¶æ‹¾,å°±å¢¨è¿¹åˆ°è¿™ä¸ªç‚¹äº†&lt;/p&gt;
    
    </summary>
    
      <category term="æ—¥è®°" scheme="https://hisashiburidane.github.io/categories/%E6%97%A5%E8%AE%B0/"/>
    
      <category term="åæ§½" scheme="https://hisashiburidane.github.io/categories/%E6%97%A5%E8%AE%B0/%E5%90%90%E6%A7%BD/"/>
    
    
  </entry>
  
  <entry>
    <title>NLTK-è‡ªåŠ¨åŒ–è¯­ä¹‰æ ‡æ³¨</title>
    <link href="https://hisashiburidane.github.io//%E7%AC%94%E8%AE%B0/NLTK/2017/04/17/NLTK-%E8%87%AA%E5%8A%A8%E5%8C%96%E8%AF%AD%E4%B9%89%E6%A0%87%E6%B3%A8/"/>
    <id>https://hisashiburidane.github.io//ç¬”è®°/NLTK/2017/04/17/NLTK-è‡ªåŠ¨åŒ–è¯­ä¹‰æ ‡æ³¨/</id>
    <published>2017-04-17T14:05:09.000Z</published>
    <updated>2018-09-08T09:20:09.758Z</updated>
    
    <content type="html"><![CDATA[<p>ç®€å•çœ‹äº†ä¸€ä¸‹ç¬¬å››ç« ,æ²¡çœ‹å¤ªæ‡‚,è¾¹å†™è¾¹åšç†è§£ç†è§£çœ‹<br><a id="more"></a></p><h1 id="è‹±æ–‡è¯å¹²æå–å™¨"><a href="#è‹±æ–‡è¯å¹²æå–å™¨" class="headerlink" title="è‹±æ–‡è¯å¹²æå–å™¨"></a>è‹±æ–‡è¯å¹²æå–å™¨</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> nltk</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>porter = nltk.PorterStemmer()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>porter.stem(<span class="string">&#x27;lying&#x27;</span>)</span><br><span class="line"><span class="string">u&#x27;lie&#x27;</span></span><br></pre></td></tr></table></figure><h1 id="è¯æ€§æ ‡æ³¨å™¨"><a href="#è¯æ€§æ ‡æ³¨å™¨" class="headerlink" title="è¯æ€§æ ‡æ³¨å™¨"></a>è¯æ€§æ ‡æ³¨å™¨</h1><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> nltk</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>text = nltk.word_tokenize(<span class="string">&quot;And now for something completely different&quot;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>nltk.pos_tag(text)</span><br><span class="line">[(<span class="string">&#x27;And&#x27;</span>, <span class="string">&#x27;CC&#x27;</span>), (<span class="string">&#x27;now&#x27;</span>, <span class="string">&#x27;RB&#x27;</span>), (<span class="string">&#x27;for&#x27;</span>, <span class="string">&#x27;IN&#x27;</span>), (<span class="string">&#x27;something&#x27;</span>, <span class="string">&#x27;NN&#x27;</span>), (<span class="string">&#x27;completely&#x27;</span>, <span class="string">&#x27;RB&#x27;</span>), (<span class="string">&#x27;different&#x27;</span>, <span class="string">&#x27;JJ&#x27;</span>)]</span><br></pre></td></tr></table></figure><p>å…¶ä¸­CCæ˜¯è¿æ¥è¯ï¼ŒRBæ˜¯å‰¯è¯ï¼ŒINæ˜¯ä»‹è¯ï¼ŒNNæ˜¯åæ¬¡ï¼ŒJJæ˜¯å½¢å®¹è¯<br>è¿™æ˜¯ä¸€å¥å®Œæ•´çš„è¯ï¼Œå®é™…ä¸Špos_tagæ˜¯å¤„ç†ä¸€ä¸ªè¯åºåˆ—ï¼Œä¼šæ ¹æ®å¥å­æ¥åŠ¨æ€åˆ¤æ–­ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>nltk.pos_tag([<span class="string">&#x27;i&#x27;</span>,<span class="string">&#x27;love&#x27;</span>,<span class="string">&#x27;you&#x27;</span>])`</span><br><span class="line">[(<span class="string">&#x27;i&#x27;</span>, <span class="string">&#x27;NN&#x27;</span>), (<span class="string">&#x27;love&#x27;</span>, <span class="string">&#x27;VBP&#x27;</span>), (<span class="string">&#x27;you&#x27;</span>, <span class="string">&#x27;PRP&#x27;</span>)]</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„loveè¯†åˆ«ä¸ºåŠ¨è¯<br>è€Œï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>nltk.pos_tag([<span class="string">&#x27;love&#x27;</span>,<span class="string">&#x27;and&#x27;</span>,<span class="string">&#x27;hate&#x27;</span>])</span><br><span class="line">[(<span class="string">&#x27;love&#x27;</span>, <span class="string">&#x27;NN&#x27;</span>), (<span class="string">&#x27;and&#x27;</span>, <span class="string">&#x27;CC&#x27;</span>), (<span class="string">&#x27;hate&#x27;</span>, <span class="string">&#x27;NN&#x27;</span>)]</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„loveè¯†åˆ«ä¸ºåè¯<br>nltkä¸­å¤šæ•°éƒ½æ˜¯è‹±æ–‡çš„è¯æ€§æ ‡æ³¨è¯­æ–™åº“ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è‡ªå·±æ ‡æ³¨ä¸€æ‰¹è¯­æ–™åº“è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ<br>nltkæä¾›äº†æ¯”è¾ƒæ–¹ä¾¿çš„æ–¹æ³•ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>tagged_token = nltk.tag.str2tuple(<span class="string">&#x27;fly/NN&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tagged_token</span><br><span class="line">(<span class="string">&#x27;fly&#x27;</span>, <span class="string">&#x27;NN&#x27;</span>)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„nltk.tag.str2tupleå¯ä»¥æŠŠfly/NNè¿™ç§å­—ç¬¦ä¸²è½¬æˆä¸€ä¸ªäºŒå…ƒç»„ï¼Œäº‹å®ä¸Šnltkçš„è¯­æ–™åº“ä¸­éƒ½æ˜¯è¿™ç§å­—ç¬¦ä¸²å½¢å¼çš„æ ‡æ³¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚æœæŠŠè¯­æ–™åº“æ ‡è®°æˆï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>sent=<span class="string">&#x27;æˆ‘/NN æ˜¯/IN ä¸€ä¸ª/AT å¤§/JJ å‚»é€¼/NN&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[nltk.tag.str2tuple(t) <span class="keyword">for</span> t <span class="keyword">in</span> sent.split()]</span><br><span class="line">[(<span class="string">&#x27;\xe6\x88\x91&#x27;</span>, <span class="string">&#x27;NN&#x27;</span>), (<span class="string">&#x27;\xe6\x98\xaf&#x27;</span>, <span class="string">&#x27;IN&#x27;</span>), (<span class="string">&#x27;\xe4\xb8\x80\xe4\xb8\xaa&#x27;</span>, <span class="string">&#x27;AT&#x27;</span>), (<span class="string">&#x27;\xe5\xa4\xa7&#x27;</span>, <span class="string">&#x27;JJ&#x27;</span>), (<span class="string">&#x27;\xe5\x82\xbb\xe9\x80\xbc&#x27;</span>, <span class="string">&#x27;NN&#x27;</span>)]</span><br></pre></td></tr></table></figure><p>è¿™ä¹ˆè¯´æ¥ï¼Œä¸­æ–‡ä¹Ÿæ˜¯å¯ä»¥æ”¯æŒçš„ï¼Œæ©~<br>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¸ƒæœ—è¯­æ–™åº“ä¸­çš„æ ‡æ³¨ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>nltk.corpus.brown.tagged_words()</span><br><span class="line">[(<span class="string">u&#x27;The&#x27;</span>, <span class="string">u&#x27;AT&#x27;</span>), (<span class="string">u&#x27;Fulton&#x27;</span>, <span class="string">u&#x27;NP-TL&#x27;</span>), ...]</span><br></pre></td></tr></table></figure><p>äº‹å®ä¸Šnltkä¹Ÿæœ‰ä¸­æ–‡çš„è¯­æ–™åº“ï¼Œæˆ‘ä»¬æ¥ä¸‹è½½ä¸‹æ¥<br>æ‰§è¡Œ</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nltk.download()</span><br></pre></td></tr></table></figure><p>é€‰æ‹©Corporaé‡Œçš„sinica_treebankä¸‹è½½<br>sinicaå°±æ˜¯å°æ¹¾è¯ä¸­çš„ä¸­å›½ç ”ç©¶é™¢<br>æˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™ä¸ªä¸­æ–‡è¯­æ–™åº“é‡Œæœ‰ä»€ä¹ˆå†…å®¹ï¼Œåˆ›å»ºcn_tag.pyï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> sys</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>reload(sys)</span><br><span class="line">&lt;module <span class="string">&#x27;sys&#x27;</span> (built-<span class="keyword">in</span>)&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sys.setdefaultencoding(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> nltk</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> word <span class="keyword">in</span> nltk.corpus.sinica_treebank.tagged_words():</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> word[<span class="number">0</span>],word[<span class="number">1</span>]</span><br><span class="line">...</span><br><span class="line">æŒ VC2</span><br><span class="line">æœ‰æ•ˆæœŸ Nad</span><br><span class="line">åœ‹éš› Ncc</span><br><span class="line">å­¸ç”Ÿè­‰ Nab</span><br><span class="line">ï¼©ï¼³ï¼©ï¼£ Nba</span><br><span class="line">ã€ Caa</span><br><span class="line">ï¼³ï¼´ï¼¡ Nba</span><br><span class="line">é’å¹´è­‰ Nab</span><br><span class="line">ã€ Caa</span><br><span class="line">ï¼³ï¼´ï¼¡ Nba</span><br><span class="line">æœƒå“¡è­‰ Nab</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€åˆ—æ˜¯ä¸­æ–‡çš„è¯æ±‡ï¼Œç¬¬äºŒåˆ—æ˜¯æ ‡æ³¨å¥½çš„è¯æ€§<br>æˆ‘ä»¬å‘ç°è¿™é‡Œé¢éƒ½æ˜¯ç¹ä½“ï¼Œå› ä¸ºæ˜¯åŸºäºå°æ¹¾çš„è¯­æ–™ç”Ÿæˆçš„ï¼Œæƒ³è¦ç®€ä½“ä¸­æ–‡è¿˜å¾—è‡ªå·±æƒ³åŠæ³•ã€‚ä¸è¿‡æœ‰äººå·²ç»å¸®æˆ‘ä»¬åšäº†è¿™éƒ¨åˆ†å·¥ä½œï¼Œé‚£å°±æ˜¯<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Z4c2p5L2ppZWJh" title="https://github.com/fxsjy/jieba">jiebaåˆ‡è¯<i class="fa fa-external-link"></i></span>ï¼Œå¼ºçƒˆæ¨èï¼Œå¯ä»¥è‡ªå·±åŠ è½½è‡ªå·±çš„è¯­æ–™ï¼Œè¿›è¡Œä¸­æ–‡åˆ‡è¯ï¼Œå¹¶ä¸”èƒ½å¤Ÿè‡ªåŠ¨åšè¯æ€§æ ‡æ³¨</p><h1 id="è¯æ€§è‡ªåŠ¨æ ‡æ³¨"><a href="#è¯æ€§è‡ªåŠ¨æ ‡æ³¨" class="headerlink" title="è¯æ€§è‡ªåŠ¨æ ‡æ³¨"></a>è¯æ€§è‡ªåŠ¨æ ‡æ³¨</h1><p>é¢å¯¹ä¸€ç‰‡æ–°çš„è¯­æ–™åº“(æ¯”å¦‚æˆ‘ä»¬ä»æœªå¤„ç†è¿‡ä¸­æ–‡ï¼Œåªæœ‰ä¸€æ‰¹æ‰¹çš„ä¸­æ–‡è¯­æ–™ï¼Œç°åœ¨è®©æˆ‘ä»¬åšè¯æ€§è‡ªåŠ¨æ ‡æ³¨)ï¼Œå¦‚ä½•å®ç°è¯æ€§è‡ªåŠ¨æ ‡æ³¨ï¼Ÿæœ‰å¦‚ä¸‹å‡ ç§æ ‡æ³¨æ–¹æ³•ï¼š</p><p>é»˜è®¤æ ‡æ³¨å™¨ï¼šä¸ç®¡ä»€ä¹ˆè¯ï¼Œéƒ½æ ‡æ³¨ä¸ºé¢‘ç‡æœ€é«˜çš„ä¸€ç§è¯æ€§ã€‚æ¯”å¦‚ç»è¿‡åˆ†æï¼Œæ‰€æœ‰ä¸­æ–‡è¯­æ–™é‡Œçš„è¯æ˜¯åæ¬¡çš„æ¦‚ç‡æ˜¯13%æœ€å¤§ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„é»˜è®¤æ ‡æ³¨å™¨å°±å…¨éƒ¨æ ‡æ³¨ä¸ºåæ¬¡ã€‚è¿™ç§æ ‡æ³¨å™¨ä¸€èˆ¬ä½œä¸ºå…¶ä»–æ ‡æ³¨å™¨å¤„ç†ä¹‹åçš„æœ€åä¸€é“é—¨ï¼Œå³ï¼šä¸çŸ¥é“æ˜¯ä»€ä¹ˆè¯ï¼Ÿé‚£ä¹ˆä»–æ˜¯åæ¬¡ã€‚é»˜è®¤æ ‡æ³¨å™¨ç”¨DefaultTaggeræ¥å®ç°ï¼Œå…·ä½“ç”¨æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> sys</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>reload(sys)</span><br><span class="line">&lt;module <span class="string">&#x27;sys&#x27;</span> (built-<span class="keyword">in</span>)&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sys.setdefaultencoding(<span class="string">&#x27;utf-8&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> nltk</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>default_tagger = nltk.DefaultTagger(<span class="string">&#x27;NN&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>raw = <span class="string">&#x27;æˆ‘å‹’ä¸ªå»&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tokens = nltk.word_tokenize(raw)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tags = default_tagger.tag(tokens)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> tags</span><br><span class="line">[(<span class="string">&#x27;\xe6\x88\x91\xe5\x8b\x92\xe4\xb8\xaa\xe5\x8e\xbb&#x27;</span>, <span class="string">&#x27;NN&#x27;</span>)]</span><br></pre></td></tr></table></figure><p>æ­£åˆ™è¡¨è¾¾å¼æ ‡æ³¨å™¨ï¼šæ»¡è¶³ç‰¹å®šæ­£åˆ™è¡¨è¾¾å¼çš„è®¤ä¸ºæ˜¯æŸç§è¯æ€§ï¼Œæ¯”å¦‚å‡¡æ˜¯å¸¦â€œä»¬â€çš„éƒ½è®¤ä¸ºæ˜¯ä»£è¯(PRO)ã€‚æ­£åˆ™è¡¨è¾¾å¼æ ‡æ³¨å™¨é€šRegexpTaggeå®ç°ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pattern = [(<span class="string">r&#x27;.*ä»¬$&#x27;</span>,<span class="string">&#x27;PRO&#x27;</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tagger = nltk.RegexpTagger(pattern)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> tagger.tag(nltk.word_tokenize(<span class="string">&#x27;æˆ‘ä»¬ ç´¯ ä¸ª å» ä½ ä»¬ å’Œ ä»–ä»¬ å•Š&#x27;</span>))</span><br><span class="line">[(<span class="string">&#x27;\xe6\x88\x91\xe4\xbb\xac&#x27;</span>, <span class="string">&#x27;PRO&#x27;</span>), (<span class="string">&#x27;\xe7\xb4\xaf&#x27;</span>, <span class="literal">None</span>), (<span class="string">&#x27;\xe4\xb8\xaa&#x27;</span>, <span class="literal">None</span>), (<span class="string">&#x27;\xe5\x8e\xbb&#x27;</span>, <span class="literal">None</span>), (<span class="string">&#x27;\xe4\xbd\xa0\xe4\xbb\xac&#x27;</span>, <span class="string">&#x27;PRO&#x27;</span>), (<span class="string">&#x27;\xe5\x92\x8c&#x27;</span>, <span class="literal">None</span>), (<span class="string">&#x27;\xe4\xbb\x96\xe4\xbb\xac&#x27;</span>, <span class="string">&#x27;PRO&#x27;</span>), (<span class="string">&#x27;\xe5\x95\x8a&#x27;</span>, <span class="literal">None</span>)]</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢æ ‡æ³¨å™¨ï¼šæ‰¾å‡ºæœ€é¢‘ç¹çš„nä¸ªè¯ä»¥åŠå®ƒçš„è¯æ€§ï¼Œç„¶åç”¨è¿™ä¸ªä¿¡æ¯å»æŸ¥æ‰¾è¯­æ–™åº“ï¼ŒåŒ¹é…çš„å°±æ ‡è®°ä¸Šï¼Œå‰©ä½™çš„è¯ä½¿ç”¨é»˜è®¤æ ‡æ³¨å™¨(å›é€€)ã€‚è¿™ä¸€èˆ¬ä½¿ç”¨ä¸€å…ƒæ ‡æ³¨çš„æ–¹å¼ï¼Œè§ä¸‹é¢ã€‚</p><p>ä¸€å…ƒæ ‡æ³¨ï¼šåŸºäºå·²ç»æ ‡æ³¨çš„è¯­æ–™åº“åšè®­ç»ƒï¼Œç„¶åç”¨è®­ç»ƒå¥½çš„æ¨¡å‹æ¥æ ‡æ³¨æ–°çš„è¯­æ–™ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> nltk</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> nltk.corpus <span class="keyword">import</span> brown</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tagged_sents = [[(<span class="string">&#x27;æˆ‘&#x27;</span>,<span class="string">&#x27;PRO&#x27;</span>),(<span class="string">&#x27;å°å…”&#x27;</span>,<span class="string">&#x27;NN&#x27;</span>)]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>unigram_tagger = nltk.UnigramTagger(tagged_sents)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sents = brown.sents(categories=<span class="string">&#x27;news&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sents = [[<span class="string">&#x27;æˆ‘&#x27;</span>,<span class="string">&#x27;ä½ &#x27;</span>,<span class="string">&#x27;å°å…”&#x27;</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tags = unigram_tagger.tag(sents[<span class="number">0</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> tags</span><br><span class="line">[(<span class="string">&#x27;\xe6\x88\x91&#x27;</span>, <span class="string">&#x27;PRO&#x27;</span>), (<span class="string">&#x27;\xe4\xbd\xa0&#x27;</span>, <span class="literal">None</span>), (<span class="string">&#x27;\xe5\xb0\x8f\xe5\x85\x94&#x27;</span>, <span class="string">&#x27;NN&#x27;</span>)]</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„tagged_sentsæ˜¯ç”¨äºè®­ç»ƒçš„è¯­æ–™åº“ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥ç”¨å·²æœ‰çš„æ ‡æ³¨å¥½çš„è¯­æ–™åº“ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brown_tagged_sents = brown.tagged_sents(categories=<span class="string">&#x27;news&#x27;</span>)</span><br></pre></td></tr></table></figure><p>äºŒå…ƒæ ‡æ³¨å’Œå¤šå…ƒæ ‡æ³¨ï¼šä¸€å…ƒæ ‡æ³¨æŒ‡çš„æ˜¯åªè€ƒè™‘å½“å‰è¿™ä¸ªè¯ï¼Œä¸è€ƒè™‘ä¸Šä¸‹æ–‡ã€‚äºŒå…ƒæ ‡æ³¨å™¨æŒ‡çš„æ˜¯è€ƒè™‘å®ƒå‰é¢çš„è¯çš„æ ‡æ³¨ï¼Œç”¨æ³•åªéœ€è¦æŠŠä¸Šé¢çš„UnigramTaggeræ¢æˆBigramTaggerã€‚åŒç†ä¸‰å…ƒæ ‡æ³¨æ¢æˆTrigramTagger</p><p>ç»„åˆæ ‡æ³¨å™¨ï¼šä¸ºäº†æé«˜ç²¾åº¦å’Œè¦†ç›–ç‡ï¼Œæˆ‘ä»¬å¯¹å¤šç§æ ‡æ³¨å™¨ç»„åˆï¼Œæ¯”å¦‚ç»„åˆäºŒå…ƒæ ‡æ³¨å™¨ã€ä¸€å…ƒæ ‡æ³¨å™¨å’Œé»˜è®¤æ ‡æ³¨å™¨ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">t0 = nltk.DefaultTagger(<span class="string">&#x27;NN&#x27;</span>)</span><br><span class="line">t1 = nltk.UnigramTagger(train_sents, backoff=t0)</span><br><span class="line">t2 = nltk.BigramTagger(train_sents, backoff=t1)</span><br></pre></td></tr></table></figure><p>æ ‡æ³¨å™¨çš„å­˜å‚¨ï¼šè®­ç»ƒå¥½çš„æ ‡æ³¨å™¨ä¸ºäº†æŒä¹…åŒ–ï¼Œå¯ä»¥å­˜å‚¨åˆ°ç¡¬ç›˜ï¼Œå…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> cPickle <span class="keyword">import</span> dump</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>output = open(<span class="string">&#x27;t2.pkl&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dump(t2, output, <span class="number">-1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>output.close()</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ—¶ä¹Ÿå¯ä»¥åŠ è½½ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> cPickle <span class="keyword">import</span> load</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>input = open(<span class="string">&#x27;t2.pkl&#x27;</span>, <span class="string">&#x27;rb&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tagger = load(input)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>input.close()</span><br></pre></td></tr></table></figure><h1 id="ç»“å·´åˆ‡è¯"><a href="#ç»“å·´åˆ‡è¯" class="headerlink" title="ç»“å·´åˆ‡è¯"></a>ç»“å·´åˆ‡è¯</h1><h2 id="ä¸»è¦åŠŸèƒ½"><a href="#ä¸»è¦åŠŸèƒ½" class="headerlink" title="ä¸»è¦åŠŸèƒ½"></a>ä¸»è¦åŠŸèƒ½</h2><p>ç›´æ¥æ‹·è´äº†<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2Z4c2p5L2ppZWJhL2Jsb2IvbWFzdGVyL1JFQURNRS5tZA==" title="https://github.com/fxsjy/jieba/blob/master/README.md">ä½¿ç”¨è¯´æ˜<i class="fa fa-external-link"></i></span>é‡Œé¢çš„ä¾‹å­</p><ul><li>jieba.cut æ–¹æ³•æ¥å—ä¸‰ä¸ªè¾“å…¥å‚æ•°: éœ€è¦åˆ†è¯çš„å­—ç¬¦ä¸²ï¼›cut_all å‚æ•°ç”¨æ¥æ§åˆ¶æ˜¯å¦é‡‡ç”¨å…¨æ¨¡å¼ï¼›HMM å‚æ•°ç”¨æ¥æ§åˆ¶æ˜¯å¦ä½¿ç”¨ HMM æ¨¡å‹</li><li>jieba.cut_for_search æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šéœ€è¦åˆ†è¯çš„å­—ç¬¦ä¸²ï¼›æ˜¯å¦ä½¿ç”¨ HMM æ¨¡å‹ã€‚è¯¥æ–¹æ³•é€‚åˆç”¨äºæœç´¢å¼•æ“æ„å»ºå€’æ’ç´¢å¼•çš„åˆ†è¯ï¼Œç²’åº¦æ¯”è¾ƒç»†</li><li>å¾…åˆ†è¯çš„å­—ç¬¦ä¸²å¯ä»¥æ˜¯ unicode æˆ– UTF-8 å­—ç¬¦ä¸²ã€GBK å­—ç¬¦ä¸²ã€‚æ³¨æ„ï¼šä¸å»ºè®®ç›´æ¥è¾“å…¥ GBK å­—ç¬¦ä¸²ï¼Œå¯èƒ½æ— æ³•é¢„æ–™åœ°é”™è¯¯è§£ç æˆ UTF-8</li><li>jieba.cut ä»¥åŠ jieba.cut_for_search è¿”å›çš„ç»“æ„éƒ½æ˜¯ä¸€ä¸ªå¯è¿­ä»£çš„ generatorï¼Œå¯ä»¥ä½¿ç”¨ for å¾ªç¯æ¥è·å¾—åˆ†è¯åå¾—åˆ°çš„æ¯ä¸€ä¸ªè¯è¯­(unicode)ï¼Œæˆ–è€…ç”¨</li><li>jieba.lcut ä»¥åŠ jieba.lcut_for_search ç›´æ¥è¿”å› list</li><li>jieba.Tokenizer(dictionary=DEFAULT_DICT) æ–°å»ºè‡ªå®šä¹‰åˆ†è¯å™¨ï¼Œå¯ç”¨äºåŒæ—¶ä½¿ç”¨ä¸åŒè¯å…¸ã€‚jieba.dt ä¸ºé»˜è®¤åˆ†è¯å™¨ï¼Œæ‰€æœ‰å…¨å±€åˆ†è¯ç›¸å…³å‡½æ•°éƒ½æ˜¯è¯¥åˆ†è¯å™¨çš„æ˜ å°„ã€‚</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install jieba</span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># encoding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"></span><br><span class="line">seg_list = jieba.cut(<span class="string">&quot;æˆ‘æ¥åˆ°åŒ—äº¬æ¸…åå¤§å­¦&quot;</span>, cut_all=<span class="literal">True</span>)</span><br><span class="line">print(<span class="string">&quot;Full Mode: &quot;</span> + <span class="string">&quot;/ &quot;</span>.join(seg_list))  <span class="comment"># å…¨æ¨¡å¼</span></span><br><span class="line"></span><br><span class="line">seg_list = jieba.cut(<span class="string">&quot;æˆ‘æ¥åˆ°åŒ—äº¬æ¸…åå¤§å­¦&quot;</span>, cut_all=<span class="literal">False</span>)</span><br><span class="line">print(<span class="string">&quot;Default Mode: &quot;</span> + <span class="string">&quot;/ &quot;</span>.join(seg_list))  <span class="comment"># ç²¾ç¡®æ¨¡å¼</span></span><br><span class="line"></span><br><span class="line">seg_list = jieba.cut(<span class="string">&quot;ä»–æ¥åˆ°äº†ç½‘æ˜“æ­ç ”å¤§å¦&quot;</span>)  <span class="comment"># é»˜è®¤æ˜¯ç²¾ç¡®æ¨¡å¼</span></span><br><span class="line">print(<span class="string">&quot;, &quot;</span>.join(seg_list))</span><br><span class="line"></span><br><span class="line">seg_list = jieba.cut_for_search(<span class="string">&quot;å°æ˜ç¡•å£«æ¯•ä¸šäºä¸­å›½ç§‘å­¦é™¢è®¡ç®—æ‰€ï¼Œååœ¨æ—¥æœ¬äº¬éƒ½å¤§å­¦æ·±é€ &quot;</span>)  <span class="comment"># æœç´¢å¼•æ“æ¨¡å¼</span></span><br><span class="line">print(<span class="string">&quot;, &quot;</span>.join(seg_list))</span><br></pre></td></tr></table></figure><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ã€å…¨æ¨¡å¼ã€‘: æˆ‘/ æ¥åˆ°/ åŒ—äº¬/ æ¸…å/ æ¸…åå¤§å­¦/ åå¤§/ å¤§å­¦</span><br><span class="line"></span><br><span class="line">ã€ç²¾ç¡®æ¨¡å¼ã€‘: æˆ‘/ æ¥åˆ°/ åŒ—äº¬/ æ¸…åå¤§å­¦</span><br><span class="line"></span><br><span class="line">ã€æ–°è¯è¯†åˆ«ã€‘ï¼šä»–, æ¥åˆ°, äº†, ç½‘æ˜“, æ­ç ”, å¤§å¦    (æ­¤å¤„ï¼Œâ€œæ­ç ”â€å¹¶æ²¡æœ‰åœ¨è¯å…¸ä¸­ï¼Œä½†æ˜¯ä¹Ÿè¢«Viterbiç®—æ³•è¯†åˆ«å‡ºæ¥äº†)</span><br><span class="line"></span><br><span class="line">ã€æœç´¢å¼•æ“æ¨¡å¼ã€‘ï¼š å°æ˜, ç¡•å£«, æ¯•ä¸š, äº, ä¸­å›½, ç§‘å­¦, å­¦é™¢, ç§‘å­¦é™¢, ä¸­å›½ç§‘å­¦é™¢, è®¡ç®—, è®¡ç®—æ‰€, å, åœ¨, æ—¥æœ¬, äº¬éƒ½, å¤§å­¦, æ—¥æœ¬äº¬éƒ½å¤§å­¦, æ·±é€ </span><br></pre></td></tr></table></figure><h2 id="è½½å…¥è¯å…¸"><a href="#è½½å…¥è¯å…¸" class="headerlink" title="è½½å…¥è¯å…¸"></a>è½½å…¥è¯å…¸</h2><p>å¼€å‘è€…å¯ä»¥æŒ‡å®šè‡ªå·±è‡ªå®šä¹‰çš„è¯å…¸ï¼Œä»¥ä¾¿åŒ…å« jieba è¯åº“é‡Œæ²¡æœ‰çš„è¯ã€‚è™½ç„¶ jieba æœ‰æ–°è¯è¯†åˆ«èƒ½åŠ›ï¼Œä½†æ˜¯è‡ªè¡Œæ·»åŠ æ–°è¯å¯ä»¥ä¿è¯æ›´é«˜çš„æ­£ç¡®ç‡<br>ç”¨æ³•ï¼š <code>jieba.load_userdict(file_name) # file_name</code>ä¸ºæ–‡ä»¶ç±»å¯¹è±¡æˆ–è‡ªå®šä¹‰è¯å…¸çš„è·¯å¾„<br>è¯å…¸æ ¼å¼å’Œ dict.txt ä¸€æ ·ï¼Œä¸€ä¸ªè¯å ä¸€è¡Œï¼›æ¯ä¸€è¡Œåˆ†ä¸‰éƒ¨åˆ†ï¼šè¯è¯­ã€è¯é¢‘ï¼ˆå¯çœç•¥ï¼‰ã€è¯æ€§ï¼ˆå¯çœç•¥ï¼‰ï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œé¡ºåºä¸å¯é¢ å€’ã€‚file_name è‹¥ä¸ºè·¯å¾„æˆ–äºŒè¿›åˆ¶æ–¹å¼æ‰“å¼€çš„æ–‡ä»¶ï¼Œåˆ™æ–‡ä»¶å¿…é¡»ä¸º UTF-8 ç¼–ç ã€‚<br>è¯é¢‘çœç•¥æ—¶ä½¿ç”¨è‡ªåŠ¨è®¡ç®—çš„èƒ½ä¿è¯åˆ†å‡ºè¯¥è¯çš„è¯é¢‘ã€‚</p><p>ä»Šå¤©å…ˆçœ‹åˆ°è¿™é‡Œ,æ…¢æ…¢æ¶ˆåŒ–,å›å¤´å›æ¥è¡¥</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç®€å•çœ‹äº†ä¸€ä¸‹ç¬¬å››ç« ,æ²¡çœ‹å¤ªæ‡‚,è¾¹å†™è¾¹åšç†è§£ç†è§£çœ‹&lt;br&gt;
    
    </summary>
    
      <category term="ç¬”è®°" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/"/>
    
      <category term="NLTK" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/NLTK/"/>
    
    
      <category term="python" scheme="https://hisashiburidane.github.io/tags/python/"/>
    
      <category term="NLTK" scheme="https://hisashiburidane.github.io/tags/NLTK/"/>
    
      <category term="èŠå¤©æœºå™¨äºº" scheme="https://hisashiburidane.github.io/tags/%E8%81%8A%E5%A4%A9%E6%9C%BA%E5%99%A8%E4%BA%BA/"/>
    
  </entry>
  
  <entry>
    <title>NLTK</title>
    <link href="https://hisashiburidane.github.io//%E7%AC%94%E8%AE%B0/NLTK/2017/04/09/NLTK/"/>
    <id>https://hisashiburidane.github.io//ç¬”è®°/NLTK/2017/04/09/NLTK/</id>
    <published>2017-04-09T12:05:08.000Z</published>
    <updated>2018-09-08T09:20:09.759Z</updated>
    
    <content type="html"><![CDATA[<p>ç½‘ä¸Šæ‰¾äº†ç¯‡çœ‹èµ·æ¥æŒºä¸°å¯Œçš„æ–‡ç« <span class="exturl" data-url="aHR0cDovL3d3dy5zaGFyZWRpdG9yLmNvbS9ibG9nbGlzdGJ5dGFnLz90YWduYW1lPSVFOCU4NyVBQSVFNSVCNyVCMSVFNSU4QSVBOCVFNiU4OSU4QiVFNSU4MSU5QSVFOCU4MSU4QSVFNSVBNCVBOSVFNiU5QyVCQSVFNSU5OSVBOCVFNCVCQSVCQQ==" title="http://www.shareditor.com/bloglistbytag/?tagname=%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E5%81%9A%E8%81%8A%E5%A4%A9%E6%9C%BA%E5%99%A8%E4%BA%BA">è‡ªå·±åŠ¨æ‰‹åšèŠå¤©æœºå™¨äºº<i class="fa fa-external-link"></i></span>,å­¦ç€åšQA,<br>æ¥æºç½‘ç«™:<span class="exturl" data-url="aHR0cDovL3d3dy5zaGFyZWRpdG9yLmNvbS8=" title="http://www.shareditor.com/">shareditor<i class="fa fa-external-link"></i></span><br>bookçš„ä¸‹è½½åœ°å€æ¥è‡ªäº:<span class="exturl" data-url="aHR0cDovL3d3dy5qaWFuc2h1LmNvbS9wLzljNDhlOGVkYzdhYQ==" title="http://www.jianshu.com/p/9c48e8edc7aa">è§£å†³NLTKåŒ…ä¸‹è½½å‡ºé”™é—®é¢˜åŠNLPç¯å¢ƒæµ‹è¯•<i class="fa fa-external-link"></i></span><br><a id="more"></a><br><span class="exturl" data-url="aHR0cDovL3d3dy5ubHRrLm9yZy8=" title="http://www.nltk.org/">NLTK<i class="fa fa-external-link"></i></span>:Natural Language Toolkit</p><h1 id="NLTKåº“"><a href="#NLTKåº“" class="headerlink" title="NLTKåº“"></a>NLTKåº“</h1><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è€æ ·å­,åˆ‡æ¢åˆ°ENVç¯å¢ƒè£…</span></span><br><span class="line">$ <span class="built_in">source</span> ENV/bin/activate</span><br><span class="line"><span class="comment"># å®‰è£…nltkåŒ…</span></span><br><span class="line">$ pip install nltk</span><br><span class="line"><span class="comment"># å®‰è£…å®Œæˆä¹‹åå¯ä»¥åœ¨pythoné‡Œé¢å¯åŠ¨downloaderä¸‹è½½ç›¸å…³èµ„æº</span></span><br><span class="line"><span class="comment"># è¯•äº†ä¸€ä¸‹ä¸‹è½½åŠå…¶ä¸é è°±,ç¿»å¢™ä¹Ÿå„ç§æŠ¥é”™,è¿˜æ˜¯ç½‘ä¸Šæ‰¾èµ„æºå§</span></span><br><span class="line">$ python</span><br><span class="line">Python 2.7.10 (default, Feb  6 2017, 23:53:20)</span><br><span class="line">[GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.34)] on darwin</span><br><span class="line">Type <span class="string">&quot;help&quot;</span>, <span class="string">&quot;copyright&quot;</span>, <span class="string">&quot;credits&quot;</span> or <span class="string">&quot;license&quot;</span> <span class="keyword">for</span> more information.</span><br></pre></td></tr></table></figure><p>èµ„æºä¸‹è½½åœ°å€:<br><span class="exturl" data-url="aHR0cHM6Ly9wYW4uYmFpZHUuY29tL3MvMXNsUDR3ZnI=" title="https://pan.baidu.com/s/1slP4wfr">ä¸‹è½½åœ°å€1ï¼šäº‘ç›˜å¯†ç znx7<i class="fa fa-external-link"></i></span><br><span class="exturl" data-url="aHR0cDovL3Bhbi5iYWlkdS5jb20vcy8xcVl3QTI0MA==" title="http://pan.baidu.com/s/1qYwA240">ä¸‹è½½åœ°å€2ï¼šäº‘ç›˜å¯†ç 4cp3<i class="fa fa-external-link"></i></span><br>æ¥æº:<br><span class="exturl" data-url="aHR0cDovL3d3dy5qaWFuc2h1LmNvbS9wLzljNDhlOGVkYzdhYQ==" title="http://www.jianshu.com/p/9c48e8edc7aa">è§£å†³NLTKåŒ…ä¸‹è½½å‡ºé”™é—®é¢˜åŠNLPç¯å¢ƒæµ‹è¯•<i class="fa fa-external-link"></i></span></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> nltk</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>nltk.download()</span><br><span class="line"><span class="comment"># ä¸‹è½½å¥½èµ„æºä¹‹åå¯¼å…¥book</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> nltk.book <span class="keyword">import</span> *</span><br><span class="line">*** Introductory Examples <span class="keyword">for</span> the NLTK Book ***</span><br><span class="line">Loading text1, ..., text9 <span class="keyword">and</span> sent1, ..., sent9</span><br><span class="line">Type the name of the text <span class="keyword">or</span> sentence to view it.</span><br><span class="line">Type: <span class="string">&#x27;texts()&#x27;</span> <span class="keyword">or</span> <span class="string">&#x27;sents()&#x27;</span> to list the materials.</span><br><span class="line">text1: Moby Dick by Herman Melville <span class="number">1851</span></span><br><span class="line">text2: Sense <span class="keyword">and</span> Sensibility by Jane Austen <span class="number">1811</span></span><br><span class="line">text3: The Book of Genesis</span><br><span class="line">text4: Inaugural Address Corpus</span><br><span class="line">text5: Chat Corpus</span><br><span class="line">text6: Monty Python <span class="keyword">and</span> the Holy Grail</span><br><span class="line">text7: Wall Street Journal</span><br><span class="line">text8: Personals Corpus</span><br><span class="line">text9: The Man Who Was Thursday by G . K . Chesterton <span class="number">1908</span></span><br><span class="line"><span class="comment"># è¿™é‡Œé¢çš„text*éƒ½æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„ä¹¦ç±èŠ‚ç‚¹ï¼Œç›´æ¥è¾“å…¥text1ä¼šè¾“å‡ºä¹¦ç±æ ‡é¢˜ï¼š</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>text1</span><br><span class="line">&lt;Text: Moby Dick by Herman Melville <span class="number">1851</span>&gt;</span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œä¸ºæ­¢,ç¯å¢ƒå®‰è£…å·¥ä½œå®Œæˆ</p><h2 id="æœç´¢"><a href="#æœç´¢" class="headerlink" title="æœç´¢"></a>æœç´¢</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>text1.concordance(<span class="string">&quot;former&quot;</span>)</span><br><span class="line">Displaying <span class="number">20</span> of <span class="number">20</span> matches:</span><br><span class="line">s of the sea , appeared . Among the former , one was of a most monstrous size</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ä¼šæ˜¾ç¤º20ä¸ªåŒ…å«formerçš„è¯­å¥ä¸Šä¸‹æ–‡<br>æˆ‘ä»¬è¿˜å¯ä»¥æœç´¢ç›¸å…³è¯ï¼Œæ¯”å¦‚ï¼š<br>è¾“å…¥äº†shipï¼ŒæŸ¥æ‰¾äº†boatï¼Œéƒ½æ˜¯è¿‘ä¹‰è¯</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>text1.similar(<span class="string">&quot;ship&quot;</span>)</span><br><span class="line">whale boat sea captain world way head time crew man other pequod line</span><br><span class="line">deck body fishery air boats side voyage</span><br></pre></td></tr></table></figure><p>è¾“å…¥äº†shipï¼ŒæŸ¥æ‰¾äº†boatï¼Œéƒ½æ˜¯è¿‘ä¹‰è¯<br>æˆ‘ä»¬è¿˜å¯ä»¥æŸ¥çœ‹æŸä¸ªè¯åœ¨æ–‡ç« é‡Œå‡ºç°çš„ä½ç½®ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·‘äº†ä¸€éå‘ç°ç¼ºå°‘åŒ…æ‰€ä»¥æŠ¥é”™,è¿™é‡Œéœ€è¦å®‰è£…matplotlib</span></span><br><span class="line">pip install matplotlib</span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>text4.dispersion_plot([<span class="string">&quot;citizens&quot;</span>, <span class="string">&quot;democracy&quot;</span>, <span class="string">&quot;freedom&quot;</span>, <span class="string">&quot;duties&quot;</span>, <span class="string">&quot;America&quot;</span>])</span><br></pre></td></tr></table></figure><p>è·‘å‡ºæ¥åº”è¯¥æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­<img data-src="dispersion_plot.png" alt="dispersion_plot"></p><h2 id="è¯ç»Ÿè®¡"><a href="#è¯ç»Ÿè®¡" class="headerlink" title="è¯ç»Ÿè®¡"></a>è¯ç»Ÿè®¡</h2><ul><li>len(text1):è¿”å›æ€»å­—æ•°</li><li>set(text1):è¿”å›æ–‡æœ¬çš„æ‰€æœ‰è¯é›†åˆ</li><li>len(set(text4)):è¿”å›æ–‡æœ¬æ€»è¯æ•°</li><li>text4.count(â€œisâ€):è¿”å›â€œisâ€è¿™ä¸ªè¯å‡ºç°çš„æ€»æ¬¡æ•°</li><li>FreqDist(text1):ç»Ÿè®¡æ–‡ç« çš„è¯é¢‘å¹¶æŒ‰ä»å¤§åˆ°å°æ’åºå­˜åˆ°ä¸€ä¸ªåˆ—è¡¨é‡Œ</li><li>fdist1 = FreqDist(text1);fdist1.plot(50, cumulative=True):ç»Ÿè®¡è¯é¢‘ï¼Œå¹¶è¾“å‡ºç´¯è®¡å›¾åƒ<img data-src="fdist1.png" alt="fdist1"></li><li>fdist1.hapaxes():è¿”å›åªå‡ºç°ä¸€æ¬¡çš„è¯</li><li>text4.collocations():é¢‘ç¹çš„åŒè”è¯</li></ul><h2 id="è‡ªç„¶è¯­è¨€å¤„ç†å…³é”®ç‚¹-ç…§æŠ„ç« èŠ‚"><a href="#è‡ªç„¶è¯­è¨€å¤„ç†å…³é”®ç‚¹-ç…§æŠ„ç« èŠ‚" class="headerlink" title="è‡ªç„¶è¯­è¨€å¤„ç†å…³é”®ç‚¹(ç…§æŠ„ç« èŠ‚)"></a>è‡ªç„¶è¯­è¨€å¤„ç†å…³é”®ç‚¹(ç…§æŠ„ç« èŠ‚)</h2><blockquote><p>è¯æ„ç†è§£ï¼šä¸­å›½é˜Ÿå¤§èƒœç¾å›½é˜Ÿï¼›ä¸­å›½é˜Ÿå¤§è´¥ç¾å›½é˜Ÿã€‚â€œèƒœâ€ã€â€œè´¥â€ä¸€å¯¹åä¹‰è¯ï¼Œå´è¡¨è¾¾åŒæ ·çš„æ„æ€ï¼šä¸­å›½èµ¢äº†ï¼Œç¾å›½è¾“äº†ã€‚è¿™éœ€è¦æœºå™¨èƒ½å¤Ÿè‡ªåŠ¨åˆ†æå‡ºè°èƒœè°è´Ÿ</p></blockquote><blockquote><p>è‡ªåŠ¨ç”Ÿæˆè¯­è¨€ï¼šè‡ªåŠ¨ç”Ÿæˆè¯­è¨€åŸºäºè¯­è¨€çš„è‡ªåŠ¨ç†è§£ï¼Œä¸ç†è§£å°±æ— æ³•è‡ªåŠ¨ç”Ÿæˆ</p></blockquote><blockquote><p>æœºå™¨ç¿»è¯‘ï¼šç°åœ¨æœºå™¨ç¿»è¯‘å·²ç»å¾ˆå¤šäº†ï¼Œä½†æ˜¯è¿˜å¾ˆéš¾è¾¾åˆ°æœ€ä½³ï¼Œæ¯”å¦‚æˆ‘ä»¬æŠŠä¸­æ–‡ç¿»è¯‘æˆè‹±æ–‡ï¼Œå†ç¿»è¯‘æˆä¸­æ–‡ï¼Œå†ç¿»è¯‘æˆè‹±æ–‡ï¼Œæ¥å›10è½®ï¼Œå‘ç°å’Œæœ€åˆå·®åˆ«è¿˜æ˜¯éå¸¸å¤§çš„ã€‚</p></blockquote><blockquote><p>äººæœºå¯¹è¯ï¼šè¿™ä¹Ÿæ˜¯æˆ‘ä»¬æƒ³åšåˆ°çš„æœ€ç»ˆç›®æ ‡ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå«åšâ€œå›¾çµæµ‹è¯•â€çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯åœ¨5åˆ†é’Ÿä¹‹å†…å›ç­”æå‡ºé—®é¢˜çš„30%å³é€šè¿‡ï¼Œèƒ½é€šè¿‡åˆ™è®¤ä¸ºæœ‰æ™ºèƒ½äº†ã€‚</p></blockquote><blockquote><p>è‡ªç„¶è¯­è¨€å¤„ç†åˆ†ä¸¤æ´¾ï¼Œä¸€æ´¾æ˜¯åŸºäºè§„åˆ™çš„ï¼Œä¹Ÿå°±æ˜¯å®Œå…¨ä»è¯­æ³•å¥æ³•ç­‰å‡ºå‘ï¼ŒæŒ‰ç…§è¯­è¨€çš„è§„åˆ™æ¥åˆ†æå’Œå¤„ç†ï¼Œè¿™åœ¨ä¸Šä¸ªä¸–çºªç»å†äº†å¾ˆå¤šå¹´çš„è¯•éªŒå®£å‘Šå¤±è´¥ï¼Œå› ä¸ºè§„åˆ™å¤ªå¤šå¤ªå¤šï¼Œè€Œä¸”å¾ˆå¤šè¯­è¨€éƒ½ä¸æŒ‰å¥—è·¯å‡ºç‰Œï¼Œæƒ³è±¡ä½ è¿½èµ¶ä½ çš„å½±å­ï¼Œä½ è·‘çš„å¿«ä»–è·‘çš„æ›´å¿«ï¼Œä½ æ°¸è¿œéƒ½è¿½ä¸ä¸Šå®ƒã€‚å¦ä¸€æ´¾æ˜¯åŸºäºç»Ÿè®¡çš„ï¼Œä¹Ÿå°±æ˜¯æ”¶é›†å¤§é‡çš„è¯­æ–™æ•°æ®ï¼Œé€šè¿‡ç»Ÿè®¡å­¦ä¹ çš„æ–¹å¼æ¥ç†è§£è¯­è¨€ï¼Œè¿™åœ¨å½“ä»£è¶Šæ¥è¶Šå—é‡è§†è€Œä¸”å·²ç»æˆä¸ºè¶‹åŠ¿ï¼Œå› ä¸ºéšç€ç¡¬ä»¶æŠ€æœ¯çš„å‘å±•ï¼Œå¤§æ•°æ®å­˜å‚¨å’Œè®¡ç®—å·²ç»ä¸æ˜¯é—®é¢˜ï¼Œæ— è®ºæœ‰ä»€ä¹ˆæ ·çš„è§„åˆ™ï¼Œè¯­è¨€éƒ½æ˜¯æœ‰ç»Ÿè®¡è§„å¾‹çš„ï¼Œå½“ç„¶åŸºäºç»Ÿè®¡ä¹Ÿå­˜åœ¨ç¼ºé™·ï¼Œé‚£å°±æ˜¯â€œå°æ¦‚ç‡äº‹ä»¶æ€»æ˜¯ä¸ä¼šå‘ç”Ÿçš„â€å¯¼è‡´æ€»æœ‰ä¸€äº›é—®é¢˜è§£å†³ä¸äº†ã€‚</p></blockquote><p>åˆ°æ­¤ä¸ºæ­¢çš„ç†è§£,NLTKå°±å¦‚å­—é¢æ„æ€,å…¶å®æ˜¯ä¸€ä¸ªtoolkit,æä¾›äº†å¾ˆå¤šç°æˆçš„ç®—æ³•ç±»çš„å·¥å…·</p><h1 id="è¯­æ–™ä¸è¯æ±‡èµ„æº"><a href="#è¯­æ–™ä¸è¯æ±‡èµ„æº" class="headerlink" title="è¯­æ–™ä¸è¯æ±‡èµ„æº"></a>è¯­æ–™ä¸è¯æ±‡èµ„æº</h1><blockquote><p>å½“ä»£è‡ªç„¶è¯­è¨€å¤„ç†éƒ½æ˜¯åŸºäºç»Ÿè®¡çš„ï¼Œç»Ÿè®¡è‡ªç„¶éœ€è¦å¾ˆå¤šæ ·æœ¬ï¼Œå› æ­¤è¯­æ–™å’Œè¯æ±‡èµ„æºæ˜¯å¿…ä¸å¯å°‘çš„ï¼Œæœ¬èŠ‚ä»‹ç»è¯­æ–™å’Œè¯æ±‡èµ„æºçš„é‡è¦æ€§å’Œè·å–æ–¹å¼</p></blockquote><h2 id="NLTKè¯­æ–™åº“"><a href="#NLTKè¯­æ–™åº“" class="headerlink" title="NLTKè¯­æ–™åº“"></a>NLTKè¯­æ–™åº“</h2><p>Gutenbergè¯­æ–™åº“</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿”å›Gutenbergè¯­æ–™åº“çš„æ–‡ä»¶æ ‡è¯†ç¬¦</span></span><br><span class="line">nltk.corpus.gutenberg.fileids()</span><br><span class="line">[<span class="string">&#x27;austen-emma.txt&#x27;</span>, <span class="string">&#x27;austen-persuasion.txt&#x27;</span>, <span class="string">&#x27;austen-sense.txt&#x27;</span>, <span class="string">&#x27;bible-kjv.txt&#x27;</span>, <span class="string">&#x27;blake-poems.txt&#x27;</span>, <span class="string">&#x27;bryant-stories.txt&#x27;</span>, <span class="string">&#x27;burgess-busterbrown.txt&#x27;</span>, <span class="string">&#x27;carroll-alice.txt&#x27;</span>, <span class="string">&#x27;chesterton-ball.txt&#x27;</span>, <span class="string">&#x27;chesterton-brown.txt&#x27;</span>, <span class="string">&#x27;chesterton-thursday.txt&#x27;</span>, <span class="string">&#x27;edgeworth-parents.txt&#x27;</span>, <span class="string">&#x27;melville-moby_dick.txt&#x27;</span>, <span class="string">&#x27;milton-paradise.txt&#x27;</span>, <span class="string">&#x27;shakespeare-caesar.txt&#x27;</span>, <span class="string">&#x27;shakespeare-hamlet.txt&#x27;</span>, <span class="string">&#x27;shakespeare-macbeth.txt&#x27;</span>, <span class="string">&#x27;whitman-leaves.txt&#x27;</span>]</span><br></pre></td></tr></table></figure><p>nltk.corpus.gutenbergå°±æ˜¯gutenbergè¯­æ–™åº“çš„é˜…è¯»å™¨ï¼Œå®ƒæœ‰å¾ˆå¤šå®ç”¨çš„æ–¹æ³•ï¼Œæ¯”å¦‚ï¼š</p><ul><li>nltk.corpus.gutenberg.raw(â€˜chesterton-brown.txtâ€™)ï¼šè¾“å‡ºchesterton-brown.txtæ–‡ç« çš„åŸå§‹å†…å®¹</li><li>nltk.corpus.gutenberg.words(â€˜chesterton-brown.txtâ€™)ï¼šè¾“å‡ºchesterton-brown.txtæ–‡ç« çš„å•è¯åˆ—è¡¨</li><li>nltk.corpus.gutenberg.sents(â€˜chesterton-brown.txtâ€™)ï¼šè¾“å‡ºchesterton-brown.txtæ–‡ç« çš„å¥å­åˆ—è¡¨</li></ul><p>ç±»ä¼¼çš„è¯­æ–™åº“è¿˜æœ‰ï¼š</p><ul><li>from nltk.corpus import webtextï¼šç½‘ç»œæ–‡æœ¬è¯­æ–™åº“ï¼Œç½‘ç»œå’ŒèŠå¤©æ–‡æœ¬</li><li>from nltk.corpus import brownï¼šå¸ƒæœ—è¯­æ–™åº“ï¼ŒæŒ‰ç…§æ–‡æœ¬åˆ†ç±»å¥½çš„500ä¸ªä¸åŒæ¥æºçš„æ–‡æœ¬</li><li>from nltk.corpus import reutersï¼šè·¯é€ç¤¾è¯­æ–™åº“ï¼Œ1ä¸‡å¤šä¸ªæ–°é—»æ–‡æ¡£</li><li>from nltk.corpus import inauguralï¼šå°±èŒæ¼”è¯´è¯­æ–™åº“ï¼Œ55ä¸ªæ€»ç»Ÿçš„æ¼”è¯´</li></ul><h2 id="è¯­æ–™åº“çš„ä¸€èˆ¬ç»“æ„"><a href="#è¯­æ–™åº“çš„ä¸€èˆ¬ç»“æ„" class="headerlink" title="è¯­æ–™åº“çš„ä¸€èˆ¬ç»“æ„"></a>è¯­æ–™åº“çš„ä¸€èˆ¬ç»“æ„</h2><p>ä»¥ä¸Šå„ç§è¯­æ–™åº“éƒ½æ˜¯åˆ†åˆ«å»ºç«‹çš„ï¼Œå› æ­¤ä¼šç¨æœ‰ä¸€äº›åŒºåˆ«ï¼Œä½†æ˜¯ä¸å¤–ä¹ä»¥ä¸‹å‡ ç§ç»„ç»‡ç»“æ„ï¼šæ•£å…»å¼ï¼ˆå­¤ç«‹çš„å¤šç¯‡æ–‡ç« ï¼‰ã€åˆ†ç±»å¼ï¼ˆæŒ‰ç…§ç±»åˆ«ç»„ç»‡ï¼Œç›¸äº’ä¹‹é—´æ²¡æœ‰äº¤é›†ï¼‰ã€äº¤å‰å¼ï¼ˆä¸€ç¯‡æ–‡ç« å¯èƒ½å±äºå¤šä¸ªç±»ï¼‰ã€æ¸å˜å¼ï¼ˆè¯­æ³•éšç€æ—¶é—´å‘ç”Ÿå˜åŒ–ï¼‰</p><h2 id="è¯­æ–™åº“çš„é€šç”¨æ¥å£"><a href="#è¯­æ–™åº“çš„é€šç”¨æ¥å£" class="headerlink" title="è¯­æ–™åº“çš„é€šç”¨æ¥å£"></a>è¯­æ–™åº“çš„é€šç”¨æ¥å£</h2><ul><li>fileids()ï¼šè¿”å›è¯­æ–™åº“ä¸­çš„æ–‡ä»¶</li><li>categories()ï¼šè¿”å›è¯­æ–™åº“ä¸­çš„åˆ†ç±»</li><li>raw()ï¼šè¿”å›è¯­æ–™åº“çš„åŸå§‹å†…å®¹</li><li>words()ï¼šè¿”å›è¯­æ–™åº“ä¸­çš„è¯æ±‡</li><li>sents()ï¼šè¿”å›è¯­æ–™åº“å¥å­</li><li>abspath()ï¼šæŒ‡å®šæ–‡ä»¶åœ¨ç£ç›˜ä¸Šçš„ä½ç½®</li><li>open()ï¼šæ‰“å¼€è¯­æ–™åº“çš„æ–‡ä»¶æµ</li></ul><h2 id="åŠ è½½è‡ªå·±çš„è¯­æ–™åº“"><a href="#åŠ è½½è‡ªå·±çš„è¯­æ–™åº“" class="headerlink" title="åŠ è½½è‡ªå·±çš„è¯­æ–™åº“"></a>åŠ è½½è‡ªå·±çš„è¯­æ–™åº“</h2><p>æ”¶é›†è‡ªå·±çš„è¯­æ–™æ–‡ä»¶ï¼ˆæ–‡æœ¬æ–‡ä»¶ï¼‰åˆ°æŸè·¯å¾„ä¸‹ï¼ˆæ¯”å¦‚/tmp)ï¼Œç„¶åæ‰§è¡Œï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> nltk.corpus <span class="keyword">import</span> PlaintextCorpusReader</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>corpus_root = <span class="string">&#x27;/tmp&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>wordlists = PlaintextCorpusReader(corpus_root, <span class="string">&#x27;.*&#x27;</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>wordlists.fileids()</span><br></pre></td></tr></table></figure><p>å°±å¯ä»¥åˆ—å‡ºè‡ªå·±è¯­æ–™åº“çš„å„ä¸ªæ–‡ä»¶äº†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¦‚wordlists.sents(â€˜a.txtâ€™)å’Œwordlists.words(â€˜a.txtâ€™)ç­‰æ–¹æ³•æ¥è·å–å¥å­å’Œè¯ä¿¡æ¯</p><h2 id="æ¡ä»¶é¢‘ç‡åˆ†å¸ƒ"><a href="#æ¡ä»¶é¢‘ç‡åˆ†å¸ƒ" class="headerlink" title="æ¡ä»¶é¢‘ç‡åˆ†å¸ƒ"></a>æ¡ä»¶é¢‘ç‡åˆ†å¸ƒ</h2><p>æ¡ä»¶åˆ†å¸ƒå¤§å®¶éƒ½æ¯”è¾ƒç†Ÿæ‚‰äº†ï¼Œå°±æ˜¯åœ¨ä¸€å®šæ¡ä»¶ä¸‹æŸä¸ªäº‹ä»¶çš„æ¦‚ç‡åˆ†å¸ƒã€‚è‡ªç„¶è¯­è¨€çš„æ¡ä»¶é¢‘ç‡åˆ†å¸ƒå°±æ˜¯æŒ‡å®šæ¡ä»¶ä¸‹æŸä¸ªäº‹ä»¶çš„é¢‘ç‡åˆ†å¸ƒã€‚</p><p>æ¯”å¦‚è¦è¾“å‡ºåœ¨å¸ƒæœ—è¯­æ–™åº“ä¸­æ¯ä¸ªç±»åˆ«æ¡ä»¶ä¸‹æ¯ä¸ªè¯çš„æ¦‚ç‡ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding( <span class="string">&quot;utf-8&quot;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> nltk</span><br><span class="line"><span class="keyword">from</span> nltk.corpus <span class="keyword">import</span> brown</span><br><span class="line"></span><br><span class="line"><span class="comment"># é“¾è¡¨æ¨å¯¼å¼ï¼Œgenreæ˜¯brownè¯­æ–™åº“é‡Œçš„æ‰€æœ‰ç±»åˆ«åˆ—è¡¨ï¼Œwordæ˜¯è¿™ä¸ªç±»åˆ«ä¸­çš„è¯æ±‡åˆ—è¡¨</span></span><br><span class="line"><span class="comment"># (genre, word)å°±æ˜¯ç±»åˆ«åŠ è¯æ±‡å¯¹</span></span><br><span class="line">genre_word = [(genre, word)</span><br><span class="line">        <span class="keyword">for</span> genre <span class="keyword">in</span> brown.categories()</span><br><span class="line">        <span class="keyword">for</span> word <span class="keyword">in</span> brown.words(categories=genre)</span><br><span class="line">        ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ¡ä»¶é¢‘ç‡åˆ†å¸ƒ</span></span><br><span class="line">cfd = nltk.ConditionalFreqDist(genre_word)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šæ¡ä»¶å’Œæ ·æœ¬ä½œå›¾</span></span><br><span class="line">cfd.plot(conditions=[<span class="string">&#x27;news&#x27;</span>,<span class="string">&#x27;adventure&#x27;</span>], samples=[<span class="string">u&#x27;stock&#x27;</span>, <span class="string">u&#x27;sunbonnet&#x27;</span>, <span class="string">u&#x27;Elevated&#x27;</span>, <span class="string">u&#x27;narcotic&#x27;</span>, <span class="string">u&#x27;four&#x27;</span>, <span class="string">u&#x27;woods&#x27;</span>, <span class="string">u&#x27;railing&#x27;</span>, <span class="string">u&#x27;Until&#x27;</span>, <span class="string">u&#x27;aggression&#x27;</span>, <span class="string">u&#x27;marching&#x27;</span>, <span class="string">u&#x27;looking&#x27;</span>, <span class="string">u&#x27;eligible&#x27;</span>, <span class="string">u&#x27;electricity&#x27;</span>, <span class="string">u&#x27;$25-a-plate&#x27;</span>, <span class="string">u&#x27;consulate&#x27;</span>, <span class="string">u&#x27;Casey&#x27;</span>, <span class="string">u&#x27;all-county&#x27;</span>, <span class="string">u&#x27;Belgians&#x27;</span>, <span class="string">u&#x27;Western&#x27;</span>, <span class="string">u&#x27;1959-60&#x27;</span>, <span class="string">u&#x27;Duhagon&#x27;</span>, <span class="string">u&#x27;sinking&#x27;</span>, <span class="string">u&#x27;1,119&#x27;</span>, <span class="string">u&#x27;co-operation&#x27;</span>, <span class="string">u&#x27;Famed&#x27;</span>, <span class="string">u&#x27;regional&#x27;</span>, <span class="string">u&#x27;Charitable&#x27;</span>, <span class="string">u&#x27;appropriation&#x27;</span>, <span class="string">u&#x27;yellow&#x27;</span>, <span class="string">u&#x27;uncertain&#x27;</span>, <span class="string">u&#x27;Heights&#x27;</span>, <span class="string">u&#x27;bringing&#x27;</span>, <span class="string">u&#x27;prize&#x27;</span>, <span class="string">u&#x27;Loen&#x27;</span>, <span class="string">u&#x27;Publique&#x27;</span>, <span class="string">u&#x27;wooden&#x27;</span>, <span class="string">u&#x27;Loeb&#x27;</span>, <span class="string">u&#x27;963&#x27;</span>, <span class="string">u&#x27;specialties&#x27;</span>, <span class="string">u&#x27;Sands&#x27;</span>, <span class="string">u&#x27;succession&#x27;</span>, <span class="string">u&#x27;Paul&#x27;</span>, <span class="string">u&#x27;Phyfe&#x27;</span>])</span><br></pre></td></tr></table></figure><p><img data-src="ntlk_ConditionalFreqDist.png" alt="ntlk.ConditionalFreqDist"></p><blockquote><p>æ³¨æ„ï¼šè¿™é‡Œå¦‚æœæŠŠplotç›´æ¥æ¢æˆtabulate ï¼Œé‚£ä¹ˆå°±æ˜¯è¾“å‡ºè¡¨æ ¼å½¢å¼ï¼Œå’Œå›¾åƒè¡¨è¾¾çš„æ„æ€ç›¸åŒ</p></blockquote><p>æˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨æ¡ä»¶é¢‘ç‡åˆ†å¸ƒï¼ŒæŒ‰ç…§æœ€å¤§æ¡ä»¶æ¦‚ç‡ç”ŸæˆåŒè¿è¯ï¼Œæœ€ç»ˆç”Ÿæˆä¸€ä¸ªéšæœºæ–‡æœ¬</p><p>è¿™å¯ä»¥ç›´æ¥ä½¿ç”¨bigrams()å‡½æ•°ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯ç”Ÿæˆè¯å¯¹é“¾è¡¨ã€‚</p><p>åˆ›å»ºpythonæ–‡ä»¶å¦‚ä¸‹ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding( <span class="string">&quot;utf-8&quot;</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> nltk</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¾ªç¯10æ¬¡ï¼Œä»cfdistä¸­å–å½“å‰å•è¯æœ€å¤§æ¦‚ç‡çš„è¿è¯,å¹¶æ‰“å°å‡ºæ¥</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">generate_model</span>(<span class="params">cfdist, word, num=<span class="number">10</span></span>):</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(num):</span><br><span class="line">        <span class="keyword">print</span> word,</span><br><span class="line">        word = cfdist[word].max()</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½è¯­æ–™åº“</span></span><br><span class="line">text = nltk.corpus.genesis.words(<span class="string">&#x27;english-kjv.txt&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”ŸæˆåŒè¿è¯</span></span><br><span class="line">bigrams = nltk.bigrams(text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆæ¡ä»¶é¢‘ç‡åˆ†å¸ƒ</span></span><br><span class="line">cfd = nltk.ConditionalFreqDist(bigrams)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»¥theå¼€å¤´ï¼Œç”Ÿæˆéšæœºä¸²</span></span><br><span class="line">generate_model(cfd, <span class="string">&#x27;the&#x27;</span>)</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œæ•ˆæœå¦‚ä¸‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">the land of the land of the land of the</span><br></pre></td></tr></table></figure><p>theçš„æœ€å¤§æ¦‚ç‡çš„åŒè¿è¯æ˜¯landï¼Œlandæœ€å¤§æ¦‚ç‡åŒè¿è¯æ˜¯ofï¼Œofæœ€å¤§æ¦‚ç‡åŒè¿è¯æ˜¯theï¼Œæ‰€ä»¥åé¢å°±å¾ªç¯äº†</p><h2 id="å…¶ä»–è¯å…¸èµ„æº"><a href="#å…¶ä»–è¯å…¸èµ„æº" class="headerlink" title="å…¶ä»–è¯å…¸èµ„æº"></a>å…¶ä»–è¯å…¸èµ„æº</h2><p>æœ‰ä¸€äº›ä»…æ˜¯è¯æˆ–çŸ­è¯­ä»¥åŠä¸€äº›ç›¸å…³ä¿¡æ¯çš„é›†åˆï¼Œå«åšè¯å…¸èµ„æºã€‚</p><ul><li>è¯æ±‡åˆ—è¡¨è¯­æ–™åº“ï¼šnltk.corpus.words.words()ï¼Œæ‰€æœ‰è‹±æ–‡å•è¯ï¼Œè¿™ä¸ªå¯ä»¥ç”¨æ¥è¯†åˆ«è¯­æ³•é”™è¯¯</li><li>åœç”¨è¯è¯­æ–™åº“ï¼šnltk.corpus.stopwords.wordsï¼Œç”¨æ¥è¯†åˆ«é‚£äº›æœ€é¢‘ç¹å‡ºç°çš„æ²¡æœ‰æ„ä¹‰çš„è¯</li><li>å‘éŸ³è¯å…¸ï¼šnltk.corpus.cmudict.dict()ï¼Œç”¨æ¥è¾“å‡ºæ¯ä¸ªè‹±æ–‡å•è¯çš„å‘éŸ³</li><li>æ¯”è¾ƒè¯è¡¨ï¼šnltk.corpus.swadeshï¼Œå¤šç§è¯­è¨€æ ¸å¿ƒ200å¤šä¸ªè¯çš„å¯¹ç…§ï¼Œå¯ä»¥ä½œä¸ºè¯­è¨€ç¿»è¯‘çš„åŸºç¡€</li><li>åŒä¹‰è¯é›†ï¼šWordNetï¼Œé¢å‘è¯­ä¹‰çš„è‹±è¯­è¯å…¸ï¼Œç”±åŒä¹‰è¯é›†ç»„æˆï¼Œå¹¶ç»„ç»‡æˆä¸€ä¸ªç½‘ç»œ</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç½‘ä¸Šæ‰¾äº†ç¯‡çœ‹èµ·æ¥æŒºä¸°å¯Œçš„æ–‡ç« &lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cDovL3d3dy5zaGFyZWRpdG9yLmNvbS9ibG9nbGlzdGJ5dGFnLz90YWduYW1lPSVFOCU4NyVBQSVFNSVCNyVCMSVFNSU4QSVBOCVFNiU4OSU4QiVFNSU4MSU5QSVFOCU4MSU4QSVFNSVBNCVBOSVFNiU5QyVCQSVFNSU5OSVBOCVFNCVCQSVCQQ==&quot; title=&quot;http://www.shareditor.com/bloglistbytag/?tagname=%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E5%81%9A%E8%81%8A%E5%A4%A9%E6%9C%BA%E5%99%A8%E4%BA%BA&quot;&gt;è‡ªå·±åŠ¨æ‰‹åšèŠå¤©æœºå™¨äºº&lt;i class=&quot;fa fa-external-link&quot;&gt;&lt;/i&gt;&lt;/span&gt;,å­¦ç€åšQA,&lt;br&gt;æ¥æºç½‘ç«™:&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cDovL3d3dy5zaGFyZWRpdG9yLmNvbS8=&quot; title=&quot;http://www.shareditor.com/&quot;&gt;shareditor&lt;i class=&quot;fa fa-external-link&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;br&gt;bookçš„ä¸‹è½½åœ°å€æ¥è‡ªäº:&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cDovL3d3dy5qaWFuc2h1LmNvbS9wLzljNDhlOGVkYzdhYQ==&quot; title=&quot;http://www.jianshu.com/p/9c48e8edc7aa&quot;&gt;è§£å†³NLTKåŒ…ä¸‹è½½å‡ºé”™é—®é¢˜åŠNLPç¯å¢ƒæµ‹è¯•&lt;i class=&quot;fa fa-external-link&quot;&gt;&lt;/i&gt;&lt;/span&gt;&lt;br&gt;
    
    </summary>
    
      <category term="ç¬”è®°" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/"/>
    
      <category term="NLTK" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/NLTK/"/>
    
    
      <category term="python" scheme="https://hisashiburidane.github.io/tags/python/"/>
    
      <category term="NLTK" scheme="https://hisashiburidane.github.io/tags/NLTK/"/>
    
      <category term="èŠå¤©æœºå™¨äºº" scheme="https://hisashiburidane.github.io/tags/%E8%81%8A%E5%A4%A9%E6%9C%BA%E5%99%A8%E4%BA%BA/"/>
    
  </entry>
  
  <entry>
    <title>2017-04-09</title>
    <link href="https://hisashiburidane.github.io//%E6%97%A5%E8%AE%B0/%E5%90%90%E6%A7%BD/2017/04/09/2017-04-09/"/>
    <id>https://hisashiburidane.github.io//æ—¥è®°/åæ§½/2017/04/09/2017-04-09/</id>
    <published>2017-04-09T09:00:27.000Z</published>
    <updated>2020-10-12T16:10:04.389Z</updated>
    
    <content type="html"><![CDATA[<p>ä»Šå¤©æ²¡çœ‹ä»€ä¹ˆæ–°ä¸œè¥¿,å¿ƒæƒ…ä¾ç„¶ä¸å¥½</p><a id="more"></a><p>å¿ƒæƒ…ä¸å¥½è¿™ç§äº‹æƒ…ä¸ç”¨å†™æˆ‘ä¹ŸçŸ¥é“,å°±ä¸å¤šè¯´äº†,æµæ°´è´¦å†™ä¸€ä¸‹ä»Šå¤©æ•´äº†ç‚¹ä»€ä¹ˆä¸œè¥¿å§</p><ul><li>æ˜å¤©ä¸Šç­ä¼°è®¡è¿˜æ˜¯æ‹†å‰ç«¯çš„é¡¹ç›®,ç›®å‰å¤§æ¦‚åŠŸèƒ½æ˜¯å¯ä»¥äº†,ä½†æ˜¯åŠŸèƒ½éƒ½ä¸æ˜¯æˆ‘å†™çš„,æ¥æ¥å›å›è°ƒç”¨è¦æ”¹çš„åœ°æ–¹å¤ªå¤š,å·²çŸ¥ manage ä¸‹é¢èµ·ç ç‰µæ‰¯åˆ°ä¸‰ä¸ªæ¨¡å—â€¦è¿™ä¸ªéœ€è¦ååŠ©äº†</li><li>çˆ¬è™«æ¡†æ¶æ€ä¹ˆç”¨å¤§æ¦‚æ˜¯çŸ¥é“äº†,ä¸è¿‡çˆ¬è™«çš„ä¸šåŠ¡é€»è¾‘è¿™ä¸€å—è¿˜æœ‰å¾ˆå¤šä¸œè¥¿æ¯”è¾ƒéº»çƒ¦</li></ul><ol><li>è¦åˆ†æè¦çˆ¬çš„ç½‘ç«™è¯·æ±‚æ€ä¹ˆæäº¤</li><li>ç›®æ ‡å…ƒç´ çš„é€‰æ‹©å™¨</li><li>æå–é€»è¾‘</li></ol><p>æ…¢æ…¢çœ‹å§</p><ul><li>hexo-git-backup æ’ä»¶ä¸€ç›´æäº¤ä¸ä¸Šå»,ç»ˆäºå‘ç°æ˜¯æ¢äº†ç”µè„‘ä»¥å ssh æ²¡æœ‰é…ç½®æ­£ç¡®â€¦</li><li>æ”¹äº†ä¸€ä¸‹ next çš„ vendor,çœ‹çœ‹èƒ½ä¸èƒ½æé«˜ä¸€ç‚¹è®¿é—®é€Ÿåº¦</li><li>å‡†å¤‡ä¹°æ˜¾ç¤ºå™¨å›æ¥è£…é€¼,æƒ³äº†æƒ³è¿˜æ˜¯ä¸ä¹° 4K äº†,æ¯•ç«Ÿæ²¡æœ‰ç‹¬æ˜¾,åˆä¸æƒ³ä¹°é‚£ä¹ˆè´µçš„,ä»¥åå†è¯´å§</li><li>æ•´ç†äº†ä¸€ä¸‹åšå®¢çš„åˆ†ç±»,çœçš„ä¹±ä¸ƒå…«ç³Ÿçš„è‡ªå·±ä¹Ÿçœ‹ä¸æ‡‚</li><li>å¼€å§‹çœ‹äº†ä¸€ä¸‹èŠå¤©æœºå™¨äººçš„ä¸œè¥¿,NLTK ä»€ä¹ˆçš„,ç”¨èµ·æ¥ç®—æ˜¯ç®€å•çš„å§,éš¾çš„æ˜¯åé¢çš„éƒ¨åˆ†,ä¹Ÿç®—æ˜¯èµ·æ­¥äº†â€¦</li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©æ²¡çœ‹ä»€ä¹ˆæ–°ä¸œè¥¿,å¿ƒæƒ…ä¾ç„¶ä¸å¥½&lt;/p&gt;
    
    </summary>
    
      <category term="æ—¥è®°" scheme="https://hisashiburidane.github.io/categories/%E6%97%A5%E8%AE%B0/"/>
    
      <category term="åæ§½" scheme="https://hisashiburidane.github.io/categories/%E6%97%A5%E8%AE%B0/%E5%90%90%E6%A7%BD/"/>
    
    
  </entry>
  
  <entry>
    <title>Pythonå¼€å‘ç¯å¢ƒçš„ä¸€äº›é…ç½®</title>
    <link href="https://hisashiburidane.github.io//%E7%AC%94%E8%AE%B0/python/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/2017/04/08/python%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E4%B8%80%E4%BA%9B%E9%85%8D%E7%BD%AE/"/>
    <id>https://hisashiburidane.github.io//ç¬”è®°/python/ç¯å¢ƒé…ç½®/2017/04/08/pythonå¼€å‘ç¯å¢ƒçš„ä¸€äº›é…ç½®/</id>
    <published>2017-04-08T08:44:27.000Z</published>
    <updated>2018-09-08T09:20:09.771Z</updated>
    
    <content type="html"><![CDATA[<p>æœ¬æ¥åªæ˜¯æƒ³å­¦ä¹ ä¸€ä¸‹Scrapyæ€ä¹ˆåšçˆ¬è™«ï¼Œé¡ºä¾¿çˆ¬ç‚¹ä¸œè¥¿ğŸ˜„<br>ç»“æœå‘ç°ä¹‹å‰æƒ³è£…robot frameworkçš„æ—¶å€™é‡åˆ°çš„é—®é¢˜é‡ç°äº†â€¦â€¦æ­£å¥½æ•´ç†ä¸€ä¸‹<br>å› ä¸ºbrewä»€ä¹ˆçš„æ²¡ç”¨è¿‡ï¼Œæ‰€ä»¥å‚è€ƒçš„<span class="exturl" data-url="aHR0cHM6Ly9oYXZlZS5tZS9tYWMvMjAxNC0wNS9pbmRpdmlkdWFsLXNjaGVtZS1mb3ItcGlwLmh0bWw=" title="https://havee.me/mac/2014-05/individual-scheme-for-pip.html">åŸæ–‡<i class="fa fa-external-link"></i></span>é‡Œé¢æœ‰ä¸€éƒ¨åˆ†æˆ‘æ²¡å†™è¿›æ¥ï¼Œä»¥åç”¨åˆ°äº†å†çœ‹<br><a id="more"></a></p><h1 id="å®‰è£…æ¨¡å—"><a href="#å®‰è£…æ¨¡å—" class="headerlink" title="å®‰è£…æ¨¡å—"></a>å®‰è£…æ¨¡å—</h1><p>ä¸‹è½½pipæ–‡ä»¶<br><span class="exturl" data-url="aHR0cHM6Ly9ib290c3RyYXAucHlwYS5pby9nZXQtcGlwLnB5" title="https://bootstrap.pypa.io/get-pip.py">ä¸‹è½½åœ°å€<i class="fa fa-external-link"></i></span><br>ç„¶åæ‰§è¡Œå‘½ä»¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…pip,å¯èƒ½æ˜¯éœ€è¦ç®¡ç†å‘˜æƒé™çš„</span></span><br><span class="line">$ sudo python get-pip.py</span><br><span class="line"><span class="comment"># å®‰è£…å®Œpipä¹‹åå®‰è£…virtualenv</span></span><br><span class="line">$ sudo pip install virtualenv</span><br><span class="line"><span class="comment"># ç„¶åç”¨virtualenvåˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">$ virtualenv ENV</span><br><span class="line"><span class="comment"># åˆ‡æ¢è‡³ENVè·¯å¾„åå¼€å¯è™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">$ <span class="built_in">source</span> bin/activate</span><br><span class="line"><span class="comment"># To undo these changes to your path (and prompt), just run:</span></span><br><span class="line"><span class="comment"># æ’¤é”€æ”¹å˜?æš‚æ—¶ä¸æ˜¯å¾ˆç†è§£</span></span><br><span class="line">$ deactivate</span><br></pre></td></tr></table></figure><p>ä¹‹åå°±å¯ä»¥åœ¨è™šæ‹Ÿç¯å¢ƒé‡Œé¢ä¸ºæ‰€æ¬²ä¸ºäº†å§ï¼Œæ®è¯´æ˜¯å’Œå¤–éƒ¨çš„pythonç¯å¢ƒäº’ä¸å½±å“çš„ï¼Œå› ä¸ºMacæ“ä½œç³»ç»Ÿçš„åŸå› æœ‰ä¸€äº›åŒ…æ²¡æœ‰åŠæ³•æ­£å¸¸å®‰è£…ï¼Œæˆ‘ä¹Ÿä¸æƒ³å»æ”¹ç³»ç»Ÿæƒé™ï¼Œè¿™ä¸ªæ–¹æ¡ˆç›®å‰çœ‹èµ·æ¥ä¸é”™</p><h1 id="pipçš„User-Install"><a href="#pipçš„User-Install" class="headerlink" title="pipçš„User Install"></a>pipçš„User Install</h1><p>åœ¨ä½¿ç”¨pipå®‰è£…åŒ…çš„æ—¶å€™åŠ ä¸Šuserå‚æ•°ï¼Œå¯ä»¥é¿å…å› ä¸ºmacç³»ç»Ÿå®‰å…¨æ€§é™åˆ¶å¯¼è‡´çš„ä¸€äº›å®‰è£…å¤±è´¥ï¼Œä¸è¿‡éœ€è¦ä¿®æ”¹pipçš„é…ç½®å’Œç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ï¼Œè¿™é‡Œä¹Ÿè®°ä¸€ä¸‹å§ï¼Œéš¾ä¿ä¼šä¸ä¼šç”¨åˆ°</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pythonå®‰è£…å‘½ä»¤</span></span><br><span class="line">$ python setup.py install --user</span><br><span class="line"><span class="comment"># æˆ–è€…ä¸‹é¢çš„å‘½ä»¤ä¹Ÿå¯ä»¥</span></span><br><span class="line"><span class="comment"># python setup.py install --home=&lt;dir&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pipä¹Ÿä¸€æ ·</span></span><br><span class="line">$ pip install package --user</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™æ ·å®‰è£…çš„åŒ…å› ä¸ºä¸åœ¨ç³»ç»Ÿé»˜è®¤çš„PATHä¸­ï¼Œè£…æ˜¯å¯ä»¥è£…ï¼Œä½†æ˜¯ä¸èƒ½ç”¨ï¼Œéœ€è¦æ”¹ä¸€ä¸‹ç¯å¢ƒå˜é‡</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰“å¼€é…ç½®æ–‡ä»¶ï¼Œä¸å­˜åœ¨çš„è¯æ–°å»ºä¸€ä¸ª</span></span><br><span class="line">$ vim ~/.bash_profile</span><br><span class="line"><span class="comment"># æ·»åŠ å¦‚ä¸‹çš„é…ç½®</span></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="variable">$HOME</span>/Library/Python/2.7/bin ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">export</span> PATH=<span class="variable">$HOME</span>/Library/Python/2.7/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment"># åº”ç”¨ç¯å¢ƒå˜é‡çš„ä¿®æ”¹</span></span><br><span class="line">$ <span class="built_in">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹pipçš„é…ç½®æ–‡ä»¶</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºç›®å½•</span></span><br><span class="line">$ mkdir -p ~/.pip</span><br><span class="line"><span class="comment"># çœ‹äº†ä¸€ä¸‹touchæ˜¯åˆ›å»ºç©ºæ–‡ä»¶çš„å‘½ä»¤ï¼Œç”¨vimä»£æ›¿ä¸€æ ·å§</span></span><br><span class="line">$ touch ~/.pip/pip.conf</span><br><span class="line"><span class="comment"># ç¼–è¾‘é…ç½®æ–‡ä»¶</span></span><br><span class="line">$ vim ~/.pip/pip.conf</span><br><span class="line"><span class="comment"># pip.confæ–‡ä»¶æ·»åŠ å¦‚ä¸‹é…ç½®</span></span><br><span class="line">[global]</span><br><span class="line">default-timeout = 60</span><br><span class="line">download-cache = ~/.pip/cache</span><br><span class="line">log-file = ~/.pip/pip.log</span><br><span class="line"></span><br><span class="line">[install]</span><br><span class="line"><span class="comment"># è¿™ä¸ªåœ°æ–¹å¯ä»¥é…pipæºï¼Œè¿™ä¸ªæ˜¯è±†ç“£çš„ï¼Œè¯•äº†ä¸€ä¸‹å›½å†…ä¸¤ä¸ªæºï¼ŒåŒ…éƒ½ä¸å…¨ï¼Œå°½é‡è¿˜æ˜¯ç¿»å¢™æ‹¿å§</span></span><br><span class="line"><span class="comment"># æ³¨æ„éœ€è¦åœ¨åœ°å€ååŠ /simple</span></span><br><span class="line">index-url = http://pypi.douban.com/simple</span><br></pre></td></tr></table></figure><h1 id="pipæºåœ°å€"><a href="#pipæºåœ°å€" class="headerlink" title="pipæºåœ°å€"></a>pipæºåœ°å€</h1><p>è®°å½•ä¸€ä¸‹pipæºçš„åœ°å€ï¼Œä¸‡ä¸€ä»¥åç”¨åˆ°äº†çœçš„åˆ°å¤„æ‰¾</p><ul><li>æ¸…å:<span class="exturl" data-url="aHR0cHM6Ly9weXBpLnR1bmEudHNpbmdodWEuZWR1LmNuLw==" title="https://pypi.tuna.tsinghua.edu.cn/">https://pypi.tuna.tsinghua.edu.cn/<i class="fa fa-external-link"></i></span></li><li>è±†ç“£:<span class="exturl" data-url="aHR0cDovL3B5cGkuZG91YmFuLmNvbS8=" title="http://pypi.douban.com/">http://pypi.douban.com/<i class="fa fa-external-link"></i></span></li><li>åä¸­ç†å·¥å¤§å­¦:<span class="exturl" data-url="aHR0cDovL3B5cGkuaHVzdHVuaXF1ZS5jb20v" title="http://pypi.hustunique.com/">http://pypi.hustunique.com/<i class="fa fa-external-link"></i></span></li><li>å±±ä¸œç†å·¥å¤§å­¦:<span class="exturl" data-url="aHR0cDovL3B5cGkuc2R1dGxpbnV4Lm9yZy8=" title="http://pypi.sdutlinux.org/">http://pypi.sdutlinux.org/<i class="fa fa-external-link"></i></span></li><li>ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦:<span class="exturl" data-url="aHR0cDovL3B5cGkubWlycm9ycy51c3RjLmVkdS5jbi8=" title="http://pypi.mirrors.ustc.edu.cn/">http://pypi.mirrors.ustc.edu.cn/<i class="fa fa-external-link"></i></span></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ¥åªæ˜¯æƒ³å­¦ä¹ ä¸€ä¸‹Scrapyæ€ä¹ˆåšçˆ¬è™«ï¼Œé¡ºä¾¿çˆ¬ç‚¹ä¸œè¥¿ğŸ˜„&lt;br&gt;ç»“æœå‘ç°ä¹‹å‰æƒ³è£…robot frameworkçš„æ—¶å€™é‡åˆ°çš„é—®é¢˜é‡ç°äº†â€¦â€¦æ­£å¥½æ•´ç†ä¸€ä¸‹&lt;br&gt;å› ä¸ºbrewä»€ä¹ˆçš„æ²¡ç”¨è¿‡ï¼Œæ‰€ä»¥å‚è€ƒçš„&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cHM6Ly9oYXZlZS5tZS9tYWMvMjAxNC0wNS9pbmRpdmlkdWFsLXNjaGVtZS1mb3ItcGlwLmh0bWw=&quot; title=&quot;https://havee.me/mac/2014-05/individual-scheme-for-pip.html&quot;&gt;åŸæ–‡&lt;i class=&quot;fa fa-external-link&quot;&gt;&lt;/i&gt;&lt;/span&gt;é‡Œé¢æœ‰ä¸€éƒ¨åˆ†æˆ‘æ²¡å†™è¿›æ¥ï¼Œä»¥åç”¨åˆ°äº†å†çœ‹&lt;br&gt;
    
    </summary>
    
      <category term="ç¬”è®°" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/"/>
    
      <category term="python" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/python/"/>
    
      <category term="ç¯å¢ƒé…ç½®" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/python/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"/>
    
    
      <category term="python" scheme="https://hisashiburidane.github.io/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>Scrapyå…¥é—¨</title>
    <link href="https://hisashiburidane.github.io//%E7%AC%94%E8%AE%B0/Scrapy/2017/04/08/Scrapy%E5%85%A5%E9%97%A8/"/>
    <id>https://hisashiburidane.github.io//ç¬”è®°/Scrapy/2017/04/08/Scrapyå…¥é—¨/</id>
    <published>2017-04-08T02:39:38.000Z</published>
    <updated>2020-10-12T16:04:33.861Z</updated>
    
    <content type="html"><![CDATA[<p>åšä¸ªçˆ¬è™«è¯•è¯•å§ï¼Œæ‰“å‘æ— èŠæ—¶å…‰</p><p>è¿™é‡Œçœ‹åˆ°äº†yieldå…³é”®å­—,pythonçš„ä¸œè¥¿è¿˜æ˜¯ä¸ç†Ÿ,ç™¾åº¦äº†ä¸€ä¸‹å¤§æ¦‚æœ‰ä¸ªæ¦‚å¿µ,æ…¢æ…¢ç ”ç©¶,å…ˆæ”¾ä¸ª<span class="exturl" data-url="aHR0cDovL3d3dy5qaWFuc2h1LmNvbS9wL2QwOTc3OGY0ZTA1NQ==" title="http://www.jianshu.com/p/d09778f4e055">é“¾æ¥<i class="fa fa-external-link"></i></span>markä¸€ä¸‹</p><a id="more"></a><h1 id="æœ€ç®€å•çš„çˆ¬ç½‘é¡µ"><a href="#æœ€ç®€å•çš„çˆ¬ç½‘é¡µ" class="headerlink" title="æœ€ç®€å•çš„çˆ¬ç½‘é¡µ"></a>æœ€ç®€å•çš„çˆ¬ç½‘é¡µ</h1><p>å…ˆè´´ä¸€æ®µä»£ç ï¼Œç®€å•çš„æ²¡ä»€ä¹ˆå¥½è®²</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python2.7</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getHtml</span>(<span class="params">url</span>):</span></span><br><span class="line">    page = urllib2.urlopen(url)</span><br><span class="line">    html=page.read()</span><br><span class="line">    <span class="keyword">return</span> html</span><br><span class="line">url=<span class="string">&quot;https://hisashiburidane.github.io&quot;</span></span><br><span class="line">html=getHtml(url)</span><br><span class="line">print(html)</span><br></pre></td></tr></table></figure><h1 id="Scrapy"><a href="#Scrapy" class="headerlink" title="Scrapy"></a>Scrapy</h1><p>ç™¾åº¦äº†ä¸€ä¸‹æ¥ä¸‹æ¥åº”è¯¥æ€ä¹ˆåšï¼Œæ— éå…ˆæ‹‰æ•°æ®ï¼Œç„¶åä½¿ç”¨æ­£åˆ™æˆ–è€…å…¶ä»–æ‰‹æ®µæŠŠç›®æ ‡æ•°æ®æå–å‡ºæ¥ï¼Œä¹‹åè¦èƒ½è‡ªåŠ¨ç¿»é¡µä¹‹ç±»çš„ï¼Œèƒ½å¤ŸæŒç»­æ‹‰<br>è¯´èµ·æ¥ç®€å•ï¼Œè·å–ç½‘é¡µå†…å®¹åªéœ€è¦ç¬¬ä¸€æ­¥é‚£å‡ è¡Œä»£ç ï¼Œç„¶åå°±è¦ä»”ç»†ç¢ç£¨ä¸€ä¸‹æ€ä¹ˆåšäº†ï¼Œç™¾åº¦çš„ç»“æœæ˜¯ç”¨<span class="exturl" data-url="aHR0cHM6Ly9zY3JhcHkub3JnLw==" title="https://scrapy.org/">Scrapy<i class="fa fa-external-link"></i></span>è¿™ä¸ªæ¡†æ¶çš„æ¯”è¾ƒå¤šï¼Œå…ˆç®€å•å­¦ä¹ ä¸€ä¸‹å§<br><img data-src="scrapy_architecture_02.png" alt="input"><br>çœ‹å®Œæ–‡æ¡£åˆè¸©äº†å¥½å¤šå‘â€¦â€¦ç°åœ¨å¼€å§‹è¡¥å……<br>é¡ºç€æ–‡æ¡£çœ‹ä¸‹æ¥ï¼Œ<code>pip install</code>æŒ‰è¯´åº”è¯¥å¾ˆç®€å•å•Šï¼Œå¯æ˜¯OSXä¸‹é¢å®‰è£…å°±æ˜¯å‡ºäº†ä¸€å †é—®é¢˜ï¼Œæ¯”å¦‚ç³»ç»Ÿæƒé™äº†ï¼Œè¿˜æœ‰ä¸€ä¸ªä»€ä¹ˆç³»ç»Ÿä¿æŠ¤æœºåˆ¶äº†ï¼Œä¸èƒ½åœ¨usrå’Œetcè¿™ç§ç›®å½•ä¸‹è£…ä¸œè¥¿â€¦â€¦çœ‹äº†ä¸€åœˆï¼Œä¸€ç§è§£å†³åŠæ³•æ˜¯é…ç½®pipå®‰è£…è·¯å¾„ï¼Œè£…åœ¨å½“å‰ç”¨æˆ·çš„ç›®å½•ä¸‹ï¼Œè¦æ”¹ä¸€å †é…ç½®æ–‡ä»¶<br>æœ€åå†³å®šè¦é‡‡ç”¨çš„æ˜¯<span class="exturl" data-url="aHR0cHM6Ly92aXJ0dWFsZW52LnB5cGEuaW8=" title="https://virtualenv.pypa.io">virtualenv<i class="fa fa-external-link"></i></span>ï¼Œå› ä¸ºä¸ç”¨è¿™ä¹ˆéº»çƒ¦â€¦â€¦<br>å†™åœ¨ä¸€èµ·å¤ªä¹±äº†ï¼Œæ”¾ä¸ªé“¾æ¥<a href="/%E7%AC%94%E8%AE%B0/python/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/2017/04/08/python%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E4%B8%80%E4%BA%9B%E9%85%8D%E7%BD%AE/" title="pythonå¼€å‘ç¯å¢ƒçš„ä¸€äº›é…ç½®">pythonå¼€å‘ç¯å¢ƒçš„ä¸€äº›é…ç½®</a></p><h2 id="Scrapyå®‰è£…"><a href="#Scrapyå®‰è£…" class="headerlink" title="Scrapyå®‰è£…"></a>Scrapyå®‰è£…</h2><p>æå®šäº†è™šæ‹Ÿç¯å¢ƒï¼Œå°±å¯ä»¥å¼€å§‹å®‰è£…é…ç½®Scrapyäº†</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºè™šæ‹Ÿç¯å¢ƒç›®å½•(?æš‚æ—¶è¿™æ ·å«å§)</span></span><br><span class="line">$ visualenv ENV</span><br><span class="line"><span class="comment"># åˆ‡æ¢è‡³è™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">$ <span class="built_in">source</span> ENV/bin/activate</span><br><span class="line"><span class="comment"># é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">$ deactivate</span><br><span class="line"><span class="comment"># pipå®‰è£…</span></span><br><span class="line">$ pip install Scrapy</span><br><span class="line"><span class="comment"># åˆ›å»ºåä¸ºtutorialçš„scrapyé¡¹ç›®</span></span><br><span class="line">$ scrapy startproject tutorial</span><br></pre></td></tr></table></figure><h2 id="Scrapy-Tuurtorial"><a href="#Scrapy-Tuurtorial" class="headerlink" title="Scrapy Tuurtorial"></a>Scrapy Tuurtorial</h2><p>ä¸‹é¢æ˜¯<span class="exturl" data-url="aHR0cHM6Ly9kb2NzLnNjcmFweS5vcmcvZW4vbGF0ZXN0L2ludHJvL3R1dG9yaWFsLmh0bWw=" title="https://docs.scrapy.org/en/latest/intro/tutorial.html">Scrapyå®˜ç½‘Tutorial<i class="fa fa-external-link"></i></span>ç»™å‡ºçš„æ•™ç¨‹ä¸­çš„ä»£ç </p><h3 id="æŠ“å–ç½‘é¡µ"><a href="#æŠ“å–ç½‘é¡µ" class="headerlink" title="æŠ“å–ç½‘é¡µ"></a>æŠ“å–ç½‘é¡µ</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QuotesSpider</span>(<span class="params">scrapy.Spider</span>):</span></span><br><span class="line">    name = <span class="string">&quot;quotes&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">start_requests</span>(<span class="params">self</span>):</span></span><br><span class="line">        urls = [</span><br><span class="line">            <span class="string">&#x27;http://quotes.toscrape.com/page/1/&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;http://quotes.toscrape.com/page/2/&#x27;</span>,</span><br><span class="line">        ]</span><br><span class="line">        <span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(url=url, callback=self.parse)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span>(<span class="params">self, response</span>):</span></span><br><span class="line">        page = response.url.split(<span class="string">&quot;/&quot;</span>)[<span class="number">-2</span>]</span><br><span class="line">        filename = <span class="string">&#x27;quotes-%s.html&#x27;</span> % page</span><br><span class="line">        <span class="keyword">with</span> open(filename, <span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(response.body)</span><br><span class="line">        self.log(<span class="string">&#x27;Saved file %s&#x27;</span> % filename)</span><br></pre></td></tr></table></figure><p>ä¹‹ååœ¨tutorialç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ scrapy crawl quotes</span><br><span class="line"><span class="comment"># This command runs the spider with name quotes that weâ€™ve just added, that will send some requests for the quotes.toscrape.com domain. You will get an output similar to this:</span></span><br><span class="line">... (omitted <span class="keyword">for</span> brevity)</span><br><span class="line">2016-12-16 21:24:05 [scrapy.core.engine] INFO: Spider opened</span><br><span class="line">2016-12-16 21:24:05 [scrapy.extensions.logstats] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)</span><br><span class="line">2016-12-16 21:24:05 [scrapy.extensions.telnet] DEBUG: Telnet console listening on 127.0.0.1:6023</span><br><span class="line">2016-12-16 21:24:05 [scrapy.core.engine] DEBUG: Crawled (404) &lt;GET http://quotes.toscrape.com/robots.txt&gt; (referer: None)</span><br><span class="line">2016-12-16 21:24:05 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET http://quotes.toscrape.com/page/1/&gt; (referer: None)</span><br><span class="line">2016-12-16 21:24:05 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET http://quotes.toscrape.com/page/2/&gt; (referer: None)</span><br><span class="line">2016-12-16 21:24:05 [quotes] DEBUG: Saved file quotes-1.html</span><br><span class="line">2016-12-16 21:24:05 [quotes] DEBUG: Saved file quotes-2.html</span><br><span class="line">2016-12-16 21:24:05 [scrapy.core.engine] INFO: Closing spider (finished)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><blockquote><p>Scrapy schedules the scrapy.Request objects returned by the start_requests method of the Spider. Upon receiving a response for each one, it instantiates Response objects and calls the callback method associated with the request (in this case, the parse method) passing the response as argument.</p></blockquote><p>è¿™æ—¶å€™ENVç›®å½•ä¸‹ä¿å­˜äº†ä¸¤ä¸ªhtmlæ–‡ä»¶<code>quotes-1.html</code>,<code>quotes-2.html</code>,è¿™å°±æ˜¯çˆ¬ä¸‹æ¥çš„ä¸œè¥¿äº†</p><p>æ¥ä¸‹æ¥æ˜¯ä¸€ä¸ªç®€åŒ–çš„å®ç°</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QuotesSpider</span>(<span class="params">scrapy.Spider</span>):</span></span><br><span class="line">    name = <span class="string">&quot;quotes_shortcut&quot;</span></span><br><span class="line">    start_urls = [</span><br><span class="line">        <span class="string">&#x27;http://quotes.toscrape.com/page/1/&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;http://quotes.toscrape.com/page/2/&#x27;</span>,</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span>(<span class="params">self,response</span>):</span></span><br><span class="line">        page = response.url.split(<span class="string">&quot;/&quot;</span>)[<span class="number">-2</span>]</span><br><span class="line">        finename = <span class="string">&#x27;quotes_shortcut-%s.html&#x27;</span> % page</span><br><span class="line">        <span class="keyword">with</span> open(finename,<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(response.body)</span><br></pre></td></tr></table></figure><blockquote><p>The parse() method will be called to handle each of the requests for those URLs, even though we havenâ€™t explicitly told Scrapy to do so. This happens because parse() is Scrapyâ€™s default callback method, which is called for requests without an explicitly assigned callback.</p></blockquote><p>çœ‹äº†ä¸€ä¸‹,è¿™ä¸€æ®µå¤§æ¦‚æ˜¯ä¸ºäº†è¯´æ˜parseæ˜¯scrapyçš„é»˜è®¤å›è°ƒå‡½æ•°,ä¸éœ€è¦ä¸‹é¢è¿™ä¸€æ®µä»£ç æŒ‡å®šä¹Ÿä¼šè¢«é»˜è®¤è°ƒç”¨</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">    <span class="keyword">yield</span> scrapy.Request(url=url, callback=self.parse)</span><br></pre></td></tr></table></figure><h3 id="CSSSelectoræå–æ•°æ®"><a href="#CSSSelectoræå–æ•°æ®" class="headerlink" title="CSSSelectoræå–æ•°æ®"></a>CSSSelectoræå–æ•°æ®</h3><p>ç„¶åæ˜¯è®²scrapyå¦‚ä½•æå–æ•°æ®çš„</p><h4 id="extract-method"><a href="#extract-method" class="headerlink" title=".extract() method"></a>.extract() method</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># scrapy shell</span></span><br><span class="line">$ scrapy shell <span class="string">&#x27;http://quotes.toscrape.com/page/1/&#x27;</span></span><br><span class="line"><span class="comment"># æ‰§è¡Œå®Œæ¯•ä¹‹åçœ‹åˆ°å¦‚ä¸‹è¾“å‡º</span></span><br><span class="line">[ ... Scrapy <span class="built_in">log</span> here ... ]</span><br><span class="line">2016-09-19 12:09:27 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET http://quotes.toscrape.com/page/1/&gt; (referer: None)</span><br><span class="line">[s] Available Scrapy objects:</span><br><span class="line">[s]   scrapy     scrapy module (contains scrapy.Request, scrapy.Selector, etc)</span><br><span class="line">[s]   crawler    &lt;scrapy.crawler.Crawler object at 0x7fa91d888c90&gt;</span><br><span class="line">[s]   item       &#123;&#125;</span><br><span class="line">[s]   request    &lt;GET http://quotes.toscrape.com/page/1/&gt;</span><br><span class="line">[s]   response   &lt;200 http://quotes.toscrape.com/page/1/&gt;</span><br><span class="line">[s]   settings   &lt;scrapy.settings.Settings object at 0x7fa91d888c10&gt;</span><br><span class="line">[s]   spider     &lt;DefaultSpider <span class="string">&#x27;default&#x27;</span> at 0x7fa91c8af990&gt;</span><br><span class="line">[s] Useful shortcuts:</span><br><span class="line">[s]   shelp()           Shell <span class="built_in">help</span> (<span class="built_in">print</span> this <span class="built_in">help</span>)</span><br><span class="line">[s]   fetch(req_or_url) Fetch request (or URL) and update <span class="built_in">local</span> objects</span><br><span class="line">[s]   view(response)    View response <span class="keyword">in</span> a browser</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="comment"># æ¥ä¸‹æ¥å¯ä»¥åœ¨scrapy shellä¸­è¿›è¡Œä¸€äº›å‘½ä»¤æ“ä½œ</span></span><br><span class="line"><span class="comment"># css selector</span></span><br><span class="line">&gt;&gt;&gt; response.css(<span class="string">&#x27;tittle&#x27;</span>)</span><br><span class="line">[&lt;Selector xpath=u<span class="string">&#x27;descendant-or-self::title&#x27;</span> data=u<span class="string">&#x27;&lt;title&gt;Quotes to Scrape&lt;/title&gt;&#x27;</span>&gt;]</span><br><span class="line">&gt;&gt;&gt; response.css(<span class="string">&#x27;tittle::text&#x27;</span>)</span><br><span class="line">[&lt;Selector xpath=u<span class="string">&#x27;descendant-or-self::title/text()&#x27;</span> data=u<span class="string">&#x27;Quotes to Scrape&#x27;</span>&gt;]</span><br><span class="line">&gt;&gt;&gt; response.css(<span class="string">&#x27;title::text&#x27;</span>).extract()</span><br><span class="line">[u<span class="string">&#x27;Quotes to Scrape&#x27;</span>]</span><br><span class="line">&gt;&gt;&gt; response.css(<span class="string">&#x27;title&#x27;</span>).extract()</span><br><span class="line">[u<span class="string">&#x27;&lt;title&gt;Quotes to Scrape&lt;/title&gt;&#x27;</span>]</span><br><span class="line"><span class="comment"># extract()æ–¹æ³•å¤„ç†çš„æ˜¯ä¸€ä¸ªselectorListå®ä¾‹,å¦‚æœåªæƒ³è¦ç¬¬ä¸€ä¸ªç»“æœå¯ä»¥å¦‚ä¸‹æ“ä½œ</span></span><br><span class="line">&gt;&gt;&gt; response.css(<span class="string">&#x27;title::text&#x27;</span>).extract_first()</span><br><span class="line">u<span class="string">&#x27;Quotes to Scrape&#x27;</span></span><br><span class="line"><span class="comment"># ä¹Ÿå¯ä»¥åƒæ•°ç»„ä¸€æ ·å†™</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨.extract_first()æ–¹æ³•åœ¨æ•°ç»„é•¿åº¦ä¸º0(æ²¡æœ‰æ‰¾åˆ°å¯¹åº”é€‰æ‹©å™¨çš„å…ƒç´ )çš„æ—¶å€™å¯ä»¥è¿”å›Noneè€Œä¸æ˜¯å¼•å‘ç´¢å¼•é”™è¯¯</span></span><br><span class="line"><span class="comment"># However, using .extract_first() avoids an IndexError and returns None when it doesnâ€™t find any element matching the selection.</span></span><br><span class="line">&gt;&gt;&gt; response.css(<span class="string">&#x27;title::text&#x27;</span>)[0].extract()</span><br><span class="line">u<span class="string">&#x27;Quotes to Scrape&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="regular-expressions"><a href="#regular-expressions" class="headerlink" title="regular expressions"></a>regular expressions</h4><blockquote><p>Besides the extract() and extract_first() methods, you can also use the re() method to extract using regular expressions:</p></blockquote><p>æ­£åˆ™è¡¨è¾¾å¼æå–æ•°æ®</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; response.css(<span class="string">&#x27;title::text&#x27;</span>).re(r<span class="string">&#x27;Quotes.*&#x27;</span>)</span><br><span class="line">[u<span class="string">&#x27;Quotes to Scrape&#x27;</span>]</span><br><span class="line">&gt;&gt;&gt; response.css(<span class="string">&#x27;title::text&#x27;</span>).re(r<span class="string">&#x27;Q\w+&#x27;</span>)</span><br><span class="line">[u<span class="string">&#x27;Quotes&#x27;</span>]</span><br><span class="line">&gt;&gt;&gt; response.css(<span class="string">&#x27;title::text&#x27;</span>).re(r<span class="string">&#x27;(\w+) to (\w+)&#x27;</span>)</span><br><span class="line">[u<span class="string">&#x27;Quotes&#x27;</span>, <span class="string">&#x27;Scrape&#x27;</span>]</span><br></pre></td></tr></table></figure><p>ä¸ºäº†éªŒè¯æå–åˆ°çš„æ•°æ®æ˜¯å¦æ­£ç¡®,å¯ä»¥è°ƒç”¨<code>view(response)</code>æ–¹æ³•æ‰“å¼€æµè§ˆå™¨,åœ¨å¼€å‘è€…å·¥å…·ä¸­æŸ¥çœ‹é¡µé¢å…ƒç´ </p><h3 id="XPathæå–æ•°æ®"><a href="#XPathæå–æ•°æ®" class="headerlink" title="XPathæå–æ•°æ®"></a>XPathæå–æ•°æ®</h3><p>è¿™ä¸€å—ä¹‹å‰åœ¨åšseleniumçš„ç«¯å¯¹ç«¯æµ‹è¯•çš„æ—¶å€™æœ‰ä¸€ç‚¹ç‚¹äº†è§£,å¯ä»¥ç”¨çš„æ—¶å€™å†ç™¾åº¦</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; response.xpath(<span class="string">&#x27;//title&#x27;</span>)</span><br><span class="line">[&lt;Selector xpath=<span class="string">&#x27;//title&#x27;</span> data=u<span class="string">&#x27;&lt;title&gt;Quotes to Scrape&lt;/title&gt;&#x27;</span>&gt;]</span><br><span class="line">&gt;&gt;&gt; response.xpath(<span class="string">&#x27;//title/text()&#x27;</span>).extract_first()</span><br><span class="line">u<span class="string">&#x27;Quotes to Scrape&#x27;</span></span><br></pre></td></tr></table></figure><blockquote><p>XPath expressions are very powerful, and are the foundation of Scrapy Selectors. In fact, CSS selectors are converted to XPath under-the-hood. You can see that if you read closely the text representation of the selector objects in the shell.</p></blockquote><p>è¿™é‡Œè¯´XPathæ˜¯CSSSelectorçš„åŸºç¡€,æ„æ€æ˜¯æ›´å¼ºå¤§äº†</p><h3 id="è¿™é‡Œè®²å¦‚ä½•æå–æœ€ç»ˆçš„ç›®æ ‡æ•°æ®"><a href="#è¿™é‡Œè®²å¦‚ä½•æå–æœ€ç»ˆçš„ç›®æ ‡æ•°æ®" class="headerlink" title="è¿™é‡Œè®²å¦‚ä½•æå–æœ€ç»ˆçš„ç›®æ ‡æ•°æ®"></a>è¿™é‡Œè®²å¦‚ä½•æå–æœ€ç»ˆçš„ç›®æ ‡æ•°æ®</h3><p>è¿™ç¯‡æ•™ç¨‹ä¸­çš„ç›®çš„æ˜¯ä»ç½‘ç«™ä¸­æŠ“å–ä½œå“å’Œä½œè€…æ•°æ®,æˆ‘çŒœæ˜¯ç”¨æ­£åˆ™ğŸ™„<br>æŠ“åˆ°çš„ç½‘ç«™æ•°æ®æ ¼å¼å¦‚ä¸‹</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;quote&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;text&quot;</span>&gt;</span>â€œThe world as we have created it is a process of our</span><br><span class="line">    thinking. It cannot be changed without changing our thinking.â€<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">        by <span class="tag">&lt;<span class="name">small</span> <span class="attr">class</span>=<span class="string">&quot;author&quot;</span>&gt;</span>Albert Einstein<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/author/Albert-Einstein&quot;</span>&gt;</span>(about)<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;tags&quot;</span>&gt;</span></span><br><span class="line">        Tags:</span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;tag&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/tag/change/page/1/&quot;</span>&gt;</span>change<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;tag&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/tag/deep-thoughts/page/1/&quot;</span>&gt;</span>deep-thoughts<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;tag&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/tag/thinking/page/1/&quot;</span>&gt;</span>thinking<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;tag&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/tag/world/page/1/&quot;</span>&gt;</span>world<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œé‡æ–°æ‰“å¼€scrapy shell</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ scrapy shell <span class="string">&#x27;http://quotes.toscrape.com&#x27;</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨CSSSelectorè·å–åˆ°äº†æ‰€æœ‰çš„div.quoteå…ƒç´ å¯¹è±¡</span></span><br><span class="line">&gt;&gt;&gt; response.css(<span class="string">&quot;div.quote&quot;</span>)</span><br><span class="line"><span class="comment"># quoteç°åœ¨å°±æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ å¯¹è±¡</span></span><br><span class="line">&gt;&gt;&gt; quote=response.css(<span class="string">&quot;div.quote&quot;</span>)[0]</span><br><span class="line">&gt;&gt;&gt; quote</span><br><span class="line">&lt;Selector xpath=u<span class="string">&quot;descendant-or-self::div[@class and contains(concat(&#x27; &#x27;, normalize-space(@class), &#x27; &#x27;), &#x27; quote &#x27;)]&quot;</span> data=u<span class="string">&#x27;&lt;div class=&quot;quote&quot; itemscope itemtype=&quot;h&#x27;</span>&gt;</span><br><span class="line"><span class="comment"># ç„¶åæ ¹æ®quoteçš„å…ƒç´ å»æŸ¥æ‰¾ä¸‹é¢çš„å…ƒç´ </span></span><br><span class="line">&gt;&gt;&gt; title = quote.css(<span class="string">&quot;span.text::text&quot;</span>).extract_first()</span><br><span class="line">&gt;&gt;&gt; title</span><br><span class="line">u<span class="string">&#x27;\u201cThe world as we have created it is a process of our thinking. It cannot be changed without changing our thinking.\u201d&#x27;</span></span><br><span class="line">&gt;&gt;&gt; author = quote.css(<span class="string">&quot;small.author::text&quot;</span>).extract_first()</span><br><span class="line">&gt;&gt;&gt; author</span><br><span class="line"><span class="string">&#x27;Albert Einstein&#x27;</span></span><br><span class="line">&gt;&gt;&gt; tags = quote.css(<span class="string">&quot;div.tags a.tag::text&quot;</span>).extract()</span><br><span class="line">&gt;&gt;&gt; tags</span><br><span class="line">[u<span class="string">&#x27;change&#x27;</span>, u<span class="string">&#x27;deep-thoughts&#x27;</span>, u<span class="string">&#x27;thinking&#x27;</span>, u<span class="string">&#x27;world&#x27;</span>]</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; <span class="keyword">for</span> quote <span class="keyword">in</span> response.css(<span class="string">&quot;div.quote&quot;</span>):</span><br><span class="line">...     text=quote.css(<span class="string">&quot;span.text::text&quot;</span>).extract_first()</span><br><span class="line">...     author=quote.css(<span class="string">&quot;small.author::text&quot;</span>).extract_first()</span><br><span class="line">...     tags=quote.css(<span class="string">&quot;div.tags a.tag::text&quot;</span>).extract()</span><br><span class="line">...     <span class="built_in">print</span>(dict(text=text,author=author,tags=tags))</span><br><span class="line">...</span><br><span class="line">&#123;<span class="string">&#x27;text&#x27;</span>: u<span class="string">&#x27;\u201cThe world as we have created it is a process of our thinking. It cannot be changed without changing our thinking.\u201d&#x27;</span>, <span class="string">&#x27;tags&#x27;</span>: [u<span class="string">&#x27;change&#x27;</span>, u<span class="string">&#x27;deep-thoughts&#x27;</span>, u<span class="string">&#x27;thinking&#x27;</span>, u<span class="string">&#x27;world&#x27;</span>], <span class="string">&#x27;author&#x27;</span>: u<span class="string">&#x27;Albert Einstein&#x27;</span>&#125;</span><br><span class="line">&#123;<span class="string">&#x27;text&#x27;</span>: u<span class="string">&#x27;\u201cIt is our choices, Harry, that show what we truly are, far more than our abilities.\u201d&#x27;</span>, <span class="string">&#x27;tags&#x27;</span>: [u<span class="string">&#x27;abilities&#x27;</span>, u<span class="string">&#x27;choices&#x27;</span>], <span class="string">&#x27;author&#x27;</span>: u<span class="string">&#x27;J.K. Rowling&#x27;</span>&#125;</span><br><span class="line">... a few more of these, omitted <span class="keyword">for</span> brevity</span><br></pre></td></tr></table></figure><h3 id="åœ¨Spiderä¸­æå–æ•°æ®"><a href="#åœ¨Spiderä¸­æå–æ•°æ®" class="headerlink" title="åœ¨Spiderä¸­æå–æ•°æ®"></a>åœ¨Spiderä¸­æå–æ•°æ®</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QuotesSpider</span>(<span class="params">scrapy.Spider</span>):</span></span><br><span class="line">    name = <span class="string">&quot;quotes_extract&quot;</span></span><br><span class="line">    start_urls = [</span><br><span class="line">        <span class="string">&#x27;http://quotes.toscrape.com/page/1/&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;http://quotes.toscrape.com/page/2/&#x27;</span>,</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span>(<span class="params">self, response</span>):</span></span><br><span class="line">        <span class="keyword">for</span> quote <span class="keyword">in</span> response.css(<span class="string">&#x27;div.quote&#x27;</span>):</span><br><span class="line">            <span class="keyword">yield</span> &#123;</span><br><span class="line">                <span class="string">&#x27;text&#x27;</span>: quote.css(<span class="string">&#x27;span.text::text&#x27;</span>).extract_first(),</span><br><span class="line">                <span class="string">&#x27;author&#x27;</span>: quote.css(<span class="string">&#x27;small.author::text&#x27;</span>).extract_first(),</span><br><span class="line">                <span class="string">&#x27;tags&#x27;</span>: quote.css(<span class="string">&#x27;div.tags a.tag::text&#x27;</span>).extract(),</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç¨‹åºçœ‹è¾“å‡º,å¤§æ¦‚å°±æ˜¯ä¸‹é¢è¿™æ ·</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ scrapy crawl quotes_extract</span><br><span class="line">...</span><br><span class="line">2017-04-08 22:00:06 [scrapy.core.scraper] DEBUG: Scraped from &lt;200 http://quotes.toscrape.com/page/1/&gt;</span><br><span class="line">&#123;<span class="string">&#x27;text&#x27;</span>: u<span class="string">&#x27;\u201cThe world as we have created it is a process of our thinking. It cannot be changed without changing our thinking.\u201d&#x27;</span>, <span class="string">&#x27;tags&#x27;</span>: [u<span class="string">&#x27;change&#x27;</span>, u<span class="string">&#x27;deep-thoughts&#x27;</span>, u<span class="string">&#x27;thinking&#x27;</span>, u<span class="string">&#x27;world&#x27;</span>], <span class="string">&#x27;author&#x27;</span>: u<span class="string">&#x27;Albert Einstein&#x27;</span>&#125;</span><br><span class="line">2017-04-08 22:00:06 [scrapy.core.scraper] DEBUG: Scraped from &lt;200 http://quotes.toscrape.com/page/1/&gt;</span><br><span class="line">&#123;<span class="string">&#x27;text&#x27;</span>: u<span class="string">&#x27;\u201cIt is our choices, Harry, that show what we truly are, far more than our abilities.\u201d&#x27;</span>, <span class="string">&#x27;tags&#x27;</span>: [u<span class="string">&#x27;abilities&#x27;</span>, u<span class="string">&#x27;choices&#x27;</span>], <span class="string">&#x27;author&#x27;</span>: u<span class="string">&#x27;J.K. Rowling&#x27;</span>&#125;</span><br><span class="line">...</span><br><span class="line"><span class="comment"># è¾“å‡ºjsonæ–‡ä»¶</span></span><br><span class="line">$ scrapy crawl quotes_extract -o quotes_extract.json</span><br><span class="line"><span class="comment"># è¾“å‡ºjlæ–‡ä»¶</span></span><br><span class="line">$ scrapy crawl quotes_extract -o quotes_extract.jl</span><br></pre></td></tr></table></figure><blockquote><p>The JSON Lines format is useful because itâ€™s stream-like, you can easily append new records to it. It doesnâ€™t have the same problem of JSON when you run twice. Also, as each record is a separate line, you can process big files without having to fit everything in memory, there are tools like JQ to help doing that at the command-line.</p></blockquote><p>è¿™é‡Œç»ˆç«¯å’Œä¸Šé¢çš„è¾“å‡ºæ˜¯ä¸€æ ·çš„,åªæ˜¯æŠŠæ•°æ®ä¿å­˜åœ¨äº†jsonæ–‡ä»¶é‡Œ,éšä¾¿åˆ—å‡ æ¡çœ‹çœ‹æ•ˆæœå°±è¡Œäº†</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;\u201cThe world as we have created it is a process of our thinking. It cannot be changed without changing our thinking.\u201d&quot;</span>, <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;Albert Einstein&quot;</span>, <span class="attr">&quot;tags&quot;</span>: [<span class="string">&quot;change&quot;</span>, <span class="string">&quot;deep-thoughts&quot;</span>, <span class="string">&quot;thinking&quot;</span>, <span class="string">&quot;world&quot;</span>]&#125;,</span><br><span class="line">&#123;<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;\u201cIt is our choices, Harry, that show what we truly are, far more than our abilities.\u201d&quot;</span>, <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;J.K. Rowling&quot;</span>, <span class="attr">&quot;tags&quot;</span>: [<span class="string">&quot;abilities&quot;</span>, <span class="string">&quot;choices&quot;</span>]&#125;,</span><br><span class="line">&#123;<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;\u201cThere are only two ways to live your life. One is as though nothing is a miracle. The other is as though everything is a miracle.\u201d&quot;</span>, <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;Albert Einstein&quot;</span>, <span class="attr">&quot;tags&quot;</span>: [<span class="string">&quot;inspirational&quot;</span>, <span class="string">&quot;life&quot;</span>, <span class="string">&quot;live&quot;</span>, <span class="string">&quot;miracle&quot;</span>, <span class="string">&quot;miracles&quot;</span>]&#125;,</span><br><span class="line">&#123;<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;\u201cThe person, be it gentleman or lady, who has not pleasure in a good novel, must be intolerably stupid.\u201d&quot;</span>, <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;Jane Austen&quot;</span>, <span class="attr">&quot;tags&quot;</span>: [<span class="string">&quot;aliteracy&quot;</span>, <span class="string">&quot;books&quot;</span>, <span class="string">&quot;classic&quot;</span>, <span class="string">&quot;humor&quot;</span>]&#125;,</span><br><span class="line">&#123;<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;\u201cImperfection is beauty, madness is genius and it&#x27;s better to be absolutely ridiculous than absolutely boring.\u201d&quot;</span>, <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;Marilyn Monroe&quot;</span>, <span class="attr">&quot;tags&quot;</span>: [<span class="string">&quot;be-yourself&quot;</span>, <span class="string">&quot;inspirational&quot;</span>]&#125;,</span><br><span class="line">&#123;<span class="attr">&quot;text&quot;</span>: <span class="string">&quot;\u201cTry not to become a man of success. Rather become a man of value.\u201d&quot;</span>, <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;Albert Einstein&quot;</span>, <span class="attr">&quot;tags&quot;</span>: [<span class="string">&quot;adulthood&quot;</span>, <span class="string">&quot;success&quot;</span>, <span class="string">&quot;value&quot;</span>]&#125;,</span><br><span class="line">...</span><br><span class="line">]</span><br></pre></td></tr></table></figure><blockquote><p>In small projects (like the one in this tutorial), that should be enough. However, if you want to perform more complex things with the scraped items, you can write an Item Pipeline. A placeholder file for Item Pipelines has been set up for you when the project is created, in tutorial/pipelines.py. Though you donâ€™t need to implement any item pipelines if you just want to store the scraped items.</p></blockquote><p>è¿™ä¸ªæ˜¯ç®¡é“äº†,è¿™éƒ¨åˆ†å›å¤´å†çœ‹å§,ä»Šå¤©å…ˆåˆ°è¿™é‡Œ.ä¹ˆæœ‰æ•ˆç‡â€¦</p><h3 id="å¦‚ä½•æŒç»­æŸ¥æ‰¾æ‰€æœ‰ç½‘é¡µ"><a href="#å¦‚ä½•æŒç»­æŸ¥æ‰¾æ‰€æœ‰ç½‘é¡µ" class="headerlink" title="å¦‚ä½•æŒç»­æŸ¥æ‰¾æ‰€æœ‰ç½‘é¡µ"></a>å¦‚ä½•æŒç»­æŸ¥æ‰¾æ‰€æœ‰ç½‘é¡µ</h3><p>è¿™é‡Œåº”è¯¥å°±æ˜¯æ‰¾åˆ°â€ä¸‹ä¸€é¡µâ€çš„æ ‡è®°,ç„¶åæ— é™å‘ä¸‹ç›´åˆ°æ²¡æœ‰ä¸‹ä¸€é¡µä¸ºæ­¢,ä¹Ÿæ²¡ä»€ä¹ˆéš¾åº¦,æŒ‡å®šé€‰æ‹©å™¨è€Œå·².<br>ä¸‹é¢æ˜¯quotesç½‘ç«™çš„ä¸‹ä¸€é¡µå…ƒç´ </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">&quot;pager&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">&quot;next&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/page/2/&quot;</span>&gt;</span>Next <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">&quot;true&quot;</span>&gt;</span><span class="symbol">&amp;rarr;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p>shellé‡Œé¢å…ˆçœ‹çœ‹</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ scrapy shell <span class="string">&#x27;http://quotes.toscrape.com/&#x27;</span></span><br><span class="line">&gt;&gt;&gt; response.css(<span class="string">&#x27;li.next a::attr(href)&#x27;</span>).extract_first()</span><br><span class="line">u<span class="string">&#x27;/page/2/&#x27;</span></span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QuotesSpider</span>(<span class="params">scrapy.Spider</span>):</span></span><br><span class="line">    name = <span class="string">&quot;quotes_next&quot;</span></span><br><span class="line">    start_urls = [</span><br><span class="line">        <span class="string">&#x27;http://quotes.toscrape.com/page/1/&#x27;</span>,</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span>(<span class="params">self, response</span>):</span></span><br><span class="line">        <span class="keyword">for</span> quote <span class="keyword">in</span> response.css(<span class="string">&#x27;div.quote&#x27;</span>):</span><br><span class="line">            <span class="keyword">yield</span> &#123;</span><br><span class="line">                <span class="string">&#x27;text&#x27;</span>: quote.css(<span class="string">&#x27;span.text::text&#x27;</span>).extract_first(),</span><br><span class="line">                <span class="string">&#x27;author&#x27;</span>: quote.css(<span class="string">&#x27;small.author::text&#x27;</span>).extract_first(),</span><br><span class="line">                <span class="string">&#x27;tags&#x27;</span>: quote.css(<span class="string">&#x27;div.tags a.tag::text&#x27;</span>).extract(),</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        next_page = response.css(<span class="string">&#x27;li.next a::attr(href)&#x27;</span>).extract_first()</span><br><span class="line">        <span class="keyword">if</span> next_page <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="comment"># ä»ç›¸å¯¹è·¯å¾„è·å–é¡µé¢çš„ç»å¯¹è·¯å¾„</span></span><br><span class="line">            <span class="comment"># http://quotes.toscrape.com/page/1/</span></span><br><span class="line">            <span class="comment"># /page/2/</span></span><br><span class="line">            <span class="comment"># æ‹¼èµ·æ¥å°±æ˜¯http://quotes.toscrape.com/page/2/è¿™æ ·</span></span><br><span class="line">            next_page = response.urljoin(next_page)</span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(next_page, callback=self.parse)</span><br></pre></td></tr></table></figure><blockquote><p>What you see here is Scrapyâ€™s mechanism of following links: when you yield a Request in a callback method, Scrapy will schedule that request to be sent and register a callback method to be executed when that request finishes.</p></blockquote><p>scrapyå›è°ƒparseçš„æ—¶å€™ä¼šè§¦å‘next_pageä¸‹é¢çš„<code>scrapy.Request(next_page, callback=self.parse)</code>ä»£ç ,å¾ªç¯ç›´åˆ°<code>next_page=None</code></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AuthorSpider</span>(<span class="params">scrapy.Spider</span>):</span></span><br><span class="line">    name = <span class="string">&#x27;quotes_author&#x27;</span></span><br><span class="line"></span><br><span class="line">    start_urls = [<span class="string">&#x27;http://quotes.toscrape.com/&#x27;</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span>(<span class="params">self, response</span>):</span></span><br><span class="line">        <span class="comment"># follow links to author pages</span></span><br><span class="line">        <span class="keyword">for</span> href <span class="keyword">in</span> response.css(<span class="string">&#x27;.author + a::attr(href)&#x27;</span>).extract():</span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(response.urljoin(href),</span><br><span class="line">                                 callback=self.parse_author)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># follow pagination links</span></span><br><span class="line">        next_page = response.css(<span class="string">&#x27;li.next a::attr(href)&#x27;</span>).extract_first()</span><br><span class="line">        <span class="keyword">if</span> next_page <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            next_page = response.urljoin(next_page)</span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(next_page, callback=self.parse)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse_author</span>(<span class="params">self, response</span>):</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">extract_with_css</span>(<span class="params">query</span>):</span></span><br><span class="line">            <span class="keyword">return</span> response.css(query).extract_first().strip()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">yield</span> &#123;</span><br><span class="line">            <span class="string">&#x27;name&#x27;</span>: extract_with_css(<span class="string">&#x27;h3.author-title::text&#x27;</span>),</span><br><span class="line">            <span class="string">&#x27;birthdate&#x27;</span>: extract_with_css(<span class="string">&#x27;.author-born-date::text&#x27;</span>),</span><br><span class="line">            <span class="string">&#x27;bio&#x27;</span>: extract_with_css(<span class="string">&#x27;.author-description::text&#x27;</span>),</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸€æ®µæ˜¯å…ˆåŠ è½½é¡µé¢ä¹‹åæ‹¿åˆ°æ‰€æœ‰çš„ä½œè€…çš„é“¾æ¥,ç„¶ååœ¨parseä¸­æ–°å»ºscrapy.Request()è¯·æ±‚,è§¦å‘parse_authorå›è°ƒ,åœ¨ä½œè€…é¡µé¢ä¸­æ‹¿åˆ°ä½œè€…ä¿¡æ¯<br>æˆ‘åœ¨æƒ³è¿™ä¸ªä¸œè¥¿ä¼šä¸ä¼šä¸€ä¸å°å¿ƒææˆé€’å½’äº†â€¦</p><blockquote><p>Another interesting thing this spider demonstrates is that, even if there are many quotes from the same author, we donâ€™t need to worry about visiting the same author page multiple times. By default, Scrapy filters out duplicated requests to URLs already visited, avoiding the problem of hitting servers too much because of a programming mistake. This can be configured by the setting DUPEFILTER_CLASS.</p></blockquote><p>è¯è¯´è¿™æ˜¯è‡ªå¸¦é˜²æ­¢é€’å½’çš„åŠŸèƒ½?æ¡†æ¶æœç„¶æ˜¯å¥½ä¸œè¥¿,æ€¥äººä¹‹æ‰€æ€¥å•Š</p><h3 id="ä¼ é€’å‚æ•°"><a href="#ä¼ é€’å‚æ•°" class="headerlink" title="ä¼ é€’å‚æ•°"></a>ä¼ é€’å‚æ•°</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QuotesSpider</span>(<span class="params">scrapy.Spider</span>):</span></span><br><span class="line">    name = <span class="string">&quot;quotes_tags&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">start_requests</span>(<span class="params">self</span>):</span></span><br><span class="line">        url = <span class="string">&#x27;http://quotes.toscrape.com/&#x27;</span></span><br><span class="line">        tag = getattr(self, <span class="string">&#x27;tag&#x27;</span>, <span class="literal">None</span>)</span><br><span class="line">        <span class="keyword">if</span> tag <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            url = url + <span class="string">&#x27;tag/&#x27;</span> + tag</span><br><span class="line">        <span class="keyword">yield</span> scrapy.Request(url, self.parse)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span>(<span class="params">self, response</span>):</span></span><br><span class="line">        <span class="keyword">for</span> quote <span class="keyword">in</span> response.css(<span class="string">&#x27;div.quote&#x27;</span>):</span><br><span class="line">            <span class="keyword">yield</span> &#123;</span><br><span class="line">                <span class="string">&#x27;text&#x27;</span>: quote.css(<span class="string">&#x27;span.text::text&#x27;</span>).extract_first(),</span><br><span class="line">                <span class="string">&#x27;author&#x27;</span>: quote.css(<span class="string">&#x27;small.author::text&#x27;</span>).extract_first(),</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        next_page = response.css(<span class="string">&#x27;li.next a::attr(href)&#x27;</span>).extract_first()</span><br><span class="line">        <span class="keyword">if</span> next_page <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            next_page = response.urljoin(next_page)</span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(next_page, self.parse)</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy crawl quotes_tags -o quotes_tags.json -a tag=humor</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆè·å–çš„ç»“æœåªæœ‰humorç±»å‹çš„</p><blockquote><p>You can learn more about <span class="exturl" data-url="aHR0cHM6Ly9kb2NzLnNjcmFweS5vcmcvZW4vbGF0ZXN0L3RvcGljcy9zcGlkZXJzLmh0bWwjc3BpZGVyYXJncw==" title="https://docs.scrapy.org/en/latest/topics/spiders.html#spiderargs">handling spider arguments here<i class="fa fa-external-link"></i></span>.</p></blockquote><p>ä»Šå¤©å°±åˆ°è¿™é‡Œ,æ¶ˆåŒ–ä¸€ä¸‹.</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;åšä¸ªçˆ¬è™«è¯•è¯•å§ï¼Œæ‰“å‘æ— èŠæ—¶å…‰&lt;/p&gt;
&lt;p&gt;è¿™é‡Œçœ‹åˆ°äº†yieldå…³é”®å­—,pythonçš„ä¸œè¥¿è¿˜æ˜¯ä¸ç†Ÿ,ç™¾åº¦äº†ä¸€ä¸‹å¤§æ¦‚æœ‰ä¸ªæ¦‚å¿µ,æ…¢æ…¢ç ”ç©¶,å…ˆæ”¾ä¸ª&lt;span class=&quot;exturl&quot; data-url=&quot;aHR0cDovL3d3dy5qaWFuc2h1LmNvbS9wL2QwOTc3OGY0ZTA1NQ==&quot; title=&quot;http://www.jianshu.com/p/d09778f4e055&quot;&gt;é“¾æ¥&lt;i class=&quot;fa fa-external-link&quot;&gt;&lt;/i&gt;&lt;/span&gt;markä¸€ä¸‹&lt;/p&gt;
    
    </summary>
    
      <category term="ç¬”è®°" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/"/>
    
      <category term="Scrapy" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/Scrapy/"/>
    
    
      <category term="python" scheme="https://hisashiburidane.github.io/tags/python/"/>
    
      <category term="spider" scheme="https://hisashiburidane.github.io/tags/spider/"/>
    
      <category term="Scrapy" scheme="https://hisashiburidane.github.io/tags/Scrapy/"/>
    
  </entry>
  
  <entry>
    <title>Macå‘½ä»¤</title>
    <link href="https://hisashiburidane.github.io//%E7%AC%94%E8%AE%B0/%E9%9A%8F%E4%BE%BF%E8%AE%B0%E7%82%B9%E4%BB%80%E4%B9%88/2017/03/09/Mac%E5%91%BD%E4%BB%A4/"/>
    <id>https://hisashiburidane.github.io//ç¬”è®°/éšä¾¿è®°ç‚¹ä»€ä¹ˆ/2017/03/09/Macå‘½ä»¤/</id>
    <published>2017-03-09T15:33:59.000Z</published>
    <updated>2018-09-08T09:20:09.757Z</updated>
    
    <content type="html"><![CDATA[<p>ä¹Ÿè¯´ä¸ä¸Šæ˜¯æ‰‹è´±å§,åæ­£æ˜¯ä¹°äº†å°ä½é…MBP,æœ‰äº›ä¸œè¥¿è¿˜æ˜¯è¦è®°ä¸€ä¸‹çš„<br><a id="more"></a></p><h1 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h1><h2 id="å…è®¸ä»ä»»æ„æ¥æºå®‰è£…åº”ç”¨"><a href="#å…è®¸ä»ä»»æ„æ¥æºå®‰è£…åº”ç”¨" class="headerlink" title="å…è®¸ä»ä»»æ„æ¥æºå®‰è£…åº”ç”¨"></a>å…è®¸ä»ä»»æ„æ¥æºå®‰è£…åº”ç”¨</h2><p>å…è®¸ä»ä»»ä½•æ¥æºå®‰è£…åº”ç”¨,æœ‰äº›è½¯ä»¶åŒ…å®‰è£…çš„æ—¶å€™æƒé™ä¸è¶³ä¼šå®‰è£…å¤±è´¥,éœ€è¦ç”¨åˆ°,è®°å¾—å®‰è£…å®Œæ¯•å›å¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo spctl --master-disable</span><br></pre></td></tr></table></figure><h2 id="å…³é—­system-integrity-protection"><a href="#å…³é—­system-integrity-protection" class="headerlink" title="å…³é—­system integrity protection"></a>å…³é—­system integrity protection</h2><p>ä¹°äº†å°æ˜¾ç¤ºå™¨,åˆ†è¾¨ç‡é»˜è®¤ä¸é€‚é…HiDPI,ä¸‹äº†ä¸ªè½¯ä»¶ä¹Ÿæ”¹ä¸å¥½,æç¤ºéœ€è¦å…³é—­System Intergrity Protection<br>é‡å¯ç”µè„‘,æŒ‰ä½command+Ré”®è¿›å…¥æ¢å¤æ¨¡å¼,è°ƒå‡ºç»ˆç«¯<br>æ“ä½œå®Œäº†è®°å¾—æ¢å¤,æ¯•ç«Ÿæ˜¯ç³»ç»Ÿä¿æŠ¤åŠŸèƒ½</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…³é—­sip</span></span><br><span class="line">csrutil <span class="built_in">disable</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å¼€sip</span></span><br><span class="line">csrutil <span class="built_in">enable</span></span><br></pre></td></tr></table></figure><h2 id="å…³äºâ€xxxx-xxå·²è¢«OS-Xä½¿ç”¨-æ— æ³•æ‰“å¼€â€çš„é—®é¢˜"><a href="#å…³äºâ€xxxx-xxå·²è¢«OS-Xä½¿ç”¨-æ— æ³•æ‰“å¼€â€çš„é—®é¢˜" class="headerlink" title="å…³äºâ€xxxx.xxå·²è¢«OS Xä½¿ç”¨,æ— æ³•æ‰“å¼€â€çš„é—®é¢˜"></a>å…³äºâ€xxxx.xxå·²è¢«OS Xä½¿ç”¨,æ— æ³•æ‰“å¼€â€çš„é—®é¢˜</h2><p>è¯´é“è¿™é‡Œä¸å¾—ä¸æ„Ÿæ…¨è‡ªå·±çš„è´«ç©·,ç¡¬ç›˜ä¸å¤Ÿç§»åŠ¨çš„æ¥å‡‘,è£…äº†ä¸ªåŒç³»ç»Ÿæ¥å›å€’è…¾,ä¸çŸ¥é“æ€ä¹ˆå°±ä¼šå¯¼è‡´ç§»åŠ¨ç¡¬ç›˜é‡Œé¢ä¸€äº›æ–‡ä»¶æ— æ³•æ‰“å¼€,<code>zip/rar</code>æ–‡ä»¶æ— æ³•è§£å‹,ç™¾åº¦å¾ˆä¹…æœ‰ä¸€ä¸ª[æ–¹æ³•][å…³äºâ€œxx.xxå·²è¢«OS Xä½¿ç”¨ï¼Œæ— æ³•æ‰“å¼€â€çš„é—®é¢˜]å¯è¡Œâ€¦</p><blockquote><p>Macç”µè„‘ä¸Šçš„æ–‡ä»¶æ‹·è´åˆ°ç§»åŠ¨ç¡¬ç›˜ï¼Œæœ‰æ—¶å€™ä¼šå‡ºç°â€œxx.xxå·²è¢«OS Xä½¿ç”¨ï¼Œæ— æ³•æ‰“å¼€â€çš„é—®é¢˜ã€‚<br>è§£å†³åŠæ³•ï¼š</p><p>1ã€æ‰“å¼€ç»ˆç«¯(æˆ–åœ¨Macæœç´¢é‡Œé¢è¾“å…¥Terminal);</p><p>2ã€åœ¨ç»ˆç«¯é‡Œè¾“å…¥ xattr -l ï¼Œç„¶åæŠŠå‡ºé—®é¢˜çš„æ–‡ä»¶æ‹–åŠ¨åˆ° â€œxattr -l åé¢â€,å›è½¦ï¼›</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;Sayonara-MacBook-Pro:~ liudongmeng$ xattr -l</span><br><span class="line">&gt;Sayonara-MacBook-Pro:S1 liudongmeng$ xattr -l 1_1310389850k0Hh.zip</span><br></pre></td></tr></table></figure><p>3ã€ç„¶åï¼Œç¬¬ä¸€è¡Œä¼šæœ‰ com.apple.FinderInfo è¿™ä¸²å­—ç¬¦ã€‚å¤åˆ¶è¿™ä¸²å­—ç¬¦ï¼Œå›è½¦</p><p>ä¾‹å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&gt;Sayonara-MacBook-Pro:S1 liudongmeng$ xattr -l 1_1310389850k0Hh.zip</span><br><span class="line">&gt;com.apple.FinderInfo:</span><br><span class="line">&gt;00000000  62 72 6F 6B 4D 41 43 53 00 00 00 00 00 00 00 00  |brokMACS........|</span><br><span class="line">&gt;00000010  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  |................|</span><br><span class="line">&gt;00000020</span><br><span class="line">&gt;com.apple.metadata:kMDItemWhereFroms:</span><br><span class="line">&gt;00000000  62 70 6C 69 73 74 30 30 A2 01 02 5F 10 45 68 74  |bplist00..._.Eht|</span><br><span class="line">&gt;00000010  74 70 3A 2F 2F 72 65 6E 72 65 6E 2E 6D 61 6F 79  |tp://renren.maoy|</span><br><span class="line">&gt;00000020  75 6E 2E 74 76 2F 66 74 70 2F 61 74 74 61 63 68  |un.tv/ftp/attach|</span><br><span class="line">&gt;00000030  6D 65 6E 74 2F 32 30 31 31 30 37 2F 31 31 2F 31  |ment/201107/11/1|</span><br><span class="line">&gt;00000040  5F 31 33 31 30 33 38 39 38 35 30 6B 30 48 68 2E  |_1310389850k0Hh.|</span><br><span class="line">&gt;00000050  7A 69 70 5F 10 1A 68 74 74 70 3A 2F 2F 7A 6D 7A  |zip_..http://zmz|</span><br><span class="line">&gt;00000060  30 30 31 2E 63 6F 6D 2F 73 2F 4B 64 57 39 37 33  |001.com/s/KdW973|</span><br><span class="line">&gt;00000070  08 0B 53 00 00 00 00 00 00 01 01 00 00 00 00 00  |..S.............|</span><br><span class="line">&gt;00000080  00 00 03 00 00 00 00 00 00 00 00 00 00 00 00 00  |................|</span><br><span class="line">&gt;00000090  00 00 70                                         |..p|</span><br><span class="line">&gt;00000093</span><br><span class="line">&gt;com.apple.quarantine: 0081;5a6c2976;Chrome;8EF54D09-8C0A-4E6F-9BE0-15C8A1B945A9</span><br></pre></td></tr></table></figure><p>4ã€æ¥ä¸‹æ¥ï¼Œè¾“å…¥æ–°çš„å‘½ä»¤ xattr -d com.apple.FinderInfo å†æŠŠé—®é¢˜æ–‡ä»¶æ‹–è¿›å»ï¼Œé—®é¢˜å°±è§£å†³äº†</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;Sayonara-MacBook-Pro:S1 liudongmeng$ xattr -d com.apple.FinderInfo 1_1310389850k0Hh.zip</span><br></pre></td></tr></table></figure></blockquote><h1 id="å¿«æ·é”®"><a href="#å¿«æ·é”®" class="headerlink" title="å¿«æ·é”®"></a>å¿«æ·é”®</h1><p>å…ˆç©ºç€,è¿™ä¸ªä¸œè¥¿å¸¸ç”¨çš„ç”¨å¤šäº†å°±è®°å¾—äº†</p><h1 id="è½¯ä»¶"><a href="#è½¯ä»¶" class="headerlink" title="è½¯ä»¶"></a>è½¯ä»¶</h1><p>[Awesome Mac][Awesome Mac]çœ‹èµ·æ¥ä¸é”™,æ…¢æ…¢æ‹‰<br>[Awesome Mac]: <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2pheXdjamxvdmUvYXdlc29tZS1tYWM=" title="https://github.com/jaywcjlove/awesome-mac">https://github.com/jaywcjlove/awesome-mac<i class="fa fa-external-link"></i></span> â€œAwesome Macâ€<br>[å…³äºâ€œxx.xxå·²è¢«OS Xä½¿ç”¨ï¼Œæ— æ³•æ‰“å¼€â€çš„é—®é¢˜]: <span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20veGl1NjE5NTQ0NTUzL3AvNTI3MDIwMC5odG1s" title="https://www.cnblogs.com/xiu619544553/p/5270200.html">https://www.cnblogs.com/xiu619544553/p/5270200.html<i class="fa fa-external-link"></i></span> â€œå…³äºâ€œxx.xxå·²è¢«OS Xä½¿ç”¨ï¼Œæ— æ³•æ‰“å¼€â€çš„é—®é¢˜â€</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ä¹Ÿè¯´ä¸ä¸Šæ˜¯æ‰‹è´±å§,åæ­£æ˜¯ä¹°äº†å°ä½é…MBP,æœ‰äº›ä¸œè¥¿è¿˜æ˜¯è¦è®°ä¸€ä¸‹çš„&lt;br&gt;
    
    </summary>
    
      <category term="ç¬”è®°" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/"/>
    
      <category term="éšä¾¿è®°ç‚¹ä»€ä¹ˆ" scheme="https://hisashiburidane.github.io/categories/%E7%AC%94%E8%AE%B0/%E9%9A%8F%E4%BE%BF%E8%AE%B0%E7%82%B9%E4%BB%80%E4%B9%88/"/>
    
    
  </entry>
  
</feed>
