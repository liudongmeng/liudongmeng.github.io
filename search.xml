<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>2018-09-08</title>
      <link href="/2018/09/08/2018-09-08/"/>
      <url>/2018/09/08/2018-09-08/</url>
      <content type="html"><![CDATA[<h1 id="ç­‰å¤–å–ä¸­-éšä¾¿å†™ç‚¹ä¸œè¥¿"><a href="#ç­‰å¤–å–ä¸­-éšä¾¿å†™ç‚¹ä¸œè¥¿" class="headerlink" title="ç­‰å¤–å–ä¸­,éšä¾¿å†™ç‚¹ä¸œè¥¿"></a>ç­‰å¤–å–ä¸­,éšä¾¿å†™ç‚¹ä¸œè¥¿</h1><blockquote><p>æœ€è¿‘ä¸€å¹´çœŸçš„æ˜¯å‘ç”Ÿäº†å¤ªå¤šçš„äº‹æƒ…,é€‚å½“çš„ä¹Ÿè¦å†™ä¸€ä¸‹<br><a id="more"></a><br>é¦–å…ˆæ˜¯å»å¹´å››äº”å…­æœˆä»½å¼€å§‹å§,å…·ä½“æˆ‘ä¹Ÿä¸è®°å¾—äº†(OSChina Git ä»“åº“é‡Œé¢çš„ä»£ç è¿˜åœ¨,ä¸Šä¼ æ—¥æœŸæ˜¯6æœˆ12æ—¥,å·®ä¸å¤šä¹Ÿå°±æ˜¯è¿™å‡ å¤©å§),åæ­£æ˜¯åšäº†ä¸€ä»¶ç‰¹åˆ«å‚»é€¼çš„äº‹æƒ…,æŒç»­äº†å‡ ä¸ªæœˆ,ç”Ÿæ´»è´¨é‡å¾ˆå·®,ç¡ä¸å¥½,åƒä¸å¤Ÿ.</p></blockquote><p>P.S. å¤–å–å‘˜è½¦å­åäº†,å¥½åƒæ˜¯è¿‡äº†å¾ˆä¹…æ‰é€è¾¾,ä¸è¿‡æ— æ‰€è°“å’¯,æˆ‘è¿™ä¸ªäººå…¶å®å¾ˆè®²é“ç†çš„â€¦</p><p>ç„¶å,åˆšæ‰ç¬¬ä¸€æ¬¡æäº¤,tmdç«Ÿç„¶å†™çš„æ ‡é¢˜æ˜¯9æœˆ4å·â€¦æˆ‘è¿™ç”Ÿæ´»è´¨é‡å¯è§ä¸€æ–‘å•Š!</p><blockquote><p>å…³äºç”Ÿæ´»</p></blockquote><p>å»å¹´ä¸€æœˆåˆ°2018-09-04,ä½“é‡å¢åŠ äº†æœ‰50æ–¤,ä»€ä¹ˆæ¦‚å¿µ?</p><p>è¿‡äº†ä¸€å¹´,ä¸Šä¸ªæœˆä½“æ£€ç»“æœå‡ºæ¥æ„Ÿè§‰ç‰¹åˆ«ä¸å¥½,åŠ ä¸Šè¿™ä¸€å¹´çš„æ€è€ƒ,å·¥ä½œçš„è°ƒæ•´,è¿˜æœ‰ä¸€äº›å…¶ä»–çš„ç»å†å§,tmdå¿«ä¸‰åäº†æ‰æƒ³é€šä¸€äº›äº‹æƒ…,æ¯”èµ·æŸäº›äººçœŸçš„å·®å¤ªè¿œå•Šâ€¦</p><p>æ‰€ä»¥è¯´åŸ‹å¤´å·¥ä½œä¸æ˜¯ä»€ä¹ˆå¥½äº‹æƒ…,ç”Ÿæ´»ä¹Ÿå¾ˆé‡è¦.butâ€¦è¯´èµ·æˆ‘å®¶é‡Œä¸€å †ç³Ÿå¿ƒçš„äº‹æƒ…,ä¹Ÿæ˜¯æ²¡åŠæ³•,å¦‚æœä¿ç•™ç°åœ¨çš„è®°å¿†å†æ¥ä¸€æ¬¡æˆ‘è‚¯å®šä¼šæœ‰ä¸€ä¸ªä¸ä¸€æ ·çš„äººç”Ÿé€‰æ‹©,ä¸è¿‡å½“æ—¶çš„äº‹æƒ…å…¶å®éƒ½æ˜¯å¿…ç„¶,ç°åœ¨ä¹Ÿè¿˜å¥½.</p><p>æ˜å¤©å»è·Ÿå¦ä¸€ä¸ªèƒ–å­åƒé¡¿é¥­,ä¸€ä¸ªæ˜¯æç‚¹å‘ç¥¨,å†ä¸€ä¸ªå°±æ˜¯å‡ºå»æ•£æ•£å¿ƒ,å…¶å®äº”è§’åœºæœ‰ä¸€å®¶è¿ªå¡ä¾¬è·ç¦»æˆ‘ç®—å¾ˆè¿‘,ä¸è¿‡å¹³æ—¶æ‡’å¾—å».ç„¶åå…¬å¸å‘çš„æœˆé¥¼åæ­£æ˜¯ä¸å—æˆ‘å¾…è§,é¡ºè·¯é€äºº,è‡ªå·±åƒçš„è‡ªå·±ä¹°å’¯,å…¬å¸æˆ‘è¿˜æ˜¯æ›´çœ‹é‡é‡‘é’±å¾…é‡,è¿™ç‚¹äººæ–‡å…³æ€€ä¹ˆâ€¦å¯ä»¥ç¼“ä¸€ç¼“</p><blockquote><p>å…³äºå·¥ä½œ</p></blockquote><p>è¯´è‰¯å¿ƒè¯,æˆ‘ä¹‹å‰ä¸€ç›´éƒ½å¯¹åŒäº‹ç‰¹åˆ«çš„ä¸å¥½,å€’ä¸æ˜¯è¯´å¯¹ä¸èµ·è°,ä½†æ˜¯ç¡®å®ä¸æ˜¯æ­£å¸¸çš„ç›¸å¤„,ä¹Ÿæ˜¯å’Œæ€§æ ¼æœ‰å…³å§.</p><p>è‡³ä»Šä¸ºæ­¢,æˆ‘è¿˜æ²¡æœ‰æƒ³å¥½è¦åœ¨å·¥ä½œä¸­æ±‚ç¨³å®š,æˆ‘è§‰å¾—è‡ªå·±è¿˜æ˜¯æœ‰è¦ç‰¹åˆ«çš„å»åŠªåŠ›äº‰å–çš„ä¸œè¥¿,æ‰€ä»¥å·¥ä½œä¸­<code>æ‘¸é±¼</code>æˆ‘æ˜¯åšä¸æ¥çš„,ç”±äºç§ç§åŸå› ,ä¸è¿‡é©¬ä¸Šæ¬å®¶,å¯èƒ½ä¼šå¥½ä¸€ç‚¹.ç¦»å®¶è¿‘ä¸€ç‚¹,å¤©æ°”æ¸å‡‰å¯ä»¥éª‘è½¦å»,å¥èº«æˆ¿æ…¢æ…¢çš„ä¹Ÿå¯ä»¥å»,ç„¶åé¡¹ç›®â€¦</p><p>å…³äºé¡¹ç›®æ€ä¹ˆè¯´å‘¢,æˆ‘ä¹Ÿå¯ä»¥ç†è§£å‰é¢å·¥ç¨‹äººå‘˜çš„<code>æ€¥åŠŸè¿‘åˆ©</code>,ä½†æ˜¯è¿˜æ˜¯è¯´,éœ€æ±‚æçš„è¦è®²é“ç†.</p><p>æ€»ç»“äº†ä¸€ä¸‹,æœ‰ä¸€äº›éœ€æ±‚æ˜¯æˆ‘ä¸æ„¿æ„åšçš„</p><ul><li>éœ€æ±‚æ¨¡ç³Šä¸æ¸…,ä¸çŸ¥é“è‡ªå·±è¦ä»€ä¹ˆ,æˆ‘è¿™ä¸ªäººä¹Ÿæ˜¯æœ‰é€‰æ‹©éšœç¢çš„,ä½ è¯´ä¸æ¸…,æˆ‘ä¸ç†è§£éœ€æ±‚åšä¸å‡ºé€‰æ‹©,å’±å°±åˆ«åšäº†å§â€¦</li><li>éœ€æ±‚ä¸åˆç†,è™½ç„¶æ°´åŠ¡æœ‰è‡ªå·±çš„çŸ¥è¯†ä½“ç³»,ä½†æ˜¯æœ‰ä¸€äº›ä¸œè¥¿æ˜¯ç›¸é€šçš„,æœ‰äº›ä¸œè¥¿é’ˆå¯¹ä¸ªäººæ˜¯åˆç†çš„,ä½†æ˜¯é’ˆå¯¹äº<code>ç³»ç»Ÿ</code>,æˆ‘è§‰å¾—å°±æœºå™¨ä¸åˆç†.</li><li>ä¸€æ˜§è¿åˆå®¢æˆ·,æˆ‘å¾ˆè®¨åŒå¯¹æ–¹ä»¥<code>äº§å“å»¶ç»­æ€§</code>ä½œä¸ºéœ€æ±‚çš„ä¾æ®,å¥½çš„ä¸œè¥¿æ˜¯åº”è¯¥æœ‰å»¶ç»­æ€§,å¯æ˜¯ä¸å¥½çš„â€¦è¯´å¥å®åœ¨è¯,å®¢æˆ·çš„éœ€æ±‚å¾ˆå¤šæ—¶å€™å¹¶ä¸æ˜¯ä»¥å®¢è§‚çš„å¥½/ä¸å¥½è¯„ä»·çš„,è€Œæ˜¯è‡ªèº«çš„åˆ©ç›Š,æ¯”å¦‚ä½›å±±å½“æ—¶æŠŠå¾ˆå¤šä¹‹å‰åšæˆä¸¥æ ¼ç»Ÿè®¡çš„åŠŸèƒ½é€»è¾‘æ”¹æ‰,å…¶å®å°±æ˜¯<code>é¿å…è€ƒæ ¸è‡ªå·±</code></li><li><code>ä¸è§£é‡Š,ä½ ç…§åšå°±å¥½</code>,å½“ç„¶æˆ‘å¯¹äºç…§åšä¹Ÿæ²¡ä»€ä¹ˆæ„è§,å¯æ˜¯ç°å®æƒ…å†µæ˜¯é¡¹ç›®äººå‘˜æ ¹æœ¬æ²¡æ—¶é—´è€ƒè™‘æ­£ç¡®æ€§åˆç†æ€§çš„é—®é¢˜,æœä»¤å¤•æ”¹äº‹åä¸è®¤çš„äº‹æƒ…æ¯”æ¯”çš†æ˜¯,è®²é“ç†ä»¥ç°æœ‰çš„æ”¶å…¥æ°´å¹³,æˆ‘æ˜¯åšä¸åˆ°å”¯å‘½æ˜¯ä»çš„ç¨‹åº¦â€¦å¼€å‘äººå‘˜é€‚å½“çš„ç†è§£ä¸šåŠ¡,æœ‰åŠ©äºåŠŸèƒ½è®¾è®¡çš„åˆç†æ€§ä»¥åŠåå°è®¾è®¡çš„åˆç†æ€§,åŒæ—¶åšçš„è¿‡ç¨‹ä¸­ä¹Ÿä¸ç”¨æ¯äº‹å¿…é—®,å‡å°‘å¤§å®¶çš„æ— ç•æ²Ÿé€š.å½“ç„¶é¡¹ç›®æ˜¯ä¸å¯èƒ½æ”¾å¼ƒ<code>æœ€ç»ˆè§£é‡Šæƒ</code>çš„å§â€¦å‘é’±çœ‹,æ¯•ç«Ÿäººå®¶æ˜¯ç›´æ¥åˆ›æ”¶çš„éƒ¨é—¨å’¯</li></ul><p>è¯´èµ·æ¥æœ‰ç‚¹è£…é€¼,ä½†æ˜¯æˆ‘æ€ä¹ˆæ„Ÿè§‰æœ‰çš„ç§‘ç­æ¯•ä¸šçš„å¯¹ä¸šåŠ¡çš„ç†è§£è¿˜æ²¡æˆ‘åˆç†â€¦ä¸è¿‡ç®—äº†,è½¯ä»¶å¼€å‘æœ‰è¿™äº›é—®é¢˜çš„ä¹Ÿä¸æ˜¯ä¸€å®¶,é€šç—…,å¦‚ä½•å¤„ç†æ‰é‡è¦,æˆ‘ä¹Ÿåªæ˜¯åæ§½åæ§½â€¦ä»Šå¤©å‘çš„æ–‡æ¡£çœ‹èµ·æ¥æ²¡æˆ‘ä»€ä¹ˆäº‹,ä¸æ˜¯æŒºå¥½ä¹ˆå“ˆå“ˆ</p><blockquote><p>å…³äºè¿™ä¸ªæ—¶ä»£</p></blockquote><p>è¯´æ˜¯æ—¶ä»£æœ‰ç‚¹è£…é€¼,å…¶å®æ— éæ˜¯æ´»è¿‡æ¥çš„è¿™äº›å¹´,æˆ‘å¼€å§‹è¶Šæ¥è¶Šè®¨åŒä¸€äº›ä¸œè¥¿äº†.ä¸¾ä¾‹:</p><ul><li>ä»¥BATä¸ºé¦–çš„äº’è”ç½‘å…¬å¸,æœé›†ç”¨æˆ·çš„å„ç§æ•°æ®,ç„¶åç»™ä½ æ¨é€å„ç§å„æ ·çš„ä¸œè¥¿,åŒ…æ‹¬å•†å“,å’¨è¯¢,çŸ¥è¯†â€¦é—®é¢˜æ˜¯,è¿™äº›ä¸œè¥¿å®Œå…¨æ²¡æœ‰å®¢è§‚æ€§,å•†å“æ— éä¸ºäº†è®©å®¢æˆ·æé’±,å’¨è¯¢ä¹Ÿæ˜¯å¼•é¢†èˆ†è®º,åˆ›é€ å„ç§æœ‰åˆ©è‡ªå·±,æˆ–æ˜¯è‡ªå·±å°†è¦æ¶‰è¶³é¢†åŸŸçš„å•†ä¸šå®£ä¼ å†…å®¹,è‡³äºçŸ¥è¯†â€¦æœ‰å¤šå°‘æ˜¯çœŸçš„?</li><li>æœ€è¿‘æ¸æ¸çš„ä¹Ÿå‚ä¸é¢è¯•äº†ä¸€äº›äºº,ç»“åˆè‡ªå·±å½“åˆå‡ºæ¥æ‰¾å·¥ä½œæ—¶çš„çŠ¶æ€,è¿˜æ˜¯æ„Ÿæ…¨è‡ªå·±å¤ªä¸æˆç†Ÿ,ä¸ºäº†é’±,æœ‰ä»€ä¹ˆæ˜¯ä¸èƒ½éª—çš„?ä¸è¿‡è¿˜æ˜¯è¯´,å·¥ä½œ/æ‰¾å·¥ä½œ,åœ¨æˆ‘çœ‹æ¥è¿˜æ˜¯è¦æœ‰ä¸€äº›æ‹…å½“å’Œè¿½æ±‚çš„,åƒæœ‰çš„åŒäº‹,ä¸€å¥<code>å¥½äº†å°±è¡Œäº†ä½ ç®¡å®ƒä¸ºä»€ä¹ˆ</code>æˆ‘ä¹Ÿæ˜¯æœ‰ç‚¹æ— å¯å¥ˆä½•â€¦</li><li>ç±»ä¼¼<code>ç™¾åº¦</code>,<code>æŠ–éŸ³</code>,<code>æ–°æµª</code>,ç”šè‡³<code>è™æ‰‘</code>,<code>æ–—é±¼</code>ç­‰å„ç±»ç›´æ’­è½¯ä»¶,ä»¥åŠ<code>çŸ¥ä¹</code>è¿™ç§ç´ æ¥æ ‡æ¦œè‡ªå·±ç²¾è‹±ç¤¾åŒºçš„,æœ‰åª’ä½“å±æ€§çš„äº§å“,åˆ©ç”¨äººæ€§,æˆ–è€…è¯´åŠ¨ç‰©çš„å¼±ç‚¹,æ¯”å¦‚æ‡’æƒ°,è½¯å¼±,è‡ªæ‹ç­‰å±æ€§,æå°½æ‰‹æ®µä»¥å„ç§ä½åŠ£çš„å†…å®¹å¸å¼•ç”¨æˆ·çš„æ³¨æ„,æˆ‘å¿…é¡»æ‰¿è®¤æˆ‘ä¹Ÿä¸æ˜¯ä»€ä¹ˆé«˜ç­‰ç”Ÿç‰©,å¯æ˜¯è¿™äº›ä¸œè¥¿çœŸçš„æ˜¯æœ‰å®³, å ªç§°ç²¾ç¥é¸¦ç‰‡,å½“ç„¶ä¹Ÿæ¶‰åŠæ•æ„Ÿçš„å›½æƒ…,æ— å¥ˆå•Š</li><li>æ°‘ä¼—çš„ç‹‚æ¬¢,è¿˜æ˜¯è¯´æˆ‘ä¸æ•¢è‡ªè®¤æœ‰ä»€ä¹ˆé«˜äººä¸€ç­‰çš„åœ°æ–¹,å¯æ˜¯çœ‹ç€å„è·¯<code>åª’ä½“</code>å’Œ<code>è‡ªåª’ä½“</code>å¼•é¢†çš„èˆ†è®ºç‹‚æ½®,æˆ‘è¿˜æ˜¯è§‰å¾—æ‚²å“€.åŒå¹´é¾„çš„äººä¹Ÿæ˜¯å¥”ä¸‰äº†,è¿˜è¢«å„ç§èˆ†è®ºç‰µç€é¼»å­èµ°,<code>æ²³å—é«˜è€ƒæ‰åŒ…</code>,<code>å‡ç–«è‹—</code>,<code>é£™è½¦æ’äºº</code>,å„ç§å€¼å¾—èˆ†è®ºå…³æ³¨çš„äº‹æƒ…æ²¡äººå…³æ³¨,ä»€ä¹ˆ<code>åˆ˜å¼ºä¸œå¼ºå¥¸</code>,<code>åŒºå—é“¾</code>,<code>é©¬èˆªåœ¨è°·æ­Œåœ°å›¾ä¸­æŸ¬åŸ”å¯¨å¯†æ—åœ¨ç…§ç‰‡ä¸­è¢«å‘ç°,14å¹´æ—©å·²åœ¨æŸä½å¥³å£«çš„å¾®åšä¸­ä¿¡èª“æ—¦æ—¦çš„æä¾›äº†çº¿ç´¢ç¼ºæ— äººå…³æ³¨,æ”¿åºœæ— èƒ½</code>,<code>é©¬äº‘çˆ¸çˆ¸æ‹åŠŸå®ˆé“å¾ˆåŠªåŠ›</code>,<code>é™ªå¥æ—å”±æ­Œçš„å¥³æ€§æ˜¯å“ªä½æ˜æ˜Ÿ?</code>,<code>ç‹çŸ³å¥³ç§˜ä¹¦</code>ä¹‹ç±»çš„è¯é¢˜,éš¾å—,å‘è‡ªå†…å¿ƒçš„éš¾å—.</li></ul><p>æˆ‘ä»æ¥éƒ½æ˜¯æ‚²è§‚ä¸»ä¹‰è€…,ä»æ¥ä¹Ÿæ˜¯å¸Œæœ›ä»¥ç†æ™ºçœ‹å¾…è¿™ä¸ªä¸–ç•Œ,çœ¼ç•Œä½æ€»å¥½è¿‡æ„šæ˜§å§â€¦æˆ‘ä»¬å’Œé‚£äº›æˆ‘ä»¬é„™è§†çš„å¤§çˆ·å¤§å¦ˆ,åˆ°åº•æœ‰ä»€ä¹ˆåŒºåˆ«å‘¢?<br>è¿™ä¸ªç¤¾ä¼š,è¿™ä¸ªä¸–ç•Œ,åˆ°åº•åˆæœ‰å¤šå°‘ä¸œè¥¿æ˜¯çœŸçš„å‘¢?æ‰€æœ‰çš„ä¸€åˆ‡éƒ½å¯ä»¥ç”¨åˆ©ç›Šè¡¡é‡,å´åˆç²‰é¥°ç€å„ç§<code>è‰¯è¯</code>çš„åŒ…è£…â€¦æ“ä»–å¦ˆçš„!</p><blockquote><p>å…³äºä»Šå¹´å‰©è¿™ç‚¹æ—¶é—´</p></blockquote><p>åƒåƒå–å–å­¦ä¹ å¥èº«,å¤©æ°”å·²ç»è½¬å‡‰,æ¬å®¶å®Œäº†æ‰¾ä¸ªåœ°å„¿æŠ¥ä¸ªé©¾æ ¡å».å…¶å®æ„¿æœ›è¿˜æ˜¯æŒºå¤šçš„,åˆ—ä¸ªå•å­çœ‹çœ‹</p><ul><li>ç­‰è‹¹æœå‘æ–°å“å§,çœ‹çœ‹æœ‰æ²¡æœ‰æ–°çš„iWatchå’ŒAirPods,è€³æœºæœ‰çš„è¯å°±å…¥ä¸€ä¸ª(åæ§½ä¸€å¥,ä»Šå¹´æ¸¯å¸æ±‡ç‡æœ‰ç‚¹å´©å¡Œ,ä¸ç„¶æˆ‘è¿˜è€ƒè™‘æ¢ä¸ªæ–°æ¬¾MBPäº†â€¦.)</li><li>æ‰‹æœºæˆ‘è§‰å¾—æ²¡å¿…è¦æ¢,æ¢ä¸ªç”µæ± å°±è¡Œäº†.</li><li>é¡ºä¾¿æƒ³èµ·æ¥æˆ‘çš„æ‰‹æœºä¹Ÿæ˜¯A1660,ä¹‹å‰åšåœ°é“åœ¨æœ‰å‡ ç«™çš„æ—¶å€™å‡ºç°è¿‡æœ‰ç½‘ç»œä¿¡å·ä½†æ˜¯ä¸èƒ½ä¸Šç½‘çš„é—®é¢˜,ç®—ä¸Šä»Šå¹´æ‘”çš„å‡ æ¬¡å£³å­ä¸Šçš„åˆ’ç—•,å‡ ä¸ªé—®é¢˜ä¸€å¹¶å¤„ç†,è¯´ä¸å®š,å˜¿å˜¿å˜¿â€¦</li><li>æŠ¥ä¸ªé©¾æ ¡,è…¾ç‚¹æ—¶é—´å­¦å­¦</li><li>æ•°å­¦,è¿˜æ˜¯æ•°å­¦â€¦å¹´åˆå¼€å§‹çœ‹,ç°åœ¨è¿˜æ˜¯å¹´åˆçš„æ°´å¹³,ä¹Ÿä¸æŠ±å¤ªå¤§å¸Œæœ›â€¦ä¸è¿‡çœŸçš„æ˜¯æœ‰ç”¨,å­¦äº†ä¸€ç‚¹,è°¢åšè¯´è¯æœ‰æ—¶å€™å°±ä¸å®Œå…¨æ˜¯å¤©ä¹¦äº†ğŸ˜‚</li><li>å¥èº«æˆ¿,å‡è‚¥è¦æ±‚ä¸é«˜, å…ˆå‡èµ·æ¥å§,50æ–¤å¤ªä¼¤äº†â€¦æˆ‘è¯´æ€¨æ¨ä½  ä¹Ÿåˆæƒ…åˆç†å§?å»å¹´é‚£å‡ ä¸ªæœˆè¿‡çš„,ä¹Ÿæ˜¯å¾€äº‹ä¸å ªå›é¦–â€¦</li><li>è¯´èµ·å·¥ä½œ,ä¸è¯´æ•ˆæœå¥½ä¸å¥½,ä»Šå¹´è¿˜æ˜¯è¦æŠŠè¯»æ•°è¿™ä¸€å—åšåš.ä¸è¿‡æ„Ÿè§‰è¿™ä¸ªæ—¶ä»£æ˜¯ä¸æ˜¯å¤ªè¿·ä¿¡MLäº†,è¿™ç§æ„Ÿè§‰ç”¨ä¼ ç»Ÿçš„å‡ ä½•å­¦åº”è¯¥ä¹Ÿèƒ½åšåˆ°ä¸é”™çš„æ°´å¹³å§?but,å…¬å¸ä¹Ÿæ²¡ç›¸å…³äººæ‰æ˜¯çœŸçš„</li><li>æ¸¸æˆæœºå€Ÿå‡ºå»å¥½å‡ æ¬¡äº†,çªç„¶åˆæœ‰ç‚¹æƒ³ç©<code>å…«æ–¹æ—…äºº</code>â€¦.ä¸è¿‡æ²¡æ—¶é—´å•Š,æˆ‘ä¸»è¦å¤šçº¿ç¨‹ä¸è¡Œ,æ‰“æ¸¸æˆç”Ÿæ´»å·¥ä½œä¸èƒ½å…¼é¡¾,å…ˆå…¼é¡¾å·¥ä½œå’Œç”Ÿæ´»å†è¯´å§</li></ul><p>å…ˆå†™è¿™ä¹ˆå¤šå§,å‘Šåˆ«äº†ä½ ,å‘Šåˆ«äº†é¢“åºŸ,å´ä¹Ÿå‘Šåˆ«äº†å¥åº·,ä¹Ÿè¿˜æ²¡æœ‰æ‰¾åˆ°è¯¥æœ‰çš„ç”Ÿæ´»å’ŒèŠ‚å¥,<code>é’±å•Š,é’±å•Š!!!</code></p><p>æ€»ä¹‹,è¿˜æ˜¯è¦åŠªåŠ›å•Š,æœ€è¿‘æŠ“ç´§æ•´ç†ä¸€ä¸‹æ–‡æ¡£,äº‰å–åæœˆä»½åœ¨å…¬å¸åšä¸ªåˆ†äº«</p>]]></content>
      
      <categories>
          
          <category> æ—¥è®° </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>selenium</title>
      <link href="/2017/06/01/Selenium/"/>
      <url>/2017/06/01/Selenium/</url>
      <content type="html"><![CDATA[<p>å†™çš„æœ€è®¤çœŸçš„ä¸œè¥¿,ç°åœ¨å…¶å®æƒ³åˆ æ‰äº†å‘µå‘µ<br><a id="more"></a></p><h1 id="Python"><a href="#Python" class="headerlink" title="Python"></a>Python</h1><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><h3 id="Windows"><a href="#Windows" class="headerlink" title="Windows"></a>Windows</h3><h4 id="å®‰è£…python"><a href="#å®‰è£…python" class="headerlink" title="å®‰è£…python"></a>å®‰è£…python</h4><ol><li>å®˜ç½‘<a href="https://www.python.org/downloads/" title="Python" target="_blank" rel="noopener">ä¸‹è½½</a>å®‰è£…åŒ…,å®‰è£…åˆ°ç›®æ ‡ä½ç½®</li><li>å®‰è£…å®Œæˆåå³é”®ç‚¹å‡»<code>æˆ‘çš„ç”µè„‘</code>-&gt;<code>å±æ€§</code>-&gt;<code>é«˜çº§ç³»ç»Ÿè®¾ç½®</code>-&gt;<code>ç¯å¢ƒå˜é‡</code>,å°†pythonå®‰è£…çš„è·¯å¾„æ·»åŠ åˆ°PATHé‡Œé¢,ä¾‹å¦‚<code>;c:\python2.6</code>.è¿™é‡Œæ³¨æ„å¦‚æœæ˜¯ç›´æ¥åœ¨æ–‡æœ¬åé¢è¿½åŠ çš„è¯è®°å¾—å‰é¢è¦åŠ åˆ†å·<code>;</code>.æ·»åŠ å®Œæˆä¹‹åå†å‘½ä»¤è¡Œä¸­è¾“å…¥pythonèƒ½å¤Ÿè¿›å…¥python shell,è¯´æ˜å®‰è£…æˆåŠŸ</li></ol><h4 id="å®‰è£…pip"><a href="#å®‰è£…pip" class="headerlink" title="å®‰è£…pip"></a>å®‰è£…pip</h4><blockquote><p>pip is already installed if youâ€™re using Python 2 &gt;=2.7.9 or Python 3 &gt;=3.4 binaries downloaded from python.org, but youâ€™ll need to upgrade pip.</p></blockquote><p>å®˜ç½‘çš„è¯´æ³•æ˜¯2.7.9ä»¥åŠ3.4ç‰ˆæœ¬ä»¥ä¸Šçš„pythonå®‰è£…åå·²ç»åŒ…å«äº†pip,ä¸éœ€è¦å¦å¤–å®‰è£…,æ‰§è¡Œ<code>pip install</code>å‘½ä»¤å®‰è£…æœ€æ–°ç‰ˆæœ¬å³å¯(å‚æ•°-Uè¡¨ç¤ºå®‰è£…æˆ–æ›´æ–°è‡³æœ€æ–°ç‰ˆ)</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -U pip</span><br></pre></td></tr></table></figure><p>ç‰ˆæœ¬ä¸æ»¡è¶³æ—¶,é¦–å…ˆä¸‹è½½<a href="https://bootstrap.pypa.io/get-pip.py" title="get-pip" target="_blank" rel="noopener">get-pip</a>æ–‡ä»¶,å¹¶åœ¨å‘½ä»¤è¡Œä¸­åˆ‡æ¢è‡³æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„æ‰§è¡Œæ–‡ä»¶<br>è¿™é‡Œåæ§½ä¸€ä¸‹windowsçš„cmdå®åœ¨ä¸å¥½ç”¨,powershellä¹Ÿä¸€èˆ¬,æ¨èä¸€ä¸ªæš‚æ—¶æ„Ÿè§‰è¿˜ä¸é”™çš„å‘½ä»¤è¡Œå·¥å…·<a href="http://cmder.net/" title="cmder" target="_blank" rel="noopener">cmder</a><br><a href="https://github.com/cmderdev/cmder/releases/download/v1.3.2/cmder.zip" title="cmder-download" target="_blank" rel="noopener">ä¸‹è½½åœ°å€</a></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ‡æ¢è‡³æŒ‡å®šè·¯å¾„</span></span><br><span class="line"><span class="built_in">cd</span> xxxx/xxxx</span><br><span class="line"><span class="comment"># æ‰§è¡Œ</span></span><br><span class="line">python ./get-pip.py</span><br></pre></td></tr></table></figure><h4 id="å®‰è£…selenium"><a href="#å®‰è£…selenium" class="headerlink" title="å®‰è£…selenium"></a>å®‰è£…selenium</h4><p><a href="https://pypi.python.org/pypi/selenium" title="selenium" target="_blank" rel="noopener">å®˜ç½‘é“¾æ¥</a><br>å®‰è£…å®Œæˆ<code>pip</code>ä¹‹å,ä½¿ç”¨å‘½ä»¤å®‰è£…<code>selenium</code>åŒ…</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ pip install -U selenium</span><br><span class="line">Collecting selenium</span><br><span class="line">  Downloading selenium-3.4.3-py2.py3-none-any.whl (931kB)</span><br><span class="line">    100% |â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 942kB 191kB/s</span><br><span class="line">Installing collected packages: selenium</span><br><span class="line">Successfully installed selenium-3.4.3</span><br></pre></td></tr></table></figure><h4 id="ä¸‹è½½WebDriver"><a href="#ä¸‹è½½WebDriver" class="headerlink" title="ä¸‹è½½WebDriver"></a>ä¸‹è½½WebDriver</h4><h5 id="ChromeDriver"><a href="#ChromeDriver" class="headerlink" title="ChromeDriver"></a>ChromeDriver</h5><p><a href="https://sites.google.com/a/chromium.org/chromedriver/downloads" title="chrome-driver" target="_blank" rel="noopener">chrome-driver</a></p><ul><li><p>æˆªæ­¢ç›®å‰æœ€æ–°çš„windowsç‰ˆæœ¬çš„driverçš„<a href="https://chromedriver.storage.googleapis.com/2.29/chromedriver_win32.zip" title="chromedriver_win32.zip" target="_blank" rel="noopener">ä¸‹è½½åœ°å€</a></p></li><li><p>å°†è§£å‹åçš„<code>chromedriver.exe</code>æ–‡ä»¶æ”¾åœ¨æŒ‡å®šè·¯å¾„,ä¾‹å¦‚<code>D:\Selenium\chromedriver.exe</code>è·¯å¾„ä¸‹,å°†<code>D:\Selenium\</code>ç›®å½•æ·»åŠ è‡³ç¯å¢ƒå˜é‡<code>PATH</code>ä¸­</p></li></ul><h4 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.common.exceptions <span class="keyword">import</span> TimeoutException</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> WebDriverWait <span class="comment"># available since 2.4.0</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC <span class="comment"># available since 2.26.0</span></span><br><span class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªchromeè¿›ç¨‹driver</span></span><br><span class="line">driver = webdriver.Chrome()</span><br><span class="line"><span class="comment"># æ‰“å¼€æŒ‡å®šé¡µé¢</span></span><br><span class="line">driver.get(<span class="string">"http://www.baidu.com"</span>)</span><br><span class="line">driver.</span><br><span class="line"><span class="comment"># å°†æµè§ˆå™¨å½“å‰çš„æ ‡é¢˜æ‰“å°å‡ºæ¥</span></span><br><span class="line"><span class="keyword">print</span> driver.title</span><br><span class="line"><span class="comment"># å®šä½åˆ°é¡µé¢ä¸­çš„å…·ä½“å…ƒç´ ,è¿™é‡Œéœ€è¦ä¸€ç‚¹htmlçš„çŸ¥è¯†,æˆ–è€…ç›´æ¥æµè§ˆå™¨åˆ‡æ¢åˆ°å¼€å‘è€…æ¨¡å¼æŸ¥çœ‹xpath&amp;cssselector</span></span><br><span class="line">inputElement = driver.find_element_by_name(<span class="string">"wd"</span>)</span><br><span class="line"><span class="comment"># å¡«å†™æœç´¢å†…å®¹</span></span><br><span class="line">inputElement.send_keys(<span class="string">"cheese!"</span>)</span><br><span class="line"><span class="comment"># æäº¤inputæ§ä»¶ä¸­çš„å†…å®¹</span></span><br><span class="line">inputElement.submit()</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># è¿™é‡Œæ˜¯ç­‰å¾…é¡µé¢çŠ¶æ€æ”¹å˜çš„æ–¹æ³•,WebDriverWait(driver,10)ä»£è¡¨å®šçš„è¿›ç¨‹ç­‰å¾…10ç§’,ç›´åˆ°ç¬¦åˆuntil()ä¸­çš„å‚æ•°ç¬¦åˆæˆ–æ˜¯è¶…è¿‡äº†ç­‰å¾…æ—¶é—´</span></span><br><span class="line">    WebDriverWait(driver, <span class="number">10</span>).until(EC.title_contains(<span class="string">"cheese!"</span>))</span><br><span class="line">    <span class="comment">#å¦ä¸€ç§å†™æ³•</span></span><br><span class="line">    wait = WebDriverWait(driver,<span class="number">10</span>)</span><br><span class="line">    element = wait.until(EC.title_contains(<span class="string">"cheese!"</span>))</span><br><span class="line">    <span class="comment"># cheese!_ç™¾åº¦æœç´¢</span></span><br><span class="line">    <span class="keyword">print</span> driver.title</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    driver.quit()</span><br></pre></td></tr></table></figure><h3 id="Mac"><a href="#Mac" class="headerlink" title="Mac"></a>Mac</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pip install selenium</span><br><span class="line">vi ~/.bash_profile</span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$HOME</span>/Documents/workspace/Selenium:<span class="variable">$PATH</span></span><br></pre></td></tr></table></figure><p>æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸ</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line">dr = webdriver.Chrome()</span><br><span class="line"><span class="comment"># æµ‹è¯•å®Œæˆåè®°å¾—å…³é—­è¿›ç¨‹</span></span><br><span class="line">dr.quit()</span><br></pre></td></tr></table></figure><p>å®‰è£…æˆåŠŸçš„è¯è¿™é‡Œåº”è¯¥æ˜¾ç¤ºä¸€ä¸ªç©ºçš„æµè§ˆå™¨<br><img src="chromedriver_empty.png" alt="chromedriver_empty"></p><h2 id="Introducing-the-Selenium-WebDriver-API-by-Example"><a href="#Introducing-the-Selenium-WebDriver-API-by-Example" class="headerlink" title="Introducing the Selenium-WebDriver API by Example"></a>Introducing the Selenium-WebDriver API by Example</h2><p>ç…§æ¬å®˜ç½‘çš„ä¾‹å­</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> selenium.common.exceptions <span class="keyword">import</span> TimeoutException</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> WebDriverWait <span class="comment"># available since 2.4.0</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support <span class="keyword">import</span> expected_conditions <span class="keyword">as</span> EC <span class="comment"># available since 2.26.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ–°å»ºä¸€ä¸ªchromeè¿›ç¨‹driver</span></span><br><span class="line">driver = webdriver.Chrome()</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å¼€æŒ‡å®šé¡µé¢</span></span><br><span class="line">driver.get(<span class="string">"http://www.baidu.com"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å°†æµè§ˆå™¨å½“å‰çš„æ ‡é¢˜æ‰“å°å‡ºæ¥</span></span><br><span class="line"><span class="keyword">print</span> driver.title</span><br><span class="line"></span><br><span class="line"><span class="comment"># å®šä½åˆ°é¡µé¢ä¸­çš„å…·ä½“å…ƒç´ ,è¿™é‡Œéœ€è¦ä¸€ç‚¹htmlçš„çŸ¥è¯†,æˆ–è€…ç›´æ¥æµè§ˆå™¨åˆ‡æ¢åˆ°å¼€å‘è€…æ¨¡å¼æŸ¥çœ‹xpath&amp;cssselector</span></span><br><span class="line">inputElement = driver.find_element_by_name(<span class="string">"wd"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¡«å†™æœç´¢å†…å®¹</span></span><br><span class="line">inputElement.send_keys(<span class="string">"cheese!"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æäº¤inputæ§ä»¶ä¸­çš„å†…å®¹</span></span><br><span class="line">inputElement.submit()</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    <span class="comment"># è¿™é‡Œæ˜¯ç­‰å¾…é¡µé¢çŠ¶æ€æ”¹å˜çš„æ–¹æ³•,WebDriverWait(driver,10)ä»£è¡¨å®šçš„è¿›ç¨‹ç­‰å¾…10ç§’,ç›´åˆ°ç¬¦åˆuntil()ä¸­çš„å‚æ•°ç¬¦åˆæˆ–æ˜¯è¶…è¿‡äº†ç­‰å¾…æ—¶é—´</span></span><br><span class="line">    WebDriverWait(driver, <span class="number">10</span>).until(EC.title_contains(<span class="string">"cheese!"</span>))</span><br><span class="line"></span><br><span class="line">    <span class="comment">#å¦ä¸€ç§å†™æ³•</span></span><br><span class="line">    wait = WebDriverWait(driver,<span class="number">10</span>)</span><br><span class="line">    element = wait.until(EC.title_contains(<span class="string">"cheese!"</span>))</span><br><span class="line">    <span class="comment"># cheese!_ç™¾åº¦æœç´¢</span></span><br><span class="line">    <span class="keyword">print</span> driver.title</span><br><span class="line"></span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    driver.quit()</span><br></pre></td></tr></table></figure><p>ä¸Šé¢å·®ä¸å¤šå°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¾‹å­äº†,å®é™…æ“ä½œè¿‡ç¨‹ä¸­æœ‰ä¸€äº›åœ°æ–¹çµæ´»è¿ç”¨å°±å¥½</p><h3 id="æ‰“å¼€æµè§ˆå™¨"><a href="#æ‰“å¼€æµè§ˆå™¨" class="headerlink" title="æ‰“å¼€æµè§ˆå™¨"></a>æ‰“å¼€æµè§ˆå™¨</h3><p>è¿™é‡Œä¸åŒæµè§ˆå™¨çš„è¯éœ€è¦<a href="http://www.seleniumhq.org/download/" title="webdriver-download" target="_blank" rel="noopener">ä¸‹è½½</a>å¯¹åº”çš„webdriver,å¹¶ä¸”å°†æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„æ·»åŠ åˆ°ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="comment"># æ–°å»ºå®ä¾‹</span></span><br><span class="line">driver = webdriver.Chrome()</span><br><span class="line"><span class="comment"># è®¾ç½®å¤§å°</span></span><br><span class="line">driver.set_window_size(<span class="number">240</span>, <span class="number">320</span>)</span><br><span class="line"><span class="comment"># æœ€å¤§åŒ–</span></span><br><span class="line">driver.maximize_window()</span><br><span class="line"><span class="comment"># è·å–é¡µé¢title</span></span><br><span class="line">driver.title</span><br><span class="line"><span class="comment"># è·å–é¡µé¢å½“å‰url</span></span><br><span class="line">driver.current_url</span><br></pre></td></tr></table></figure><h3 id="å…³é—­æµè§ˆå™¨"><a href="#å…³é—­æµè§ˆå™¨" class="headerlink" title="å…³é—­æµè§ˆå™¨"></a>å…³é—­æµè§ˆå™¨</h3><p>æµ‹è¯•çš„è¯ä¸€èˆ¬åœ¨ä¸»ç¨‹åºçš„finallyé‡Œé¢è°ƒç”¨<code>driver.quit()</code>,ä¸ç„¶æœ‰æ—¶å€™ä¼šå› ä¸ºå¼‚å¸¸å¯¼è‡´æ²¡æœ‰é€€å‡ºè¿›ç¨‹,ç„¶åæµ‹è¯•çš„æœºå­ä¼šå¼€å¾ˆå¤šä¸ªè¿›ç¨‹ç„¶åå¡çš„ä¸è¡Œâ€¦</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">driver = webdriver.Chrome()</span><br><span class="line"></span><br><span class="line">driver.quit()</span><br></pre></td></tr></table></figure><h3 id="æ‰“å¼€é¡µé¢"><a href="#æ‰“å¼€é¡µé¢" class="headerlink" title="æ‰“å¼€é¡µé¢"></a>æ‰“å¼€é¡µé¢</h3><p>ä»¥ç™¾åº¦ä¸ºä¾‹</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"></span><br><span class="line">driver = webdriver.Chrome()</span><br><span class="line">driver.get(<span class="string">'http://www.baidu.com'</span>)</span><br></pre></td></tr></table></figure><h3 id="å®šä½UIå…ƒç´ "><a href="#å®šä½UIå…ƒç´ " class="headerlink" title="å®šä½UIå…ƒç´ "></a>å®šä½UIå…ƒç´ </h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"content-type"</span> <span class="attr">content</span>=<span class="string">"text/html;charset=utf-8"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Form<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">async</span>=<span class="string">""</span> <span class="attr">src</span>=<span class="string">"https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/css/bootstrap-combined.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h3</span>&gt;</span>simple login form<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">class</span>=<span class="string">"form-horizontal"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"control-group"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"control-label"</span> <span class="attr">for</span>=<span class="string">"inputEmail"</span>&gt;</span>Email<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"controls"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"inputEmail"</span> <span class="attr">placeholder</span>=<span class="string">"Email"</span> <span class="attr">name</span>=<span class="string">"email"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"control-group"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"control-label"</span> <span class="attr">for</span>=<span class="string">"inputPassword"</span>&gt;</span>Password<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"controls"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">id</span>=<span class="string">"inputPassword"</span> <span class="attr">placeholder</span>=<span class="string">"Password"</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"control-group"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"controls"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"checkbox"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span>&gt;</span> Remember me</span><br><span class="line">          <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">class</span>=<span class="string">"btn"</span>&gt;</span>Sign in<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>register<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">if</span> <span class="string">'HTTP_PROXY'</span><span class="keyword">in</span> os.environ: <span class="keyword">del</span> os.environ[<span class="string">'HTTP_PROXY'</span>]</span><br><span class="line"></span><br><span class="line">dr = webdriver.Chrome()</span><br><span class="line">file_path = <span class="string">'file:///'</span> + os.path.abspath(<span class="string">'form.html'</span>)</span><br><span class="line"><span class="keyword">print</span> file_path</span><br><span class="line"></span><br><span class="line">dr.get(file_path)</span><br><span class="line"></span><br><span class="line"><span class="comment"># by id</span></span><br><span class="line">dr.find_element_by_id(<span class="string">'inputEmail'</span>).click()</span><br><span class="line"></span><br><span class="line"><span class="comment"># by name</span></span><br><span class="line">dr.find_element_by_name(<span class="string">'password'</span>).click()</span><br><span class="line"></span><br><span class="line"><span class="comment"># by tagname</span></span><br><span class="line"><span class="keyword">print</span> dr.find_element_by_tag_name(<span class="string">'form'</span>).get_attribute(<span class="string">'class'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># by class_name</span></span><br><span class="line">e = dr.find_element_by_class_name(<span class="string">'controls'</span>)</span><br><span class="line">dr.execute_script(<span class="string">'$(arguments[0]).fadeOut().fadeIn()'</span>, e)</span><br><span class="line">sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># by link text</span></span><br><span class="line">link = dr.find_element_by_link_text(<span class="string">'register'</span>)</span><br><span class="line">dr.execute_script(<span class="string">'$(arguments[0]).fadeOut().fadeIn()'</span>, link)</span><br><span class="line">sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># by partial link text</span></span><br><span class="line">link = dr.find_element_by_partial_link_text(<span class="string">'reg'</span>)</span><br><span class="line">dr.execute_script(<span class="string">'$(arguments[0]).fadeOut().fadeIn()'</span>, link)</span><br><span class="line">sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># by css selector</span></span><br><span class="line">div = dr.find_element_by_css_selector(<span class="string">'.controls'</span>)</span><br><span class="line">dr.execute_script(<span class="string">'$(arguments[0]).fadeOut().fadeIn()'</span>, div)</span><br><span class="line">sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># by xpath</span></span><br><span class="line">dr.find_element_by_xpath(<span class="string">'/html/body/form/div[3]/div/label/input'</span>).click()</span><br><span class="line"></span><br><span class="line">sleep(<span class="number">2</span>)</span><br><span class="line">dr.quit()</span><br></pre></td></tr></table></figure><h4 id="by-id"><a href="#by-id" class="headerlink" title="by id"></a>by id</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"coolestWidgetEvah"</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å†™æ³•ä¸€</span></span><br><span class="line">element = driver.find_element_by_id(<span class="string">"coolestWidgetEvah"</span>)</span><br><span class="line"><span class="comment"># å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line">element = driver.find_element(by=By.ID, value=<span class="string">"coolestWidgetEvah"</span>)</span><br></pre></td></tr></table></figure><h4 id="by-class"><a href="#by-class" class="headerlink" title="by class"></a>by class</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"cheese"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>Cheddar<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"cheese"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>Gouda<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å†™æ³•ä¸€</span></span><br><span class="line">cheeses = driver.find_elements_by_class_name(<span class="string">"cheese"</span>)</span><br><span class="line"><span class="comment"># å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line">cheeses = driver.find_elements(By.CLASS_NAME, <span class="string">"cheese"</span>)</span><br></pre></td></tr></table></figure><h4 id="by-tag"><a href="#by-tag" class="headerlink" title="by tag"></a>by tag</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">src</span>=<span class="string">"..."</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å†™æ³•äºŒ</span></span><br><span class="line">frame = driver.find_element_by_tag_name(<span class="string">"iframe"</span>)</span><br><span class="line"><span class="comment"># å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line">frame = driver.find_element(By.TAG_NAME, <span class="string">"iframe"</span>)</span><br></pre></td></tr></table></figure><h4 id="by-name"><a href="#by-name" class="headerlink" title="by name"></a>by name</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">"cheese"</span> <span class="attr">type</span>=<span class="string">"text"</span>/&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å†™æ³•ä¸€</span></span><br><span class="line">cheese = driver.find_element_by_name(<span class="string">"cheese"</span>)</span><br><span class="line"><span class="comment"># å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line">cheese = driver.find_element(By.NAME, <span class="string">"cheese"</span>)</span><br></pre></td></tr></table></figure><h4 id="by-link-text"><a href="#by-link-text" class="headerlink" title="by link text"></a>by link text</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.google.com/search?q=cheese"</span>&gt;</span>cheese<span class="tag">&lt;/<span class="name">a</span>&gt;</span>&gt;</span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å†™æ³•ä¸€</span></span><br><span class="line">cheese = driver.find_element_by_link_text(<span class="string">"cheese"</span>)</span><br><span class="line"><span class="comment"># å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line">cheese = driver.find_element(By.LINK_TEXT, <span class="string">"cheese"</span>)</span><br></pre></td></tr></table></figure><h4 id="by-partial-link-text"><a href="#by-partial-link-text" class="headerlink" title="by partial link text"></a>by partial link text</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.google.com/search?q=cheese"</span>&gt;</span>search for cheese<span class="tag">&lt;/<span class="name">a</span>&gt;</span>&gt;</span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å†™æ³•ä¸€</span></span><br><span class="line">cheese = driver.find_element_by_partial_link_text(<span class="string">"cheese"</span>)</span><br><span class="line"><span class="comment"># å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line">cheese = driver.find_element(By.PARTIAL_LINK_TEXT, <span class="string">"cheese"</span>)</span><br></pre></td></tr></table></figure><h4 id="by-css"><a href="#by-css" class="headerlink" title="by css"></a>by css</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"food"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"dairy"</span>&gt;</span>milk<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"dairy aged"</span>&gt;</span>cheese<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å†™æ³•ä¸€</span></span><br><span class="line">cheese = driver.find_element_by_css_selector(<span class="string">"#food span.dairy.aged"</span>)</span><br><span class="line"><span class="comment"># å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line">cheese = driver.find_element(By.CSS_SELECTOR, <span class="string">"#food span.dairy.aged"</span>)</span><br></pre></td></tr></table></figure><h4 id="by-xpath"><a href="#by-xpath" class="headerlink" title="by xpath"></a>by xpath</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"example"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">INPUT</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"other"</span> /&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å†™æ³•ä¸€</span></span><br><span class="line">inputs = driver.find_elements_by_xpath(<span class="string">"//input"</span>)</span><br><span class="line"><span class="comment"># å†™æ³•äºŒ</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line">inputs = driver.find_elements(By.XPATH, <span class="string">"//input"</span>)</span><br></pre></td></tr></table></figure><h3 id="æ‰§è¡ŒJavaScript"><a href="#æ‰§è¡ŒJavaScript" class="headerlink" title="æ‰§è¡ŒJavaScript"></a>æ‰§è¡ŒJavaScript</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># execute_scriptçš„å‚æ•°å°±æ˜¯è¦æ‰§è¡Œçš„JavaScriptä»£ç </span></span><br><span class="line">element = driver.execute_script(<span class="string">"return $('.cheese')[0]"</span>)</span><br><span class="line"><span class="comment"># è·å–labelå…ƒç´ </span></span><br><span class="line">labels = driver.find_elements_by_tag_name(<span class="string">"label"</span>)</span><br><span class="line">inputs = driver.execute_script(</span><br><span class="line">    <span class="string">"var labels = arguments[0], inputs = []; for (var i=0; i &lt; labels.length; i++)&#123;"</span> +</span><br><span class="line">    <span class="string">"inputs.push(document.getElementById(labels[i].getAttribute('for'))); &#125; return inputs;"</span>, labels)</span><br></pre></td></tr></table></figure><h3 id="è·å–æ–‡æœ¬å†…å®¹"><a href="#è·å–æ–‡æœ¬å†…å®¹" class="headerlink" title="è·å–æ–‡æœ¬å†…å®¹"></a>è·å–æ–‡æœ¬å†…å®¹</h3><p>é¦–å…ˆå®šä½åˆ°ç›®æ ‡å…ƒç´ ,ç„¶åå–<code>text</code>å±æ€§</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä½å…ƒç´ </span></span><br><span class="line">element = driver.find_element_by_id(<span class="string">"element_id"</span>)</span><br><span class="line"><span class="comment"># å–text</span></span><br><span class="line">element.text</span><br></pre></td></tr></table></figure><h3 id="è¾“å…¥å†…å®¹"><a href="#è¾“å…¥å†…å®¹" class="headerlink" title="è¾“å…¥å†…å®¹"></a>è¾“å…¥å†…å®¹</h3><p>é€‰æ‹©ä¸‹æ‹‰æ¡†</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä½åˆ°é¡µé¢å…ƒç´ </span></span><br><span class="line">select = driver.find_element_by_tag_name(<span class="string">"select"</span>)</span><br><span class="line"><span class="comment"># è·å–é¡µé¢å…ƒç´ çš„ç›¸å…³å±æ€§</span></span><br><span class="line">allOptions = select.find_elements_by_tag_name(<span class="string">"option"</span>)</span><br><span class="line"><span class="comment"># éå†æ“ä½œ</span></span><br><span class="line"><span class="keyword">for</span> option <span class="keyword">in</span> allOptions:</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"Value is: "</span> + option.get_attribute(<span class="string">"value"</span>)</span><br><span class="line">    option.click()</span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># available since 2.12</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> Select</span><br><span class="line"><span class="comment"># ç›´æ¥å®šä½åˆ°ä¸€ä¸ªselectå¯¹è±¡</span></span><br><span class="line">select = Select(driver.find_element_by_tag_name(<span class="string">"select"</span>))</span><br><span class="line"><span class="comment"># å°è£…å¥½çš„æ–¹æ³•,ä¸éœ€è¦é€šè¿‡å¤æ‚çš„å…ƒç´ å±æ€§è·å–å°±å¯ä»¥æ“ä½œå¯¹è±¡</span></span><br><span class="line"><span class="comment"># å–æ¶ˆé€‰æ‹©</span></span><br><span class="line">select.deselect_all()</span><br><span class="line"><span class="comment"># é€šè¿‡å¯è§çš„æ–‡æœ¬å†…å®¹é€‰æ‹©æ˜¾ç¤ºä¸º"Edam"çš„å…ƒç´ </span></span><br><span class="line">select.select_by_visible_text(<span class="string">"Edam"</span>)</span><br></pre></td></tr></table></figure><h3 id="ç‚¹å‡»äº‹ä»¶"><a href="#ç‚¹å‡»äº‹ä»¶" class="headerlink" title="ç‚¹å‡»äº‹ä»¶"></a>ç‚¹å‡»äº‹ä»¶</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®šä½åˆ°submitæ§ä»¶</span></span><br><span class="line">submit = driver.find_element_by_id(<span class="string">"submit"</span>)</span><br><span class="line"><span class="comment"># æ¨¡æ‹Ÿç‚¹å‡»æ“ä½œ</span></span><br><span class="line">submit.click()</span><br><span class="line"><span class="comment"># å¯ä»¥ç®€å•å†™ä¸º</span></span><br><span class="line">driver.find_element_by_id(<span class="string">"submit"</span>).click()</span><br><span class="line"><span class="comment"># webdriverä¼šéå†æ•´ä¸ªDOM,æŸ¥æ‰¾å¯ä»¥submitçš„å…ƒç´ ,å¦‚æœæ²¡æœ‰æ‰¾åˆ°ä¼šæŠ›å¼‚å¸¸,ä¸æ¨èä½¿ç”¨</span></span><br><span class="line">element.submit()</span><br></pre></td></tr></table></figure><h3 id="åˆ‡æ¢é¡µé¢"><a href="#åˆ‡æ¢é¡µé¢" class="headerlink" title="åˆ‡æ¢é¡µé¢"></a>åˆ‡æ¢é¡µé¢</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"somewhere.html"</span> <span class="attr">target</span>=<span class="string">"windowName"</span>&gt;</span>Click here to open a new window<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ‡æ¢è‡³åä¸ºwindowNameçš„çª—å£</span></span><br><span class="line">driver.switch_to.window(<span class="string">"windowName"</span>)</span><br><span class="line"><span class="comment"># é€šè¿‡handleéå†çš„æ–¹å¼åˆ‡æ¢çª—å£</span></span><br><span class="line"><span class="keyword">for</span> handle <span class="keyword">in</span> driver.window_handles:</span><br><span class="line">    driver.switch_to.window(handle)</span><br><span class="line"><span class="comment"># åˆ‡æ¢è‡³frame</span></span><br><span class="line">driver.switch_to.frame(<span class="string">"frameName"</span>)</span><br><span class="line"><span class="comment"># åˆ‡æ¢è‡³alert</span></span><br><span class="line">alert = driver.switch_to.alert</span><br></pre></td></tr></table></figure><h3 id="å¯¼èˆª"><a href="#å¯¼èˆª" class="headerlink" title="å¯¼èˆª"></a>å¯¼èˆª</h3><p>ç®€å•çš„æ¨¡æ‹Ÿæµè§ˆå™¨çš„å†å²å¯¼èˆªåŠŸèƒ½,æ„Ÿè§‰ç”¨çš„ä¸å¤š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æµè§ˆå™¨å‰è¿›</span></span><br><span class="line">driver.forward()</span><br><span class="line"><span class="comment"># æµè§ˆå™¨åé€€</span></span><br><span class="line">driver.back()</span><br></pre></td></tr></table></figure><p>sample</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">if</span> <span class="string">'HTTP_PROXY'</span><span class="keyword">in</span> os.environ: <span class="keyword">del</span> os.environ[<span class="string">'HTTP_PROXY'</span>]</span><br><span class="line"></span><br><span class="line">dr = webdriver.Chrome()</span><br><span class="line"></span><br><span class="line">first_url = <span class="string">'http://www.baidu.com'</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">"now access %s"</span> %(first_url)</span><br><span class="line"></span><br><span class="line">dr.get(first_url)</span><br><span class="line">sleep(<span class="number">1</span>)</span><br><span class="line">second_url = <span class="string">'http://www.news.baidu.com'</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">"now access %s"</span> %(second_url)</span><br><span class="line">dr.get(second_url)</span><br><span class="line">sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> <span class="string">"back to %s"</span> %(first_url)</span><br><span class="line">dr.back()</span><br><span class="line">sleep(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">print</span> <span class="string">"forward to %s"</span> %(second_url)</span><br><span class="line">dr.forward()</span><br><span class="line">sleep(<span class="number">1</span>)</span><br><span class="line">dr.quit()</span><br></pre></td></tr></table></figure><h3 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Go to the correct domain</span></span><br><span class="line">driver.get(<span class="string">"http://www.example.com"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Now set the cookie. Here's one for the entire domain</span></span><br><span class="line"><span class="comment"># the cookie name here is 'key' and its value is 'value'</span></span><br><span class="line">driver.add_cookie(&#123;<span class="string">'name'</span>:<span class="string">'key'</span>, <span class="string">'value'</span>:<span class="string">'value'</span>, <span class="string">'path'</span>:<span class="string">'/'</span>&#125;)</span><br><span class="line"><span class="comment"># additional keys that can be passed in are:</span></span><br><span class="line"><span class="comment"># 'domain' -&gt; String,</span></span><br><span class="line"><span class="comment"># 'secure' -&gt; Boolean,</span></span><br><span class="line"><span class="comment"># 'expiry' -&gt; Milliseconds since the Epoch it should expire.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># And now output all the available cookies for the current URL</span></span><br><span class="line"><span class="keyword">for</span> cookie <span class="keyword">in</span> driver.get_cookies():</span><br><span class="line">    <span class="keyword">print</span> <span class="string">"%s -&gt; %s"</span> % (cookie[<span class="string">'name'</span>], cookie[<span class="string">'value'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment"># You can delete cookies in 2 ways</span></span><br><span class="line"><span class="comment"># By name</span></span><br><span class="line">driver.delete_cookie(<span class="string">"CookieName"</span>)</span><br><span class="line"><span class="comment"># Or all of them</span></span><br><span class="line">driver.delete_all_cookies()</span><br></pre></td></tr></table></figure><h3 id="ä»£ç†"><a href="#ä»£ç†" class="headerlink" title="ä»£ç†"></a>ä»£ç†</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">profile = webdriver.FirefoxProfile()</span><br><span class="line">profile.set_preference(<span class="string">"general.useragent.override"</span>, <span class="string">"some UA string"</span>)</span><br><span class="line">driver = webdriver.Firefox(profile)</span><br></pre></td></tr></table></figure><h1 id="æ‹–æ”¾"><a href="#æ‹–æ”¾" class="headerlink" title="æ‹–æ”¾"></a>æ‹–æ”¾</h1><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver.common.action_chains <span class="keyword">import</span> ActionChains</span><br><span class="line"><span class="comment"># è¦æ‹–æ‹½(drag)çš„å…ƒç´ </span></span><br><span class="line">element = driver.find_element_by_name(<span class="string">"source"</span>)</span><br><span class="line"><span class="comment"># è¦é‡Šæ”¾ä½ç½®çš„ç›®æ ‡å…ƒç´ </span></span><br><span class="line">target =  driver.find_element_by_name(<span class="string">"target"</span>)</span><br><span class="line"><span class="comment"># æ‹–æ‹½elementå…ƒç´ è‡³targetå…ƒç´ æ‰€åœ¨çš„ä½ç½®</span></span><br><span class="line">ActionChains(driver).drag_and_drop(element, target).perform()</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> selenium </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>yield</title>
      <link href="/2017/06/01/yield/"/>
      <url>/2017/06/01/yield/</url>
      <content type="html"><![CDATA[<p>yieldè¿™ä¸ªå…³é”®å­—æ˜¯ä¹‹å‰çœ‹çˆ¬è™«æ¡†æ¶çš„æ—¶å€™demoé‡Œé¢ç”¨åˆ°è¿‡çš„,å½“æ—¶å¿ƒæƒ…ä¹Ÿä¸å¥½,æ²¡å¿ƒæ€ç¢ç£¨,ä»Šå¤©çªç„¶çœ‹åˆ°ä¸€ç¯‡è¿˜ä¸é”™çš„æ–‡ç« ,æ„Ÿè§‰è®²çš„å¤Ÿæ¸…æ¥š,åšä¸ªç¬”è®°<br><a href="https://www.ibm.com/developerworks/cn/opensource/os-cn-python-yield/" title="Python yield ä½¿ç”¨æµ…æ" target="_blank" rel="noopener">å‚è€ƒé“¾æ¥</a><br><a id="more"></a><br>æŒ‰ç…§æˆ‘ç°åœ¨çš„ç†è§£,yieldçš„ä½œç”¨å°±æ˜¯è¿”å›ä¸€ä¸ªå¯è¿­ä»£çš„å¯¹è±¡,ç”¨ä¾‹å­çœ‹ä¸€ä¸‹å§</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">feb</span><span class="params">(max)</span>:</span></span><br><span class="line">    n,a,b=<span class="number">0</span>,<span class="number">0</span>,<span class="number">1</span></span><br><span class="line">    <span class="keyword">while</span> n&lt;max:</span><br><span class="line">        <span class="keyword">yield</span> b</span><br><span class="line">        a,b=b,a+b</span><br><span class="line">        n+=<span class="number">1</span></span><br></pre></td></tr></table></figure><p>ä»¥ä¸Šå°±æ˜¯ä¸€ä¸ªç”Ÿæˆæ–æ³¢é‚£å¥‘æ•°åˆ—çš„æ–¹æ³•äº†,è°ƒç”¨æ–¹æ³•å°±è·Ÿrangeä¸€æ ·</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = feb(<span class="number">20</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> x:</span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">1</span><br><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">5</span><br><span class="line">8</span><br><span class="line">13</span><br><span class="line">21</span><br><span class="line">34</span><br><span class="line">55</span><br><span class="line">89</span><br><span class="line">144</span><br><span class="line">233</span><br><span class="line">377</span><br><span class="line">610</span><br><span class="line">987</span><br><span class="line">1597</span><br><span class="line">2584</span><br><span class="line">4181</span><br><span class="line">6765</span><br></pre></td></tr></table></figure><p>ç®€å•åœ°è®²ï¼Œyield çš„ä½œç”¨å°±æ˜¯æŠŠä¸€ä¸ªå‡½æ•°å˜æˆä¸€ä¸ª generatorï¼Œå¸¦æœ‰ yield çš„å‡½æ•°ä¸å†æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ï¼ŒPython è§£é‡Šå™¨ä¼šå°†å…¶è§†ä¸ºä¸€ä¸ª generatorï¼Œè°ƒç”¨ fab(5) ä¸ä¼šæ‰§è¡Œ fab å‡½æ•°ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ª iterable å¯¹è±¡ï¼åœ¨ for å¾ªç¯æ‰§è¡Œæ—¶ï¼Œæ¯æ¬¡å¾ªç¯éƒ½ä¼šæ‰§è¡Œ fab å‡½æ•°å†…éƒ¨çš„ä»£ç ï¼Œæ‰§è¡Œåˆ° yield b æ—¶ï¼Œfab å‡½æ•°å°±è¿”å›ä¸€ä¸ªè¿­ä»£å€¼ï¼Œä¸‹æ¬¡è¿­ä»£æ—¶ï¼Œä»£ç ä» yield b çš„ä¸‹ä¸€æ¡è¯­å¥ç»§ç»­æ‰§è¡Œï¼Œè€Œå‡½æ•°çš„æœ¬åœ°å˜é‡çœ‹èµ·æ¥å’Œä¸Šæ¬¡ä¸­æ–­æ‰§è¡Œå‰æ˜¯å®Œå…¨ä¸€æ ·çš„ï¼Œäºæ˜¯å‡½æ•°ç»§ç»­æ‰§è¡Œï¼Œç›´åˆ°å†æ¬¡é‡åˆ° yieldã€‚</p><p>ä¸€ä¸ªå¸¦æœ‰ yield çš„å‡½æ•°å°±æ˜¯ä¸€ä¸ª generatorï¼Œå®ƒå’Œæ™®é€šå‡½æ•°ä¸åŒï¼Œç”Ÿæˆä¸€ä¸ª generator çœ‹èµ·æ¥åƒå‡½æ•°è°ƒç”¨ï¼Œä½†ä¸ä¼šæ‰§è¡Œä»»ä½•å‡½æ•°ä»£ç ï¼Œç›´åˆ°å¯¹å…¶è°ƒç”¨ next()ï¼ˆåœ¨ for å¾ªç¯ä¸­ä¼šè‡ªåŠ¨è°ƒç”¨ next()ï¼‰æ‰å¼€å§‹æ‰§è¡Œã€‚è™½ç„¶æ‰§è¡Œæµç¨‹ä»æŒ‰å‡½æ•°çš„æµç¨‹æ‰§è¡Œï¼Œä½†æ¯æ‰§è¡Œåˆ°ä¸€ä¸ª yield è¯­å¥å°±ä¼šä¸­æ–­ï¼Œå¹¶è¿”å›ä¸€ä¸ªè¿­ä»£å€¼ï¼Œä¸‹æ¬¡æ‰§è¡Œæ—¶ä» yield çš„ä¸‹ä¸€ä¸ªè¯­å¥ç»§ç»­æ‰§è¡Œã€‚çœ‹èµ·æ¥å°±å¥½åƒä¸€ä¸ªå‡½æ•°åœ¨æ­£å¸¸æ‰§è¡Œçš„è¿‡ç¨‹ä¸­è¢« yield ä¸­æ–­äº†æ•°æ¬¡ï¼Œæ¯æ¬¡ä¸­æ–­éƒ½ä¼šé€šè¿‡ yield è¿”å›å½“å‰çš„è¿­ä»£å€¼ã€‚</p><p>è¯•äº†ä¸€ä¸‹ä¸‹é¢ä¸€æ®µä»£ç </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">h</span><span class="params">()</span>:</span></span><br><span class="line">    print(<span class="string">'wenchuan'</span>)</span><br><span class="line">    <span class="keyword">yield</span> <span class="number">5</span></span><br><span class="line">    print(<span class="string">'fighting'</span>)</span><br><span class="line">c=h()</span><br><span class="line">c.__next__()</span><br><span class="line"><span class="comment"># &gt;&gt;&gt; c.__next__()</span></span><br><span class="line"><span class="comment"># webchuan</span></span><br><span class="line"><span class="comment"># 5</span></span><br><span class="line"><span class="comment"># &gt;&gt;&gt; c.__next__()</span></span><br><span class="line"><span class="comment"># fighting</span></span><br><span class="line"><span class="comment"># Traceback (most recent call last):</span></span><br><span class="line"><span class="comment">#   File "&lt;stdin&gt;", line 1, in &lt;module&gt;</span></span><br><span class="line"><span class="comment"># StopIteration</span></span><br></pre></td></tr></table></figure><p>å¯ä»¥æ¸…æ™°çš„çœ‹åˆ°,æ‰§è¡Œç¬¬ä¸€æ¬¡next()æ–¹æ³•æ—¶,åˆ°yieldå°±åœæ­¢äº†,ç›´åˆ°å†æ¬¡è°ƒç”¨next(),æ‰“å°å‡ºäº†fightingè¿™ä¸ªå•è¯,ç„¶åæŠ›å‡ºäº†è¿­ä»£ç»“æŸçš„å¼‚å¸¸<br>è¿˜æœ‰ä¸ªsend,æ…¢æ…¢æ¶ˆåŒ–,ç­‰æˆ‘æŠŠseleniumå†™å®Œå†å›æ¥è¡¥â€¦</p><p>x.send()çš„ä½œç”¨æ˜¯ä¼ é€’ä¸€ä¸ªå€¼ç»™generator,å¯ä»¥æ ¹æ®å€¼æ”¹å˜è¿­ä»£å™¨çš„çŠ¶æ€</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">h</span><span class="params">(max)</span>:</span></span><br><span class="line">    n=<span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> n&lt;max:</span><br><span class="line">        x=(<span class="keyword">yield</span> n)</span><br><span class="line">        <span class="keyword">if</span> x <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">            n=x</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            n+=<span class="number">1</span></span><br><span class="line">            </span><br><span class="line">x=h(<span class="number">1000</span>)</span><br><span class="line">x.__next__()</span><br><span class="line"><span class="number">0</span></span><br><span class="line">x.__next__()</span><br><span class="line"><span class="number">1</span></span><br><span class="line">......</span><br><span class="line">x.__next__()</span><br><span class="line"><span class="number">100</span></span><br><span class="line">x.send(<span class="number">500</span>)</span><br><span class="line"><span class="number">500</span></span><br><span class="line">x.__next__()</span><br><span class="line"><span class="number">501</span></span><br></pre></td></tr></table></figure><p>åŸºæœ¬ææ¸…æ¥šè¿™ä¸ªä¸œè¥¿æ€ä¹ˆç”¨äº†,ä¸‹ä¸€èŠ‚</p>]]></content>
      
      <categories>
          
          <category> python </category>
          
          <category> yield </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Keras</title>
      <link href="/2017/05/16/keras/"/>
      <url>/2017/05/16/keras/</url>
      <content type="html"><![CDATA[<p>å…¬å¸è¦åšä¸€ä¸ªç®€å•çš„æœºå™¨å­¦ä¹ é¡¹ç›®,ç”¨æ¥é¢„æµ‹ä¸€äº›æˆ‘ä»¬æ— æ³•ç”¨å› æœå…³ç³»æ¨å¯¼å‡ºæ¥çš„å…³ç³»<br>ç®€å•çœ‹äº†çœ‹æœºå™¨å­¦ä¹ çš„ä¸€äº›ç›¸å…³çŸ¥è¯†,æ•°å­¦ä¸å¥½,ç†è§£ä¸æ·±,å…ˆå­¦å­¦æ¡†æ¶æ€ä¹ˆç”¨å§,æ•°å­¦çš„äº‹æƒ…,ä¹Ÿåªå¥½æ…¢æ…¢æ¥äº†<br>/(ã„’oã„’)/~~<br><a id="more"></a><br>å…¶å®ä¹‹å‰å·²ç»ç¨å¾®åšäº†ä¸€ç‚¹,ä½†æ˜¯æ˜¯ç”ŸæŠ„çš„ä»£ç <br>ç°åœ¨éœ€è¦æŠŠè®­ç»ƒæ¨¡å‹ç¨å¾®æ”¹ä¸€ä¸‹,æ•°æ®ä»åŸæ¥çš„0/1å˜æˆäº†ä¸€ä¸ªä¸€ç»´æ•°ç»„,æ­£å¥½ç»“åˆä¹‹å‰æŠ„çš„ä»£ç ç†è§£ä¸€ä¸‹kerasçš„ç”¨æ³•<br>kerasçš„ä½¿ç”¨æ–¹æ³•å¤§æ¦‚å°±æ˜¯ä¸‹é¢è¿™ä¸€æ®µä»£ç ,å»ºç«‹æ¨¡å‹,ç„¶åå¸¦å…¥æ•°æ®,models.fit(â€¦.)ç®—å°±å¥½äº†<br>å…³äºæ·±åº¦å­¦ä¹ ,çœŸæœ‰èƒ½åŠ›ä»åŸå§‹çš„æ•°å­¦åŸç†å¼€å§‹æ¨å¯¼è‚¯å®šæ˜¯æœ€å¥½çš„<br>åƒæˆ‘è¿™ç§èœé¸¡,å¼ºçƒˆæ¨èå…ˆæŠŠç©ä¸€ä¸‹Googleçš„<a href="http://playground.tensorflow.org/" title="TensorFlow playground" target="_blank" rel="noopener">TensorFlowPlayground</a>è¿™ä¸ªé¡¹ç›®</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> Sequential</span><br><span class="line"><span class="keyword">from</span> keras.layers <span class="keyword">import</span> Dense,Activation</span><br><span class="line"><span class="comment"># For a single-input model with 2 classes (binary classification):</span></span><br><span class="line">model = Sequential()</span><br><span class="line">model.add(Dense(<span class="number">32</span>, activation=<span class="string">'relu'</span>, input_dim=<span class="number">100</span>))</span><br><span class="line">model.add(Dense(<span class="number">1</span>, activation=<span class="string">'sigmoid'</span>))</span><br><span class="line">model.compile(optimizer=<span class="string">'rmsprop'</span>,</span><br><span class="line">              loss=<span class="string">'binary_crossentropy'</span>,</span><br><span class="line">              metrics=[<span class="string">'accuracy'</span>])</span><br><span class="line"><span class="comment"># Generate dummy data</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">data = np.random.random((<span class="number">1000</span>, <span class="number">100</span>))</span><br><span class="line">labels = np.random.randint(<span class="number">2</span>, size=(<span class="number">1000</span>, <span class="number">1</span>))</span><br><span class="line"><span class="comment"># Train the model, iterating on the data in batches of 32 samples</span></span><br><span class="line">model.fit(data, labels, epochs=<span class="number">10</span>, batch_size=<span class="number">32</span>)</span><br></pre></td></tr></table></figure><p>è¿™æ®µä»£ç å…¶å®å°±æ˜¯ä¸€ä¸ªå®Œæ•´çš„è®­ç»ƒæ¨¡å‹äº†,å†ç•¥å¾®æ€è€ƒæ€è€ƒå§,ä»Šå¤©å…ˆç®€å•å†™åˆ°è¿™é‡Œ.<br>å¥½ä¹…æ²¡æœ‰æ›´æ–°åšå®¢,å…¶å®ä¹Ÿæ²¡å¤ªå¤šè¥å…»,æ…¢æ…¢ç§¯ç´¯å§,è¯´ä¸å®šå“ªä¸€å¤©ä¹Ÿæœ‰äººèƒ½é¡ºç€æˆ‘çš„æ–‡ç« å’Œæ€è·¯è§£å†³ä¸€äº›å…¥é—¨çš„é—®é¢˜å‘¢?</p><p>è¿™é‡Œè®°å½•ä¸€ä¸ªåœ°å€<a href="https://github.com/lakshayg/tensorflow-build" title="tensorflow-build" target="_blank" rel="noopener">tensorflow-build</a>,æœ‰ç¼–è¯‘åçš„TensorFlowåŒ…,æ®è¯´æ˜¯å¯ä»¥æé€Ÿ,ç”¨äºç”Ÿäº§ç¯å¢ƒ,ä¸è¿‡æˆ‘åœ¨è‡ªå·±ç”µè„‘ä¸Šæµ‹è¯•çš„æ€§èƒ½ä¹Ÿæ˜¯æœ‰é™â€¦</p>]]></content>
      
      <categories>
          
          <category> ç¬”è®° </category>
          
          <category> keras </category>
          
      </categories>
      
      
        <tags>
            
            <tag> keras </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>docker(1-3)</title>
      <link href="/2017/04/30/docker(1-3)/"/>
      <url>/2017/04/30/docker(1-3)/</url>
      <content type="html"><![CDATA[<p>åœ°ç‹±å’Œå¤©å ‚ä¹Ÿè®¸ç›¸è·å¾ˆé¥è¿œ,å¯åœ°ç‹±å’Œäººé—´ä¹Ÿè®¸åªæœ‰å…­ä¸ªç‚¹çš„è·ç¦»â€¦â€¦<br>å¿ƒæƒ…ç¬é—´å°±æ²¡é‚£ä¹ˆä½è½äº†,æŠ½ç©ºçœ‹ä¸€ä¸‹<a href="https://www.docker.com/" title="Docker" target="_blank" rel="noopener">Docker</a><br><a id="more"></a></p><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p><a href="https://docs.docker.com/get-started/" title="Orientation and Setup" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get -y install \</span><br><span class="line">  apt-transport-https \</span><br><span class="line">  ca-certificates \</span><br><span class="line">  curl</span><br><span class="line"></span><br><span class="line">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</span><br><span class="line"></span><br><span class="line">sudo add-apt-repository \</span><br><span class="line">       <span class="string">"deb [arch=amd64] https://download.docker.com/linux/ubuntu \</span></span><br><span class="line"><span class="string">       <span class="variable">$(lsb_release -cs)</span> \</span></span><br><span class="line"><span class="string">       stable"</span></span><br><span class="line"></span><br><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get -y install docker-ce</span><br></pre></td></tr></table></figure><p>HelloWorld<br>ç½‘ç»œåŸå› å¯èƒ½ä¼šæ‹‰ä¸åˆ°é•œåƒ,è¿™é‡Œå°±å¯ä»¥è€ƒè™‘<a href="#æ”¹ç”¨é•œåƒä»“åº“" title="æ”¹ç”¨é•œåƒä»“åº“">æ”¹é•œåƒä»“åº“</a>äº†</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">$ sudo docker run hello-world</span><br><span class="line">Unable to find image <span class="string">'hello-world:latest'</span> locally</span><br><span class="line">latest: Pulling from library/hello-world</span><br><span class="line">78445dd45222: Pull complete </span><br><span class="line">Digest: sha256:c5515758d4c5e1e838e9cd307f6c6a0d620b5e07e6f927b07d05f6d12a1ac8d7</span><br><span class="line">Status: Downloaded newer image <span class="keyword">for</span> hello-world:latest</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"></span><br><span class="line">To generate this message, Docker took the following steps:</span><br><span class="line"> 1. The Docker client contacted the Docker daemon.</span><br><span class="line"> 2. The Docker daemon pulled the <span class="string">"hello-world"</span> image from the Docker Hub.</span><br><span class="line"> 3. The Docker daemon created a new container from that image <span class="built_in">which</span> runs the</span><br><span class="line">    executable that produces the output you are currently reading.</span><br><span class="line"> 4. The Docker daemon streamed that output to the Docker client, <span class="built_in">which</span> sent it</span><br><span class="line">    to your terminal.</span><br><span class="line"></span><br><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class="line"> $ docker run -it ubuntu bash</span><br><span class="line"></span><br><span class="line">Share images, automate workflows, and more with a free Docker ID:</span><br><span class="line"> https://cloud.docker.com/</span><br><span class="line"></span><br><span class="line">For more examples and ideas, visit:</span><br><span class="line"> https://docs.docker.com/engine/userguide/</span><br></pre></td></tr></table></figure><p>å…¶ä»–ç³»ç»Ÿå®‰è£…è¿‡ç¨‹å¤§å·®ä¸å·®å§</p><h2 id="å®¹å™¨"><a href="#å®¹å™¨" class="headerlink" title="å®¹å™¨"></a>å®¹å™¨</h2><p><a href="https://docs.docker.com/get-started/part2/" title="Containers" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p><h3 id="é…ç½®ç¯å¢ƒ"><a href="#é…ç½®ç¯å¢ƒ" class="headerlink" title="é…ç½®ç¯å¢ƒ"></a>é…ç½®ç¯å¢ƒ</h3><p>æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹å­˜æ”¾ç›¸å…³çš„æ–‡ä»¶<br>é¦–å…ˆæ˜¯<code>Dockerfile</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Use an official Python runtime as a base image</span></span><br><span class="line">FROM python:2.7-slim</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set the working directory to /app</span></span><br><span class="line">WORKDIR /app</span><br><span class="line"></span><br><span class="line"><span class="comment"># Copy the current directory contents into the container at /app</span></span><br><span class="line">ADD . /app</span><br><span class="line"></span><br><span class="line"><span class="comment"># Install any needed packages specified in requirements.txt</span></span><br><span class="line">RUN pip install -r requirements.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># Make port 80 available to the world outside this container</span></span><br><span class="line">EXPOSE 80</span><br><span class="line"></span><br><span class="line"><span class="comment"># Define environment variable</span></span><br><span class="line">ENV NAME World</span><br><span class="line"></span><br><span class="line"><span class="comment"># Run app.py when the container launches</span></span><br><span class="line">CMD [<span class="string">"python"</span>, <span class="string">"app.py"</span>]</span><br></pre></td></tr></table></figure><blockquote><p>This Dockerfile refers to a couple of things we havenâ€™t created yet, namely app.py and requirements.txt. Letâ€™s get those in place next.</p></blockquote><p>ç„¶åæ˜¯<code>requirements.txt</code></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Flask</span><br><span class="line">Redis</span><br></pre></td></tr></table></figure><p>æœ€åæ˜¯<code>app.py</code></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask</span><br><span class="line"><span class="keyword">from</span> redis <span class="keyword">import</span> Redis, RedisError</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line"><span class="comment"># Connect to Redis</span></span><br><span class="line">redis = Redis(host=<span class="string">"redis"</span>, db=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route("/")</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">hello</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        visits = redis.incr(<span class="string">'counter'</span>)</span><br><span class="line">    <span class="keyword">except</span> RedisError:</span><br><span class="line">        visits = <span class="string">"&lt;i&gt;cannot connect to Redis, counter disabled&lt;/i&gt;"</span></span><br><span class="line"></span><br><span class="line">    html = <span class="string">"&lt;h3&gt;Hello &#123;name&#125;!&lt;/h3&gt;"</span> \</span><br><span class="line">           <span class="string">"&lt;b&gt;Hostname:&lt;/b&gt; &#123;hostname&#125;&lt;br/&gt;"</span> \</span><br><span class="line">           <span class="string">"&lt;b&gt;Visits:&lt;/b&gt; &#123;visits&#125;"</span></span><br><span class="line">    <span class="keyword">return</span> html.format(name=os.getenv(<span class="string">'NAME'</span>, <span class="string">"world"</span>), hostname=socket.gethostname(), visits=visits)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    app.run(host=<span class="string">'0.0.0.0'</span>, port=<span class="number">80</span>)</span><br></pre></td></tr></table></figure><h3 id="æ”¹ç”¨é•œåƒä»“åº“"><a href="#æ”¹ç”¨é•œåƒä»“åº“" class="headerlink" title="æ”¹ç”¨é•œåƒä»“åº“"></a>æ”¹ç”¨é•œåƒä»“åº“</h3><p>å®˜æ–¹çš„ä»“åº“åœ°å€æ˜¯åœ¨æ˜¯å¤ªå¡å¤ªå¡å¤ªå¡äº†,è€Œä¸”å¾ˆå®¹æ˜“æ–­å¼€,è‡ªå·±æ³¨å†Œäº†ä¸€ä¸ªé˜¿é‡Œçš„,é€Ÿåº¦ä¸å¾ˆå¿«ä½†æ˜¯è¿˜ç®—ç¨³å®š<br>è¿™é‡Œæ˜¯<a href="http://blog.csdn.net/qq_26091271/article/details/51501768" title="Dockerå­¦ä¹ ç¬”è®° â€” é…ç½®å›½å†…å…è´¹registry mirror" target="_blank" rel="noopener">å‚è€ƒæ–‡ç« </a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ vi /etc/default/docker</span><br><span class="line">DOCKER_OPTS=<span class="string">"--registry-mirror=http://registry.cn-hangzhou.aliyuncs.com/sayonara/private"</span></span><br><span class="line"><span class="comment"># é‡å¯æœåŠ¡ä½¿é…ç½®ç”Ÿæ•ˆ</span></span><br><span class="line">$ service docker restart</span><br></pre></td></tr></table></figure><h3 id="build"><a href="#build" class="headerlink" title="build"></a>build</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ ls</span><br><span class="line">Dockerfile app.py requirements.txt</span><br><span class="line"><span class="comment"># åé¢æœ‰ä¸ªç‚¹,åº”è¯¥æ˜¯å½“å‰è·¯å¾„çš„æ„æ€</span></span><br><span class="line">$ docker build -t friendlyhello .</span><br><span class="line">$ docker images</span><br><span class="line">REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">friendlyhello       latest              8b3b8bb5ae50        20 seconds ago      194 MB</span><br><span class="line">python              2.7-slim            7fd4e5a52ace        3 days ago          182 MB</span><br><span class="line">hello-world         latest              48b5124b2768        3 months ago        1.84 kB</span><br></pre></td></tr></table></figure><h3 id="Run-the-app"><a href="#Run-the-app" class="headerlink" title="Run the app"></a>Run the app</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åœ¨å®¹å™¨å†…å¯åŠ¨åº”ç”¨,å¹¶ä¸”å°†åœ°å€æ˜ å°„åˆ°å¤–éƒ¨çš„4000ç«¯å£</span></span><br><span class="line"><span class="comment"># è¿™é‡Œåº”ç”¨èµ·æ¥äº†æ²¡é—®é¢˜,ä½†æ˜¯ä¸çŸ¥é“ä¸ºä»€ä¹ˆè®¿é—®ä¸€ç›´ä¸æ­£å¸¸,å¥½åƒredisæœ‰ç‚¹é—®é¢˜</span></span><br><span class="line">$ docker run -p 4000:80 friendlyhello</span><br><span class="line"> * Running on http://0.0.0.0:80/ (Press CTRL+C to quit)</span><br><span class="line"><span class="comment"># æŸ¥çœ‹å¯åŠ¨çš„dockeråº”ç”¨</span></span><br><span class="line">$ docker ps</span><br><span class="line">CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                  NAMES</span><br><span class="line">d7c99c812184        friendlyhello       <span class="string">"python app.py"</span>     2 minutes ago       Up 2 minutes        0.0.0.0:4000-&gt;80/tcp   kind_bose</span><br><span class="line"><span class="comment"># åœæ­¢åº”ç”¨</span></span><br><span class="line">$ docker stop d7c99c812184</span><br></pre></td></tr></table></figure><h3 id="å‘å¸ƒå®¹å™¨"><a href="#å‘å¸ƒå®¹å™¨" class="headerlink" title="å‘å¸ƒå®¹å™¨"></a>å‘å¸ƒå®¹å™¨</h3><p>è¿™ä¸ªå°±ç±»ä¼¼npmå’Œbowerçš„å‘å¸ƒäº†,ç§æœ‰åº“çš„è¯æ–‡æ¡£æŒ‡å‘<a href="https://docs.docker.com/datacenter/dtr/2.2/guides/" title="Docker Trusted Registry" target="_blank" rel="noopener">Docker Trusted Registry</a>,ç”¨åˆ°äº†å†çœ‹,æ‡’å¾—æ³¨å†Œè´¦å·äº†,å°±è®°å½•ä¸€ä¸‹å‘½ä»¤å§</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ docker login</span><br><span class="line"><span class="comment"># Login with your Docker ID to push and pull images from Docker Hub. If you don't have a Docker ID, head over to https://hub.docker.com to create one.</span></span><br><span class="line">$ docker tag friendlyhello username/repository:tag</span><br><span class="line">$ docker push username/repository:tag</span><br><span class="line"><span class="comment"># è¿™é‡Œç±»ä¼¼ç¬¬ä¸€æ­¥docker run hello-world,ä»è¿œç¨‹ä»“åº“ç›´æ¥å¯åŠ¨å®¹å™¨</span></span><br><span class="line">$ docker run -p 4000:80 username/repository:tag</span><br></pre></td></tr></table></figure><h3 id="ç›¸å…³å‘½ä»¤"><a href="#ç›¸å…³å‘½ä»¤" class="headerlink" title="ç›¸å…³å‘½ä»¤"></a>ç›¸å…³å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">docker build -t friendlyname .  <span class="comment"># Create image using this directory's Dockerfile</span></span><br><span class="line">docker run -p 4000:80 friendlyname  <span class="comment"># Run "friendlyname" mapping port 4000 to 80</span></span><br><span class="line">docker run -d -p 4000:80 friendlyname         <span class="comment"># Same thing, but in detached mode</span></span><br><span class="line">docker ps                                 <span class="comment"># See a list of all running containers</span></span><br><span class="line">docker stop &lt;<span class="built_in">hash</span>&gt;                     <span class="comment"># Gracefully stop the specified container</span></span><br><span class="line">docker ps -a           <span class="comment"># See a list of all containers, even the ones not running</span></span><br><span class="line">docker <span class="built_in">kill</span> &lt;<span class="built_in">hash</span>&gt;                   <span class="comment"># Force shutdown of the specified container</span></span><br><span class="line">docker rm &lt;<span class="built_in">hash</span>&gt;              <span class="comment"># Remove the specified container from this machine</span></span><br><span class="line">docker rm $(docker ps -a -q)           <span class="comment"># Remove all containers from this machine</span></span><br><span class="line">docker images -a                               <span class="comment"># Show all images on this machine</span></span><br><span class="line">docker rmi &lt;imagename&gt;            <span class="comment"># Remove the specified image from this machine</span></span><br><span class="line">docker rmi $(docker images -q)             <span class="comment"># Remove all images from this machine</span></span><br><span class="line">docker login             <span class="comment"># Log in this CLI session using your Docker credentials</span></span><br><span class="line">docker tag &lt;image&gt; username/repository:tag  <span class="comment"># Tag &lt;image&gt; for upload to registry</span></span><br><span class="line">docker push username/repository:tag            <span class="comment"># Upload tagged image to registry</span></span><br><span class="line">docker run username/repository:tag                   <span class="comment"># Run image from a registry</span></span><br></pre></td></tr></table></figure><h2 id="æœåŠ¡"><a href="#æœåŠ¡" class="headerlink" title="æœåŠ¡"></a>æœåŠ¡</h2><p><a href="https://docs.docker.com/get-started/part3/" title="Services" target="_blank" rel="noopener">å®˜æ–¹æ–‡æ¡£</a></p><blockquote><p>In a distributed application, different pieces of the app are called â€œservices.â€ For example, if you imagine a video sharing site, there will probably be a service for storing application data in a database, a service for video transcoding in the background after a user uploads something, a service for the front-end, and so on.</p></blockquote><blockquote><p>A service really just means, â€œcontainers in production.â€ A service only runs one image, but it codifies the way that image runs â€“ what ports it should use, how many replicas of the container should run so the service has the capacity it needs, and so on. Scaling a service changes the number of container instances running that piece of software, assigning more computing resources to the service in the process.</p></blockquote><blockquote><p>Luckily itâ€™s very easy to define, run, and scale services with the Docker platform â€“ just write a docker-compose.yml file.</p></blockquote><p>éƒ¨ç½²æœåŠ¡å¤§æ¦‚æ˜¯è¿™æ ·çš„è¿‡ç¨‹</p><ol><li>åˆ›å»ºä¸€ä¸ªå®¹å™¨</li><li>å¹¶ä¸”å‘å¸ƒå‡ºæ¥</li><li>é€šè¿‡<code>docker-compose.yml</code>é…ç½®æœåŠ¡</li><li>é€šè¿‡dockerè¿è¡Œ</li></ol><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">"3"</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line"><span class="attr">  web:</span></span><br><span class="line"><span class="attr">    image:</span> <span class="string">username/repository:tag</span></span><br><span class="line"><span class="attr">    deploy:</span></span><br><span class="line"><span class="attr">      replicas:</span> <span class="number">5</span></span><br><span class="line"><span class="attr">      resources:</span></span><br><span class="line"><span class="attr">        limits:</span></span><br><span class="line"><span class="attr">          cpus:</span> <span class="string">"0.1"</span></span><br><span class="line"><span class="attr">          memory:</span> <span class="number">50</span><span class="string">M</span></span><br><span class="line"><span class="attr">      restart_policy:</span></span><br><span class="line"><span class="attr">        condition:</span> <span class="string">on-failure</span></span><br><span class="line"><span class="attr">    ports:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">"80:80"</span></span><br><span class="line"><span class="attr">    networks:</span></span><br><span class="line"><span class="bullet">      -</span> <span class="string">webnet</span></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line"><span class="attr">  webnet:</span></span><br></pre></td></tr></table></figure><p><code>docker-compose.yml</code>è¿™ä¸ªæ–‡ä»¶å‘Šè¯‰Dockeråšäº”ä»¶äº‹</p><ol><li>å¯åŠ¨äº”ä¸ªæŒ‡å®šçš„å®¹å™¨çº¿ç¨‹,å‘½åä¸º<code>web</code>,é™åˆ¶æ¯ä¸ªçº¿ç¨‹æœ€å¤šå ç”¨10%çš„CPUèµ„æºå’Œ50MBçš„å†…å­˜</li><li>æœåŠ¡æ•…éšœç«‹åˆ»é‡å¯</li><li>æ˜ å°„æœåŠ¡å™¨çš„80ç«¯å£åˆ°æœåŠ¡çš„80ç«¯å£</li><li>é€šè¿‡<code>webnet</code>è¿›è¡Œè´Ÿè½½å‡è¡¡,å®¹å™¨é€šè¿‡ä¸´æ—¶ç«¯å£(an ephemeral port)å°†è‡ªå·±å‘å¸ƒåˆ°<code>web</code>æœåŠ¡çš„80ç«¯å£</li><li>ä½¿ç”¨é»˜è®¤è®¾ç½®å®šä¹‰<code>webnet</code>(è´Ÿè½½å‡è¡¡ç½‘ç»œ)</li></ol><h3 id="è¿è¡Œ"><a href="#è¿è¡Œ" class="headerlink" title="è¿è¡Œ"></a>è¿è¡Œ</h3><p>ä½¿ç”¨<code>docker stack deploy</code>å‘½ä»¤ä¹‹å‰éœ€è¦å…ˆæ‰§è¡Œä¸‹åˆ—å‘½ä»¤,å¦åˆ™å°†æç¤º<code>this node is not a swarm manager</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ docker swarm init</span><br><span class="line"><span class="comment"># éƒ¨ç½²</span></span><br><span class="line">$ docker stack deploy -c docker-compose.yml getstartedlab</span><br><span class="line"><span class="comment"># æŸ¥çœ‹åŠ è½½çš„å®¹å™¨åˆ—è¡¨</span></span><br><span class="line">$ docker stack ps getstartedlab</span><br></pre></td></tr></table></figure><h3 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h3><p>ç›´æ¥ä¿®æ”¹<code>docker-compose.yml</code>æ–‡ä»¶,é‡æ–°éƒ¨ç½²æœåŠ¡,å³å¯æ‰©å±•åº”ç”¨çš„é…ç½®</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Dockerä¼šè‡ªåŠ¨æ›´æ–°é…ç½®,ä¸éœ€è¦åœæ‰ç°æœ‰çš„æœåŠ¡</span></span><br><span class="line">$ docker stack deploy -c docker-compose.yml getstartedlab</span><br><span class="line"><span class="comment"># Take down the app</span></span><br><span class="line">$ docker stack rm getstartedlab</span><br></pre></td></tr></table></figure><h3 id="ç›¸å…³å‘½ä»¤-1"><a href="#ç›¸å…³å‘½ä»¤-1" class="headerlink" title="ç›¸å…³å‘½ä»¤"></a>ç›¸å…³å‘½ä»¤</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">docker stack ls              <span class="comment"># List all running applications on this Docker host</span></span><br><span class="line">docker stack deploy -c &lt;composefile&gt; &lt;appname&gt;  <span class="comment"># Run the specified Compose file</span></span><br><span class="line">docker stack services &lt;appname&gt;       <span class="comment"># List the services associated with an app</span></span><br><span class="line">docker stack ps &lt;appname&gt;   <span class="comment"># List the running containers associated with an app</span></span><br><span class="line">docker stack rm &lt;appname&gt;                             <span class="comment"># Tear down an application</span></span><br></pre></td></tr></table></figure><p>å…ˆå†™åˆ°è¿™é‡Œ,é›†ç¾¤ä»€ä¹ˆçš„ç”¨åˆ°äº†å†è¯´â€¦æ„Ÿè§‰è¿™æ˜¯è¿ç»´çš„ä¸œè¥¿</p>]]></content>
      
      <categories>
          
          <category> ç¬”è®° </category>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>å‘½ä»¤è¡Œä¸­æ‰“å¼€vscode</title>
      <link href="/2017/04/28/%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%AD%E6%89%93%E5%BC%80vscode/"/>
      <url>/2017/04/28/%E5%91%BD%E4%BB%A4%E8%A1%8C%E4%B8%AD%E6%89%93%E5%BC%80vscode/</url>
      <content type="html"><![CDATA[<p>ä¸åœçš„æ•²å‘½ä»¤å…¶å®å¾ˆéº»çƒ¦,å°¤å…¶macä¸‹é¢çš„æ–‡ä»¶ç³»ç»Ÿä¸æ˜¯å¾ˆä¹ æƒ¯,æ¯æ¬¡ç”¨vscodeæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å¤¹æ—¶è¦æåŠå¤©,å¾ˆæ˜¯ä¸æ–¹ä¾¿<br>è¯•äº†ä¸€ä¸‹alias(åŒä¹‰è¯),æ„Ÿè§‰éå¸¸å¥½ç”¨<br><a id="more"></a><br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é…ç½®ç¯å¢ƒå˜é‡</span></span><br><span class="line">$ vim ~/.bash_profile</span><br><span class="line"><span class="comment"># æ·»åŠ å¦‚ä¸‹å†…å®¹</span></span><br><span class="line"><span class="comment"># vscæ‰“å¼€vscodeæ–‡ä»¶</span></span><br><span class="line"><span class="built_in">alias</span> vsc=<span class="string">"'/Applications/Visual Studio Code.app/Contents/Resources/app/bin/code'"</span></span><br><span class="line"><span class="comment"># å®šä¹‰vsc-hexoå‘½ä»¤,è¾“å…¥å³å¯æ‰“å¼€vscodeå¹¶ä¸”æ‰“å¼€hexoè·¯å¾„,å…¶ä»–æ–‡ä»¶é…ç½®ç›¸åŒ</span></span><br><span class="line"><span class="built_in">alias</span> vsc-hexo=<span class="string">"vsc /Users/liudongmeng/Documents/GitHub/Hexo/"</span></span><br></pre></td></tr></table></figure></p><p>åŒæ ·å¯ä»¥é…ç½®ä¸€äº›sshçš„åŒä¹‰è¯,ä¸ç”¨æ¯æ¬¡éƒ½ç”¨æˆ·å+ipè¾“åŠå¤©,æˆ‘åæ­£åˆ‡æ¢ä¸å¤ªè¿‡æ¥â€¦</p>]]></content>
      
      <categories>
          
          <category> ç¬”è®° </category>
          
          <category> å‘½ä»¤é…ç½® </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>2017-04-27</title>
      <link href="/2017/04/27/2017-04-27/"/>
      <url>/2017/04/27/2017-04-27/</url>
      <content type="html"><![CDATA[<p>æ™šä¸Šéšä¾¿çœ‹ç‚¹ä¸œè¥¿,å¿ƒæƒ…ä¸å¥½åƒåƒåƒ,æ”¶æ‹¾æ”¶æ‹¾,å°±å¢¨è¿¹åˆ°è¿™ä¸ªç‚¹äº†<br><a id="more"></a><br>è£…äº†ä¸ªVPNè¿åˆ°å…¬å¸,æ‰¾äº†ä¸ªremote desktopå·¥å…·å‡†å¤‡è¿œç¨‹åˆ°è‡ªå·±ç”µè„‘ä¸Šçœ‹çœ‹,ç„¶åå°±å‘ç°è‡ªå·±ç”µè„‘pingä¸é€šâ€¦<br>è²Œä¼¼æ˜¯ä¼‘çœ äº†å›§,è€ƒè™‘ä¸€ä¸‹äº”ä¸€è¦ä¸è¦å¼€ä¸€ä¸ªå‡æœŸ,ä¸è¿‡80è¿˜æ˜¯èƒ½è¿ä¸Šçš„<br>ç°åœ¨ä¹Ÿæ²¡å¿ƒæƒ…å¤„ç†é‚£ä¸ªunixODBCçš„é—®é¢˜â€¦è¢«webæ•´çš„ä¸€å¤´åŒ…<br>ç£¨ç£¨å”§å”§åšäº†ä¸€å¤©,ç»“æœä¸‹ç­çš„æ—¶å€™å…¨éƒ½å›æ»šäº†.<br>æœ‰ç‚¹é€’å½’çš„ä¾èµ–å…³ç³»+å¼‚æ­¥/åŒæ­¥çš„æ§åˆ¶,çœŸæ˜¯ä¸ä¼šå•Šâ€¦çƒ¦çš„è¦æ­»<br>ä¸æ˜¯ä¸ç†è§£ä¸ºä»€ä¹ˆå¼‚æ­¥,å°±æ˜¯ä¸çŸ¥é“åœ¨ä¸ç¡®å®šæœ‰å¤šå°‘ä¸ªthençš„æƒ…å†µä¸‹æ€ä¹ˆå†™è¿™ä¸ªä»£ç â€¦<br>ç„¶åçˆ¬è™«æœ€è¿‘æ²¡çœ‹,NLPä¹Ÿæ²¡çœ‹,MLä¹Ÿæ²¡çœ‹,ç®—æ³•ä¹Ÿæ²¡çœ‹â€¦â€¦<br>å‡ ä¸ªç½‘ç«™ä»€ä¹ˆçš„å…ˆè®°ä¸‹æ¥å§,ä¸€å †ä¸€å †çš„ä¸œè¥¿,æ ¹æœ¬çœ‹ä¸è¿‡æ¥ğŸ˜”<br><a href="https://www.coursera.org/" title="Coursera|OnlineCoursesFromTopUniversities.JoinforFree" target="_blank" rel="noopener">Coursera|OnlineCoursesFromTopUniversities.JoinforFree</a><br><a href="https://www.coursera.org/learn/machine-learning" title="MachineLearning-StanfordUniversity|Coursera" target="_blank" rel="noopener">MachineLearning-StanfordUniversity|Coursera</a><br><a href="https://www.ted.com" title="TED:Ideasworthspreading" target="_blank" rel="noopener">TED:Ideasworthspreading</a><br><a href="http://www.csie.ntu.edu.tw/~htlin/mooc/" title="mooc" target="_blank" rel="noopener">mooc</a><br>æ‹¿äº†ä¸¤æœ¬ä¹¦å›æ¥å«æ•å¤´<br>å¿ƒæƒ…å¾ˆç³Ÿ,å¾ˆä½è½,å¾ˆå¤±è½,æœ‰ç‚¹æš´èº,æœ‰ç‚¹ç‹‚èº<br>æ—¥å¤ä¸€æ—¥</p>]]></content>
      
      <categories>
          
          <category> æ—¥è®° </category>
          
          <category> åæ§½ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>NLTK-è‡ªåŠ¨åŒ–è¯­ä¹‰æ ‡æ³¨</title>
      <link href="/2017/04/17/NLTK-%E8%87%AA%E5%8A%A8%E5%8C%96%E8%AF%AD%E4%B9%89%E6%A0%87%E6%B3%A8/"/>
      <url>/2017/04/17/NLTK-%E8%87%AA%E5%8A%A8%E5%8C%96%E8%AF%AD%E4%B9%89%E6%A0%87%E6%B3%A8/</url>
      <content type="html"><![CDATA[<p>ç®€å•çœ‹äº†ä¸€ä¸‹ç¬¬å››ç« ,æ²¡çœ‹å¤ªæ‡‚,è¾¹å†™è¾¹åšç†è§£ç†è§£çœ‹<br><a id="more"></a></p><h1 id="è‹±æ–‡è¯å¹²æå–å™¨"><a href="#è‹±æ–‡è¯å¹²æå–å™¨" class="headerlink" title="è‹±æ–‡è¯å¹²æå–å™¨"></a>è‹±æ–‡è¯å¹²æå–å™¨</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> nltk</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>porter = nltk.PorterStemmer()</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>porter.stem(<span class="string">'lying'</span>)</span><br><span class="line"><span class="string">u'lie'</span></span><br></pre></td></tr></table></figure><h1 id="è¯æ€§æ ‡æ³¨å™¨"><a href="#è¯æ€§æ ‡æ³¨å™¨" class="headerlink" title="è¯æ€§æ ‡æ³¨å™¨"></a>è¯æ€§æ ‡æ³¨å™¨</h1><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> nltk</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>text = nltk.word_tokenize(<span class="string">"And now for something completely different"</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>nltk.pos_tag(text)</span><br><span class="line">[(<span class="string">'And'</span>, <span class="string">'CC'</span>), (<span class="string">'now'</span>, <span class="string">'RB'</span>), (<span class="string">'for'</span>, <span class="string">'IN'</span>), (<span class="string">'something'</span>, <span class="string">'NN'</span>), (<span class="string">'completely'</span>, <span class="string">'RB'</span>), (<span class="string">'different'</span>, <span class="string">'JJ'</span>)]</span><br></pre></td></tr></table></figure><p>å…¶ä¸­CCæ˜¯è¿æ¥è¯ï¼ŒRBæ˜¯å‰¯è¯ï¼ŒINæ˜¯ä»‹è¯ï¼ŒNNæ˜¯åæ¬¡ï¼ŒJJæ˜¯å½¢å®¹è¯<br>è¿™æ˜¯ä¸€å¥å®Œæ•´çš„è¯ï¼Œå®é™…ä¸Špos_tagæ˜¯å¤„ç†ä¸€ä¸ªè¯åºåˆ—ï¼Œä¼šæ ¹æ®å¥å­æ¥åŠ¨æ€åˆ¤æ–­ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>nltk.pos_tag([<span class="string">'i'</span>,<span class="string">'love'</span>,<span class="string">'you'</span>])`</span><br><span class="line">[(<span class="string">'i'</span>, <span class="string">'NN'</span>), (<span class="string">'love'</span>, <span class="string">'VBP'</span>), (<span class="string">'you'</span>, <span class="string">'PRP'</span>)]</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„loveè¯†åˆ«ä¸ºåŠ¨è¯<br>è€Œï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>nltk.pos_tag([<span class="string">'love'</span>,<span class="string">'and'</span>,<span class="string">'hate'</span>])</span><br><span class="line">[(<span class="string">'love'</span>, <span class="string">'NN'</span>), (<span class="string">'and'</span>, <span class="string">'CC'</span>), (<span class="string">'hate'</span>, <span class="string">'NN'</span>)]</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„loveè¯†åˆ«ä¸ºåè¯<br>nltkä¸­å¤šæ•°éƒ½æ˜¯è‹±æ–‡çš„è¯æ€§æ ‡æ³¨è¯­æ–™åº“ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è‡ªå·±æ ‡æ³¨ä¸€æ‰¹è¯­æ–™åº“è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ<br>nltkæä¾›äº†æ¯”è¾ƒæ–¹ä¾¿çš„æ–¹æ³•ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>tagged_token = nltk.tag.str2tuple(<span class="string">'fly/NN'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tagged_token</span><br><span class="line">(<span class="string">'fly'</span>, <span class="string">'NN'</span>)</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„nltk.tag.str2tupleå¯ä»¥æŠŠfly/NNè¿™ç§å­—ç¬¦ä¸²è½¬æˆä¸€ä¸ªäºŒå…ƒç»„ï¼Œäº‹å®ä¸Šnltkçš„è¯­æ–™åº“ä¸­éƒ½æ˜¯è¿™ç§å­—ç¬¦ä¸²å½¢å¼çš„æ ‡æ³¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¦‚æœæŠŠè¯­æ–™åº“æ ‡è®°æˆï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>sent=<span class="string">'æˆ‘/NN æ˜¯/IN ä¸€ä¸ª/AT å¤§/JJ å‚»é€¼/NN'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>[nltk.tag.str2tuple(t) <span class="keyword">for</span> t <span class="keyword">in</span> sent.split()]</span><br><span class="line">[(<span class="string">'\xe6\x88\x91'</span>, <span class="string">'NN'</span>), (<span class="string">'\xe6\x98\xaf'</span>, <span class="string">'IN'</span>), (<span class="string">'\xe4\xb8\x80\xe4\xb8\xaa'</span>, <span class="string">'AT'</span>), (<span class="string">'\xe5\xa4\xa7'</span>, <span class="string">'JJ'</span>), (<span class="string">'\xe5\x82\xbb\xe9\x80\xbc'</span>, <span class="string">'NN'</span>)]</span><br></pre></td></tr></table></figure><p>è¿™ä¹ˆè¯´æ¥ï¼Œä¸­æ–‡ä¹Ÿæ˜¯å¯ä»¥æ”¯æŒçš„ï¼Œæ©~<br>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å¸ƒæœ—è¯­æ–™åº“ä¸­çš„æ ‡æ³¨ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>nltk.corpus.brown.tagged_words()</span><br><span class="line">[(<span class="string">u'The'</span>, <span class="string">u'AT'</span>), (<span class="string">u'Fulton'</span>, <span class="string">u'NP-TL'</span>), ...]</span><br></pre></td></tr></table></figure><p>äº‹å®ä¸Šnltkä¹Ÿæœ‰ä¸­æ–‡çš„è¯­æ–™åº“ï¼Œæˆ‘ä»¬æ¥ä¸‹è½½ä¸‹æ¥<br>æ‰§è¡Œ</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nltk.download()</span><br></pre></td></tr></table></figure><p>é€‰æ‹©Corporaé‡Œçš„sinica_treebankä¸‹è½½<br>sinicaå°±æ˜¯å°æ¹¾è¯ä¸­çš„ä¸­å›½ç ”ç©¶é™¢<br>æˆ‘ä»¬çœ‹ä¸€ä¸‹è¿™ä¸ªä¸­æ–‡è¯­æ–™åº“é‡Œæœ‰ä»€ä¹ˆå†…å®¹ï¼Œåˆ›å»ºcn_tag.pyï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> sys</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>reload(sys)</span><br><span class="line">&lt;module <span class="string">'sys'</span> (built-<span class="keyword">in</span>)&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sys.setdefaultencoding(<span class="string">'utf-8'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> nltk</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">for</span> word <span class="keyword">in</span> nltk.corpus.sinica_treebank.tagged_words():</span><br><span class="line"><span class="meta">... </span>    <span class="keyword">print</span> word[<span class="number">0</span>],word[<span class="number">1</span>]</span><br><span class="line">...</span><br><span class="line">æŒ VC2</span><br><span class="line">æœ‰æ•ˆæœŸ Nad</span><br><span class="line">åœ‹éš› Ncc</span><br><span class="line">å­¸ç”Ÿè­‰ Nab</span><br><span class="line">ï¼©ï¼³ï¼©ï¼£ Nba</span><br><span class="line">ã€ Caa</span><br><span class="line">ï¼³ï¼´ï¼¡ Nba</span><br><span class="line">é’å¹´è­‰ Nab</span><br><span class="line">ã€ Caa</span><br><span class="line">ï¼³ï¼´ï¼¡ Nba</span><br><span class="line">æœƒå“¡è­‰ Nab</span><br></pre></td></tr></table></figure><p>ç¬¬ä¸€åˆ—æ˜¯ä¸­æ–‡çš„è¯æ±‡ï¼Œç¬¬äºŒåˆ—æ˜¯æ ‡æ³¨å¥½çš„è¯æ€§<br>æˆ‘ä»¬å‘ç°è¿™é‡Œé¢éƒ½æ˜¯ç¹ä½“ï¼Œå› ä¸ºæ˜¯åŸºäºå°æ¹¾çš„è¯­æ–™ç”Ÿæˆçš„ï¼Œæƒ³è¦ç®€ä½“ä¸­æ–‡è¿˜å¾—è‡ªå·±æƒ³åŠæ³•ã€‚ä¸è¿‡æœ‰äººå·²ç»å¸®æˆ‘ä»¬åšäº†è¿™éƒ¨åˆ†å·¥ä½œï¼Œé‚£å°±æ˜¯<a href="https://github.com/fxsjy/jieba" title="ç»“å·´åˆ‡è¯" target="_blank" rel="noopener">jiebaåˆ‡è¯</a>ï¼Œå¼ºçƒˆæ¨èï¼Œå¯ä»¥è‡ªå·±åŠ è½½è‡ªå·±çš„è¯­æ–™ï¼Œè¿›è¡Œä¸­æ–‡åˆ‡è¯ï¼Œå¹¶ä¸”èƒ½å¤Ÿè‡ªåŠ¨åšè¯æ€§æ ‡æ³¨</p><h1 id="è¯æ€§è‡ªåŠ¨æ ‡æ³¨"><a href="#è¯æ€§è‡ªåŠ¨æ ‡æ³¨" class="headerlink" title="è¯æ€§è‡ªåŠ¨æ ‡æ³¨"></a>è¯æ€§è‡ªåŠ¨æ ‡æ³¨</h1><p>é¢å¯¹ä¸€ç‰‡æ–°çš„è¯­æ–™åº“(æ¯”å¦‚æˆ‘ä»¬ä»æœªå¤„ç†è¿‡ä¸­æ–‡ï¼Œåªæœ‰ä¸€æ‰¹æ‰¹çš„ä¸­æ–‡è¯­æ–™ï¼Œç°åœ¨è®©æˆ‘ä»¬åšè¯æ€§è‡ªåŠ¨æ ‡æ³¨)ï¼Œå¦‚ä½•å®ç°è¯æ€§è‡ªåŠ¨æ ‡æ³¨ï¼Ÿæœ‰å¦‚ä¸‹å‡ ç§æ ‡æ³¨æ–¹æ³•ï¼š</p><p>é»˜è®¤æ ‡æ³¨å™¨ï¼šä¸ç®¡ä»€ä¹ˆè¯ï¼Œéƒ½æ ‡æ³¨ä¸ºé¢‘ç‡æœ€é«˜çš„ä¸€ç§è¯æ€§ã€‚æ¯”å¦‚ç»è¿‡åˆ†æï¼Œæ‰€æœ‰ä¸­æ–‡è¯­æ–™é‡Œçš„è¯æ˜¯åæ¬¡çš„æ¦‚ç‡æ˜¯13%æœ€å¤§ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„é»˜è®¤æ ‡æ³¨å™¨å°±å…¨éƒ¨æ ‡æ³¨ä¸ºåæ¬¡ã€‚è¿™ç§æ ‡æ³¨å™¨ä¸€èˆ¬ä½œä¸ºå…¶ä»–æ ‡æ³¨å™¨å¤„ç†ä¹‹åçš„æœ€åä¸€é“é—¨ï¼Œå³ï¼šä¸çŸ¥é“æ˜¯ä»€ä¹ˆè¯ï¼Ÿé‚£ä¹ˆä»–æ˜¯åæ¬¡ã€‚é»˜è®¤æ ‡æ³¨å™¨ç”¨DefaultTaggeræ¥å®ç°ï¼Œå…·ä½“ç”¨æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> sys</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>reload(sys)</span><br><span class="line">&lt;module <span class="string">'sys'</span> (built-<span class="keyword">in</span>)&gt;</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sys.setdefaultencoding(<span class="string">'utf-8'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> nltk</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>default_tagger = nltk.DefaultTagger(<span class="string">'NN'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>raw = <span class="string">'æˆ‘å‹’ä¸ªå»'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tokens = nltk.word_tokenize(raw)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tags = default_tagger.tag(tokens)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> tags</span><br><span class="line">[(<span class="string">'\xe6\x88\x91\xe5\x8b\x92\xe4\xb8\xaa\xe5\x8e\xbb'</span>, <span class="string">'NN'</span>)]</span><br></pre></td></tr></table></figure><p>æ­£åˆ™è¡¨è¾¾å¼æ ‡æ³¨å™¨ï¼šæ»¡è¶³ç‰¹å®šæ­£åˆ™è¡¨è¾¾å¼çš„è®¤ä¸ºæ˜¯æŸç§è¯æ€§ï¼Œæ¯”å¦‚å‡¡æ˜¯å¸¦â€œä»¬â€çš„éƒ½è®¤ä¸ºæ˜¯ä»£è¯(PRO)ã€‚æ­£åˆ™è¡¨è¾¾å¼æ ‡æ³¨å™¨é€šRegexpTaggeå®ç°ï¼Œç”¨æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>pattern = [(<span class="string">r'.*ä»¬$'</span>,<span class="string">'PRO'</span>)]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tagger = nltk.RegexpTagger(pattern)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> tagger.tag(nltk.word_tokenize(<span class="string">'æˆ‘ä»¬ ç´¯ ä¸ª å» ä½ ä»¬ å’Œ ä»–ä»¬ å•Š'</span>))</span><br><span class="line">[(<span class="string">'\xe6\x88\x91\xe4\xbb\xac'</span>, <span class="string">'PRO'</span>), (<span class="string">'\xe7\xb4\xaf'</span>, <span class="keyword">None</span>), (<span class="string">'\xe4\xb8\xaa'</span>, <span class="keyword">None</span>), (<span class="string">'\xe5\x8e\xbb'</span>, <span class="keyword">None</span>), (<span class="string">'\xe4\xbd\xa0\xe4\xbb\xac'</span>, <span class="string">'PRO'</span>), (<span class="string">'\xe5\x92\x8c'</span>, <span class="keyword">None</span>), (<span class="string">'\xe4\xbb\x96\xe4\xbb\xac'</span>, <span class="string">'PRO'</span>), (<span class="string">'\xe5\x95\x8a'</span>, <span class="keyword">None</span>)]</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢æ ‡æ³¨å™¨ï¼šæ‰¾å‡ºæœ€é¢‘ç¹çš„nä¸ªè¯ä»¥åŠå®ƒçš„è¯æ€§ï¼Œç„¶åç”¨è¿™ä¸ªä¿¡æ¯å»æŸ¥æ‰¾è¯­æ–™åº“ï¼ŒåŒ¹é…çš„å°±æ ‡è®°ä¸Šï¼Œå‰©ä½™çš„è¯ä½¿ç”¨é»˜è®¤æ ‡æ³¨å™¨(å›é€€)ã€‚è¿™ä¸€èˆ¬ä½¿ç”¨ä¸€å…ƒæ ‡æ³¨çš„æ–¹å¼ï¼Œè§ä¸‹é¢ã€‚</p><p>ä¸€å…ƒæ ‡æ³¨ï¼šåŸºäºå·²ç»æ ‡æ³¨çš„è¯­æ–™åº“åšè®­ç»ƒï¼Œç„¶åç”¨è®­ç»ƒå¥½çš„æ¨¡å‹æ¥æ ‡æ³¨æ–°çš„è¯­æ–™ï¼Œä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> nltk</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> nltk.corpus <span class="keyword">import</span> brown</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tagged_sents = [[(<span class="string">'æˆ‘'</span>,<span class="string">'PRO'</span>),(<span class="string">'å°å…”'</span>,<span class="string">'NN'</span>)]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>unigram_tagger = nltk.UnigramTagger(tagged_sents)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sents = brown.sents(categories=<span class="string">'news'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>sents = [[<span class="string">'æˆ‘'</span>,<span class="string">'ä½ '</span>,<span class="string">'å°å…”'</span>]]</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tags = unigram_tagger.tag(sents[<span class="number">0</span>])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">print</span> tags</span><br><span class="line">[(<span class="string">'\xe6\x88\x91'</span>, <span class="string">'PRO'</span>), (<span class="string">'\xe4\xbd\xa0'</span>, <span class="keyword">None</span>), (<span class="string">'\xe5\xb0\x8f\xe5\x85\x94'</span>, <span class="string">'NN'</span>)]</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçš„tagged_sentsæ˜¯ç”¨äºè®­ç»ƒçš„è¯­æ–™åº“ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥ç”¨å·²æœ‰çš„æ ‡æ³¨å¥½çš„è¯­æ–™åº“ï¼Œæ¯”å¦‚ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brown_tagged_sents = brown.tagged_sents(categories=<span class="string">'news'</span>)</span><br></pre></td></tr></table></figure><p>äºŒå…ƒæ ‡æ³¨å’Œå¤šå…ƒæ ‡æ³¨ï¼šä¸€å…ƒæ ‡æ³¨æŒ‡çš„æ˜¯åªè€ƒè™‘å½“å‰è¿™ä¸ªè¯ï¼Œä¸è€ƒè™‘ä¸Šä¸‹æ–‡ã€‚äºŒå…ƒæ ‡æ³¨å™¨æŒ‡çš„æ˜¯è€ƒè™‘å®ƒå‰é¢çš„è¯çš„æ ‡æ³¨ï¼Œç”¨æ³•åªéœ€è¦æŠŠä¸Šé¢çš„UnigramTaggeræ¢æˆBigramTaggerã€‚åŒç†ä¸‰å…ƒæ ‡æ³¨æ¢æˆTrigramTagger</p><p>ç»„åˆæ ‡æ³¨å™¨ï¼šä¸ºäº†æé«˜ç²¾åº¦å’Œè¦†ç›–ç‡ï¼Œæˆ‘ä»¬å¯¹å¤šç§æ ‡æ³¨å™¨ç»„åˆï¼Œæ¯”å¦‚ç»„åˆäºŒå…ƒæ ‡æ³¨å™¨ã€ä¸€å…ƒæ ‡æ³¨å™¨å’Œé»˜è®¤æ ‡æ³¨å™¨ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">t0 = nltk.DefaultTagger(<span class="string">'NN'</span>)</span><br><span class="line">t1 = nltk.UnigramTagger(train_sents, backoff=t0)</span><br><span class="line">t2 = nltk.BigramTagger(train_sents, backoff=t1)</span><br></pre></td></tr></table></figure><p>æ ‡æ³¨å™¨çš„å­˜å‚¨ï¼šè®­ç»ƒå¥½çš„æ ‡æ³¨å™¨ä¸ºäº†æŒä¹…åŒ–ï¼Œå¯ä»¥å­˜å‚¨åˆ°ç¡¬ç›˜ï¼Œå…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> cPickle <span class="keyword">import</span> dump</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>output = open(<span class="string">'t2.pkl'</span>, <span class="string">'wb'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>dump(t2, output, <span class="number">-1</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>output.close()</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æ—¶ä¹Ÿå¯ä»¥åŠ è½½ï¼Œå¦‚ä¸‹ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> cPickle <span class="keyword">import</span> load</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>input = open(<span class="string">'t2.pkl'</span>, <span class="string">'rb'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>tagger = load(input)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>input.close()</span><br></pre></td></tr></table></figure><h1 id="ç»“å·´åˆ‡è¯"><a href="#ç»“å·´åˆ‡è¯" class="headerlink" title="ç»“å·´åˆ‡è¯"></a>ç»“å·´åˆ‡è¯</h1><h2 id="ä¸»è¦åŠŸèƒ½"><a href="#ä¸»è¦åŠŸèƒ½" class="headerlink" title="ä¸»è¦åŠŸèƒ½"></a>ä¸»è¦åŠŸèƒ½</h2><p>ç›´æ¥æ‹·è´äº†<a href="https://github.com/fxsjy/jieba/blob/master/README.md" title="ä½¿ç”¨è¯´æ˜" target="_blank" rel="noopener">ä½¿ç”¨è¯´æ˜</a>é‡Œé¢çš„ä¾‹å­</p><ul><li>jieba.cut æ–¹æ³•æ¥å—ä¸‰ä¸ªè¾“å…¥å‚æ•°: éœ€è¦åˆ†è¯çš„å­—ç¬¦ä¸²ï¼›cut_all å‚æ•°ç”¨æ¥æ§åˆ¶æ˜¯å¦é‡‡ç”¨å…¨æ¨¡å¼ï¼›HMM å‚æ•°ç”¨æ¥æ§åˆ¶æ˜¯å¦ä½¿ç”¨ HMM æ¨¡å‹</li><li>jieba.cut_for_search æ–¹æ³•æ¥å—ä¸¤ä¸ªå‚æ•°ï¼šéœ€è¦åˆ†è¯çš„å­—ç¬¦ä¸²ï¼›æ˜¯å¦ä½¿ç”¨ HMM æ¨¡å‹ã€‚è¯¥æ–¹æ³•é€‚åˆç”¨äºæœç´¢å¼•æ“æ„å»ºå€’æ’ç´¢å¼•çš„åˆ†è¯ï¼Œç²’åº¦æ¯”è¾ƒç»†</li><li>å¾…åˆ†è¯çš„å­—ç¬¦ä¸²å¯ä»¥æ˜¯ unicode æˆ– UTF-8 å­—ç¬¦ä¸²ã€GBK å­—ç¬¦ä¸²ã€‚æ³¨æ„ï¼šä¸å»ºè®®ç›´æ¥è¾“å…¥ GBK å­—ç¬¦ä¸²ï¼Œå¯èƒ½æ— æ³•é¢„æ–™åœ°é”™è¯¯è§£ç æˆ UTF-8</li><li>jieba.cut ä»¥åŠ jieba.cut_for_search è¿”å›çš„ç»“æ„éƒ½æ˜¯ä¸€ä¸ªå¯è¿­ä»£çš„ generatorï¼Œå¯ä»¥ä½¿ç”¨ for å¾ªç¯æ¥è·å¾—åˆ†è¯åå¾—åˆ°çš„æ¯ä¸€ä¸ªè¯è¯­(unicode)ï¼Œæˆ–è€…ç”¨</li><li>jieba.lcut ä»¥åŠ jieba.lcut_for_search ç›´æ¥è¿”å› list</li><li>jieba.Tokenizer(dictionary=DEFAULT_DICT) æ–°å»ºè‡ªå®šä¹‰åˆ†è¯å™¨ï¼Œå¯ç”¨äºåŒæ—¶ä½¿ç”¨ä¸åŒè¯å…¸ã€‚jieba.dt ä¸ºé»˜è®¤åˆ†è¯å™¨ï¼Œæ‰€æœ‰å…¨å±€åˆ†è¯ç›¸å…³å‡½æ•°éƒ½æ˜¯è¯¥åˆ†è¯å™¨çš„æ˜ å°„ã€‚</li></ul><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install jieba</span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># encoding=utf-8</span></span><br><span class="line"><span class="keyword">import</span> jieba</span><br><span class="line"></span><br><span class="line">seg_list = jieba.cut(<span class="string">"æˆ‘æ¥åˆ°åŒ—äº¬æ¸…åå¤§å­¦"</span>, cut_all=<span class="keyword">True</span>)</span><br><span class="line">print(<span class="string">"Full Mode: "</span> + <span class="string">"/ "</span>.join(seg_list))  <span class="comment"># å…¨æ¨¡å¼</span></span><br><span class="line"></span><br><span class="line">seg_list = jieba.cut(<span class="string">"æˆ‘æ¥åˆ°åŒ—äº¬æ¸…åå¤§å­¦"</span>, cut_all=<span class="keyword">False</span>)</span><br><span class="line">print(<span class="string">"Default Mode: "</span> + <span class="string">"/ "</span>.join(seg_list))  <span class="comment"># ç²¾ç¡®æ¨¡å¼</span></span><br><span class="line"></span><br><span class="line">seg_list = jieba.cut(<span class="string">"ä»–æ¥åˆ°äº†ç½‘æ˜“æ­ç ”å¤§å¦"</span>)  <span class="comment"># é»˜è®¤æ˜¯ç²¾ç¡®æ¨¡å¼</span></span><br><span class="line">print(<span class="string">", "</span>.join(seg_list))</span><br><span class="line"></span><br><span class="line">seg_list = jieba.cut_for_search(<span class="string">"å°æ˜ç¡•å£«æ¯•ä¸šäºä¸­å›½ç§‘å­¦é™¢è®¡ç®—æ‰€ï¼Œååœ¨æ—¥æœ¬äº¬éƒ½å¤§å­¦æ·±é€ "</span>)  <span class="comment"># æœç´¢å¼•æ“æ¨¡å¼</span></span><br><span class="line">print(<span class="string">", "</span>.join(seg_list))</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ã€å…¨æ¨¡å¼ã€‘: æˆ‘/ æ¥åˆ°/ åŒ—äº¬/ æ¸…å/ æ¸…åå¤§å­¦/ åå¤§/ å¤§å­¦</span><br><span class="line"></span><br><span class="line">ã€ç²¾ç¡®æ¨¡å¼ã€‘: æˆ‘/ æ¥åˆ°/ åŒ—äº¬/ æ¸…åå¤§å­¦</span><br><span class="line"></span><br><span class="line">ã€æ–°è¯è¯†åˆ«ã€‘ï¼šä»–, æ¥åˆ°, äº†, ç½‘æ˜“, æ­ç ”, å¤§å¦    (æ­¤å¤„ï¼Œâ€œæ­ç ”â€å¹¶æ²¡æœ‰åœ¨è¯å…¸ä¸­ï¼Œä½†æ˜¯ä¹Ÿè¢«Viterbiç®—æ³•è¯†åˆ«å‡ºæ¥äº†)</span><br><span class="line"></span><br><span class="line">ã€æœç´¢å¼•æ“æ¨¡å¼ã€‘ï¼š å°æ˜, ç¡•å£«, æ¯•ä¸š, äº, ä¸­å›½, ç§‘å­¦, å­¦é™¢, ç§‘å­¦é™¢, ä¸­å›½ç§‘å­¦é™¢, è®¡ç®—, è®¡ç®—æ‰€, å, åœ¨, æ—¥æœ¬, äº¬éƒ½, å¤§å­¦, æ—¥æœ¬äº¬éƒ½å¤§å­¦, æ·±é€ </span><br></pre></td></tr></table></figure><h2 id="è½½å…¥è¯å…¸"><a href="#è½½å…¥è¯å…¸" class="headerlink" title="è½½å…¥è¯å…¸"></a>è½½å…¥è¯å…¸</h2><p>å¼€å‘è€…å¯ä»¥æŒ‡å®šè‡ªå·±è‡ªå®šä¹‰çš„è¯å…¸ï¼Œä»¥ä¾¿åŒ…å« jieba è¯åº“é‡Œæ²¡æœ‰çš„è¯ã€‚è™½ç„¶ jieba æœ‰æ–°è¯è¯†åˆ«èƒ½åŠ›ï¼Œä½†æ˜¯è‡ªè¡Œæ·»åŠ æ–°è¯å¯ä»¥ä¿è¯æ›´é«˜çš„æ­£ç¡®ç‡<br>ç”¨æ³•ï¼š <code>jieba.load_userdict(file_name) # file_name</code>ä¸ºæ–‡ä»¶ç±»å¯¹è±¡æˆ–è‡ªå®šä¹‰è¯å…¸çš„è·¯å¾„<br>è¯å…¸æ ¼å¼å’Œ dict.txt ä¸€æ ·ï¼Œä¸€ä¸ªè¯å ä¸€è¡Œï¼›æ¯ä¸€è¡Œåˆ†ä¸‰éƒ¨åˆ†ï¼šè¯è¯­ã€è¯é¢‘ï¼ˆå¯çœç•¥ï¼‰ã€è¯æ€§ï¼ˆå¯çœç•¥ï¼‰ï¼Œç”¨ç©ºæ ¼éš”å¼€ï¼Œé¡ºåºä¸å¯é¢ å€’ã€‚file_name è‹¥ä¸ºè·¯å¾„æˆ–äºŒè¿›åˆ¶æ–¹å¼æ‰“å¼€çš„æ–‡ä»¶ï¼Œåˆ™æ–‡ä»¶å¿…é¡»ä¸º UTF-8 ç¼–ç ã€‚<br>è¯é¢‘çœç•¥æ—¶ä½¿ç”¨è‡ªåŠ¨è®¡ç®—çš„èƒ½ä¿è¯åˆ†å‡ºè¯¥è¯çš„è¯é¢‘ã€‚</p><p>ä»Šå¤©å…ˆçœ‹åˆ°è¿™é‡Œ,æ…¢æ…¢æ¶ˆåŒ–,å›å¤´å›æ¥è¡¥</p>]]></content>
      
      <categories>
          
          <category> ç¬”è®° </category>
          
          <category> NLTK </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> NLTK </tag>
            
            <tag> èŠå¤©æœºå™¨äºº </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>NLTK</title>
      <link href="/2017/04/09/NLTK/"/>
      <url>/2017/04/09/NLTK/</url>
      <content type="html"><![CDATA[<p>ç½‘ä¸Šæ‰¾äº†ç¯‡çœ‹èµ·æ¥æŒºä¸°å¯Œçš„æ–‡ç« <a href="http://www.shareditor.com/bloglistbytag/?tagname=%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E5%81%9A%E8%81%8A%E5%A4%A9%E6%9C%BA%E5%99%A8%E4%BA%BA" title="è‡ªå·±åŠ¨æ‰‹åšèŠå¤©æœºå™¨äºº" target="_blank" rel="noopener">è‡ªå·±åŠ¨æ‰‹åšèŠå¤©æœºå™¨äºº</a>,å­¦ç€åšQA,<br>æ¥æºç½‘ç«™:<a href="http://www.shareditor.com/" title="shareditor" target="_blank" rel="noopener">shareditor</a><br>bookçš„ä¸‹è½½åœ°å€æ¥è‡ªäº:<a href="http://www.jianshu.com/p/9c48e8edc7aa" title="è§£å†³NLTKåŒ…ä¸‹è½½å‡ºé”™é—®é¢˜åŠNLPç¯å¢ƒæµ‹è¯•" target="_blank" rel="noopener">è§£å†³NLTKåŒ…ä¸‹è½½å‡ºé”™é—®é¢˜åŠNLPç¯å¢ƒæµ‹è¯•</a><br><a id="more"></a><br><a href="http://www.nltk.org/" title="NLTK" target="_blank" rel="noopener">NLTK</a>:Natural Language Toolkit</p><h1 id="NLTKåº“"><a href="#NLTKåº“" class="headerlink" title="NLTKåº“"></a>NLTKåº“</h1><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è€æ ·å­,åˆ‡æ¢åˆ°ENVç¯å¢ƒè£…</span></span><br><span class="line">$ <span class="built_in">source</span> ENV/bin/activate</span><br><span class="line"><span class="comment"># å®‰è£…nltkåŒ…</span></span><br><span class="line">$ pip install nltk</span><br><span class="line"><span class="comment"># å®‰è£…å®Œæˆä¹‹åå¯ä»¥åœ¨pythoné‡Œé¢å¯åŠ¨downloaderä¸‹è½½ç›¸å…³èµ„æº</span></span><br><span class="line"><span class="comment"># è¯•äº†ä¸€ä¸‹ä¸‹è½½åŠå…¶ä¸é è°±,ç¿»å¢™ä¹Ÿå„ç§æŠ¥é”™,è¿˜æ˜¯ç½‘ä¸Šæ‰¾èµ„æºå§</span></span><br><span class="line">$ python</span><br><span class="line">Python 2.7.10 (default, Feb  6 2017, 23:53:20)</span><br><span class="line">[GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.34)] on darwin</span><br><span class="line">Type <span class="string">"help"</span>, <span class="string">"copyright"</span>, <span class="string">"credits"</span> or <span class="string">"license"</span> <span class="keyword">for</span> more information.</span><br></pre></td></tr></table></figure><p>èµ„æºä¸‹è½½åœ°å€:<br><a href="https://pan.baidu.com/s/1slP4wfr" title="ä¸‹è½½åœ°å€1ï¼šäº‘ç›˜å¯†ç znx7" target="_blank" rel="noopener">ä¸‹è½½åœ°å€1ï¼šäº‘ç›˜å¯†ç znx7</a><br><a href="http://pan.baidu.com/s/1qYwA240" title="ä¸‹è½½åœ°å€2ï¼šäº‘ç›˜å¯†ç 4cp3" target="_blank" rel="noopener">ä¸‹è½½åœ°å€2ï¼šäº‘ç›˜å¯†ç 4cp3</a><br>æ¥æº:<br><a href="http://www.jianshu.com/p/9c48e8edc7aa" title="è§£å†³NLTKåŒ…ä¸‹è½½å‡ºé”™é—®é¢˜åŠNLPç¯å¢ƒæµ‹è¯•" target="_blank" rel="noopener">è§£å†³NLTKåŒ…ä¸‹è½½å‡ºé”™é—®é¢˜åŠNLPç¯å¢ƒæµ‹è¯•</a></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> nltk</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>nltk.download()</span><br><span class="line"><span class="comment"># ä¸‹è½½å¥½èµ„æºä¹‹åå¯¼å…¥book</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> nltk.book <span class="keyword">import</span> *</span><br><span class="line">*** Introductory Examples <span class="keyword">for</span> the NLTK Book ***</span><br><span class="line">Loading text1, ..., text9 <span class="keyword">and</span> sent1, ..., sent9</span><br><span class="line">Type the name of the text <span class="keyword">or</span> sentence to view it.</span><br><span class="line">Type: <span class="string">'texts()'</span> <span class="keyword">or</span> <span class="string">'sents()'</span> to list the materials.</span><br><span class="line">text1: Moby Dick by Herman Melville <span class="number">1851</span></span><br><span class="line">text2: Sense <span class="keyword">and</span> Sensibility by Jane Austen <span class="number">1811</span></span><br><span class="line">text3: The Book of Genesis</span><br><span class="line">text4: Inaugural Address Corpus</span><br><span class="line">text5: Chat Corpus</span><br><span class="line">text6: Monty Python <span class="keyword">and</span> the Holy Grail</span><br><span class="line">text7: Wall Street Journal</span><br><span class="line">text8: Personals Corpus</span><br><span class="line">text9: The Man Who Was Thursday by G . K . Chesterton <span class="number">1908</span></span><br><span class="line"><span class="comment"># è¿™é‡Œé¢çš„text*éƒ½æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„ä¹¦ç±èŠ‚ç‚¹ï¼Œç›´æ¥è¾“å…¥text1ä¼šè¾“å‡ºä¹¦ç±æ ‡é¢˜ï¼š</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>text1</span><br><span class="line">&lt;Text: Moby Dick by Herman Melville <span class="number">1851</span>&gt;</span><br></pre></td></tr></table></figure><p>åˆ°è¿™é‡Œä¸ºæ­¢,ç¯å¢ƒå®‰è£…å·¥ä½œå®Œæˆ</p><h2 id="æœç´¢"><a href="#æœç´¢" class="headerlink" title="æœç´¢"></a>æœç´¢</h2><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>text1.concordance(<span class="string">"former"</span>)</span><br><span class="line">Displaying <span class="number">20</span> of <span class="number">20</span> matches:</span><br><span class="line">s of the sea , appeared . Among the former , one was of a most monstrous size</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>ä¼šæ˜¾ç¤º20ä¸ªåŒ…å«formerçš„è¯­å¥ä¸Šä¸‹æ–‡<br>æˆ‘ä»¬è¿˜å¯ä»¥æœç´¢ç›¸å…³è¯ï¼Œæ¯”å¦‚ï¼š<br>è¾“å…¥äº†shipï¼ŒæŸ¥æ‰¾äº†boatï¼Œéƒ½æ˜¯è¿‘ä¹‰è¯</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>text1.similar(<span class="string">"ship"</span>)</span><br><span class="line">whale boat sea captain world way head time crew man other pequod line</span><br><span class="line">deck body fishery air boats side voyage</span><br></pre></td></tr></table></figure><p>è¾“å…¥äº†shipï¼ŒæŸ¥æ‰¾äº†boatï¼Œéƒ½æ˜¯è¿‘ä¹‰è¯<br>æˆ‘ä»¬è¿˜å¯ä»¥æŸ¥çœ‹æŸä¸ªè¯åœ¨æ–‡ç« é‡Œå‡ºç°çš„ä½ç½®ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è·‘äº†ä¸€éå‘ç°ç¼ºå°‘åŒ…æ‰€ä»¥æŠ¥é”™,è¿™é‡Œéœ€è¦å®‰è£…matplotlib</span></span><br><span class="line">pip install matplotlib</span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>text4.dispersion_plot([<span class="string">"citizens"</span>, <span class="string">"democracy"</span>, <span class="string">"freedom"</span>, <span class="string">"duties"</span>, <span class="string">"America"</span>])</span><br></pre></td></tr></table></figure><p>è·‘å‡ºæ¥åº”è¯¥æ˜¯ä¸‹é¢è¿™ä¸ªæ ·å­<img src="dispersion_plot.png" alt="dispersion_plot"></p><h2 id="è¯ç»Ÿè®¡"><a href="#è¯ç»Ÿè®¡" class="headerlink" title="è¯ç»Ÿè®¡"></a>è¯ç»Ÿè®¡</h2><ul><li>len(text1):è¿”å›æ€»å­—æ•°</li><li>set(text1):è¿”å›æ–‡æœ¬çš„æ‰€æœ‰è¯é›†åˆ</li><li>len(set(text4)):è¿”å›æ–‡æœ¬æ€»è¯æ•°</li><li>text4.count(â€œisâ€):è¿”å›â€œisâ€è¿™ä¸ªè¯å‡ºç°çš„æ€»æ¬¡æ•°</li><li>FreqDist(text1):ç»Ÿè®¡æ–‡ç« çš„è¯é¢‘å¹¶æŒ‰ä»å¤§åˆ°å°æ’åºå­˜åˆ°ä¸€ä¸ªåˆ—è¡¨é‡Œ</li><li>fdist1 = FreqDist(text1);fdist1.plot(50, cumulative=True):ç»Ÿè®¡è¯é¢‘ï¼Œå¹¶è¾“å‡ºç´¯è®¡å›¾åƒ<img src="fdist1.png" alt="fdist1"></li><li>fdist1.hapaxes():è¿”å›åªå‡ºç°ä¸€æ¬¡çš„è¯</li><li>text4.collocations():é¢‘ç¹çš„åŒè”è¯</li></ul><h2 id="è‡ªç„¶è¯­è¨€å¤„ç†å…³é”®ç‚¹-ç…§æŠ„ç« èŠ‚"><a href="#è‡ªç„¶è¯­è¨€å¤„ç†å…³é”®ç‚¹-ç…§æŠ„ç« èŠ‚" class="headerlink" title="è‡ªç„¶è¯­è¨€å¤„ç†å…³é”®ç‚¹(ç…§æŠ„ç« èŠ‚)"></a>è‡ªç„¶è¯­è¨€å¤„ç†å…³é”®ç‚¹(ç…§æŠ„ç« èŠ‚)</h2><blockquote><p>è¯æ„ç†è§£ï¼šä¸­å›½é˜Ÿå¤§èƒœç¾å›½é˜Ÿï¼›ä¸­å›½é˜Ÿå¤§è´¥ç¾å›½é˜Ÿã€‚â€œèƒœâ€ã€â€œè´¥â€ä¸€å¯¹åä¹‰è¯ï¼Œå´è¡¨è¾¾åŒæ ·çš„æ„æ€ï¼šä¸­å›½èµ¢äº†ï¼Œç¾å›½è¾“äº†ã€‚è¿™éœ€è¦æœºå™¨èƒ½å¤Ÿè‡ªåŠ¨åˆ†æå‡ºè°èƒœè°è´Ÿ</p></blockquote><blockquote><p>è‡ªåŠ¨ç”Ÿæˆè¯­è¨€ï¼šè‡ªåŠ¨ç”Ÿæˆè¯­è¨€åŸºäºè¯­è¨€çš„è‡ªåŠ¨ç†è§£ï¼Œä¸ç†è§£å°±æ— æ³•è‡ªåŠ¨ç”Ÿæˆ</p></blockquote><blockquote><p>æœºå™¨ç¿»è¯‘ï¼šç°åœ¨æœºå™¨ç¿»è¯‘å·²ç»å¾ˆå¤šäº†ï¼Œä½†æ˜¯è¿˜å¾ˆéš¾è¾¾åˆ°æœ€ä½³ï¼Œæ¯”å¦‚æˆ‘ä»¬æŠŠä¸­æ–‡ç¿»è¯‘æˆè‹±æ–‡ï¼Œå†ç¿»è¯‘æˆä¸­æ–‡ï¼Œå†ç¿»è¯‘æˆè‹±æ–‡ï¼Œæ¥å›10è½®ï¼Œå‘ç°å’Œæœ€åˆå·®åˆ«è¿˜æ˜¯éå¸¸å¤§çš„ã€‚</p></blockquote><blockquote><p>äººæœºå¯¹è¯ï¼šè¿™ä¹Ÿæ˜¯æˆ‘ä»¬æƒ³åšåˆ°çš„æœ€ç»ˆç›®æ ‡ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªå«åšâ€œå›¾çµæµ‹è¯•â€çš„æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯åœ¨5åˆ†é’Ÿä¹‹å†…å›ç­”æå‡ºé—®é¢˜çš„30%å³é€šè¿‡ï¼Œèƒ½é€šè¿‡åˆ™è®¤ä¸ºæœ‰æ™ºèƒ½äº†ã€‚</p></blockquote><blockquote><p>è‡ªç„¶è¯­è¨€å¤„ç†åˆ†ä¸¤æ´¾ï¼Œä¸€æ´¾æ˜¯åŸºäºè§„åˆ™çš„ï¼Œä¹Ÿå°±æ˜¯å®Œå…¨ä»è¯­æ³•å¥æ³•ç­‰å‡ºå‘ï¼ŒæŒ‰ç…§è¯­è¨€çš„è§„åˆ™æ¥åˆ†æå’Œå¤„ç†ï¼Œè¿™åœ¨ä¸Šä¸ªä¸–çºªç»å†äº†å¾ˆå¤šå¹´çš„è¯•éªŒå®£å‘Šå¤±è´¥ï¼Œå› ä¸ºè§„åˆ™å¤ªå¤šå¤ªå¤šï¼Œè€Œä¸”å¾ˆå¤šè¯­è¨€éƒ½ä¸æŒ‰å¥—è·¯å‡ºç‰Œï¼Œæƒ³è±¡ä½ è¿½èµ¶ä½ çš„å½±å­ï¼Œä½ è·‘çš„å¿«ä»–è·‘çš„æ›´å¿«ï¼Œä½ æ°¸è¿œéƒ½è¿½ä¸ä¸Šå®ƒã€‚å¦ä¸€æ´¾æ˜¯åŸºäºç»Ÿè®¡çš„ï¼Œä¹Ÿå°±æ˜¯æ”¶é›†å¤§é‡çš„è¯­æ–™æ•°æ®ï¼Œé€šè¿‡ç»Ÿè®¡å­¦ä¹ çš„æ–¹å¼æ¥ç†è§£è¯­è¨€ï¼Œè¿™åœ¨å½“ä»£è¶Šæ¥è¶Šå—é‡è§†è€Œä¸”å·²ç»æˆä¸ºè¶‹åŠ¿ï¼Œå› ä¸ºéšç€ç¡¬ä»¶æŠ€æœ¯çš„å‘å±•ï¼Œå¤§æ•°æ®å­˜å‚¨å’Œè®¡ç®—å·²ç»ä¸æ˜¯é—®é¢˜ï¼Œæ— è®ºæœ‰ä»€ä¹ˆæ ·çš„è§„åˆ™ï¼Œè¯­è¨€éƒ½æ˜¯æœ‰ç»Ÿè®¡è§„å¾‹çš„ï¼Œå½“ç„¶åŸºäºç»Ÿè®¡ä¹Ÿå­˜åœ¨ç¼ºé™·ï¼Œé‚£å°±æ˜¯â€œå°æ¦‚ç‡äº‹ä»¶æ€»æ˜¯ä¸ä¼šå‘ç”Ÿçš„â€å¯¼è‡´æ€»æœ‰ä¸€äº›é—®é¢˜è§£å†³ä¸äº†ã€‚</p></blockquote><p>åˆ°æ­¤ä¸ºæ­¢çš„ç†è§£,NLTKå°±å¦‚å­—é¢æ„æ€,å…¶å®æ˜¯ä¸€ä¸ªtoolkit,æä¾›äº†å¾ˆå¤šç°æˆçš„ç®—æ³•ç±»çš„å·¥å…·</p><h1 id="è¯­æ–™ä¸è¯æ±‡èµ„æº"><a href="#è¯­æ–™ä¸è¯æ±‡èµ„æº" class="headerlink" title="è¯­æ–™ä¸è¯æ±‡èµ„æº"></a>è¯­æ–™ä¸è¯æ±‡èµ„æº</h1><blockquote><p>å½“ä»£è‡ªç„¶è¯­è¨€å¤„ç†éƒ½æ˜¯åŸºäºç»Ÿè®¡çš„ï¼Œç»Ÿè®¡è‡ªç„¶éœ€è¦å¾ˆå¤šæ ·æœ¬ï¼Œå› æ­¤è¯­æ–™å’Œè¯æ±‡èµ„æºæ˜¯å¿…ä¸å¯å°‘çš„ï¼Œæœ¬èŠ‚ä»‹ç»è¯­æ–™å’Œè¯æ±‡èµ„æºçš„é‡è¦æ€§å’Œè·å–æ–¹å¼</p></blockquote><h2 id="NLTKè¯­æ–™åº“"><a href="#NLTKè¯­æ–™åº“" class="headerlink" title="NLTKè¯­æ–™åº“"></a>NLTKè¯­æ–™åº“</h2><p>Gutenbergè¯­æ–™åº“</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¿”å›Gutenbergè¯­æ–™åº“çš„æ–‡ä»¶æ ‡è¯†ç¬¦</span></span><br><span class="line">nltk.corpus.gutenberg.fileids()</span><br><span class="line">[<span class="string">'austen-emma.txt'</span>, <span class="string">'austen-persuasion.txt'</span>, <span class="string">'austen-sense.txt'</span>, <span class="string">'bible-kjv.txt'</span>, <span class="string">'blake-poems.txt'</span>, <span class="string">'bryant-stories.txt'</span>, <span class="string">'burgess-busterbrown.txt'</span>, <span class="string">'carroll-alice.txt'</span>, <span class="string">'chesterton-ball.txt'</span>, <span class="string">'chesterton-brown.txt'</span>, <span class="string">'chesterton-thursday.txt'</span>, <span class="string">'edgeworth-parents.txt'</span>, <span class="string">'melville-moby_dick.txt'</span>, <span class="string">'milton-paradise.txt'</span>, <span class="string">'shakespeare-caesar.txt'</span>, <span class="string">'shakespeare-hamlet.txt'</span>, <span class="string">'shakespeare-macbeth.txt'</span>, <span class="string">'whitman-leaves.txt'</span>]</span><br></pre></td></tr></table></figure><p>nltk.corpus.gutenbergå°±æ˜¯gutenbergè¯­æ–™åº“çš„é˜…è¯»å™¨ï¼Œå®ƒæœ‰å¾ˆå¤šå®ç”¨çš„æ–¹æ³•ï¼Œæ¯”å¦‚ï¼š</p><ul><li>nltk.corpus.gutenberg.raw(â€˜chesterton-brown.txtâ€™)ï¼šè¾“å‡ºchesterton-brown.txtæ–‡ç« çš„åŸå§‹å†…å®¹</li><li>nltk.corpus.gutenberg.words(â€˜chesterton-brown.txtâ€™)ï¼šè¾“å‡ºchesterton-brown.txtæ–‡ç« çš„å•è¯åˆ—è¡¨</li><li>nltk.corpus.gutenberg.sents(â€˜chesterton-brown.txtâ€™)ï¼šè¾“å‡ºchesterton-brown.txtæ–‡ç« çš„å¥å­åˆ—è¡¨</li></ul><p>ç±»ä¼¼çš„è¯­æ–™åº“è¿˜æœ‰ï¼š</p><ul><li>from nltk.corpus import webtextï¼šç½‘ç»œæ–‡æœ¬è¯­æ–™åº“ï¼Œç½‘ç»œå’ŒèŠå¤©æ–‡æœ¬</li><li>from nltk.corpus import brownï¼šå¸ƒæœ—è¯­æ–™åº“ï¼ŒæŒ‰ç…§æ–‡æœ¬åˆ†ç±»å¥½çš„500ä¸ªä¸åŒæ¥æºçš„æ–‡æœ¬</li><li>from nltk.corpus import reutersï¼šè·¯é€ç¤¾è¯­æ–™åº“ï¼Œ1ä¸‡å¤šä¸ªæ–°é—»æ–‡æ¡£</li><li>from nltk.corpus import inauguralï¼šå°±èŒæ¼”è¯´è¯­æ–™åº“ï¼Œ55ä¸ªæ€»ç»Ÿçš„æ¼”è¯´</li></ul><h2 id="è¯­æ–™åº“çš„ä¸€èˆ¬ç»“æ„"><a href="#è¯­æ–™åº“çš„ä¸€èˆ¬ç»“æ„" class="headerlink" title="è¯­æ–™åº“çš„ä¸€èˆ¬ç»“æ„"></a>è¯­æ–™åº“çš„ä¸€èˆ¬ç»“æ„</h2><p>ä»¥ä¸Šå„ç§è¯­æ–™åº“éƒ½æ˜¯åˆ†åˆ«å»ºç«‹çš„ï¼Œå› æ­¤ä¼šç¨æœ‰ä¸€äº›åŒºåˆ«ï¼Œä½†æ˜¯ä¸å¤–ä¹ä»¥ä¸‹å‡ ç§ç»„ç»‡ç»“æ„ï¼šæ•£å…»å¼ï¼ˆå­¤ç«‹çš„å¤šç¯‡æ–‡ç« ï¼‰ã€åˆ†ç±»å¼ï¼ˆæŒ‰ç…§ç±»åˆ«ç»„ç»‡ï¼Œç›¸äº’ä¹‹é—´æ²¡æœ‰äº¤é›†ï¼‰ã€äº¤å‰å¼ï¼ˆä¸€ç¯‡æ–‡ç« å¯èƒ½å±äºå¤šä¸ªç±»ï¼‰ã€æ¸å˜å¼ï¼ˆè¯­æ³•éšç€æ—¶é—´å‘ç”Ÿå˜åŒ–ï¼‰</p><h2 id="è¯­æ–™åº“çš„é€šç”¨æ¥å£"><a href="#è¯­æ–™åº“çš„é€šç”¨æ¥å£" class="headerlink" title="è¯­æ–™åº“çš„é€šç”¨æ¥å£"></a>è¯­æ–™åº“çš„é€šç”¨æ¥å£</h2><ul><li>fileids()ï¼šè¿”å›è¯­æ–™åº“ä¸­çš„æ–‡ä»¶</li><li>categories()ï¼šè¿”å›è¯­æ–™åº“ä¸­çš„åˆ†ç±»</li><li>raw()ï¼šè¿”å›è¯­æ–™åº“çš„åŸå§‹å†…å®¹</li><li>words()ï¼šè¿”å›è¯­æ–™åº“ä¸­çš„è¯æ±‡</li><li>sents()ï¼šè¿”å›è¯­æ–™åº“å¥å­</li><li>abspath()ï¼šæŒ‡å®šæ–‡ä»¶åœ¨ç£ç›˜ä¸Šçš„ä½ç½®</li><li>open()ï¼šæ‰“å¼€è¯­æ–™åº“çš„æ–‡ä»¶æµ</li></ul><h2 id="åŠ è½½è‡ªå·±çš„è¯­æ–™åº“"><a href="#åŠ è½½è‡ªå·±çš„è¯­æ–™åº“" class="headerlink" title="åŠ è½½è‡ªå·±çš„è¯­æ–™åº“"></a>åŠ è½½è‡ªå·±çš„è¯­æ–™åº“</h2><p>æ”¶é›†è‡ªå·±çš„è¯­æ–™æ–‡ä»¶ï¼ˆæ–‡æœ¬æ–‡ä»¶ï¼‰åˆ°æŸè·¯å¾„ä¸‹ï¼ˆæ¯”å¦‚/tmp)ï¼Œç„¶åæ‰§è¡Œï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">from</span> nltk.corpus <span class="keyword">import</span> PlaintextCorpusReader</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>corpus_root = <span class="string">'/tmp'</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>wordlists = PlaintextCorpusReader(corpus_root, <span class="string">'.*'</span>)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>wordlists.fileids()</span><br></pre></td></tr></table></figure><p>å°±å¯ä»¥åˆ—å‡ºè‡ªå·±è¯­æ–™åº“çš„å„ä¸ªæ–‡ä»¶äº†ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¦‚wordlists.sents(â€˜a.txtâ€™)å’Œwordlists.words(â€˜a.txtâ€™)ç­‰æ–¹æ³•æ¥è·å–å¥å­å’Œè¯ä¿¡æ¯</p><h2 id="æ¡ä»¶é¢‘ç‡åˆ†å¸ƒ"><a href="#æ¡ä»¶é¢‘ç‡åˆ†å¸ƒ" class="headerlink" title="æ¡ä»¶é¢‘ç‡åˆ†å¸ƒ"></a>æ¡ä»¶é¢‘ç‡åˆ†å¸ƒ</h2><p>æ¡ä»¶åˆ†å¸ƒå¤§å®¶éƒ½æ¯”è¾ƒç†Ÿæ‚‰äº†ï¼Œå°±æ˜¯åœ¨ä¸€å®šæ¡ä»¶ä¸‹æŸä¸ªäº‹ä»¶çš„æ¦‚ç‡åˆ†å¸ƒã€‚è‡ªç„¶è¯­è¨€çš„æ¡ä»¶é¢‘ç‡åˆ†å¸ƒå°±æ˜¯æŒ‡å®šæ¡ä»¶ä¸‹æŸä¸ªäº‹ä»¶çš„é¢‘ç‡åˆ†å¸ƒã€‚</p><p>æ¯”å¦‚è¦è¾“å‡ºåœ¨å¸ƒæœ—è¯­æ–™åº“ä¸­æ¯ä¸ªç±»åˆ«æ¡ä»¶ä¸‹æ¯ä¸ªè¯çš„æ¦‚ç‡ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding( <span class="string">"utf-8"</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> nltk</span><br><span class="line"><span class="keyword">from</span> nltk.corpus <span class="keyword">import</span> brown</span><br><span class="line"></span><br><span class="line"><span class="comment"># é“¾è¡¨æ¨å¯¼å¼ï¼Œgenreæ˜¯brownè¯­æ–™åº“é‡Œçš„æ‰€æœ‰ç±»åˆ«åˆ—è¡¨ï¼Œwordæ˜¯è¿™ä¸ªç±»åˆ«ä¸­çš„è¯æ±‡åˆ—è¡¨</span></span><br><span class="line"><span class="comment"># (genre, word)å°±æ˜¯ç±»åˆ«åŠ è¯æ±‡å¯¹</span></span><br><span class="line">genre_word = [(genre, word)</span><br><span class="line">        <span class="keyword">for</span> genre <span class="keyword">in</span> brown.categories()</span><br><span class="line">        <span class="keyword">for</span> word <span class="keyword">in</span> brown.words(categories=genre)</span><br><span class="line">        ]</span><br><span class="line"></span><br><span class="line"><span class="comment"># åˆ›å»ºæ¡ä»¶é¢‘ç‡åˆ†å¸ƒ</span></span><br><span class="line">cfd = nltk.ConditionalFreqDist(genre_word)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æŒ‡å®šæ¡ä»¶å’Œæ ·æœ¬ä½œå›¾</span></span><br><span class="line">cfd.plot(conditions=[<span class="string">'news'</span>,<span class="string">'adventure'</span>], samples=[<span class="string">u'stock'</span>, <span class="string">u'sunbonnet'</span>, <span class="string">u'Elevated'</span>, <span class="string">u'narcotic'</span>, <span class="string">u'four'</span>, <span class="string">u'woods'</span>, <span class="string">u'railing'</span>, <span class="string">u'Until'</span>, <span class="string">u'aggression'</span>, <span class="string">u'marching'</span>, <span class="string">u'looking'</span>, <span class="string">u'eligible'</span>, <span class="string">u'electricity'</span>, <span class="string">u'$25-a-plate'</span>, <span class="string">u'consulate'</span>, <span class="string">u'Casey'</span>, <span class="string">u'all-county'</span>, <span class="string">u'Belgians'</span>, <span class="string">u'Western'</span>, <span class="string">u'1959-60'</span>, <span class="string">u'Duhagon'</span>, <span class="string">u'sinking'</span>, <span class="string">u'1,119'</span>, <span class="string">u'co-operation'</span>, <span class="string">u'Famed'</span>, <span class="string">u'regional'</span>, <span class="string">u'Charitable'</span>, <span class="string">u'appropriation'</span>, <span class="string">u'yellow'</span>, <span class="string">u'uncertain'</span>, <span class="string">u'Heights'</span>, <span class="string">u'bringing'</span>, <span class="string">u'prize'</span>, <span class="string">u'Loen'</span>, <span class="string">u'Publique'</span>, <span class="string">u'wooden'</span>, <span class="string">u'Loeb'</span>, <span class="string">u'963'</span>, <span class="string">u'specialties'</span>, <span class="string">u'Sands'</span>, <span class="string">u'succession'</span>, <span class="string">u'Paul'</span>, <span class="string">u'Phyfe'</span>])</span><br></pre></td></tr></table></figure><p><img src="ntlk_ConditionalFreqDist.png" alt="ntlk.ConditionalFreqDist"></p><blockquote><p>æ³¨æ„ï¼šè¿™é‡Œå¦‚æœæŠŠplotç›´æ¥æ¢æˆtabulate ï¼Œé‚£ä¹ˆå°±æ˜¯è¾“å‡ºè¡¨æ ¼å½¢å¼ï¼Œå’Œå›¾åƒè¡¨è¾¾çš„æ„æ€ç›¸åŒ</p></blockquote><p>æˆ‘ä»¬è¿˜å¯ä»¥åˆ©ç”¨æ¡ä»¶é¢‘ç‡åˆ†å¸ƒï¼ŒæŒ‰ç…§æœ€å¤§æ¡ä»¶æ¦‚ç‡ç”ŸæˆåŒè¿è¯ï¼Œæœ€ç»ˆç”Ÿæˆä¸€ä¸ªéšæœºæ–‡æœ¬</p><p>è¿™å¯ä»¥ç›´æ¥ä½¿ç”¨bigrams()å‡½æ•°ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯ç”Ÿæˆè¯å¯¹é“¾è¡¨ã€‚</p><p>åˆ›å»ºpythonæ–‡ä»¶å¦‚ä¸‹ï¼š</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding:utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">reload(sys)</span><br><span class="line">sys.setdefaultencoding( <span class="string">"utf-8"</span> )</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> nltk</span><br><span class="line"></span><br><span class="line"><span class="comment"># å¾ªç¯10æ¬¡ï¼Œä»cfdistä¸­å–å½“å‰å•è¯æœ€å¤§æ¦‚ç‡çš„è¿è¯,å¹¶æ‰“å°å‡ºæ¥</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">generate_model</span><span class="params">(cfdist, word, num=<span class="number">10</span>)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(num):</span><br><span class="line">        <span class="keyword">print</span> word,</span><br><span class="line">        word = cfdist[word].max()</span><br><span class="line"></span><br><span class="line"><span class="comment"># åŠ è½½è¯­æ–™åº“</span></span><br><span class="line">text = nltk.corpus.genesis.words(<span class="string">'english-kjv.txt'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”ŸæˆåŒè¿è¯</span></span><br><span class="line">bigrams = nltk.bigrams(text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ç”Ÿæˆæ¡ä»¶é¢‘ç‡åˆ†å¸ƒ</span></span><br><span class="line">cfd = nltk.ConditionalFreqDist(bigrams)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ä»¥theå¼€å¤´ï¼Œç”Ÿæˆéšæœºä¸²</span></span><br><span class="line">generate_model(cfd, <span class="string">'the'</span>)</span><br></pre></td></tr></table></figure><p>æ‰§è¡Œæ•ˆæœå¦‚ä¸‹ï¼š</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">the land of the land of the land of the</span><br></pre></td></tr></table></figure><p>theçš„æœ€å¤§æ¦‚ç‡çš„åŒè¿è¯æ˜¯landï¼Œlandæœ€å¤§æ¦‚ç‡åŒè¿è¯æ˜¯ofï¼Œofæœ€å¤§æ¦‚ç‡åŒè¿è¯æ˜¯theï¼Œæ‰€ä»¥åé¢å°±å¾ªç¯äº†</p><h2 id="å…¶ä»–è¯å…¸èµ„æº"><a href="#å…¶ä»–è¯å…¸èµ„æº" class="headerlink" title="å…¶ä»–è¯å…¸èµ„æº"></a>å…¶ä»–è¯å…¸èµ„æº</h2><p>æœ‰ä¸€äº›ä»…æ˜¯è¯æˆ–çŸ­è¯­ä»¥åŠä¸€äº›ç›¸å…³ä¿¡æ¯çš„é›†åˆï¼Œå«åšè¯å…¸èµ„æºã€‚</p><ul><li>è¯æ±‡åˆ—è¡¨è¯­æ–™åº“ï¼šnltk.corpus.words.words()ï¼Œæ‰€æœ‰è‹±æ–‡å•è¯ï¼Œè¿™ä¸ªå¯ä»¥ç”¨æ¥è¯†åˆ«è¯­æ³•é”™è¯¯</li><li>åœç”¨è¯è¯­æ–™åº“ï¼šnltk.corpus.stopwords.wordsï¼Œç”¨æ¥è¯†åˆ«é‚£äº›æœ€é¢‘ç¹å‡ºç°çš„æ²¡æœ‰æ„ä¹‰çš„è¯</li><li>å‘éŸ³è¯å…¸ï¼šnltk.corpus.cmudict.dict()ï¼Œç”¨æ¥è¾“å‡ºæ¯ä¸ªè‹±æ–‡å•è¯çš„å‘éŸ³</li><li>æ¯”è¾ƒè¯è¡¨ï¼šnltk.corpus.swadeshï¼Œå¤šç§è¯­è¨€æ ¸å¿ƒ200å¤šä¸ªè¯çš„å¯¹ç…§ï¼Œå¯ä»¥ä½œä¸ºè¯­è¨€ç¿»è¯‘çš„åŸºç¡€</li><li>åŒä¹‰è¯é›†ï¼šWordNetï¼Œé¢å‘è¯­ä¹‰çš„è‹±è¯­è¯å…¸ï¼Œç”±åŒä¹‰è¯é›†ç»„æˆï¼Œå¹¶ç»„ç»‡æˆä¸€ä¸ªç½‘ç»œ</li></ul>]]></content>
      
      <categories>
          
          <category> ç¬”è®° </category>
          
          <category> NLTK </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> NLTK </tag>
            
            <tag> èŠå¤©æœºå™¨äºº </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2017-04-09</title>
      <link href="/2017/04/09/2017-04-09/"/>
      <url>/2017/04/09/2017-04-09/</url>
      <content type="html"><![CDATA[<p>ä»Šå¤©æ²¡çœ‹ä»€ä¹ˆæ–°ä¸œè¥¿,å¿ƒæƒ…ä¾ç„¶ä¸å¥½<br><a id="more"></a><br>å¿ƒæƒ…ä¸å¥½è¿™ç§äº‹æƒ…ä¸ç”¨å†™æˆ‘ä¹ŸçŸ¥é“,å°±ä¸å¤šè¯´äº†,æµæ°´è´¦å†™ä¸€ä¸‹ä»Šå¤©æ•´äº†ç‚¹ä»€ä¹ˆä¸œè¥¿å§</p><ul><li>æ˜å¤©ä¸Šç­ä¼°è®¡è¿˜æ˜¯æ‹†å‰ç«¯çš„é¡¹ç›®,ç›®å‰å¤§æ¦‚åŠŸèƒ½æ˜¯å¯ä»¥äº†,ä½†æ˜¯åŠŸèƒ½éƒ½ä¸æ˜¯æˆ‘å†™çš„,æ¥æ¥å›å›è°ƒç”¨è¦æ”¹çš„åœ°æ–¹å¤ªå¤š,å·²çŸ¥manageä¸‹é¢èµ·ç ç‰µæ‰¯åˆ°ä¸‰ä¸ªæ¨¡å—â€¦è¿™ä¸ªéœ€è¦ååŠ©äº†</li><li>çˆ¬è™«æ¡†æ¶æ€ä¹ˆç”¨å¤§æ¦‚æ˜¯çŸ¥é“äº†,ä¸è¿‡çˆ¬è™«çš„ä¸šåŠ¡é€»è¾‘è¿™ä¸€å—è¿˜æœ‰å¾ˆå¤šä¸œè¥¿æ¯”è¾ƒéº»çƒ¦</li></ul><ol><li>è¦åˆ†æè¦çˆ¬çš„ç½‘ç«™è¯·æ±‚æ€ä¹ˆæäº¤</li><li>ç›®æ ‡å…ƒç´ çš„é€‰æ‹©å™¨</li><li>æå–é€»è¾‘</li></ol><p>æ…¢æ…¢çœ‹å§</p><ul><li>hexo-git-backupæ’ä»¶ä¸€ç›´æäº¤ä¸ä¸Šå»,ç»ˆäºå‘ç°æ˜¯æ¢äº†ç”µè„‘ä»¥åsshæ²¡æœ‰é…ç½®æ­£ç¡®â€¦</li><li>æ”¹äº†ä¸€ä¸‹nextçš„vendor,çœ‹çœ‹èƒ½ä¸èƒ½æé«˜ä¸€ç‚¹è®¿é—®é€Ÿåº¦</li><li>å‡†å¤‡ä¹°æ˜¾ç¤ºå™¨å›æ¥è£…é€¼,æƒ³äº†æƒ³è¿˜æ˜¯ä¸ä¹°4Käº†,æ¯•ç«Ÿæ²¡æœ‰ç‹¬æ˜¾,åˆä¸æƒ³ä¹°é‚£ä¹ˆè´µçš„,ä»¥åå†è¯´å§</li><li>æ•´ç†äº†ä¸€ä¸‹åšå®¢çš„åˆ†ç±»,çœçš„ä¹±ä¸ƒå…«ç³Ÿçš„è‡ªå·±ä¹Ÿçœ‹ä¸æ‡‚</li><li>å¼€å§‹çœ‹äº†ä¸€ä¸‹èŠå¤©æœºå™¨äººçš„ä¸œè¥¿,NLTKä»€ä¹ˆçš„,ç”¨èµ·æ¥ç®—æ˜¯ç®€å•çš„å§,éš¾çš„æ˜¯åé¢çš„éƒ¨åˆ†,ä¹Ÿç®—æ˜¯èµ·æ­¥äº†â€¦</li></ul>]]></content>
      
      <categories>
          
          <category> æ—¥è®° </category>
          
          <category> åæ§½ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>pythonå¼€å‘ç¯å¢ƒçš„ä¸€äº›é…ç½®</title>
      <link href="/2017/04/08/python%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E4%B8%80%E4%BA%9B%E9%85%8D%E7%BD%AE/"/>
      <url>/2017/04/08/python%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E7%9A%84%E4%B8%80%E4%BA%9B%E9%85%8D%E7%BD%AE/</url>
      <content type="html"><![CDATA[<p>æœ¬æ¥åªæ˜¯æƒ³å­¦ä¹ ä¸€ä¸‹Scrapyæ€ä¹ˆåšçˆ¬è™«ï¼Œé¡ºä¾¿çˆ¬ç‚¹ä¸œè¥¿ğŸ˜„<br>ç»“æœå‘ç°ä¹‹å‰æƒ³è£…robot frameworkçš„æ—¶å€™é‡åˆ°çš„é—®é¢˜é‡ç°äº†â€¦â€¦æ­£å¥½æ•´ç†ä¸€ä¸‹<br>å› ä¸ºbrewä»€ä¹ˆçš„æ²¡ç”¨è¿‡ï¼Œæ‰€ä»¥å‚è€ƒçš„<a href="https://havee.me/mac/2014-05/individual-scheme-for-pip.html" title="å‚è€ƒé“¾æ¥" target="_blank" rel="noopener">åŸæ–‡</a>é‡Œé¢æœ‰ä¸€éƒ¨åˆ†æˆ‘æ²¡å†™è¿›æ¥ï¼Œä»¥åç”¨åˆ°äº†å†çœ‹<br><a id="more"></a></p><h1 id="å®‰è£…æ¨¡å—"><a href="#å®‰è£…æ¨¡å—" class="headerlink" title="å®‰è£…æ¨¡å—"></a>å®‰è£…æ¨¡å—</h1><p>ä¸‹è½½pipæ–‡ä»¶<br><a href="https://bootstrap.pypa.io/get-pip.py" title="pipä¸‹è½½åœ°å€" target="_blank" rel="noopener">ä¸‹è½½åœ°å€</a><br>ç„¶åæ‰§è¡Œå‘½ä»¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å®‰è£…pip,å¯èƒ½æ˜¯éœ€è¦ç®¡ç†å‘˜æƒé™çš„</span></span><br><span class="line">$ sudo python get-pip.py</span><br><span class="line"><span class="comment"># å®‰è£…å®Œpipä¹‹åå®‰è£…virtualenv</span></span><br><span class="line">$ sudo pip install virtualenv</span><br><span class="line"><span class="comment"># ç„¶åç”¨virtualenvåˆ›å»ºè™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">$ virtualenv ENV</span><br><span class="line"><span class="comment"># åˆ‡æ¢è‡³ENVè·¯å¾„åå¼€å¯è™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">$ <span class="built_in">source</span> bin/activate</span><br><span class="line"><span class="comment"># To undo these changes to your path (and prompt), just run:</span></span><br><span class="line"><span class="comment"># æ’¤é”€æ”¹å˜?æš‚æ—¶ä¸æ˜¯å¾ˆç†è§£</span></span><br><span class="line">$ deactivate</span><br></pre></td></tr></table></figure><p>ä¹‹åå°±å¯ä»¥åœ¨è™šæ‹Ÿç¯å¢ƒé‡Œé¢ä¸ºæ‰€æ¬²ä¸ºäº†å§ï¼Œæ®è¯´æ˜¯å’Œå¤–éƒ¨çš„pythonç¯å¢ƒäº’ä¸å½±å“çš„ï¼Œå› ä¸ºMacæ“ä½œç³»ç»Ÿçš„åŸå› æœ‰ä¸€äº›åŒ…æ²¡æœ‰åŠæ³•æ­£å¸¸å®‰è£…ï¼Œæˆ‘ä¹Ÿä¸æƒ³å»æ”¹ç³»ç»Ÿæƒé™ï¼Œè¿™ä¸ªæ–¹æ¡ˆç›®å‰çœ‹èµ·æ¥ä¸é”™</p><h1 id="pipçš„User-Install"><a href="#pipçš„User-Install" class="headerlink" title="pipçš„User Install"></a>pipçš„User Install</h1><p>åœ¨ä½¿ç”¨pipå®‰è£…åŒ…çš„æ—¶å€™åŠ ä¸Šuserå‚æ•°ï¼Œå¯ä»¥é¿å…å› ä¸ºmacç³»ç»Ÿå®‰å…¨æ€§é™åˆ¶å¯¼è‡´çš„ä¸€äº›å®‰è£…å¤±è´¥ï¼Œä¸è¿‡éœ€è¦ä¿®æ”¹pipçš„é…ç½®å’Œç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ï¼Œè¿™é‡Œä¹Ÿè®°ä¸€ä¸‹å§ï¼Œéš¾ä¿ä¼šä¸ä¼šç”¨åˆ°</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pythonå®‰è£…å‘½ä»¤</span></span><br><span class="line">$ python setup.py install --user</span><br><span class="line"><span class="comment"># æˆ–è€…ä¸‹é¢çš„å‘½ä»¤ä¹Ÿå¯ä»¥</span></span><br><span class="line"><span class="comment"># python setup.py install --home=&lt;dir&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># pipä¹Ÿä¸€æ ·</span></span><br><span class="line">$ pip install package --user</span><br></pre></td></tr></table></figure><p>ä½†æ˜¯è¿™æ ·å®‰è£…çš„åŒ…å› ä¸ºä¸åœ¨ç³»ç»Ÿé»˜è®¤çš„PATHä¸­ï¼Œè£…æ˜¯å¯ä»¥è£…ï¼Œä½†æ˜¯ä¸èƒ½ç”¨ï¼Œéœ€è¦æ”¹ä¸€ä¸‹ç¯å¢ƒå˜é‡</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># æ‰“å¼€é…ç½®æ–‡ä»¶ï¼Œä¸å­˜åœ¨çš„è¯æ–°å»ºä¸€ä¸ª</span></span><br><span class="line">$ vim ~/.bash_profile</span><br><span class="line"><span class="comment"># æ·»åŠ å¦‚ä¸‹çš„é…ç½®</span></span><br><span class="line"><span class="keyword">if</span> [ -d <span class="variable">$HOME</span>/Library/Python/2.7/bin ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">export</span> PATH=<span class="variable">$HOME</span>/Library/Python/2.7/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment"># åº”ç”¨ç¯å¢ƒå˜é‡çš„ä¿®æ”¹</span></span><br><span class="line">$ <span class="built_in">source</span> ~/.bash_profile</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹pipçš„é…ç½®æ–‡ä»¶</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºç›®å½•</span></span><br><span class="line">$ mkdir -p ~/.pip</span><br><span class="line"><span class="comment"># çœ‹äº†ä¸€ä¸‹touchæ˜¯åˆ›å»ºç©ºæ–‡ä»¶çš„å‘½ä»¤ï¼Œç”¨vimä»£æ›¿ä¸€æ ·å§</span></span><br><span class="line">$ touch ~/.pip/pip.conf</span><br><span class="line"><span class="comment"># ç¼–è¾‘é…ç½®æ–‡ä»¶</span></span><br><span class="line">$ vim ~/.pip/pip.conf</span><br><span class="line"><span class="comment"># pip.confæ–‡ä»¶æ·»åŠ å¦‚ä¸‹é…ç½®</span></span><br><span class="line">[global]</span><br><span class="line">default-timeout = 60</span><br><span class="line">download-cache = ~/.pip/cache</span><br><span class="line"><span class="built_in">log</span>-file = ~/.pip/pip.log</span><br><span class="line"></span><br><span class="line">[install]</span><br><span class="line"><span class="comment"># è¿™ä¸ªåœ°æ–¹å¯ä»¥é…pipæºï¼Œè¿™ä¸ªæ˜¯è±†ç“£çš„ï¼Œè¯•äº†ä¸€ä¸‹å›½å†…ä¸¤ä¸ªæºï¼ŒåŒ…éƒ½ä¸å…¨ï¼Œå°½é‡è¿˜æ˜¯ç¿»å¢™æ‹¿å§</span></span><br><span class="line"><span class="comment"># æ³¨æ„éœ€è¦åœ¨åœ°å€ååŠ /simple</span></span><br><span class="line">index-url = http://pypi.douban.com/simple</span><br></pre></td></tr></table></figure><h1 id="pipæºåœ°å€"><a href="#pipæºåœ°å€" class="headerlink" title="pipæºåœ°å€"></a>pipæºåœ°å€</h1><p>è®°å½•ä¸€ä¸‹pipæºçš„åœ°å€ï¼Œä¸‡ä¸€ä»¥åç”¨åˆ°äº†çœçš„åˆ°å¤„æ‰¾</p><ul><li>æ¸…å:<a href="https://pypi.tuna.tsinghua.edu.cn/" target="_blank" rel="noopener">https://pypi.tuna.tsinghua.edu.cn/</a></li><li>è±†ç“£:<a href="http://pypi.douban.com/" target="_blank" rel="noopener">http://pypi.douban.com/</a></li><li>åä¸­ç†å·¥å¤§å­¦:<a href="http://pypi.hustunique.com/" target="_blank" rel="noopener">http://pypi.hustunique.com/</a></li><li>å±±ä¸œç†å·¥å¤§å­¦:<a href="http://pypi.sdutlinux.org/" target="_blank" rel="noopener">http://pypi.sdutlinux.org/</a></li><li>ä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦:<a href="http://pypi.mirrors.ustc.edu.cn/" target="_blank" rel="noopener">http://pypi.mirrors.ustc.edu.cn/</a></li></ul>]]></content>
      
      <categories>
          
          <category> ç¬”è®° </category>
          
          <category> python </category>
          
          <category> ç¯å¢ƒé…ç½® </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Scrapyå…¥é—¨</title>
      <link href="/2017/04/08/Scrapy%E5%85%A5%E9%97%A8/"/>
      <url>/2017/04/08/Scrapy%E5%85%A5%E9%97%A8/</url>
      <content type="html"><![CDATA[<p>å¿ƒæ¯”è¾ƒä¹±ï¼Œå·¥ä½œä¸Šä¹Ÿæœ‰å¾ˆå¤šä¸œè¥¿è¦åšï¼Œæ¯”è¾ƒçƒ¦ï¼Œé¢†å¯¼ä¹‹å‰è¯´é‚£ä¸ªäº‹æƒ…è¿˜æ²¡ä»€ä¹ˆæ€è·¯ï¼Œå…ˆåšä¸ªçˆ¬è™«è¯•è¯•å§ï¼Œæ‰“å‘æ— èŠæ—¶å…‰<br>è¿™é‡Œçœ‹åˆ°äº†yieldå…³é”®å­—,pythonçš„ä¸œè¥¿è¿˜æ˜¯ä¸ç†Ÿ,ç™¾åº¦äº†ä¸€ä¸‹å¤§æ¦‚æœ‰ä¸ªæ¦‚å¿µ,æ…¢æ…¢ç ”ç©¶,å…ˆæ”¾ä¸ª<a href="http://www.jianshu.com/p/d09778f4e055" title="å½»åº•ç†è§£Pythonä¸­çš„yield" target="_blank" rel="noopener">é“¾æ¥</a>markä¸€ä¸‹</p><a id="more"></a><h1 id="æœ€ç®€å•çš„çˆ¬ç½‘é¡µ"><a href="#æœ€ç®€å•çš„çˆ¬ç½‘é¡µ" class="headerlink" title="æœ€ç®€å•çš„çˆ¬ç½‘é¡µ"></a>æœ€ç®€å•çš„çˆ¬ç½‘é¡µ</h1><p>å…ˆè´´ä¸€æ®µä»£ç ï¼Œç®€å•çš„æ²¡ä»€ä¹ˆå¥½è®²</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python2.7</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> urllib2</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">getHtml</span><span class="params">(url)</span>:</span></span><br><span class="line">    page = urllib2.urlopen(url)</span><br><span class="line">    html=page.read()</span><br><span class="line">    <span class="keyword">return</span> html</span><br><span class="line">url=<span class="string">"https://liudongmeng.github.io"</span></span><br><span class="line">html=getHtml(url)</span><br><span class="line">print(html)</span><br></pre></td></tr></table></figure><h1 id="Scrapy"><a href="#Scrapy" class="headerlink" title="Scrapy"></a>Scrapy</h1><p>ç™¾åº¦äº†ä¸€ä¸‹æ¥ä¸‹æ¥åº”è¯¥æ€ä¹ˆåšï¼Œæ— éå…ˆæ‹‰æ•°æ®ï¼Œç„¶åä½¿ç”¨æ­£åˆ™æˆ–è€…å…¶ä»–æ‰‹æ®µæŠŠç›®æ ‡æ•°æ®æå–å‡ºæ¥ï¼Œä¹‹åè¦èƒ½è‡ªåŠ¨ç¿»é¡µä¹‹ç±»çš„ï¼Œèƒ½å¤ŸæŒç»­æ‹‰<br>è¯´èµ·æ¥ç®€å•ï¼Œè·å–ç½‘é¡µå†…å®¹åªéœ€è¦ç¬¬ä¸€æ­¥é‚£å‡ è¡Œä»£ç ï¼Œç„¶åå°±è¦ä»”ç»†ç¢ç£¨ä¸€ä¸‹æ€ä¹ˆåšäº†ï¼Œç™¾åº¦çš„ç»“æœæ˜¯ç”¨<a href="https://scrapy.org/" title="Scrapyå®˜ç½‘" target="_blank" rel="noopener">Scrapy</a>è¿™ä¸ªæ¡†æ¶çš„æ¯”è¾ƒå¤šï¼Œå…ˆç®€å•å­¦ä¹ ä¸€ä¸‹å§<br><img src="scrapy_architecture_02.png" alt="input"><br>çœ‹å®Œæ–‡æ¡£åˆè¸©äº†å¥½å¤šå‘â€¦â€¦ç°åœ¨å¼€å§‹è¡¥å……<br>é¡ºç€æ–‡æ¡£çœ‹ä¸‹æ¥ï¼Œ<code>pip install</code>æŒ‰è¯´åº”è¯¥å¾ˆç®€å•å•Šï¼Œå¯æ˜¯OSXä¸‹é¢å®‰è£…å°±æ˜¯å‡ºäº†ä¸€å †é—®é¢˜ï¼Œæ¯”å¦‚ç³»ç»Ÿæƒé™äº†ï¼Œè¿˜æœ‰ä¸€ä¸ªä»€ä¹ˆç³»ç»Ÿä¿æŠ¤æœºåˆ¶äº†ï¼Œä¸èƒ½åœ¨usrå’Œetcè¿™ç§ç›®å½•ä¸‹è£…ä¸œè¥¿â€¦â€¦çœ‹äº†ä¸€åœˆï¼Œä¸€ç§è§£å†³åŠæ³•æ˜¯é…ç½®pipå®‰è£…è·¯å¾„ï¼Œè£…åœ¨å½“å‰ç”¨æˆ·çš„ç›®å½•ä¸‹ï¼Œè¦æ”¹ä¸€å †é…ç½®æ–‡ä»¶<br>æœ€åå†³å®šè¦é‡‡ç”¨çš„æ˜¯<a href="https://virtualenv.pypa.io" title="visualenvå®˜ç½‘" target="_blank" rel="noopener">virtualenv</a>ï¼Œå› ä¸ºä¸ç”¨è¿™ä¹ˆéº»çƒ¦â€¦â€¦<br>å†™åœ¨ä¸€èµ·å¤ªä¹±äº†ï¼Œæ”¾ä¸ªé“¾æ¥<a href="/2017/04/08/pythonå¼€å‘ç¯å¢ƒçš„ä¸€äº›é…ç½®/" title="pythonå¼€å‘ç¯å¢ƒçš„ä¸€äº›é…ç½®">pythonå¼€å‘ç¯å¢ƒçš„ä¸€äº›é…ç½®</a></p><h2 id="Scrapyå®‰è£…"><a href="#Scrapyå®‰è£…" class="headerlink" title="Scrapyå®‰è£…"></a>Scrapyå®‰è£…</h2><p>æå®šäº†è™šæ‹Ÿç¯å¢ƒï¼Œå°±å¯ä»¥å¼€å§‹å®‰è£…é…ç½®Scrapyäº†</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºè™šæ‹Ÿç¯å¢ƒç›®å½•(?æš‚æ—¶è¿™æ ·å«å§)</span></span><br><span class="line">$ visualenv ENV</span><br><span class="line"><span class="comment"># åˆ‡æ¢è‡³è™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">$ <span class="built_in">source</span> ENV/bin/activate</span><br><span class="line"><span class="comment"># é€€å‡ºè™šæ‹Ÿç¯å¢ƒ</span></span><br><span class="line">$ deactivate</span><br><span class="line"><span class="comment"># pipå®‰è£…</span></span><br><span class="line">$ pip install Scrapy</span><br><span class="line"><span class="comment"># åˆ›å»ºåä¸ºtutorialçš„scrapyé¡¹ç›®</span></span><br><span class="line">$ scrapy startproject tutorial</span><br></pre></td></tr></table></figure><h2 id="Scrapy-Tuurtorial"><a href="#Scrapy-Tuurtorial" class="headerlink" title="Scrapy Tuurtorial"></a>Scrapy Tuurtorial</h2><p>ä¸‹é¢æ˜¯<a href="https://docs.scrapy.org/en/latest/intro/tutorial.html" title="Scrapyå®˜ç½‘Tutorial" target="_blank" rel="noopener">Scrapyå®˜ç½‘Tutorial</a>ç»™å‡ºçš„æ•™ç¨‹ä¸­çš„ä»£ç </p><h3 id="æŠ“å–ç½‘é¡µ"><a href="#æŠ“å–ç½‘é¡µ" class="headerlink" title="æŠ“å–ç½‘é¡µ"></a>æŠ“å–ç½‘é¡µ</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QuotesSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">"quotes"</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">start_requests</span><span class="params">(self)</span>:</span></span><br><span class="line">        urls = [</span><br><span class="line">            <span class="string">'http://quotes.toscrape.com/page/1/'</span>,</span><br><span class="line">            <span class="string">'http://quotes.toscrape.com/page/2/'</span>,</span><br><span class="line">        ]</span><br><span class="line">        <span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(url=url, callback=self.parse)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        page = response.url.split(<span class="string">"/"</span>)[<span class="number">-2</span>]</span><br><span class="line">        filename = <span class="string">'quotes-%s.html'</span> % page</span><br><span class="line">        <span class="keyword">with</span> open(filename, <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(response.body)</span><br><span class="line">        self.log(<span class="string">'Saved file %s'</span> % filename)</span><br></pre></td></tr></table></figure><p>ä¹‹ååœ¨tutorialç›®å½•ä¸‹æ‰§è¡Œå‘½ä»¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ scrapy crawl quotes</span><br><span class="line"><span class="comment"># This command runs the spider with name quotes that weâ€™ve just added, that will send some requests for the quotes.toscrape.com domain. You will get an output similar to this:</span></span><br><span class="line">... (omitted <span class="keyword">for</span> brevity)</span><br><span class="line">2016-12-16 21:24:05 [scrapy.core.engine] INFO: Spider opened</span><br><span class="line">2016-12-16 21:24:05 [scrapy.extensions.logstats] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)</span><br><span class="line">2016-12-16 21:24:05 [scrapy.extensions.telnet] DEBUG: Telnet console listening on 127.0.0.1:6023</span><br><span class="line">2016-12-16 21:24:05 [scrapy.core.engine] DEBUG: Crawled (404) &lt;GET http://quotes.toscrape.com/robots.txt&gt; (referer: None)</span><br><span class="line">2016-12-16 21:24:05 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET http://quotes.toscrape.com/page/1/&gt; (referer: None)</span><br><span class="line">2016-12-16 21:24:05 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET http://quotes.toscrape.com/page/2/&gt; (referer: None)</span><br><span class="line">2016-12-16 21:24:05 [quotes] DEBUG: Saved file quotes-1.html</span><br><span class="line">2016-12-16 21:24:05 [quotes] DEBUG: Saved file quotes-2.html</span><br><span class="line">2016-12-16 21:24:05 [scrapy.core.engine] INFO: Closing spider (finished)</span><br><span class="line">...</span><br></pre></td></tr></table></figure><blockquote><p>Scrapy schedules the scrapy.Request objects returned by the start_requests method of the Spider. Upon receiving a response for each one, it instantiates Response objects and calls the callback method associated with the request (in this case, the parse method) passing the response as argument.</p></blockquote><p>è¿™æ—¶å€™ENVç›®å½•ä¸‹ä¿å­˜äº†ä¸¤ä¸ªhtmlæ–‡ä»¶<code>quotes-1.html</code>,<code>quotes-2.html</code>,è¿™å°±æ˜¯çˆ¬ä¸‹æ¥çš„ä¸œè¥¿äº†</p><p>æ¥ä¸‹æ¥æ˜¯ä¸€ä¸ªç®€åŒ–çš„å®ç°</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QuotesSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">"quotes_shortcut"</span></span><br><span class="line">    start_urls = [</span><br><span class="line">        <span class="string">'http://quotes.toscrape.com/page/1/'</span>,</span><br><span class="line">        <span class="string">'http://quotes.toscrape.com/page/2/'</span>,</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self,response)</span>:</span></span><br><span class="line">        page = response.url.split(<span class="string">"/"</span>)[<span class="number">-2</span>]</span><br><span class="line">        finename = <span class="string">'quotes_shortcut-%s.html'</span> % page</span><br><span class="line">        <span class="keyword">with</span> open(finename,<span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(response.body)</span><br></pre></td></tr></table></figure><blockquote><p>The parse() method will be called to handle each of the requests for those URLs, even though we havenâ€™t explicitly told Scrapy to do so. This happens because parse() is Scrapyâ€™s default callback method, which is called for requests without an explicitly assigned callback.</p></blockquote><p>çœ‹äº†ä¸€ä¸‹,è¿™ä¸€æ®µå¤§æ¦‚æ˜¯ä¸ºäº†è¯´æ˜parseæ˜¯scrapyçš„é»˜è®¤å›è°ƒå‡½æ•°,ä¸éœ€è¦ä¸‹é¢è¿™ä¸€æ®µä»£ç æŒ‡å®šä¹Ÿä¼šè¢«é»˜è®¤è°ƒç”¨</p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> url <span class="keyword">in</span> urls:</span><br><span class="line">    <span class="keyword">yield</span> scrapy.Request(url=url, callback=self.parse)</span><br></pre></td></tr></table></figure><h3 id="CSSSelectoræå–æ•°æ®"><a href="#CSSSelectoræå–æ•°æ®" class="headerlink" title="CSSSelectoræå–æ•°æ®"></a>CSSSelectoræå–æ•°æ®</h3><p>ç„¶åæ˜¯è®²scrapyå¦‚ä½•æå–æ•°æ®çš„</p><h4 id="extract-method"><a href="#extract-method" class="headerlink" title=".extract() method"></a>.extract() method</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># scrapy shell</span></span><br><span class="line">$ scrapy shell <span class="string">'http://quotes.toscrape.com/page/1/'</span></span><br><span class="line"><span class="comment"># æ‰§è¡Œå®Œæ¯•ä¹‹åçœ‹åˆ°å¦‚ä¸‹è¾“å‡º</span></span><br><span class="line">[ ... Scrapy <span class="built_in">log</span> here ... ]</span><br><span class="line">2016-09-19 12:09:27 [scrapy.core.engine] DEBUG: Crawled (200) &lt;GET http://quotes.toscrape.com/page/1/&gt; (referer: None)</span><br><span class="line">[s] Available Scrapy objects:</span><br><span class="line">[s]   scrapy     scrapy module (contains scrapy.Request, scrapy.Selector, etc)</span><br><span class="line">[s]   crawler    &lt;scrapy.crawler.Crawler object at 0x7fa91d888c90&gt;</span><br><span class="line">[s]   item       &#123;&#125;</span><br><span class="line">[s]   request    &lt;GET http://quotes.toscrape.com/page/1/&gt;</span><br><span class="line">[s]   response   &lt;200 http://quotes.toscrape.com/page/1/&gt;</span><br><span class="line">[s]   settings   &lt;scrapy.settings.Settings object at 0x7fa91d888c10&gt;</span><br><span class="line">[s]   spider     &lt;DefaultSpider <span class="string">'default'</span> at 0x7fa91c8af990&gt;</span><br><span class="line">[s] Useful shortcuts:</span><br><span class="line">[s]   shelp()           Shell <span class="built_in">help</span> (<span class="built_in">print</span> this <span class="built_in">help</span>)</span><br><span class="line">[s]   fetch(req_or_url) Fetch request (or URL) and update <span class="built_in">local</span> objects</span><br><span class="line">[s]   view(response)    View response <span class="keyword">in</span> a browser</span><br><span class="line">&gt;&gt;&gt;</span><br><span class="line"><span class="comment"># æ¥ä¸‹æ¥å¯ä»¥åœ¨scrapy shellä¸­è¿›è¡Œä¸€äº›å‘½ä»¤æ“ä½œ</span></span><br><span class="line"><span class="comment"># css selector</span></span><br><span class="line">&gt;&gt;&gt; response.css(<span class="string">'tittle'</span>)</span><br><span class="line">[&lt;Selector xpath=u<span class="string">'descendant-or-self::title'</span> data=u<span class="string">'&lt;title&gt;Quotes to Scrape&lt;/title&gt;'</span>&gt;]</span><br><span class="line">&gt;&gt;&gt; response.css(<span class="string">'tittle::text'</span>)</span><br><span class="line">[&lt;Selector xpath=u<span class="string">'descendant-or-self::title/text()'</span> data=u<span class="string">'Quotes to Scrape'</span>&gt;]</span><br><span class="line">&gt;&gt;&gt; response.css(<span class="string">'title::text'</span>).extract()</span><br><span class="line">[u<span class="string">'Quotes to Scrape'</span>]</span><br><span class="line">&gt;&gt;&gt; response.css(<span class="string">'title'</span>).extract()</span><br><span class="line">[u<span class="string">'&lt;title&gt;Quotes to Scrape&lt;/title&gt;'</span>]</span><br><span class="line"><span class="comment"># extract()æ–¹æ³•å¤„ç†çš„æ˜¯ä¸€ä¸ªselectorListå®ä¾‹,å¦‚æœåªæƒ³è¦ç¬¬ä¸€ä¸ªç»“æœå¯ä»¥å¦‚ä¸‹æ“ä½œ</span></span><br><span class="line">&gt;&gt;&gt; response.css(<span class="string">'title::text'</span>).extract_first()</span><br><span class="line">u<span class="string">'Quotes to Scrape'</span></span><br><span class="line"><span class="comment"># ä¹Ÿå¯ä»¥åƒæ•°ç»„ä¸€æ ·å†™</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨.extract_first()æ–¹æ³•åœ¨æ•°ç»„é•¿åº¦ä¸º0(æ²¡æœ‰æ‰¾åˆ°å¯¹åº”é€‰æ‹©å™¨çš„å…ƒç´ )çš„æ—¶å€™å¯ä»¥è¿”å›Noneè€Œä¸æ˜¯å¼•å‘ç´¢å¼•é”™è¯¯</span></span><br><span class="line"><span class="comment"># However, using .extract_first() avoids an IndexError and returns None when it doesnâ€™t find any element matching the selection.</span></span><br><span class="line">&gt;&gt;&gt; response.css(<span class="string">'title::text'</span>)[0].extract()</span><br><span class="line">u<span class="string">'Quotes to Scrape'</span></span><br></pre></td></tr></table></figure><h4 id="regular-expressions"><a href="#regular-expressions" class="headerlink" title="regular expressions"></a>regular expressions</h4><blockquote><p>Besides the extract() and extract_first() methods, you can also use the re() method to extract using regular expressions:</p></blockquote><p>æ­£åˆ™è¡¨è¾¾å¼æå–æ•°æ®</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; response.css(<span class="string">'title::text'</span>).re(r<span class="string">'Quotes.*'</span>)</span><br><span class="line">[u<span class="string">'Quotes to Scrape'</span>]</span><br><span class="line">&gt;&gt;&gt; response.css(<span class="string">'title::text'</span>).re(r<span class="string">'Q\w+'</span>)</span><br><span class="line">[u<span class="string">'Quotes'</span>]</span><br><span class="line">&gt;&gt;&gt; response.css(<span class="string">'title::text'</span>).re(r<span class="string">'(\w+) to (\w+)'</span>)</span><br><span class="line">[u<span class="string">'Quotes'</span>, <span class="string">'Scrape'</span>]</span><br></pre></td></tr></table></figure><p>ä¸ºäº†éªŒè¯æå–åˆ°çš„æ•°æ®æ˜¯å¦æ­£ç¡®,å¯ä»¥è°ƒç”¨<code>view(response)</code>æ–¹æ³•æ‰“å¼€æµè§ˆå™¨,åœ¨å¼€å‘è€…å·¥å…·ä¸­æŸ¥çœ‹é¡µé¢å…ƒç´ </p><h3 id="XPathæå–æ•°æ®"><a href="#XPathæå–æ•°æ®" class="headerlink" title="XPathæå–æ•°æ®"></a>XPathæå–æ•°æ®</h3><p>è¿™ä¸€å—ä¹‹å‰åœ¨åšseleniumçš„ç«¯å¯¹ç«¯æµ‹è¯•çš„æ—¶å€™æœ‰ä¸€ç‚¹ç‚¹äº†è§£,å¯ä»¥ç”¨çš„æ—¶å€™å†ç™¾åº¦</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; response.xpath(<span class="string">'//title'</span>)</span><br><span class="line">[&lt;Selector xpath=<span class="string">'//title'</span> data=u<span class="string">'&lt;title&gt;Quotes to Scrape&lt;/title&gt;'</span>&gt;]</span><br><span class="line">&gt;&gt;&gt; response.xpath(<span class="string">'//title/text()'</span>).extract_first()</span><br><span class="line">u<span class="string">'Quotes to Scrape'</span></span><br></pre></td></tr></table></figure><blockquote><p>XPath expressions are very powerful, and are the foundation of Scrapy Selectors. In fact, CSS selectors are converted to XPath under-the-hood. You can see that if you read closely the text representation of the selector objects in the shell.</p></blockquote><p>è¿™é‡Œè¯´XPathæ˜¯CSSSelectorçš„åŸºç¡€,æ„æ€æ˜¯æ›´å¼ºå¤§äº†</p><h3 id="è¿™é‡Œè®²å¦‚ä½•æå–æœ€ç»ˆçš„ç›®æ ‡æ•°æ®"><a href="#è¿™é‡Œè®²å¦‚ä½•æå–æœ€ç»ˆçš„ç›®æ ‡æ•°æ®" class="headerlink" title="è¿™é‡Œè®²å¦‚ä½•æå–æœ€ç»ˆçš„ç›®æ ‡æ•°æ®"></a>è¿™é‡Œè®²å¦‚ä½•æå–æœ€ç»ˆçš„ç›®æ ‡æ•°æ®</h3><p>è¿™ç¯‡æ•™ç¨‹ä¸­çš„ç›®çš„æ˜¯ä»ç½‘ç«™ä¸­æŠ“å–ä½œå“å’Œä½œè€…æ•°æ®,æˆ‘çŒœæ˜¯ç”¨æ­£åˆ™ğŸ™„<br>æŠ“åˆ°çš„ç½‘ç«™æ•°æ®æ ¼å¼å¦‚ä¸‹</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"quote"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"text"</span>&gt;</span>â€œThe world as we have created it is a process of our</span><br><span class="line">    thinking. It cannot be changed without changing our thinking.â€<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span>&gt;</span></span><br><span class="line">        by <span class="tag">&lt;<span class="name">small</span> <span class="attr">class</span>=<span class="string">"author"</span>&gt;</span>Albert Einstein<span class="tag">&lt;/<span class="name">small</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/author/Albert-Einstein"</span>&gt;</span>(about)<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tags"</span>&gt;</span></span><br><span class="line">        Tags:</span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"tag"</span> <span class="attr">href</span>=<span class="string">"/tag/change/page/1/"</span>&gt;</span>change<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"tag"</span> <span class="attr">href</span>=<span class="string">"/tag/deep-thoughts/page/1/"</span>&gt;</span>deep-thoughts<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"tag"</span> <span class="attr">href</span>=<span class="string">"/tag/thinking/page/1/"</span>&gt;</span>thinking<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"tag"</span> <span class="attr">href</span>=<span class="string">"/tag/world/page/1/"</span>&gt;</span>world<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œé‡æ–°æ‰“å¼€scrapy shell</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ scrapy shell <span class="string">'http://quotes.toscrape.com'</span></span><br><span class="line"><span class="comment"># ä½¿ç”¨CSSSelectorè·å–åˆ°äº†æ‰€æœ‰çš„div.quoteå…ƒç´ å¯¹è±¡</span></span><br><span class="line">&gt;&gt;&gt; response.css(<span class="string">"div.quote"</span>)</span><br><span class="line"><span class="comment"># quoteç°åœ¨å°±æ˜¯ç¬¬ä¸€ä¸ªå…ƒç´ å¯¹è±¡</span></span><br><span class="line">&gt;&gt;&gt; quote=response.css(<span class="string">"div.quote"</span>)[0]</span><br><span class="line">&gt;&gt;&gt; quote</span><br><span class="line">&lt;Selector xpath=u<span class="string">"descendant-or-self::div[@class and contains(concat(' ', normalize-space(@class), ' '), ' quote ')]"</span> data=u<span class="string">'&lt;div class="quote" itemscope itemtype="h'</span>&gt;</span><br><span class="line"><span class="comment"># ç„¶åæ ¹æ®quoteçš„å…ƒç´ å»æŸ¥æ‰¾ä¸‹é¢çš„å…ƒç´ </span></span><br><span class="line">&gt;&gt;&gt; title = quote.css(<span class="string">"span.text::text"</span>).extract_first()</span><br><span class="line">&gt;&gt;&gt; title</span><br><span class="line">u<span class="string">'\u201cThe world as we have created it is a process of our thinking. It cannot be changed without changing our thinking.\u201d'</span></span><br><span class="line">&gt;&gt;&gt; author = quote.css(<span class="string">"small.author::text"</span>).extract_first()</span><br><span class="line">&gt;&gt;&gt; author</span><br><span class="line"><span class="string">'Albert Einstein'</span></span><br><span class="line">&gt;&gt;&gt; tags = quote.css(<span class="string">"div.tags a.tag::text"</span>).extract()</span><br><span class="line">&gt;&gt;&gt; tags</span><br><span class="line">[u<span class="string">'change'</span>, u<span class="string">'deep-thoughts'</span>, u<span class="string">'thinking'</span>, u<span class="string">'world'</span>]</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; <span class="keyword">for</span> quote <span class="keyword">in</span> response.css(<span class="string">"div.quote"</span>):</span><br><span class="line">...     text=quote.css(<span class="string">"span.text::text"</span>).extract_first()</span><br><span class="line">...     author=quote.css(<span class="string">"small.author::text"</span>).extract_first()</span><br><span class="line">...     tags=quote.css(<span class="string">"div.tags a.tag::text"</span>).extract()</span><br><span class="line">...     <span class="built_in">print</span>(dict(text=text,author=author,tags=tags))</span><br><span class="line">...</span><br><span class="line">&#123;<span class="string">'text'</span>: u<span class="string">'\u201cThe world as we have created it is a process of our thinking. It cannot be changed without changing our thinking.\u201d'</span>, <span class="string">'tags'</span>: [u<span class="string">'change'</span>, u<span class="string">'deep-thoughts'</span>, u<span class="string">'thinking'</span>, u<span class="string">'world'</span>], <span class="string">'author'</span>: u<span class="string">'Albert Einstein'</span>&#125;</span><br><span class="line">&#123;<span class="string">'text'</span>: u<span class="string">'\u201cIt is our choices, Harry, that show what we truly are, far more than our abilities.\u201d'</span>, <span class="string">'tags'</span>: [u<span class="string">'abilities'</span>, u<span class="string">'choices'</span>], <span class="string">'author'</span>: u<span class="string">'J.K. Rowling'</span>&#125;</span><br><span class="line">... a few more of these, omitted <span class="keyword">for</span> brevity</span><br></pre></td></tr></table></figure><h3 id="åœ¨Spiderä¸­æå–æ•°æ®"><a href="#åœ¨Spiderä¸­æå–æ•°æ®" class="headerlink" title="åœ¨Spiderä¸­æå–æ•°æ®"></a>åœ¨Spiderä¸­æå–æ•°æ®</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QuotesSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">"quotes_extract"</span></span><br><span class="line">    start_urls = [</span><br><span class="line">        <span class="string">'http://quotes.toscrape.com/page/1/'</span>,</span><br><span class="line">        <span class="string">'http://quotes.toscrape.com/page/2/'</span>,</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> quote <span class="keyword">in</span> response.css(<span class="string">'div.quote'</span>):</span><br><span class="line">            <span class="keyword">yield</span> &#123;</span><br><span class="line">                <span class="string">'text'</span>: quote.css(<span class="string">'span.text::text'</span>).extract_first(),</span><br><span class="line">                <span class="string">'author'</span>: quote.css(<span class="string">'small.author::text'</span>).extract_first(),</span><br><span class="line">                <span class="string">'tags'</span>: quote.css(<span class="string">'div.tags a.tag::text'</span>).extract(),</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure><p>è¿è¡Œç¨‹åºçœ‹è¾“å‡º,å¤§æ¦‚å°±æ˜¯ä¸‹é¢è¿™æ ·</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ scrapy crawl quotes_extract</span><br><span class="line">...</span><br><span class="line">2017-04-08 22:00:06 [scrapy.core.scraper] DEBUG: Scraped from &lt;200 http://quotes.toscrape.com/page/1/&gt;</span><br><span class="line">&#123;<span class="string">'text'</span>: u<span class="string">'\u201cThe world as we have created it is a process of our thinking. It cannot be changed without changing our thinking.\u201d'</span>, <span class="string">'tags'</span>: [u<span class="string">'change'</span>, u<span class="string">'deep-thoughts'</span>, u<span class="string">'thinking'</span>, u<span class="string">'world'</span>], <span class="string">'author'</span>: u<span class="string">'Albert Einstein'</span>&#125;</span><br><span class="line">2017-04-08 22:00:06 [scrapy.core.scraper] DEBUG: Scraped from &lt;200 http://quotes.toscrape.com/page/1/&gt;</span><br><span class="line">&#123;<span class="string">'text'</span>: u<span class="string">'\u201cIt is our choices, Harry, that show what we truly are, far more than our abilities.\u201d'</span>, <span class="string">'tags'</span>: [u<span class="string">'abilities'</span>, u<span class="string">'choices'</span>], <span class="string">'author'</span>: u<span class="string">'J.K. Rowling'</span>&#125;</span><br><span class="line">...</span><br><span class="line"><span class="comment"># è¾“å‡ºjsonæ–‡ä»¶</span></span><br><span class="line">$ scrapy crawl quotes_extract -o quotes_extract.json</span><br><span class="line"><span class="comment"># è¾“å‡ºjlæ–‡ä»¶</span></span><br><span class="line">$ scrapy crawl quotes_extract -o quotes_extract.jl</span><br></pre></td></tr></table></figure><blockquote><p>The JSON Lines format is useful because itâ€™s stream-like, you can easily append new records to it. It doesnâ€™t have the same problem of JSON when you run twice. Also, as each record is a separate line, you can process big files without having to fit everything in memory, there are tools like JQ to help doing that at the command-line.</p></blockquote><p>è¿™é‡Œç»ˆç«¯å’Œä¸Šé¢çš„è¾“å‡ºæ˜¯ä¸€æ ·çš„,åªæ˜¯æŠŠæ•°æ®ä¿å­˜åœ¨äº†jsonæ–‡ä»¶é‡Œ,éšä¾¿åˆ—å‡ æ¡çœ‹çœ‹æ•ˆæœå°±è¡Œäº†</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">&#123;<span class="attr">"text"</span>: <span class="string">"\u201cThe world as we have created it is a process of our thinking. It cannot be changed without changing our thinking.\u201d"</span>, <span class="attr">"author"</span>: <span class="string">"Albert Einstein"</span>, <span class="attr">"tags"</span>: [<span class="string">"change"</span>, <span class="string">"deep-thoughts"</span>, <span class="string">"thinking"</span>, <span class="string">"world"</span>]&#125;,</span><br><span class="line">&#123;<span class="attr">"text"</span>: <span class="string">"\u201cIt is our choices, Harry, that show what we truly are, far more than our abilities.\u201d"</span>, <span class="attr">"author"</span>: <span class="string">"J.K. Rowling"</span>, <span class="attr">"tags"</span>: [<span class="string">"abilities"</span>, <span class="string">"choices"</span>]&#125;,</span><br><span class="line">&#123;<span class="attr">"text"</span>: <span class="string">"\u201cThere are only two ways to live your life. One is as though nothing is a miracle. The other is as though everything is a miracle.\u201d"</span>, <span class="attr">"author"</span>: <span class="string">"Albert Einstein"</span>, <span class="attr">"tags"</span>: [<span class="string">"inspirational"</span>, <span class="string">"life"</span>, <span class="string">"live"</span>, <span class="string">"miracle"</span>, <span class="string">"miracles"</span>]&#125;,</span><br><span class="line">&#123;<span class="attr">"text"</span>: <span class="string">"\u201cThe person, be it gentleman or lady, who has not pleasure in a good novel, must be intolerably stupid.\u201d"</span>, <span class="attr">"author"</span>: <span class="string">"Jane Austen"</span>, <span class="attr">"tags"</span>: [<span class="string">"aliteracy"</span>, <span class="string">"books"</span>, <span class="string">"classic"</span>, <span class="string">"humor"</span>]&#125;,</span><br><span class="line">&#123;<span class="attr">"text"</span>: <span class="string">"\u201cImperfection is beauty, madness is genius and it's better to be absolutely ridiculous than absolutely boring.\u201d"</span>, <span class="attr">"author"</span>: <span class="string">"Marilyn Monroe"</span>, <span class="attr">"tags"</span>: [<span class="string">"be-yourself"</span>, <span class="string">"inspirational"</span>]&#125;,</span><br><span class="line">&#123;<span class="attr">"text"</span>: <span class="string">"\u201cTry not to become a man of success. Rather become a man of value.\u201d"</span>, <span class="attr">"author"</span>: <span class="string">"Albert Einstein"</span>, <span class="attr">"tags"</span>: [<span class="string">"adulthood"</span>, <span class="string">"success"</span>, <span class="string">"value"</span>]&#125;,</span><br><span class="line">...</span><br><span class="line">]</span><br></pre></td></tr></table></figure><blockquote><p>In small projects (like the one in this tutorial), that should be enough. However, if you want to perform more complex things with the scraped items, you can write an Item Pipeline. A placeholder file for Item Pipelines has been set up for you when the project is created, in tutorial/pipelines.py. Though you donâ€™t need to implement any item pipelines if you just want to store the scraped items.</p></blockquote><p>è¿™ä¸ªæ˜¯ç®¡é“äº†,è¿™éƒ¨åˆ†å›å¤´å†çœ‹å§,ä»Šå¤©å…ˆåˆ°è¿™é‡Œ.ä¹ˆæœ‰æ•ˆç‡â€¦</p><h3 id="å¦‚ä½•æŒç»­æŸ¥æ‰¾æ‰€æœ‰ç½‘é¡µ"><a href="#å¦‚ä½•æŒç»­æŸ¥æ‰¾æ‰€æœ‰ç½‘é¡µ" class="headerlink" title="å¦‚ä½•æŒç»­æŸ¥æ‰¾æ‰€æœ‰ç½‘é¡µ"></a>å¦‚ä½•æŒç»­æŸ¥æ‰¾æ‰€æœ‰ç½‘é¡µ</h3><p>è¿™é‡Œåº”è¯¥å°±æ˜¯æ‰¾åˆ°â€ä¸‹ä¸€é¡µâ€çš„æ ‡è®°,ç„¶åæ— é™å‘ä¸‹ç›´åˆ°æ²¡æœ‰ä¸‹ä¸€é¡µä¸ºæ­¢,ä¹Ÿæ²¡ä»€ä¹ˆéš¾åº¦,æŒ‡å®šé€‰æ‹©å™¨è€Œå·².<br>ä¸‹é¢æ˜¯quotesç½‘ç«™çš„ä¸‹ä¸€é¡µå…ƒç´ </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"pager"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"next"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"/page/2/"</span>&gt;</span>Next <span class="tag">&lt;<span class="name">span</span> <span class="attr">aria-hidden</span>=<span class="string">"true"</span>&gt;</span>&amp;rarr;<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure><p>shellé‡Œé¢å…ˆçœ‹çœ‹</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ scrapy shell <span class="string">'http://quotes.toscrape.com/'</span></span><br><span class="line">&gt;&gt;&gt; response.css(<span class="string">'li.next a::attr(href)'</span>).extract_first()</span><br><span class="line">u<span class="string">'/page/2/'</span></span><br></pre></td></tr></table></figure><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QuotesSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">"quotes_next"</span></span><br><span class="line">    start_urls = [</span><br><span class="line">        <span class="string">'http://quotes.toscrape.com/page/1/'</span>,</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> quote <span class="keyword">in</span> response.css(<span class="string">'div.quote'</span>):</span><br><span class="line">            <span class="keyword">yield</span> &#123;</span><br><span class="line">                <span class="string">'text'</span>: quote.css(<span class="string">'span.text::text'</span>).extract_first(),</span><br><span class="line">                <span class="string">'author'</span>: quote.css(<span class="string">'small.author::text'</span>).extract_first(),</span><br><span class="line">                <span class="string">'tags'</span>: quote.css(<span class="string">'div.tags a.tag::text'</span>).extract(),</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        next_page = response.css(<span class="string">'li.next a::attr(href)'</span>).extract_first()</span><br><span class="line">        <span class="keyword">if</span> next_page <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">            <span class="comment"># ä»ç›¸å¯¹è·¯å¾„è·å–é¡µé¢çš„ç»å¯¹è·¯å¾„</span></span><br><span class="line">            <span class="comment"># http://quotes.toscrape.com/page/1/</span></span><br><span class="line">            <span class="comment"># /page/2/</span></span><br><span class="line">            <span class="comment"># æ‹¼èµ·æ¥å°±æ˜¯http://quotes.toscrape.com/page/2/è¿™æ ·</span></span><br><span class="line">            next_page = response.urljoin(next_page)</span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(next_page, callback=self.parse)</span><br></pre></td></tr></table></figure><blockquote><p>What you see here is Scrapyâ€™s mechanism of following links: when you yield a Request in a callback method, Scrapy will schedule that request to be sent and register a callback method to be executed when that request finishes.</p></blockquote><p>scrapyå›è°ƒparseçš„æ—¶å€™ä¼šè§¦å‘next_pageä¸‹é¢çš„<code>scrapy.Request(next_page, callback=self.parse)</code>ä»£ç ,å¾ªç¯ç›´åˆ°<code>next_page=None</code></p><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AuthorSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">'quotes_author'</span></span><br><span class="line"></span><br><span class="line">    start_urls = [<span class="string">'http://quotes.toscrape.com/'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        <span class="comment"># follow links to author pages</span></span><br><span class="line">        <span class="keyword">for</span> href <span class="keyword">in</span> response.css(<span class="string">'.author + a::attr(href)'</span>).extract():</span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(response.urljoin(href),</span><br><span class="line">                                 callback=self.parse_author)</span><br><span class="line"></span><br><span class="line">        <span class="comment"># follow pagination links</span></span><br><span class="line">        next_page = response.css(<span class="string">'li.next a::attr(href)'</span>).extract_first()</span><br><span class="line">        <span class="keyword">if</span> next_page <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">            next_page = response.urljoin(next_page)</span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(next_page, callback=self.parse)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse_author</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">extract_with_css</span><span class="params">(query)</span>:</span></span><br><span class="line">            <span class="keyword">return</span> response.css(query).extract_first().strip()</span><br><span class="line"></span><br><span class="line">        <span class="keyword">yield</span> &#123;</span><br><span class="line">            <span class="string">'name'</span>: extract_with_css(<span class="string">'h3.author-title::text'</span>),</span><br><span class="line">            <span class="string">'birthdate'</span>: extract_with_css(<span class="string">'.author-born-date::text'</span>),</span><br><span class="line">            <span class="string">'bio'</span>: extract_with_css(<span class="string">'.author-description::text'</span>),</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸€æ®µæ˜¯å…ˆåŠ è½½é¡µé¢ä¹‹åæ‹¿åˆ°æ‰€æœ‰çš„ä½œè€…çš„é“¾æ¥,ç„¶ååœ¨parseä¸­æ–°å»ºscrapy.Request()è¯·æ±‚,è§¦å‘parse_authorå›è°ƒ,åœ¨ä½œè€…é¡µé¢ä¸­æ‹¿åˆ°ä½œè€…ä¿¡æ¯<br>æˆ‘åœ¨æƒ³è¿™ä¸ªä¸œè¥¿ä¼šä¸ä¼šä¸€ä¸å°å¿ƒææˆé€’å½’äº†â€¦</p><blockquote><p>Another interesting thing this spider demonstrates is that, even if there are many quotes from the same author, we donâ€™t need to worry about visiting the same author page multiple times. By default, Scrapy filters out duplicated requests to URLs already visited, avoiding the problem of hitting servers too much because of a programming mistake. This can be configured by the setting DUPEFILTER_CLASS.</p></blockquote><p>è¯è¯´è¿™æ˜¯è‡ªå¸¦é˜²æ­¢é€’å½’çš„åŠŸèƒ½?æ¡†æ¶æœç„¶æ˜¯å¥½ä¸œè¥¿,æ€¥äººä¹‹æ‰€æ€¥å•Š</p><h3 id="ä¼ é€’å‚æ•°"><a href="#ä¼ é€’å‚æ•°" class="headerlink" title="ä¼ é€’å‚æ•°"></a>ä¼ é€’å‚æ•°</h3><figure class="highlight py"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QuotesSpider</span><span class="params">(scrapy.Spider)</span>:</span></span><br><span class="line">    name = <span class="string">"quotes_tags"</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">start_requests</span><span class="params">(self)</span>:</span></span><br><span class="line">        url = <span class="string">'http://quotes.toscrape.com/'</span></span><br><span class="line">        tag = getattr(self, <span class="string">'tag'</span>, <span class="keyword">None</span>)</span><br><span class="line">        <span class="keyword">if</span> tag <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">            url = url + <span class="string">'tag/'</span> + tag</span><br><span class="line">        <span class="keyword">yield</span> scrapy.Request(url, self.parse)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span><span class="params">(self, response)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> quote <span class="keyword">in</span> response.css(<span class="string">'div.quote'</span>):</span><br><span class="line">            <span class="keyword">yield</span> &#123;</span><br><span class="line">                <span class="string">'text'</span>: quote.css(<span class="string">'span.text::text'</span>).extract_first(),</span><br><span class="line">                <span class="string">'author'</span>: quote.css(<span class="string">'small.author::text'</span>).extract_first(),</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        next_page = response.css(<span class="string">'li.next a::attr(href)'</span>).extract_first()</span><br><span class="line">        <span class="keyword">if</span> next_page <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">            next_page = response.urljoin(next_page)</span><br><span class="line">            <span class="keyword">yield</span> scrapy.Request(next_page, self.parse)</span><br></pre></td></tr></table></figure><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrapy crawl quotes_tags -o quotes_tags.json -a tag=humor</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆè·å–çš„ç»“æœåªæœ‰humorç±»å‹çš„</p><blockquote><p>You can learn more about <a href="https://docs.scrapy.org/en/latest/topics/spiders.html#spiderargs" title="spider-arguments" target="_blank" rel="noopener">handling spider arguments here</a>.</p></blockquote><p>ä»Šå¤©å°±åˆ°è¿™é‡Œ,æ¶ˆåŒ–ä¸€ä¸‹.</p>]]></content>
      
      <categories>
          
          <category> ç¬”è®° </category>
          
          <category> Scrapy </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python </tag>
            
            <tag> spider </tag>
            
            <tag> Scrapy </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>2017-03-30</title>
      <link href="/2017/03/30/2017-03-30/"/>
      <url>/2017/03/30/2017-03-30/</url>
      <content type="html"><![CDATA[<p>å‡ºé—¨é˜´å¤©ï¼Œå›å®¶ä¸‹é›¨<br><a id="more"></a><br>ä»Šå¤©å¤§æ¦‚ç®—æ˜¯æŠŠWebç«¯çš„loginå’Œindexç†çš„ç¨å¾®æœ‰äº›æ¸…æ¥šäº†ï¼Œé™¤äº†sidebaré‚£ä¸ªä¸é è°±çš„å…¨å±â€¦â€¦<br>äºæ˜¯å¼€å§‹ä¸è‡ªé‡åŠ›çš„æ‹†åœ°å›¾ï¼Œä¸Šæ¥å°±æ˜¯ä¸ªæ­»ç»“ï¼šDojoå’ŒRequireJSéƒ½æ³¨å†Œäº†defineå’Œrequireæ–¹æ³•ï¼ŒåŠ è½½åˆ°Dojoçš„æ—¶å€™ç›´æ¥ä¼šæŠ¥é”™ï¼Œå‘µå‘µï¼Œä¸é¡ºåˆ©å°±ä¸é¡ºåˆ©å§ï¼Œåæ­£ä¸–ç•Œä¸Šä¹Ÿæ²¡æœ‰é¡ºåˆ©çš„äº‹æƒ…ã€‚<br>æŠ˜è…¾äº†ä¸€ä¼šå„¿nextï¼Œä¸çŸ¥é“æ˜¯ssçš„é—®é¢˜è¿˜æ˜¯githubçš„é—®é¢˜ï¼Œåæ­£éƒ¨ç½²è²Œä¼¼ä¸æ˜¯å¾ˆç‰¢é â€¦â€¦çƒ¦</p>]]></content>
      
      <categories>
          
          <category> æ—¥è®° </category>
          
          <category> åæ§½ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Macå‘½ä»¤</title>
      <link href="/2017/03/09/Mac%E5%91%BD%E4%BB%A4/"/>
      <url>/2017/03/09/Mac%E5%91%BD%E4%BB%A4/</url>
      <content type="html"><![CDATA[<p>ä¹Ÿè¯´ä¸ä¸Šæ˜¯æ‰‹è´±å§,åæ­£æ˜¯ä¹°äº†å°ä½é…MBP,æœ‰äº›ä¸œè¥¿è¿˜æ˜¯è¦è®°ä¸€ä¸‹çš„<br><a id="more"></a></p><h1 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="headerlink" title="å‘½ä»¤"></a>å‘½ä»¤</h1><h2 id="å…è®¸ä»ä»»æ„æ¥æºå®‰è£…åº”ç”¨"><a href="#å…è®¸ä»ä»»æ„æ¥æºå®‰è£…åº”ç”¨" class="headerlink" title="å…è®¸ä»ä»»æ„æ¥æºå®‰è£…åº”ç”¨"></a>å…è®¸ä»ä»»æ„æ¥æºå®‰è£…åº”ç”¨</h2><p>å…è®¸ä»ä»»ä½•æ¥æºå®‰è£…åº”ç”¨,æœ‰äº›è½¯ä»¶åŒ…å®‰è£…çš„æ—¶å€™æƒé™ä¸è¶³ä¼šå®‰è£…å¤±è´¥,éœ€è¦ç”¨åˆ°,è®°å¾—å®‰è£…å®Œæ¯•å›å¤</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo spctl --master-disable</span><br></pre></td></tr></table></figure><h2 id="å…³é—­system-integrity-protection"><a href="#å…³é—­system-integrity-protection" class="headerlink" title="å…³é—­system integrity protection"></a>å…³é—­system integrity protection</h2><p>ä¹°äº†å°æ˜¾ç¤ºå™¨,åˆ†è¾¨ç‡é»˜è®¤ä¸é€‚é…HiDPI,ä¸‹äº†ä¸ªè½¯ä»¶ä¹Ÿæ”¹ä¸å¥½,æç¤ºéœ€è¦å…³é—­System Intergrity Protection<br>é‡å¯ç”µè„‘,æŒ‰ä½command+Ré”®è¿›å…¥æ¢å¤æ¨¡å¼,è°ƒå‡ºç»ˆç«¯<br>æ“ä½œå®Œäº†è®°å¾—æ¢å¤,æ¯•ç«Ÿæ˜¯ç³»ç»Ÿä¿æŠ¤åŠŸèƒ½</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># å…³é—­sip</span></span><br><span class="line">csrutil <span class="built_in">disable</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># æ‰“å¼€sip</span></span><br><span class="line">csrutil <span class="built_in">enable</span></span><br></pre></td></tr></table></figure><h2 id="å…³äºâ€xxxx-xxå·²è¢«OS-Xä½¿ç”¨-æ— æ³•æ‰“å¼€â€çš„é—®é¢˜"><a href="#å…³äºâ€xxxx-xxå·²è¢«OS-Xä½¿ç”¨-æ— æ³•æ‰“å¼€â€çš„é—®é¢˜" class="headerlink" title="å…³äºâ€xxxx.xxå·²è¢«OS Xä½¿ç”¨,æ— æ³•æ‰“å¼€â€çš„é—®é¢˜"></a>å…³äºâ€xxxx.xxå·²è¢«OS Xä½¿ç”¨,æ— æ³•æ‰“å¼€â€çš„é—®é¢˜</h2><p>è¯´é“è¿™é‡Œä¸å¾—ä¸æ„Ÿæ…¨è‡ªå·±çš„è´«ç©·,ç¡¬ç›˜ä¸å¤Ÿç§»åŠ¨çš„æ¥å‡‘,è£…äº†ä¸ªåŒç³»ç»Ÿæ¥å›å€’è…¾,ä¸çŸ¥é“æ€ä¹ˆå°±ä¼šå¯¼è‡´ç§»åŠ¨ç¡¬ç›˜é‡Œé¢ä¸€äº›æ–‡ä»¶æ— æ³•æ‰“å¼€,<code>zip/rar</code>æ–‡ä»¶æ— æ³•è§£å‹,ç™¾åº¦å¾ˆä¹…æœ‰ä¸€ä¸ª[æ–¹æ³•][å…³äºâ€œxx.xxå·²è¢«OS Xä½¿ç”¨ï¼Œæ— æ³•æ‰“å¼€â€çš„é—®é¢˜]å¯è¡Œâ€¦</p><blockquote><p>Macç”µè„‘ä¸Šçš„æ–‡ä»¶æ‹·è´åˆ°ç§»åŠ¨ç¡¬ç›˜ï¼Œæœ‰æ—¶å€™ä¼šå‡ºç°â€œxx.xxå·²è¢«OS Xä½¿ç”¨ï¼Œæ— æ³•æ‰“å¼€â€çš„é—®é¢˜ã€‚<br>è§£å†³åŠæ³•ï¼š</p><p>1ã€æ‰“å¼€ç»ˆç«¯(æˆ–åœ¨Macæœç´¢é‡Œé¢è¾“å…¥Terminal);</p><p>2ã€åœ¨ç»ˆç«¯é‡Œè¾“å…¥ xattr -l ï¼Œç„¶åæŠŠå‡ºé—®é¢˜çš„æ–‡ä»¶æ‹–åŠ¨åˆ° â€œxattr -l åé¢â€,å›è½¦ï¼›</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;Sayonara-MacBook-Pro:~ liudongmeng$ xattr -l</span><br><span class="line">&gt;Sayonara-MacBook-Pro:S1 liudongmeng$ xattr -l 1_1310389850k0Hh.zip</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>3ã€ç„¶åï¼Œç¬¬ä¸€è¡Œä¼šæœ‰ com.apple.FinderInfo è¿™ä¸²å­—ç¬¦ã€‚å¤åˆ¶è¿™ä¸²å­—ç¬¦ï¼Œå›è½¦</p><p>ä¾‹å¦‚:</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&gt;Sayonara-MacBook-Pro:S1 liudongmeng$ xattr -l 1_1310389850k0Hh.zip</span><br><span class="line">&gt;com.apple.FinderInfo:</span><br><span class="line">&gt;00000000  62 72 6F 6B 4D 41 43 53 00 00 00 00 00 00 00 00  |brokMACS........|</span><br><span class="line">&gt;00000010  00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00  |................|</span><br><span class="line">&gt;00000020</span><br><span class="line">&gt;com.apple.metadata:kMDItemWhereFroms:</span><br><span class="line">&gt;00000000  62 70 6C 69 73 74 30 30 A2 01 02 5F 10 45 68 74  |bplist00..._.Eht|</span><br><span class="line">&gt;00000010  74 70 3A 2F 2F 72 65 6E 72 65 6E 2E 6D 61 6F 79  |tp://renren.maoy|</span><br><span class="line">&gt;00000020  75 6E 2E 74 76 2F 66 74 70 2F 61 74 74 61 63 68  |un.tv/ftp/attach|</span><br><span class="line">&gt;00000030  6D 65 6E 74 2F 32 30 31 31 30 37 2F 31 31 2F 31  |ment/201107/11/1|</span><br><span class="line">&gt;00000040  5F 31 33 31 30 33 38 39 38 35 30 6B 30 48 68 2E  |_1310389850k0Hh.|</span><br><span class="line">&gt;00000050  7A 69 70 5F 10 1A 68 74 74 70 3A 2F 2F 7A 6D 7A  |zip_..http://zmz|</span><br><span class="line">&gt;00000060  30 30 31 2E 63 6F 6D 2F 73 2F 4B 64 57 39 37 33  |001.com/s/KdW973|</span><br><span class="line">&gt;00000070  08 0B 53 00 00 00 00 00 00 01 01 00 00 00 00 00  |..S.............|</span><br><span class="line">&gt;00000080  00 00 03 00 00 00 00 00 00 00 00 00 00 00 00 00  |................|</span><br><span class="line">&gt;00000090  00 00 70                                         |..p|</span><br><span class="line">&gt;00000093</span><br><span class="line">&gt;com.apple.quarantine: 0081;5a6c2976;Chrome;8EF54D09-8C0A-4E6F-9BE0-15C8A1B945A9</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><blockquote><p>4ã€æ¥ä¸‹æ¥ï¼Œè¾“å…¥æ–°çš„å‘½ä»¤ xattr -d com.apple.FinderInfo å†æŠŠé—®é¢˜æ–‡ä»¶æ‹–è¿›å»ï¼Œé—®é¢˜å°±è§£å†³äº†</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;Sayonara-MacBook-Pro:S1 liudongmeng$ xattr -d com.apple.FinderInfo 1_1310389850k0Hh.zip</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></blockquote><h1 id="å¿«æ·é”®"><a href="#å¿«æ·é”®" class="headerlink" title="å¿«æ·é”®"></a>å¿«æ·é”®</h1><p>å…ˆç©ºç€,è¿™ä¸ªä¸œè¥¿å¸¸ç”¨çš„ç”¨å¤šäº†å°±è®°å¾—äº†</p><h1 id="è½¯ä»¶"><a href="#è½¯ä»¶" class="headerlink" title="è½¯ä»¶"></a>è½¯ä»¶</h1><p>[Awesome Mac][Awesome Mac]çœ‹èµ·æ¥ä¸é”™,æ…¢æ…¢æ‹‰<br>[Awesome Mac]: <a href="https://github.com/jaywcjlove/awesome-mac" target="_blank" rel="noopener">https://github.com/jaywcjlove/awesome-mac</a> â€œAwesome Macâ€<br>[å…³äºâ€œxx.xxå·²è¢«OS Xä½¿ç”¨ï¼Œæ— æ³•æ‰“å¼€â€çš„é—®é¢˜]: <a href="https://www.cnblogs.com/xiu619544553/p/5270200.html" target="_blank" rel="noopener">https://www.cnblogs.com/xiu619544553/p/5270200.html</a> â€œå…³äºâ€œxx.xxå·²è¢«OS Xä½¿ç”¨ï¼Œæ— æ³•æ‰“å¼€â€çš„é—®é¢˜â€</p>]]></content>
      
      <categories>
          
          <category> ç¬”è®° </category>
          
          <category> éšä¾¿è®°ç‚¹ä»€ä¹ˆ </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>robot-framework+selenium</title>
      <link href="/2017/03/09/robot-framework-selenium/"/>
      <url>/2017/03/09/robot-framework-selenium/</url>
      <content type="html"><![CDATA[<p>ç”¨seleniumå†™äº†ç‚¹ä¸œè¥¿ï¼Œçœ‹åˆ°äº†robot-frameworkè¿™ä¹ˆä¸ªä¸œè¥¿ï¼Œæ„Ÿè§‰è¿˜æ˜¯æœ‰ç‚¹ç”¨çš„ï¼Œè™½ç„¶ä¹Ÿæ²¡æƒ³åšçš„å¤ªæ·±å…¥ï¼Œä½†æ˜¯è¿˜æ˜¯æƒ³æ­ä¸€ä¸‹ã€‚<br>ç»“æœæ²¡æœ‰æ­èµ·æ¥ï¼Œå…¶å®å‡†å¤‡åšè¿™ä»¶äº‹æƒ…çš„åŸå› ï¼Œå’Œæœ€ç»ˆè‰è‰æ”¾å¼ƒçš„åŸå› æ˜¯åŒä¸€ä¸ªï¼Œå‘µå‘µã€‚<br><a id="more"></a></p><h2 id="å®‰è£…brew"><a href="#å®‰è£…brew" class="headerlink" title="å®‰è£…brew"></a>å®‰è£…brew</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -LsSf http://github.com/mxcl/homebrew/tarball/master | sudo tar xvz -C/usr/<span class="built_in">local</span> --strip 1</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…wxpython"><a href="#å®‰è£…wxpython" class="headerlink" title="å®‰è£…wxpython"></a>å®‰è£…wxpython</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew install wxpython</span><br><span class="line">brew info wxpython</span><br></pre></td></tr></table></figure><h2 id="å®‰è£…phantomJS"><a href="#å®‰è£…phantomJS" class="headerlink" title="å®‰è£…phantomJS"></a>å®‰è£…phantomJS</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install selenium</span><br></pre></td></tr></table></figure>]]></content>
      
      <categories>
          
          <category> ç¬”è®° </category>
          
          <category> selenium </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>OpenTSDBçš„å®‰è£…éƒ¨ç½²åŠç®€å•ä½¿ç”¨</title>
      <link href="/2017/01/28/OpenTSDB%E7%9A%84%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E5%8F%8A%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"/>
      <url>/2017/01/28/OpenTSDB%E7%9A%84%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2%E5%8F%8A%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/</url>
      <content type="html"><![CDATA[<p>éƒ¨ç½²æµç¨‹ï¼Œå…¶å®éƒ¨ç½²ä¸œè¥¿å¤§éƒ½ä¸éš¾ï¼Œå‘µå‘µã€‚<br><a id="more"></a></p><h1 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h1><p>é¦–å…ˆçœ‹å®˜æ–¹æ–‡æ¡£ï¼Œéœ€è¦linuxç³»ç»Ÿ+Java Runtime+HBase+GnuPlot<br>linuxç³»ç»Ÿä¸è¯´äº†ï¼Œjavaè¿è¡Œæ—¶æ˜¯å› ä¸ºç¨‹åºæ˜¯ç”¨javaç¼–å†™çš„ï¼ŒHBaseæ˜¯æœ€ç»ˆçš„åº•å±‚å­˜å‚¨ç³»ç»Ÿã€‚GnuPlotå…¶å®ä¸è£…ä¹Ÿå¯ä»¥ï¼Œåªæ˜¯webç«¯ç»˜å›¾çš„æ—¶å€™è¦è°ƒç”¨ï¼Œæ²¡æœ‰ä¸å½±å“åŸºç¡€åŠŸèƒ½<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Runtime Requirements</span><br><span class="line">To actually run OpenTSDB, you&apos;ll need to meet the following:</span><br><span class="line"></span><br><span class="line">A Linux system (or Windows with manual building)</span><br><span class="line">Java Runtime Environment 1.6 or later</span><br><span class="line">HBase 0.92 or later</span><br><span class="line">GnuPlot 4.2 or later</span><br></pre></td></tr></table></figure></p><p>ä¹‹å‰å®‰è£…Hadoopçš„æ—¶å€™å·²ç»å®‰è£…äº†jdkï¼Œè®¾ç½®äº†JAVA_HOMEï¼Œæ‰€ä»¥è¿™é‡Œä»hbaseå¼€å§‹</p><h2 id="å®‰è£…HBase"><a href="#å®‰è£…HBase" class="headerlink" title="å®‰è£…HBase"></a>å®‰è£…HBase</h2><p>é¦–å…ˆ<a href="http://hbase.apache.org/" title="hbase.apache.org" target="_blank" rel="noopener">å®˜ç½‘</a>ä¸‹è½½ç¨‹åºåŒ…<code>hbase-1.2.4-bin.tar.gz</code>å’Œmd5æ ¡éªŒæ–‡ä»¶<code>hbase-1.2.4-bin.tar.gz.mds</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> ssh hadoop@192.168.2.128</span><br><span class="line">wget https://mirrors.tuna.tsinghua.edu.cn/apache/hbase/stable/hbase-1.2.4-bin.tar.gz</span><br><span class="line">wget https://mirrors.tuna.tsinghua.edu.cn/apache/hbase/stable/hbase-1.2.4-bin.tar.gz.mds</span><br><span class="line">md5sum hbase-1.2.4-bin.tar.gz | tr <span class="string">'a-z'</span> <span class="string">'A-Z'</span> <span class="comment">#æŸ¥çœ‹æ–‡ä»¶çš„md5å€¼ï¼Œæ£€æŸ¥æ–‡ä»¶æ˜¯å¦å®Œæ•´</span></span><br></pre></td></tr></table></figure></p><p>ç„¶åè§£å‹åˆ°<code>/usr/local/</code>è·¯å¾„<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf hbase-1.2.4-bin.tar.gz</span><br><span class="line">su</span><br><span class="line">mv hbase-1.2.4 /usr/<span class="built_in">local</span>/hbase</span><br></pre></td></tr></table></figure></p><p>åˆ‡æ¢åˆ°ç›®å½•ï¼Œä¿®æ”¹<code>conf/hbase-site.xml</code><br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.rootdir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///usr/local/hbase<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--value&gt;hdfs://192.168.2.128:9000/user/hadoop/hbase&lt;/value--&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>hbase.zookeeper.property.dataDir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>/usr/local/zookeeper<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>ä¿®æ”¹ç¯å¢ƒå˜é‡<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bashrc</span><br><span class="line"><span class="variable">$HBASE_HOME</span>=/usr/<span class="built_in">local</span>/hbase</span><br></pre></td></tr></table></figure></p><p>å¯åŠ¨<code>start-hbase.sh</code>,æ‰“å¼€<a href="http://192.168.2.128:16010/" target="_blank" rel="noopener">http://192.168.2.128:16010/</a> æŸ¥çœ‹å¯åŠ¨æ˜¯å¦æˆåŠŸã€‚èƒ½å¤Ÿæ‰“å¼€webé¡µé¢è¯´æ˜å¯åŠ¨æˆåŠŸï¼Œæš‚æ—¶åˆ°æ­¤ä¸ºæ­¢<br>zookeeperè¦é€šè¿‡hbaseå¯åŠ¨ï¼Œå¦‚æœæ‰‹åŠ¨æ‰“å¼€äº†hbaseåˆ™ä¼šæŠ¥é”™</p><hr><h2 id="å®‰è£…zookeeper"><a href="#å®‰è£…zookeeper" class="headerlink" title="å®‰è£…zookeeper"></a>å®‰è£…zookeeper</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget https://mirrors.tuna.tsinghua.edu.cn/apache/zookeeper/stable/zookeeper-3.4.9.tar.gz</span><br><span class="line">tar -zxvf zookeeper-3.4.9.tar.gz</span><br><span class="line">mv zookeeper-3.4.9 /usr/local/zookeeper</span><br></pre></td></tr></table></figure><p>åˆ›å»ºé…ç½®æ–‡ä»¶<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp zoo_sample.cfg zoo.cfg</span><br></pre></td></tr></table></figure></p><p>å¯åŠ¨æœåŠ¡<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./bin/zkServer.sh start <span class="comment">#å¯åŠ¨æœåŠ¡</span></span><br><span class="line">./bin/zkServer.sh stop <span class="comment">#åœæ­¢æœåŠ¡</span></span><br></pre></td></tr></table></figure></p><p>ä¿®æ”¹ç¯å¢ƒå˜é‡<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bashrc</span><br><span class="line"><span class="variable">$ZK_HOME</span>=/usr/<span class="built_in">local</span>/zookeeper</span><br></pre></td></tr></table></figure></p>]]></content>
      
      <categories>
          
          <category> ç¬”è®° </category>
          
          <category> OpenTSDB </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenTSDB </tag>
            
            <tag> HBase </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>ä»å¤´å¼€å§‹æ­å»ºhadoopç¯å¢ƒ</title>
      <link href="/2017/01/27/%E4%BB%8E%E5%A4%B4%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BAhadoop%E7%8E%AF%E5%A2%83/"/>
      <url>/2017/01/27/%E4%BB%8E%E5%A4%B4%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BAhadoop%E7%8E%AF%E5%A2%83/</url>
      <content type="html"><![CDATA[<p>æ”¾å‡åœ¨å®¶æ²¡ä»€ä¹ˆäº‹æƒ…ï¼Œä»å¤´æ•´ç†ä¸€ä¸‹ä¹‹å‰æ­çš„ç¯å¢ƒï¼Œæœ‰äº›å½“æ—¶çœ‹èµ·æ¥ä¼¼æ˜¯è€Œéçš„ä¸œè¥¿ç°åœ¨çœ‹èµ·æ¥å°±æ˜ç¡®äº†å¾ˆå¤šï¼Œä¸ºäº†éƒ¨è½â€¦â€¦<br><a id="more"></a></p><h1 id="é¦–å…ˆå®‰è£…serverç‰ˆæœ¬çš„ubuntuè™šæ‹Ÿæœº"><a href="#é¦–å…ˆå®‰è£…serverç‰ˆæœ¬çš„ubuntuè™šæ‹Ÿæœº" class="headerlink" title="é¦–å…ˆå®‰è£…serverç‰ˆæœ¬çš„ubuntuè™šæ‹Ÿæœº"></a>é¦–å…ˆå®‰è£…serverç‰ˆæœ¬çš„ubuntuè™šæ‹Ÿæœº</h1><p>å› ä¸ºæ˜¯è£…ä½œè™šæ‹Ÿæœºç”¨ï¼Œæ‰€ä»¥è¦å°½å¯èƒ½çš„èŠ‚çœèµ„æºï¼Œå›¾å½¢ç•Œé¢ä»€ä¹ˆçš„å°±ä¸è¦äº†ï¼Œè¿™ä¸€æ­¥æˆ‘ä¹‹å‰å·²ç»åšå¥½äº†ï¼Œä¹Ÿæ¯”è¾ƒç®€å•ï¼Œæš‚æ—¶ä¸å†™</p><h1 id="ç›¸å…³çš„ç¯å¢ƒ"><a href="#ç›¸å…³çš„ç¯å¢ƒ" class="headerlink" title="ç›¸å…³çš„ç¯å¢ƒ"></a>ç›¸å…³çš„ç¯å¢ƒ</h1><p><a href="http://www.powerxing.com/install-hadoop/" title="Hadoopå®‰è£…æ•™ç¨‹_å•æœº/ä¼ªåˆ†å¸ƒå¼é…ç½®_Hadoop2.6.0/Ubuntu14.04" target="_blank" rel="noopener">å‚è€ƒæ–‡ç« </a></p><h2 id="openssh"><a href="#openssh" class="headerlink" title="openssh"></a>openssh</h2><p>ubuntué»˜è®¤å·²ç»è£…å¥½äº†openssh-serverï¼Œæ²¡æœ‰è£…çš„è¯<code>sudo apt-get install openssh-server</code>å°±å¯ä»¥äº†<br>ç„¶åæ˜¯é…ç½®</p><h3 id="è™šæ‹Ÿæœºæ”¹ä¸ºæ¡¥æ¥"><a href="#è™šæ‹Ÿæœºæ”¹ä¸ºæ¡¥æ¥" class="headerlink" title="è™šæ‹Ÿæœºæ”¹ä¸ºæ¡¥æ¥"></a>è™šæ‹Ÿæœºæ”¹ä¸ºæ¡¥æ¥</h3><p><img src="Bridge.png" alt="Bridge"><br>è¾“å…¥<code>ifconfig</code>æŸ¥çœ‹è™šæ‹Ÿæœºçš„ip</p><h3 id="æµ‹è¯•è¿æ¥"><a href="#æµ‹è¯•è¿æ¥" class="headerlink" title="æµ‹è¯•è¿æ¥"></a>æµ‹è¯•è¿æ¥</h3><p><code>ssh user@xxx.xxx.xxx.xxx</code>,æ ¹æ®æç¤ºè¿æ¥å³å¯</p><h2 id="åˆ›å»ºhadoopç”¨æˆ·"><a href="#åˆ›å»ºhadoopç”¨æˆ·" class="headerlink" title="åˆ›å»ºhadoopç”¨æˆ·"></a>åˆ›å»ºhadoopç”¨æˆ·</h2><p>åˆ›å»ºç”¨æˆ·<br><code>sudo useradd -m hadoop -s /bin/sh</code><br>ä¿®æ”¹å¯†ç <br><code>sudo passwd hadoop</code><br>å°†ç”¨æˆ·æ·»åŠ è‡³ç®¡ç†å‘˜<br><code>sudo adduser hadoop sudo</code><br>åˆå§‹åŒ–rootç”¨æˆ·å¯†ç (ç”¨æˆ·éœ€è¦å…·å¤‡ç®¡ç†å‘˜æƒé™)<br><code>sudo passwd</code><br>åœ¨æœ¬åœ°ç”Ÿæˆssh-keygen<br><code>ssh-keygen</code><br>å°†keygenä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œä¹‹åå°±å¯ä»¥ç›´æ¥sshå‘½ä»¤ç™»é™†è€Œä¸ç”¨è¾“å…¥å¯†ç äº†<br><code>ssh-copy-id user@xxx.xxx.xxx.xxx</code></p><h2 id="JDK"><a href="#JDK" class="headerlink" title="JDK"></a>JDK</h2><p>è¯•äº†ä¸€ä¸‹ï¼Œ1.7ç‰ˆæœ¬çš„openjdkä¸èƒ½è·‘ï¼Œè£…1.8çš„<br><code>sudo apt-get install openjdk-8-jre openjdk-8-jdk</code><br>å®‰è£…å®Œæˆåè¾“å…¥<code>java -version</code>æŸ¥çœ‹ç‰ˆæœ¬<br>è¾“å…¥<code>dpkg -L openjdk-7-jdk | grep &#39;/bin/javac&#39;</code>æŸ¥çœ‹å®‰è£…è·¯å¾„<br>è¿™é‡Œä¸çŸ¥é“ä¸ºå•¥æ²¡è¾“å‡ºï¼Œç›´æ¥æŸ¥çœ‹<code>dpkg -L openjdk-8-jdk</code></p><h2 id="JAVA-HOME"><a href="#JAVA-HOME" class="headerlink" title="JAVA_HOME"></a>JAVA_HOME</h2><p><code>vim ~/.shrc</code>æ·»åŠ <code>export JAVA_HOME=/usr/lib/jvm/java-8-openjdk-amd64/</code><br>ä¹‹åæ‰§è¡Œ<code>source ~/.shrc</code>ä½¿ä¿®æ”¹ç”Ÿæ•ˆ<br>è¾“å…¥<code>$JAVA_HOME/bin/java -version</code>æŸ¥çœ‹jdkç‰ˆæœ¬ï¼Œå¦‚æœèƒ½æ­£å¸¸è¾“å‡ºï¼Œåˆ™è¯´æ˜ç¯å¢ƒå˜é‡é…ç½®æ­£ç¡®</p><h1 id="å®‰è£…hadoop"><a href="#å®‰è£…hadoop" class="headerlink" title="å®‰è£…hadoop"></a>å®‰è£…hadoop</h1><h2 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h2><p>åˆ°<a href="http://hadoop.apache.org/releases.html" title="hadoop.apache.org" target="_blank" rel="noopener">å®˜ç½‘</a>ä¸‹è½½ååˆ©ç”¨scpå‘½ä»¤ä¸Šä¼ åˆ°æœåŠ¡å™¨<br><code>scp hadoop-2.7.3.tar.gz hadoop@192.168.2.128: ~/</code><br>æ ¡éªŒmd5<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cat ~/ä¸‹è½½/hadoop-2.6.0.tar.gz.mds | grep <span class="string">'MD5'</span> <span class="comment"># åˆ—å‡ºmd5æ£€éªŒå€¼</span></span><br><span class="line"><span class="comment"># head -n 6 ~/ä¸‹è½½/hadoop-2.7.1.tar.gz.mds # 2.7.1ç‰ˆæœ¬æ ¼å¼å˜äº†ï¼Œå¯ä»¥ç”¨è¿™ç§æ–¹å¼è¾“å‡º</span></span><br><span class="line">md5sum ~/ä¸‹è½½/hadoop-2.6.0.tar.gz | tr <span class="string">"a-z"</span> <span class="string">"A-Z"</span> <span class="comment"># è®¡ç®—md5å€¼ï¼Œå¹¶è½¬åŒ–ä¸ºå¤§å†™ï¼Œæ–¹ä¾¿æ¯”è¾ƒ</span></span><br></pre></td></tr></table></figure></p><p>è§£å‹<code>tar -zxvf hadoop-2.7.3.tar.gz</code><br>ç§»åŠ¨åˆ°/usr/localè·¯å¾„<code>mv hadoop-2.7.3 /usr/local/hadoop</code><br>æŸ¥çœ‹hadoopç‰ˆæœ¬<code>./bin/hadoop version</code><br>æŸ¥çœ‹å®˜æ–¹ä¾‹å­<code>./bin/hadoop jar ./share/hadoop/mapreduce/hadoop-mapreduce-examples-2.7.3.jar</code><br>wordcount<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/<span class="built_in">local</span>/hadoop</span><br><span class="line">mkdir ./input</span><br><span class="line">cp ./etc/hadoop/*.xml ./input   <span class="comment"># å°†é…ç½®æ–‡ä»¶ä½œä¸ºè¾“å…¥æ–‡ä»¶</span></span><br><span class="line">./bin/hadoop jar ./share/hadoop/mapreduce/hadoop-mapreduce-examples-*.jar grep ./input ./output <span class="string">'dfs[a-z.]+'</span></span><br><span class="line">cat ./output/*          <span class="comment"># æŸ¥çœ‹è¿è¡Œç»“æœ</span></span><br></pre></td></tr></table></figure></p><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><p>ä¿®æ”¹é…ç½®æ–‡ä»¶<code>gedit ./etc/hadoop/core-site.xml</code><br>ä¿®æ”¹ä¸º<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:/usr/local/hadoop/tmp<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">description</span>&gt;</span>Abase for other temporary directories.<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://192.168.2.128:9000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>åŒæ ·çš„ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ hdfs-site.xml<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:/usr/local/hadoop/tmp/dfs/name<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.datanode.data.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">value</span>&gt;</span>file:/usr/local/hadoop/tmp/dfs/data<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>é…ç½®å®Œæˆåï¼Œæ‰§è¡Œ NameNode çš„æ ¼å¼åŒ–:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/hdfs namenode -format</span><br></pre></td></tr></table></figure></p><p>å¯åŠ¨è¿›ç¨‹<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./sbin/start-dfs.sh</span><br></pre></td></tr></table></figure></p><p>HADOOPç¯å¢ƒå˜é‡é…ç½®(éå¿…éœ€)<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> HADOOP_HOME=/usr/<span class="built_in">local</span>/hadoop</span><br><span class="line"><span class="built_in">export</span> HADOOP_COMMON_LIB_NATIVE_DIR=<span class="variable">$HADOOP_HOME</span>/lib/native</span><br></pre></td></tr></table></figure></p><p>æ— æ³•å¯åŠ¨çš„è§£å†³åŠæ³•<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># é’ˆå¯¹ DataNode æ²¡æ³•å¯åŠ¨çš„è§£å†³æ–¹æ³•</span></span><br><span class="line">./sbin/stop-dfs.sh   <span class="comment"># å…³é—­</span></span><br><span class="line">rm -r ./tmp     <span class="comment"># åˆ é™¤ tmp æ–‡ä»¶ï¼Œæ³¨æ„è¿™ä¼šåˆ é™¤ HDFS ä¸­åŸæœ‰çš„æ‰€æœ‰æ•°æ®</span></span><br><span class="line">./bin/hdfs namenode -format   <span class="comment"># é‡æ–°æ ¼å¼åŒ– NameNode</span></span><br><span class="line">./sbin/start-dfs.sh  <span class="comment"># é‡å¯</span></span><br></pre></td></tr></table></figure></p><p>æˆåŠŸå¯åŠ¨åï¼Œå¯ä»¥è®¿é—® Web ç•Œé¢ <a href="http://192.168.2.128:50070" target="_blank" rel="noopener">http://192.168.2.128:50070</a> æŸ¥çœ‹ NameNode å’Œ Datanode ä¿¡æ¯ï¼Œè¿˜å¯ä»¥åœ¨çº¿æŸ¥çœ‹ HDFS ä¸­çš„æ–‡ä»¶ã€‚</p><h2 id="è¿è¡Œä¼ªåˆ†å¸ƒå¼å®ä¾‹"><a href="#è¿è¡Œä¼ªåˆ†å¸ƒå¼å®ä¾‹" class="headerlink" title="è¿è¡Œä¼ªåˆ†å¸ƒå¼å®ä¾‹"></a>è¿è¡Œä¼ªåˆ†å¸ƒå¼å®ä¾‹</h2><p>ä¸Šé¢çš„å•æœºæ¨¡å¼ï¼Œgrep ä¾‹å­è¯»å–çš„æ˜¯æœ¬åœ°æ•°æ®ï¼Œä¼ªåˆ†å¸ƒå¼è¯»å–çš„åˆ™æ˜¯ HDFS ä¸Šçš„æ•°æ®ã€‚è¦ä½¿ç”¨ HDFSï¼Œé¦–å…ˆéœ€è¦åœ¨ HDFS ä¸­åˆ›å»ºç”¨æˆ·ç›®å½•ï¼š<br><code>./bin/hdfs dfs -mkdir -p /user/hadoop</code><br>æ¥ç€å°† ./etc/hadoop ä¸­çš„ xml æ–‡ä»¶ä½œä¸ºè¾“å…¥æ–‡ä»¶å¤åˆ¶åˆ°åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œå³å°† /usr/local/hadoop/etc/hadoop å¤åˆ¶åˆ°åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿä¸­çš„ /user/hadoop/input ä¸­ã€‚æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ hadoop ç”¨æˆ·ï¼Œå¹¶ä¸”å·²åˆ›å»ºç›¸åº”çš„ç”¨æˆ·ç›®å½• /user/hadoop ï¼Œå› æ­¤åœ¨å‘½ä»¤ä¸­å°±å¯ä»¥ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¦‚ inputï¼Œå…¶å¯¹åº”çš„ç»å¯¹è·¯å¾„å°±æ˜¯ /user/hadoop/input:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./bin/hdfs dfs -mkdir input</span><br><span class="line">./bin/hdfs dfs -put ./etc/hadoop/*.xml input</span><br></pre></td></tr></table></figure></p><p>å¤åˆ¶å®Œæˆåï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹å‘½ä»¤æŸ¥çœ‹æ–‡ä»¶åˆ—è¡¨ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/hdfs dfs -ls input</span><br></pre></td></tr></table></figure></p><p>ä¼ªåˆ†å¸ƒå¼è¿è¡Œ MapReduce ä½œä¸šçš„æ–¹å¼è·Ÿå•æœºæ¨¡å¼ç›¸åŒï¼ŒåŒºåˆ«åœ¨äºä¼ªåˆ†å¸ƒå¼è¯»å–çš„æ˜¯HDFSä¸­çš„æ–‡ä»¶ï¼ˆå¯ä»¥å°†å•æœºæ­¥éª¤ä¸­åˆ›å»ºçš„æœ¬åœ° input æ–‡ä»¶å¤¹ï¼Œè¾“å‡ºç»“æœ output æ–‡ä»¶å¤¹éƒ½åˆ æ‰æ¥éªŒè¯è¿™ä¸€ç‚¹ï¼‰ã€‚<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/hadoop jar ./share/hadoop/mapreduce/hadoop-mapreduce-examples-*.jar grep input output <span class="string">'dfs[a-z.]+'</span></span><br></pre></td></tr></table></figure></p><p>æŸ¥çœ‹è¿è¡Œç»“æœçš„å‘½ä»¤ï¼ˆæŸ¥çœ‹çš„æ˜¯ä½äº HDFS ä¸­çš„è¾“å‡ºç»“æœï¼‰ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/hdfs dfs -cat output/*</span><br></pre></td></tr></table></figure></p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†è¿è¡Œç»“æœå–å›åˆ°æœ¬åœ°ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rm -r ./output    <span class="comment"># å…ˆåˆ é™¤æœ¬åœ°çš„ output æ–‡ä»¶å¤¹ï¼ˆå¦‚æœå­˜åœ¨ï¼‰</span></span><br><span class="line">./bin/hdfs dfs -get output ./output     <span class="comment"># å°† HDFS ä¸Šçš„ output æ–‡ä»¶å¤¹æ‹·è´åˆ°æœ¬æœº</span></span><br><span class="line">cat ./output/*</span><br></pre></td></tr></table></figure></p><p>Hadoop è¿è¡Œç¨‹åºæ—¶ï¼Œè¾“å‡ºç›®å½•ä¸èƒ½å­˜åœ¨ï¼Œå¦åˆ™ä¼šæç¤ºé”™è¯¯ â€œorg.apache.hadoop.mapred.FileAlreadyExistsException: Output directory hdfs://192.168.2.128:9000/user/hadoop/output already existsâ€ ï¼Œå› æ­¤è‹¥è¦å†æ¬¡æ‰§è¡Œï¼Œéœ€è¦æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åˆ é™¤ output æ–‡ä»¶å¤¹:<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/hdfs dfs -rm -r output    <span class="comment"># åˆ é™¤ output æ–‡ä»¶å¤¹</span></span><br></pre></td></tr></table></figure></p><h3 id="è¿è¡Œç¨‹åºæ—¶ï¼Œè¾“å‡ºç›®å½•ä¸èƒ½å­˜åœ¨"><a href="#è¿è¡Œç¨‹åºæ—¶ï¼Œè¾“å‡ºç›®å½•ä¸èƒ½å­˜åœ¨" class="headerlink" title="è¿è¡Œç¨‹åºæ—¶ï¼Œè¾“å‡ºç›®å½•ä¸èƒ½å­˜åœ¨"></a>è¿è¡Œç¨‹åºæ—¶ï¼Œè¾“å‡ºç›®å½•ä¸èƒ½å­˜åœ¨</h3><p>è¿è¡Œ Hadoop ç¨‹åºæ—¶ï¼Œä¸ºäº†é˜²æ­¢è¦†ç›–ç»“æœï¼Œç¨‹åºæŒ‡å®šçš„è¾“å‡ºç›®å½•ï¼ˆå¦‚ outputï¼‰ä¸èƒ½å­˜åœ¨ï¼Œå¦åˆ™ä¼šæç¤ºé”™è¯¯ï¼Œå› æ­¤è¿è¡Œå‰éœ€è¦å…ˆåˆ é™¤è¾“å‡ºç›®å½•ã€‚åœ¨å®é™…å¼€å‘åº”ç”¨ç¨‹åºæ—¶ï¼Œå¯è€ƒè™‘åœ¨ç¨‹åºä¸­åŠ ä¸Šå¦‚ä¸‹ä»£ç ï¼Œèƒ½åœ¨æ¯æ¬¡è¿è¡Œæ—¶è‡ªåŠ¨åˆ é™¤è¾“å‡ºç›®å½•ï¼Œé¿å…ç¹ççš„å‘½ä»¤è¡Œæ“ä½œï¼š<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Configuration conf = <span class="keyword">new</span> Configuration();</span><br><span class="line">Job job = <span class="keyword">new</span> Job(conf);</span><br><span class="line"></span><br><span class="line"><span class="comment">/* åˆ é™¤è¾“å‡ºç›®å½• */</span></span><br><span class="line">Path outputPath = <span class="keyword">new</span> Path(args[<span class="number">1</span>]);</span><br><span class="line">outputPath.getFileSystem(conf).delete(outputPath, <span class="keyword">true</span>);</span><br></pre></td></tr></table></figure></p><p>è‹¥è¦å…³é—­ Hadoopï¼Œåˆ™è¿è¡Œ<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./sbin/stop-dfs.sh</span><br></pre></td></tr></table></figure></p><h2 id="å¯åŠ¨YARN"><a href="#å¯åŠ¨YARN" class="headerlink" title="å¯åŠ¨YARN"></a>å¯åŠ¨YARN</h2><p>ä¼ªåˆ†å¸ƒå¼ä¸å¯åŠ¨ YARN ä¹Ÿå¯ä»¥ï¼Œä¸€èˆ¬ä¸ä¼šå½±å“ç¨‹åºæ‰§è¡Œï¼‰</p><p>æœ‰çš„è¯»è€…å¯èƒ½ä¼šç–‘æƒ‘ï¼Œæ€ä¹ˆå¯åŠ¨ Hadoop åï¼Œè§ä¸åˆ°ä¹¦ä¸Šæ‰€è¯´çš„ JobTracker å’Œ TaskTrackerï¼Œè¿™æ˜¯å› ä¸ºæ–°ç‰ˆçš„ Hadoop ä½¿ç”¨äº†æ–°çš„ MapReduce æ¡†æ¶ï¼ˆMapReduce V2ï¼Œä¹Ÿç§°ä¸º YARNï¼ŒYet Another Resource Negotiatorï¼‰ã€‚</p><p>YARN æ˜¯ä» MapReduce ä¸­åˆ†ç¦»å‡ºæ¥çš„ï¼Œè´Ÿè´£èµ„æºç®¡ç†ä¸ä»»åŠ¡è°ƒåº¦ã€‚YARN è¿è¡Œäº MapReduce ä¹‹ä¸Šï¼Œæä¾›äº†é«˜å¯ç”¨æ€§ã€é«˜æ‰©å±•æ€§ï¼ŒYARN çš„æ›´å¤šä»‹ç»åœ¨æ­¤ä¸å±•å¼€ï¼Œæœ‰å…´è¶£çš„å¯æŸ¥é˜…ç›¸å…³èµ„æ–™ã€‚</p><p>ä¸Šè¿°é€šè¿‡ ./sbin/start-dfs.sh å¯åŠ¨ Hadoopï¼Œä»…ä»…æ˜¯å¯åŠ¨äº† MapReduce ç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥å¯åŠ¨ YARN ï¼Œè®© YARN æ¥è´Ÿè´£èµ„æºç®¡ç†ä¸ä»»åŠ¡è°ƒåº¦ã€‚</p><p>é¦–å…ˆä¿®æ”¹é…ç½®æ–‡ä»¶ mapred-site.xmlï¼Œè¿™è¾¹éœ€è¦å…ˆè¿›è¡Œé‡å‘½åï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv ./etc/hadoop/mapred-site.xml.template ./etc/hadoop/mapred-site.xml</span><br></pre></td></tr></table></figure></p><p>ç„¶åå†è¿›è¡Œç¼–è¾‘ï¼ŒåŒæ ·ä½¿ç”¨ gedit ç¼–è¾‘ä¼šæ¯”è¾ƒæ–¹ä¾¿äº› gedit ./etc/hadoop/mapred-site.xml ï¼š<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>æ¥ç€ä¿®æ”¹é…ç½®æ–‡ä»¶ yarn-site.xmlï¼š<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">             <span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>ç„¶åå°±å¯ä»¥å¯åŠ¨ YARN äº†ï¼ˆéœ€è¦å…ˆæ‰§è¡Œè¿‡ ./sbin/start-dfs.shï¼‰ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./sbin/start-yarn.sh      <span class="comment"># å¯åŠ¨YARN</span></span><br><span class="line">./sbin/mr-jobhistory-daemon.sh start historyserver  <span class="comment"># å¼€å¯å†å²æœåŠ¡å™¨ï¼Œæ‰èƒ½åœ¨Webä¸­æŸ¥çœ‹ä»»åŠ¡è¿è¡Œæƒ…å†µ</span></span><br></pre></td></tr></table></figure></p><p>å¯åŠ¨ YARN ä¹‹åï¼Œè¿è¡Œå®ä¾‹çš„æ–¹æ³•è¿˜æ˜¯ä¸€æ ·çš„ï¼Œä»…ä»…æ˜¯èµ„æºç®¡ç†æ–¹å¼ã€ä»»åŠ¡è°ƒåº¦ä¸åŒã€‚è§‚å¯Ÿæ—¥å¿—ä¿¡æ¯å¯ä»¥å‘ç°ï¼Œä¸å¯ç”¨ YARN æ—¶ï¼Œæ˜¯ â€œmapred.LocalJobRunnerâ€ åœ¨è·‘ä»»åŠ¡ï¼Œå¯ç”¨ YARN ä¹‹åï¼Œæ˜¯ â€œmapred.YARNRunnerâ€ åœ¨è·‘ä»»åŠ¡ã€‚å¯åŠ¨ YARN æœ‰ä¸ªå¥½å¤„æ˜¯å¯ä»¥é€šè¿‡ Web ç•Œé¢æŸ¥çœ‹ä»»åŠ¡çš„è¿è¡Œæƒ…å†µï¼š<a href="http://192.168.2.128:8088/cluster" target="_blank" rel="noopener">http://192.168.2.128:8088/cluster</a><br>ä½† YARN ä¸»è¦æ˜¯ä¸ºé›†ç¾¤æä¾›æ›´å¥½çš„èµ„æºç®¡ç†ä¸ä»»åŠ¡è°ƒåº¦ï¼Œç„¶è€Œè¿™åœ¨å•æœºä¸Šä½“ç°ä¸å‡ºä»·å€¼ï¼Œåè€Œä¼šä½¿ç¨‹åºè·‘å¾—ç¨æ…¢äº›ã€‚å› æ­¤åœ¨å•æœºä¸Šæ˜¯å¦å¼€å¯ YARN å°±çœ‹å®é™…æƒ…å†µäº†ã€‚</p><p><code>å¦‚æœä¸æƒ³å¯åŠ¨ YARNï¼ŒåŠ¡å¿…æŠŠé…ç½®æ–‡ä»¶ mapred-site.xml é‡å‘½åï¼Œæ”¹æˆ mapred-site.xml.templateï¼Œéœ€è¦ç”¨æ—¶æ”¹å›æ¥å°±è¡Œã€‚å¦åˆ™åœ¨è¯¥é…ç½®æ–‡ä»¶å­˜åœ¨ï¼Œè€Œæœªå¼€å¯ YARN çš„æƒ…å†µä¸‹ï¼Œè¿è¡Œç¨‹åºä¼šæç¤º â€œRetrying connect to server: 0.0.0.0/0.0.0.0:8032â€ çš„é”™è¯¯ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä½•è¯¥é…ç½®æ–‡ä»¶åˆå§‹æ–‡ä»¶åä¸º mapred-site.xml.templateã€‚</code><br>å…³é—­YARNçš„è„šæœ¬å¦‚ä¸‹ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./sbin/stop-yarn.sh</span><br><span class="line">./sbin/mr-jobhistory-daemon.sh stop historyserver</span><br></pre></td></tr></table></figure></p>]]></content>
      
      <categories>
          
          <category> ç¬”è®° </category>
          
          <category> hadoop </category>
          
      </categories>
      
      
        <tags>
            
            <tag> linux </tag>
            
            <tag> ubuntu </tag>
            
            <tag> hadoop </tag>
            
            <tag> hdfs </tag>
            
            <tag> yarn </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>flume</title>
      <link href="/2017/01/23/flume/"/>
      <url>/2017/01/23/flume/</url>
      <content type="html"><![CDATA[<p>æœ€è¿‘ä¸Šç­çŠ¶æ€ç‰¹åˆ«ä¸å¥½â€¦â€¦ç£¨ç£¨è¹­è¹­ä¹Ÿç®—æ˜¯æ­äº†ä¸€ä¸‹flume<br>sourceå®éªŒäº†telnetï¼rabbitmqï¼sqlserverï¼mysql<br>channelå°±æ˜¯é»˜è®¤å†…å­˜é…ç½®<br>sinké…çš„æ˜¯kafkaï¼Œæœ¬æ¥æƒ³ç€ä»rabbitmqé‡Œé¢æŠŠæ•°æ®å‘å‡ºæ¥å°±å¯ä»¥æµ‹è¯•æµå¤„ç†äº†ï¼Œå‘ç°ååºåˆ—åŒ–ä¹Ÿæ˜¯ä¸ªé—®é¢˜â€¦â€¦</p><p>å…ˆç•™ä¸ªä½ç½®ï¼Œè¿‡ä¸¤å¤©å›å®¶æ²¡äº‹äº†æ…¢æ…¢å†™å§ï¼Œä¹Ÿæ˜¯åˆšæŠŠæ–°ç”µè„‘ä¸Šæ­äº†å‡ ä¸ªç¯å¢ƒï¼Œå›å»ä»å¤´å¼€å§‹æ•´ç†ä¸€ä¸‹<br><a id="more"></a></p>]]></content>
      
      <categories>
          
          <category> ç¬”è®° </category>
          
          <category> flume </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>mavenæ·˜å®é•œåƒé…ç½®</title>
      <link href="/2017/01/14/maven%E6%B7%98%E5%AE%9D%E9%95%9C%E5%83%8F%E9%85%8D%E7%BD%AE/"/>
      <url>/2017/01/14/maven%E6%B7%98%E5%AE%9D%E9%95%9C%E5%83%8F%E9%85%8D%E7%BD%AE/</url>
      <content type="html"><![CDATA[<p>ä¿®æ”¹<code>settings.xml</code>æ–‡ä»¶ä¸­çš„é•œåƒé…ç½®å³å¯<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span>        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      <categories>
          
          <category> ç¬”è®° </category>
          
          <category> maven </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>SparkStreaming</title>
      <link href="/2017/01/12/SparkStreaming/"/>
      <url>/2017/01/12/SparkStreaming/</url>
      <content type="html"><![CDATA[<p>å…¬å¸æ˜¯æƒ³é€šè¿‡ç±»ä¼¼MySQL-&gt;Yelp-&gt;Kafka-&gt;Spark Streaming-&gt;OpenTSDBçš„ç»“æ„æ­ä¸€å¥—æ¡†æ¶,ç„¶åä¸€æ­¥ä¸€æ­¥æ¥å§<br>æ¯ä¸ªéƒ¨åˆ†å•ç‹¬å®ç°æ¥å£è‚¯å®šæ˜¯æ²¡é—®é¢˜çš„,æ— éå°±æ˜¯Java/Python/WebAPIæˆ–è€…å…¶ä»–æ¥å£å°è£…ä¸€ä¸‹,é—®é¢˜æ˜¯æ€ä¹ˆç”¨æœ€ç®€å•çš„æ–¹æ³•æŠŠè¿™ä¸€å¥—ä¸²èµ·æ¥<br>å•ƒæ–‡æ¡£å•ƒæ–‡æ¡£å•ƒæ–‡æ¡£â€¦<br>linux/java/maven/python/englishæ¯ä¸€é¡¹éƒ½æ˜¯å¼±é¡¹,ç»“æœå¯¹æ–‡æ¡£çš„ç†è§£è¿›åº¦å¾ˆæ…¢â€¦<br>èŠ±äº†ä¸‰å››å¤©æ‰ç”¨å®˜æ–¹çš„exampleæŠŠkafkaçš„æ•°æ®ç›´æ¥æ¥å…¥äº†spark streaming<br>æœ€è¿‘çœ‹çš„ä¸œè¥¿ä¹Ÿæ˜¯å¤ªå¤šå¤ªæ•£,æœ¬èº«è‡ªå·±å…¶å®åªæ˜¯æ ¹æ®æ–‡æ¡£åšäº†ä¸ªæµ‹è¯•,å‘½ä»¤éƒ½è¿˜è®°ä¸ä½â€¦æ•´ç†ä¸€ä¸‹å§<br><a id="more"></a></p><h1 id="ä¸‹è½½å®‰è£…"><a href="#ä¸‹è½½å®‰è£…" class="headerlink" title="ä¸‹è½½å®‰è£…"></a>ä¸‹è½½å®‰è£…</h1><p><a href="http://spark.apache.org/streaming/" title="SparkStreaming" target="_blank" rel="noopener">å®˜æ–¹ç½‘ç«™</a>ä¸‹è½½æœ€æ–°çš„Pre-buildç‰ˆæœ¬ï¼Œè§£å‹å°±å¯ä»¥ç›´æ¥è·‘äº†<br><a href="http://spark.apache.org/downloads.html" title="Download page" target="_blank" rel="noopener">ä¸‹è½½é¡µé¢</a></p><h1 id="æºä»£ç ç¼–è¯‘"><a href="#æºä»£ç ç¼–è¯‘" class="headerlink" title="æºä»£ç ç¼–è¯‘"></a>æºä»£ç ç¼–è¯‘</h1><p>è¿™å°±ä¸å¾—ä¸çœ‹ä¸€ä¸‹mavençš„é—®é¢˜äº†<br>mavenæ ¹æ®é…ç½®è‡ªåŠ¨ä¸‹ä¾èµ–åŒ…çš„åŠŸèƒ½æ˜¯å¾ˆæ–¹ä¾¿ï¼Œç„¶è€ŒGFWé¢å‰éƒ½æ˜¯æµ®äº‘ï¼Œç™¾åº¦ä¹‹åæ‰¾åˆ°äº†<a href="http://mirrors.aliyun.com/" title="æ„Ÿè°¢é©¬äº‘çˆ¸çˆ¸" target="_blank" rel="noopener">æ·˜å®é•œåƒç«™</a><br>ä¿®æ”¹<code>settings.xml</code>æ–‡ä»¶ä¸­çš„é•œåƒ<a href="./mavenæ·˜å®é•œåƒé…ç½®" title="link">é…ç½®</a>å³å¯<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mirrors</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mirror</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">id</span>&gt;</span>alimaven<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">name</span>&gt;</span>aliyun maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">url</span>&gt;</span>http://maven.aliyun.com/nexus/content/groups/public/<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">mirrorOf</span>&gt;</span>central<span class="tag">&lt;/<span class="name">mirrorOf</span>&gt;</span>        </span><br><span class="line">    <span class="tag">&lt;/<span class="name">mirror</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mirrors</span>&gt;</span></span><br></pre></td></tr></table></figure></p><h2 id="ç¼–è¯‘å‘½ä»¤"><a href="#ç¼–è¯‘å‘½ä»¤" class="headerlink" title="ç¼–è¯‘å‘½ä»¤"></a>ç¼–è¯‘å‘½ä»¤</h2><p>ç½‘ä¸Šæœä¸‹æ¥æœ‰ä¸¤ç§ï¼Œç¬¬ä¸€ç§æ˜¯<code>./build/mvn</code><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">build/mvn -Pyarn -Phadoop-2.7 -Dhadoop.version=2.7.0 -DskipTests clean package</span><br></pre></td></tr></table></figure></p><p>ç„¶åä¸€ç§æ˜¯ç”¨è„šæœ¬æŠŠç¼–è¯‘åçš„é¡¹ç›®æ‰“åŒ…å‡ºæ¥<br>ç¬¬ä¸€ç§åšæ³•çœ‹ä¸æ‡‚æ€ä¹ˆç”¨,è¿˜æ˜¯å¤ªå¤šä¸œè¥¿ä¸æ‡‚,å…ˆç”¨èµ·æ¥â€¦â€¦æ‰€ä»¥è¿™é‡Œé‡‡ç”¨ç¬¬äºŒç§</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./make-distribution.sh --tgz --name 2.7.0 -Pyarn -Phadoop-2.7 -Phive</span><br></pre></td></tr></table></figure><p>å…ˆç¼–äº†ä¸€æ¬¡,æç¤ºæœ‰é”™è¯¯,ç”Ÿæˆæ–‡ä»¶<code>spark-[WARNING] The requested profile &quot;hive&quot; could not be activated because it does not exist.-bin-2.7.0.tgz</code>,å¤§æ¦‚æ˜¯hiveæ²¡æœ‰å®‰è£…?å‚æ•°å»æ‰å†ç¼–ä¸€æ¬¡,ç”ŸæˆæˆåŠŸ</p><p>ç„¶åæ ¹æ®å®˜æ–¹çš„<a href="http://spark.apache.org/docs/latest/streaming-programming-guide.html#linking" title="LinkSection" target="_blank" rel="noopener">LinkSection</a>å’Œè‡ªå·±çš„éœ€è¦æ·»åŠ dependency,ç¼–è¯‘å®Œæˆä¹‹åç›¸å…³çš„ä¾èµ–åŒ…ä¹Ÿä¼šæ‰“åœ¨ç”Ÿæˆçš„æ–‡ä»¶é‡Œé¢.<br>å› ä¸ºå…¬å¸æ˜¯è¦æŠŠkafkaçš„æ•°æ®ç›´æ¥æ¥åˆ°spark streamingé‡Œé¢,è¿™é‡Œæˆ‘æ·»åŠ äº†kafkaçš„ä¾èµ–,å…¶å®åæ¥æƒ³æƒ³è‡ªå·±åˆ°<a href="http://search.maven.org/" title="Maven repository" target="_blank" rel="noopener">Maven repository</a>ä¸Šé¢æ‰‹åŠ¨æœåŒ…ä¸‹è½½å°±å¥½äº†â€¦åœ¨è¿™é‡Œæµªè´¹äº†å¾ˆé•¿æ—¶é—´</p><h2 id="æ•°æ®æ¥å…¥ä¾‹å­"><a href="#æ•°æ®æ¥å…¥ä¾‹å­" class="headerlink" title="æ•°æ®æ¥å…¥ä¾‹å­"></a>æ•°æ®æ¥å…¥ä¾‹å­</h2><p>ç®€å•è¯´ä¸€ä¸‹æˆ‘è¿™æ¬¡æ˜¯æ€ä¹ˆåšçš„</p><h3 id="Kafka"><a href="#Kafka" class="headerlink" title="Kafka"></a>Kafka</h3><p>å¯åŠ¨KafkaæœåŠ¡<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup bin/kafka-server-start.sh config/server.properties &amp;</span><br></pre></td></tr></table></figure></p><p>æ–°å»ºåä¸ºtestçš„topic<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-topics.sh --create --zookeeper localhost:2181 --replication-factor 1 --partitions 1 --topic test</span><br></pre></td></tr></table></figure></p><p>å¯åŠ¨kafka producer<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/kafka-console-producer.sh --broker-t localhost:9092 --topic test</span><br></pre></td></tr></table></figure></p><p>åˆ°è¿™é‡Œkafkaè¿™è¾¹åŸºæœ¬éƒ½å¥½äº†</p><h3 id="å¯åŠ¨Spark-Streamingç¨‹åº"><a href="#å¯åŠ¨Spark-Streamingç¨‹åº" class="headerlink" title="å¯åŠ¨Spark Streamingç¨‹åº"></a>å¯åŠ¨Spark Streamingç¨‹åº</h3><p>é¦–å…ˆæŠŠéœ€è¦ç”¨åˆ°çš„kafkaåŒ…æ‹·åˆ°Sparkçš„è·¯å¾„ä¸‹,ç„¶åæ‰¾åˆ°å®˜æ–¹çš„direct_kafka_wordcount.pyæ–‡ä»¶,æˆ–è€…ç›´æ¥è‡ªå·±å†™ä¸€ä¸ª<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Licensed to the Apache Software Foundation (ASF) under one or more</span></span><br><span class="line"><span class="comment"># contributor license agreements.  See the NOTICE file distributed with</span></span><br><span class="line"><span class="comment"># this work for additional information regarding copyright ownership.</span></span><br><span class="line"><span class="comment"># The ASF licenses this file to You under the Apache License, Version 2.0</span></span><br><span class="line"><span class="comment"># (the "License"); you may not use this file except in compliance with</span></span><br><span class="line"><span class="comment"># the License.  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#    http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment"># distributed under the License is distributed on an "AS IS" BASIS,</span></span><br><span class="line"><span class="comment"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment"># See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment"># limitations under the License.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string"> Counts words in UTF8 encoded, '\n' delimited text directly received from Kafka in every 2 seconds.</span></span><br><span class="line"><span class="string"> Usage: direct_kafka_wordcount.py &lt;broker_list&gt; &lt;topic&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> To run this on your local machine, you need to setup Kafka and create a producer first, see</span></span><br><span class="line"><span class="string"> http://kafka.apache.org/documentation.html#quickstart</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"> and then run the example</span></span><br><span class="line"><span class="string">    `$ bin/spark-submit --jars \</span></span><br><span class="line"><span class="string">      external/kafka-assembly/target/scala-*/spark-streaming-kafka-assembly-*.jar \</span></span><br><span class="line"><span class="string">      examples/src/main/python/streaming/direct_kafka_wordcount.py \</span></span><br><span class="line"><span class="string">      localhost:9092 test`</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> print_function</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pyspark <span class="keyword">import</span> SparkContext</span><br><span class="line"><span class="keyword">from</span> pyspark.streaming <span class="keyword">import</span> StreamingContext</span><br><span class="line"><span class="keyword">from</span> pyspark.streaming.kafka <span class="keyword">import</span> KafkaUtils</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    <span class="keyword">if</span> len(sys.argv) != <span class="number">3</span>:</span><br><span class="line">        print(<span class="string">"Usage: direct_kafka_wordcount.py &lt;broker_list&gt; &lt;topic&gt;"</span>, file=sys.stderr)</span><br><span class="line">        exit(<span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line">    sc = SparkContext(appName=<span class="string">"PythonStreamingDirectKafkaWordCount"</span>)</span><br><span class="line">    ssc = StreamingContext(sc, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">    brokers, topic = sys.argv[<span class="number">1</span>:]</span><br><span class="line">    kvs = KafkaUtils.createDirectStream(ssc, [topic], &#123;<span class="string">"metadata.broker.list"</span>: brokers&#125;)</span><br><span class="line">    lines = kvs.map(<span class="keyword">lambda</span> x: x[<span class="number">1</span>])</span><br><span class="line">    counts = lines.flatMap(<span class="keyword">lambda</span> line: line.split(<span class="string">" "</span>)) \</span><br><span class="line">        .map(<span class="keyword">lambda</span> word: (word, <span class="number">1</span>)) \</span><br><span class="line">        .reduceByKey(<span class="keyword">lambda</span> a, b: a+b)</span><br><span class="line">    counts.pprint()</span><br><span class="line"></span><br><span class="line">    ssc.start()</span><br><span class="line">    ssc.awaitTermination()</span><br></pre></td></tr></table></figure></p><p>ç„¶åå°±æ˜¯æ‰§è¡Œä¸‹åˆ—å‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bin/spark-submit --jars ./external/kafka-0-8-assembly/target/spark-streaming-kafka-0-8-assembly_2.11-2.1.0.jar direct_kafka_wordcount.py 192.168.0.106:9092 test</span><br></pre></td></tr></table></figure></p><p>è¿™å¥å¾ˆé•¿,è¦ç¡®ä¿å¼•ç”¨çš„jaråŒ…è·¯å¾„æ­£ç¡®æ— è¯¯,ç„¶åå°±æ˜¯pythonä»£ç æ–‡ä»¶è·¯å¾„æ­£ç¡®,å‘½ä»¤ç»“æ„å¤§æ¦‚æ˜¯<code>spark-submit --jars jarSource codeSource host:port topic</code>è¿™æ ·</p><p>è·‘èµ·æ¥æ²¡æœ‰è‡ªåŠ¨é€€å‡º,å°±è¯´æ˜æ˜¯å‘½ä»¤æ­£ç¡®å¯ä»¥è¢«æ‰§è¡Œäº†,ä½†æ˜¯è¿™é‡Œé»˜è®¤ä¼šè¾“å‡ºå¤§é‡çš„INFOæ—¥å¿—,å…ˆä¿®æ”¹ä¸€ä¸‹æ—¥å¿—çš„é…ç½®ä¸ºWARN<br>åˆ‡æ¢åˆ°confç›®å½•<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp log4j.properties.template log4j.properties</span><br><span class="line">vim log4j.properties #ä¿®æ”¹é…ç½®,é‡å¯æœåŠ¡å³å¯</span><br></pre></td></tr></table></figure></p><p>é‡æ–°æ‰§è¡Œ,åº”è¯¥æ˜¯åƒè¿™æ ·<br><img src="python.png" alt="python"><br>ç¨‹åºè¿™å°±ç®—æ˜¯è·‘èµ·æ¥äº†,åœ¨ç”Ÿäº§è€…é‡Œé¢è¾“å…¥çš„æ•°æ®ä¼šè¿›å…¥spark streamingè¿›è¡Œå¤„ç†,æ˜¾ç¤ºç»“æœå¤§æ¦‚æ˜¯è¿™æ ·<br>è¾“å…¥<br><img src="input.png" alt="input"><br>è¾“å‡º<br><img src="output.png" alt="output"></p>]]></content>
      
      <categories>
          
          <category> ç¬”è®° </category>
          
          <category> Spark </category>
          
          <category> SparkStreaming </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spark </tag>
            
            <tag> Streaming </tag>
            
            <tag> Spark Streaming </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>windowsç³»ç»Ÿä¸‹Hexoçš„å®‰è£…å’Œé…ç½®</title>
      <link href="/2017/01/10/windows%E7%B3%BB%E7%BB%9F%E4%B8%8BHEXO%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE/"/>
      <url>/2017/01/10/windows%E7%B3%BB%E7%BB%9F%E4%B8%8BHEXO%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE/</url>
      <content type="html"><![CDATA[<p>æ ¹æ®ç½‘ä¸Šçš„å„è·¯æ•™ç¨‹æŠŠHexoæ­èµ·æ¥äº†ï¼Œéš¾åº¦å…¶å®ä¸é«˜ï¼Œä½†æ˜¯è¦ç”¨å¥½è¿˜æ˜¯è¦å¤šç»ƒä¹ å¤šæ€è€ƒï¼Œå…ˆæ•´ç†ä¸€ä¸‹æˆ‘æ­å»ºåšå®¢çš„è¿‡ç¨‹ï¼Œçœå¾—æ”¹å¤©åˆç™¾åº¦å„ç§ç½‘é¡µâ€¦â€¦<br><a id="more"></a></p><h1 id="Hexoçš„å®‰è£…"><a href="#Hexoçš„å®‰è£…" class="headerlink" title="Hexoçš„å®‰è£…"></a>Hexoçš„å®‰è£…</h1><p>é¦–å…ˆå¼•ç”¨ä½œè€…wsgzaoçš„<a href="https://wsgzao.github.io/post/hexo-guide/" title="ä½¿ç”¨GitHubå’ŒHexoæ­å»ºå…è´¹é™æ€Blog" target="_blank" rel="noopener">åŸæ–‡</a><br>ç„¶åæ˜¯é˜®ä¸€å³°çš„<a href="http://www.ruanyifeng.com/blog/2012/08/blogging_with_jekyll.html" title="æ­å»ºä¸€ä¸ªå…è´¹çš„ï¼Œæ— é™æµé‡çš„Blog----github Pageså’ŒJekyllå…¥é—¨ by ruanyifeng" target="_blank" rel="noopener">æ–‡ç« </a><br>Hexoçš„<a href="https://hexo.io/" title="hexo.io" target="_blank" rel="noopener">å®˜ç½‘</a><br>åæ¥å‘ç°ç®€ä¹¦ä¸Šé¢ä¸€ç¯‡æ–‡ç« å†™çš„ä¹Ÿå¾ˆä¸é”™ï¼Œmarkä¸€ä¸‹æ”¹å¤©æ¥å®Œå–„ä¸€ä¸‹æˆ‘çš„ç¬”è®°<a href="http://www.jianshu.com/p/858ecf233db9" title="Andrew_liu:é€šè¿‡Hexoåœ¨Githubä¸Šæ­å»ºåšå®¢æ•™ç¨‹" target="_blank" rel="noopener">Andrew_liu:é€šè¿‡Hexoåœ¨Githubä¸Šæ­å»ºåšå®¢æ•™ç¨‹</a><br><a href="http://blog.csdn.net/shenshanlaoyuan/article/details/52774473" title="Hexoåšå®¢å¢åŠ ç•™è¨€æ¿åŠŸèƒ½" target="_blank" rel="noopener">ç•™è¨€æ¿</a><br><a href="https://www.zhihu.com/question/38797520?sort=created" title="çŸ¥ä¹" target="_blank" rel="noopener">ç•™è¨€æ¿æ¥è‡ªçŸ¥ä¹çš„å›ç­”</a><br><a href="http://www.xbool.com/article-not-show-home/" title="hexoæ–‡ç« è®¾ç½®é¦–é¡µä¸æ˜¾ç¤ºæŠ€å·§" target="_blank" rel="noopener">hexoæ–‡ç« è®¾ç½®é¦–é¡µä¸æ˜¾ç¤ºæŠ€å·§</a></p><h2 id="å®‰è£…Git"><a href="#å®‰è£…Git" class="headerlink" title="å®‰è£…Git"></a>å®‰è£…Git</h2><h2 id="å®‰è£…Node-js"><a href="#å®‰è£…Node-js" class="headerlink" title="å®‰è£…Node.js"></a>å®‰è£…Node.js</h2><p><a href="https://nodejs.org/en/" title="NodeJS" target="_blank" rel="noopener">ä¸‹è½½</a>å®‰è£…å°±è¡Œäº†ï¼Œå…·ä½“è¿‡ç¨‹è®°ä¸å¾—äº†ï¼Œå¥½åƒæ˜¯è£…ä¸Šå°±è¡Œï¼Œç¯å¢ƒå˜é‡è‡ªå·±å°±é…å¥½äº†ï¼Œæœ‰æœºä¼šå†æ­ä¸€æ¬¡çš„è¯ç¡®è®¤ä¸€ä¸‹â€¦â€¦</p><h2 id="å®‰è£…Hexo"><a href="#å®‰è£…Hexo" class="headerlink" title="å®‰è£…Hexo"></a>å®‰è£…Hexo</h2><p>è£…å¥½Node.jsä¹‹åç”¨npmå‘½ä»¤å®‰è£…hexo<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br><span class="line">npm install hexo --save</span><br><span class="line">#å¦‚æœå‘½ä»¤æ— æ³•è¿è¡Œï¼Œå¯ä»¥å°è¯•æ›´æ¢taobaoçš„npmæº</span><br><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure></p><h2 id="åˆå§‹åŒ–Hexo"><a href="#åˆå§‹åŒ–Hexo" class="headerlink" title="åˆå§‹åŒ–Hexo"></a>åˆå§‹åŒ–Hexo</h2><p>å®‰è£…æˆåŠŸä¹‹åï¼Œåˆ‡æ¢åˆ°æŒ‡å®šè·¯å¾„ï¼Œåˆå§‹åŒ–Hexoé¡¹ç›®<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">hexo init</span><br><span class="line">#å®‰è£…å®Œæˆä¹‹åè¯¥è·¯å¾„ä¸‹ä¼šå‡ºç°ä¸€ä¸ªå®Œæ•´çš„hexoé¡¹ç›®ï¼Œå¯ä»¥é€šè¿‡å‘½ä»¤è¿›è¡Œæ“ä½œï¼Œä¸è¿‡å¾ˆå¤šæ“ä½œä¾èµ–äºæ’ä»¶</span><br><span class="line">#å®‰è£… Hexo å®Œæˆåï¼Œè¯·æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼ŒHexo å°†ä¼šåœ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸­æ–°å»ºæ‰€éœ€è¦çš„æ–‡ä»¶ã€‚</span><br><span class="line">$ hexo init &lt;folder&gt;</span><br><span class="line">$ cd &lt;folder&gt;</span><br><span class="line">$ npm install</span><br><span class="line"></span><br><span class="line">#æ–°å»ºå®Œæˆåï¼ŒæŒ‡å®šæ–‡ä»¶å¤¹çš„ç›®å½•å¦‚ä¸‹</span><br><span class="line">.</span><br><span class="line">â”œâ”€â”€ _config.yml</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ scaffolds</span><br><span class="line">â”œâ”€â”€ scripts</span><br><span class="line">â”œâ”€â”€ source</span><br><span class="line">|      â”œâ”€â”€ _drafts</span><br><span class="line">|      â””â”€â”€ _posts</span><br><span class="line">â””â”€â”€ themes</span><br></pre></td></tr></table></figure></p><h2 id="å®‰è£…Hexoæ’ä»¶"><a href="#å®‰è£…Hexoæ’ä»¶" class="headerlink" title="å®‰è£…Hexoæ’ä»¶"></a>å®‰è£…Hexoæ’ä»¶</h2><p>é€šè¿‡æ’ä»¶å¯ä»¥å®ç°è‡ªåŠ¨ç”Ÿæˆé™æ€é¡µé¢ã€è‡ªåŠ¨æ‰“åŒ…å‘å¸ƒç­‰åŠŸèƒ½<br>è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å°†ä¸€ä¸ªå…¨æ–°çš„hexoé¡¹ç›®é€šè¿‡hexo då‘½ä»¤å‘å¸ƒè‡³githubå¯èƒ½ä¼šæŠŠåŸæœ‰çš„é¡¹ç›®å…¨åˆ äº†â€¦â€¦æ²¡æƒ³æ¸…æ¥šæ˜¯ä»€ä¹ˆåŸç†ï¼Œè¿˜éœ€è¦æ…¢æ…¢æ‘¸ç´¢<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-index --save</span><br><span class="line">npm install hexo-generator-archive --save</span><br><span class="line">npm install hexo-generator-category --save</span><br><span class="line">npm install hexo-generator-tag --save</span><br><span class="line">npm install hexo-server --save</span><br><span class="line">npm install hexo-deployer-git --save</span><br><span class="line">npm install hexo-deployer-heroku --save</span><br><span class="line">npm install hexo-deployer-rsync --save</span><br><span class="line">npm install hexo-deployer-openshift --save</span><br><span class="line">npm install hexo-renderer-marked@0.2 --save</span><br><span class="line">npm install hexo-renderer-stylus@0.2 --save</span><br><span class="line">npm install hexo-generator-feed@1 --save</span><br><span class="line">npm install hexo-generator-sitemap@1 --save</span><br></pre></td></tr></table></figure></p><p>å¸¸ç”¨å‘½ä»¤<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo g #æ ¹æ®mdæ–‡ä»¶ç”Ÿæˆé™æ€é¡µé¢</span><br><span class="line">hexo d #æ ¹æ®_config.ymlæ–‡ä»¶ä¸­é…ç½®çš„ä¿¡æ¯ï¼Œå°†é™æ€é¡µé¢å‘å¸ƒåˆ°githubæŒ‡å®šé¡¹ç›®</span><br><span class="line">hexo n &quot;title&quot; #ç”Ÿæˆæ–‡ç« ï¼Œç”Ÿæˆmdæ–‡ä»¶ï¼Œè·¯å¾„åœ¨_postsæ–‡ä»¶å¤¹ä¸‹</span><br><span class="line">hexo s #æœ¬åœ°å¯åŠ¨æœåŠ¡(port:4000)ï¼Œå¯ä»¥ç›´æ¥é¢„è§ˆmdæ–‡ä»¶çš„ä¿®æ”¹</span><br></pre></td></tr></table></figure></p><h2 id="éƒ¨ç½²é™æ€ç½‘é¡µåˆ°GitHub"><a href="#éƒ¨ç½²é™æ€ç½‘é¡µåˆ°GitHub" class="headerlink" title="éƒ¨ç½²é™æ€ç½‘é¡µåˆ°GitHub"></a>éƒ¨ç½²é™æ€ç½‘é¡µåˆ°<a href="https://github.com/" title="GitHub" target="_blank" rel="noopener">GitHub</a></h2><hr><p>æ³¨å†Œå¸å·ï¼Œä¹‹ååˆ›å»º<code>New repository</code>ï¼Œnameå’Œç”¨æˆ·åä¿æŒä¸€è‡´ï¼Œä¾‹å¦‚<code>username.github.io</code><br>ç¬¬ä¸€æ¬¡éƒ¨ç½²ä¸Šå»ä¹‹åä¸€ç›´è®¿é—®ä¸åˆ°ï¼Œä»¥ä¸ºæ˜¯ä»£ç æœ‰é—®é¢˜ï¼Œæˆ–è€…æ˜¯ç½‘ç«™å»¶è¿Ÿï¼Œåæ¥å‘ç°æ˜¯ç½‘ç«™éœ€è¦å®¡æ ¸10åˆ†é’Ÿå·¦å³ï¼Œä¹‹åæ¯æ¬¡æäº¤å®Œæˆä¹‹åå¦‚æœæ²¡æœ‰é”™è¯¯å°±å¯ä»¥ç›´æ¥çœ‹åˆ°æ›´æ–°å†…å®¹</p><h3 id="æ‰‹åŠ¨éƒ¨ç½²"><a href="#æ‰‹åŠ¨éƒ¨ç½²" class="headerlink" title="æ‰‹åŠ¨éƒ¨ç½²"></a>æ‰‹åŠ¨éƒ¨ç½²</h3><p>æˆ‘è¿™ä¸ªäººä¹Ÿæ˜¯æ¯”è¾ƒæ‡’ï¼Œæ¯æ¬¡éƒ½è¦<code>git add .</code> <code>git commit -m &quot;xxx&quot;</code> <code>git push origin master</code> ä¹Ÿæ˜¯å«Œéº»çƒ¦ï¼Œæ‰€ä»¥ç°åœ¨åœ¨ç”¨<code>hexo d</code>è‡ªåŠ¨éƒ¨ç½²ï¼Œå…³äºé¡¹ç›®æ€ä¹ˆåœ¨ä¸åŒæœåŠ¡å™¨ä¸ŠåŒæ­¥çš„é—®é¢˜è¿˜åœ¨è€ƒè™‘ï¼Œç”¨githubæ„Ÿè§‰é€Ÿåº¦æ˜¯ä¸ªé—®é¢˜</p><h3 id="è‡ªåŠ¨éƒ¨ç½²"><a href="#è‡ªåŠ¨éƒ¨ç½²" class="headerlink" title="è‡ªåŠ¨éƒ¨ç½²"></a>è‡ªåŠ¨éƒ¨ç½²</h3><p>è¿™ä¸ªæ„Ÿè§‰ç”¨èµ·æ¥å¾ˆæ–¹ä¾¿ï¼Œæ¯æ¬¡<code>hexo g d</code>ï¼Œç­‰å‘å¸ƒå®Œæˆå°±å¥½äº†<br>æ‰“å¼€Hexoé¡¹ç›®è·¯å¾„ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ï¼Œä¿®æ”¹å¦‚ä¸‹é…ç½®å°±å¯ä»¥äº†<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: https://github.com/username/username.github.io</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure></p><h1 id="Markdownèµ„æ–™"><a href="#Markdownèµ„æ–™" class="headerlink" title="Markdownèµ„æ–™"></a>Markdownèµ„æ–™</h1><p>ä¹‹å‰åœ¨å…¬å¸å†™wikiæ—¶æ¥è§¦äº†ç±»ä¼¼çš„ä¸œè¥¿ï¼Œæ„Ÿè§‰æŒºå¥½ç”¨ï¼Œä¸è¿‡ç”¨çš„æ¯”è¾ƒç”Ÿç–<br>ç½‘ä¸Šæ‰¾çš„<a href="http://www.appinn.com/markdown/" title="ç½‘ä¸Šæ‰¾çš„Markdownæ–‡æ¡£" target="_blank" rel="noopener">Markdown</a>è¯­æ³•é“¾æ¥ï¼Œæ”¾è¿™é‡Œæ…¢æ…¢å­¦ä¹ æ•´ç†</p>]]></content>
      
      <categories>
          
          <category> ç¬”è®° </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Blog </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>éšä¾¿å†™ç‚¹å•¥</title>
      <link href="/2017/01/09/%E9%9A%8F%E4%BE%BF%E5%86%99%E7%82%B9%E5%95%A5/"/>
      <url>/2017/01/09/%E9%9A%8F%E4%BE%BF%E5%86%99%E7%82%B9%E5%95%A5/</url>
      <content type="html"><![CDATA[<p>æ„Ÿè§‰è¿˜æ˜¯æŒºå¥½ç”¨çš„ï¼Œä¸è¿‡éœ€è¦ç†Ÿæ‚‰ï¼Œç°åœ¨çš„é—®é¢˜æ˜¯æ€ä¹ˆèƒ½åœ¨ä¸åŒçš„åœ°æ–¹ç”¨hexoçš„è‡ªåŠ¨éƒ¨ç½²åŠŸèƒ½è€Œåˆä¸è¢«å†²æ‰æ•°æ®<br><a id="more"></a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup java opentsdb &gt;/dev/null 2&gt;&amp;1 &amp;</span><br></pre></td></tr></table></figure></p><h4 id="è¯•è¯•é“¾æ¥"><a href="#è¯•è¯•é“¾æ¥" class="headerlink" title="è¯•è¯•é“¾æ¥"></a>è¯•è¯•é“¾æ¥</h4><p>This is <a href="http://www.baidu.com/" title="baidu" target="_blank" rel="noopener">ç™¾åº¦</a> inline link.</p><p><a href="http://www.baidu.com/" title="ç™¾åº¦" target="_blank" rel="noopener">ç™¾åº¦</a> has no title attribute.</p><p>å‚è€ƒå¼é“¾æ¥</p><p>This is <a href="http://www.baidu.com/" title="Optional Title Here" target="_blank" rel="noopener">å‚è€ƒå¼é“¾æ¥1</a> reference-style link.</p><p>This is <a href="http://www.baidu.com/" title="Optional Title Here" target="_blank" rel="noopener">å‚è€ƒå¼é“¾æ¥2</a> reference-style link.</p>]]></content>
      
      <categories>
          
          <category> ç¬”è®° </category>
          
          <category> Markdown </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>javaå†™å…¥OpenTSDB</title>
      <link href="/2017/01/07/java/"/>
      <url>/2017/01/07/java/</url>
      <content type="html"><![CDATA[<hr><h4 id="æ”¾ä¸ªé“¾æ¥"><a href="#æ”¾ä¸ªé“¾æ¥" class="headerlink" title="æ”¾ä¸ªé“¾æ¥"></a><em>æ”¾ä¸ªé“¾æ¥</em></h4><p><a href="https://liudongmeng.github.io">GitBlog</a></p><h1 id="å…¶å®æˆ‘å°±æ˜¯å…ˆç»ƒä¹ ç»ƒä¹ Markdown"><a href="#å…¶å®æˆ‘å°±æ˜¯å…ˆç»ƒä¹ ç»ƒä¹ Markdown" class="headerlink" title="å…¶å®æˆ‘å°±æ˜¯å…ˆç»ƒä¹ ç»ƒä¹ Markdown"></a>å…¶å®æˆ‘å°±æ˜¯å…ˆç»ƒä¹ ç»ƒä¹ Markdown</h1><a id="more"></a><p>OpenTSDBç”¨webapiè¿˜æ˜¯è§‰å¾—æœ‰ç‚¹æ€§èƒ½é—®é¢˜ï¼Œè¯•ä¸€ä¸‹java apiï¼Œå†™å…¥æˆåŠŸï¼Œæ˜å¤©å†™ä¸ªå¾ªç¯æµ‹ä¸€ä¸‹æ€§èƒ½<br>linuxç¯å¢ƒä¸‹javaçš„ç¼–è¯‘è¿˜è¦å¤šç”¨ç”¨ï¼Œè¿˜è¦æ”¹ç¯å¢ƒå˜é‡å¥½éº»çƒ¦â€¦â€¦<br>è¿˜æœ‰å‡ ä¸ªé—®é¢˜éœ€è¦ç¿»ä¸€ä¸‹æºä»£ç </p><ol><li>åœ¨æœåŠ¡å™¨ä¸Šlocalhostç¯å¢ƒå¯ä»¥å†™å…¥hbaseï¼Œä½†æ˜¯åˆ°å…¶ä»–æœºå™¨ä¸Šæ€ä¹ˆè°ƒï¼Œé…ç½®æ–‡ä»¶åº”è¯¥æ˜¯æœ‰ä½“ç°ï¼Œé¡ºç€æ„é€ å‡½æ•°å¾€ä¸‹çœ‹<br>è¿™ä¸ªé—®é¢˜å·²ç»è§£å†³äº†<br><code># æ³¨æ„åœ¨winodwsä¸‹çš„ C:\Windows\System32\drivers\etc\hostsæ–‡ä»¶ä¸­æ·»åŠ æœåŠ¡å™¨ç«¯hostä¸ipçš„æ˜ å°„å…³ç³»å¦‚ï¼š 10.8.1.135 master</code></li><li>ä¹‹å‰webapiè°ƒç”¨postæ•°æ®çš„æ—¶å€™ï¼Œæ•°æ®é•¿åº¦è¶…è¿‡é™åˆ¶ä¹‹åä¼šå¯¼è‡´è¿æ¥å…³é—­ï¼ŒæœåŠ¡ç«¯æŠ¥çš„æ˜¯nettyçš„é”™è¯¯ï¼Œä¹Ÿè¦ç¿»ä¸€ä¸‹çœ‹èƒ½ä¸èƒ½è§£å†³ï¼Œæ¯•ç«Ÿwebapiè°ƒèµ·æ¥æ¯”è¾ƒç®€å•ï¼Œ13k/såº”è¯¥è¿˜è¿œæ²¡åˆ°æé™    <h2 id="ä¿®æ”¹ç¯å¢ƒå˜é‡"><a href="#ä¿®æ”¹ç¯å¢ƒå˜é‡" class="headerlink" title="ä¿®æ”¹ç¯å¢ƒå˜é‡"></a>ä¿®æ”¹ç¯å¢ƒå˜é‡</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ~/.bashrc</span><br></pre></td></tr></table></figure></li></ol><h2 id="å†…å®¹ä¿®æ”¹"><a href="#å†…å®¹ä¿®æ”¹" class="headerlink" title="å†…å®¹ä¿®æ”¹"></a>å†…å®¹ä¿®æ”¹</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">export PROJECT_HOME=~/bo</span><br><span class="line">for loop in `ls $PROJECT_HOME/*.jar`;do</span><br><span class="line">export CLASSPATH=$&#123;loop&#125;:$&#123;CLASSPATH&#125;</span><br><span class="line">done</span><br></pre></td></tr></table></figure><blockquote><p>å¼•ç”¨</p></blockquote><h2 id="è°ƒç”¨addPointä»£ç "><a href="#è°ƒç”¨addPointä»£ç " class="headerlink" title="è°ƒç”¨addPointä»£ç "></a>è°ƒç”¨addPointä»£ç </h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> net.opentsdb.core.TSDB;</span><br><span class="line"><span class="keyword">import</span> net.opentsdb.utils.Config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">opentsdb</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">                String path=<span class="string">"opentsdb.conf"</span>;</span><br><span class="line">                Config config=<span class="keyword">new</span> Config(path);</span><br><span class="line">                TSDB db= <span class="keyword">new</span> TSDB(config);</span><br><span class="line">                String metric= <span class="string">"mysql.bytes_received"</span>;</span><br><span class="line">                <span class="keyword">long</span> timeStamp =<span class="number">2</span>;</span><br><span class="line">                <span class="keyword">long</span> value=<span class="number">1</span>;</span><br><span class="line">                Map&lt;String, String&gt; tags= <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">                hmap.put(<span class="string">"host"</span>, <span class="string">"web04"</span>);</span><br><span class="line">                db.addPoint(metric, timeStamp, value,tags);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡é…ç½®æ–‡ä»¶å®ä¾‹åŒ–å¯¹è±¡<br><code>TSDB db= new TSDB(config);</code></p><hr><h2 id="ç¼–è¯‘-è°ƒç”¨"><a href="#ç¼–è¯‘-è°ƒç”¨" class="headerlink" title="ç¼–è¯‘/è°ƒç”¨"></a>ç¼–è¯‘/è°ƒç”¨</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">javac opentsdb.java</span><br><span class="line">java opentsdb</span><br></pre></td></tr></table></figure><h2 id="å®éªŒä¸€ä¸ªè¡¨æ ¼ï¼Œæ²¡æœ‰ç°æˆçš„ï¼Œå…ˆæ”¾ä¸ªä¾‹å­ï¼Œå›å¤´æœ‰çš„æ—¶å€™å†åš"><a href="#å®éªŒä¸€ä¸ªè¡¨æ ¼ï¼Œæ²¡æœ‰ç°æˆçš„ï¼Œå…ˆæ”¾ä¸ªä¾‹å­ï¼Œå›å¤´æœ‰çš„æ—¶å€™å†åš" class="headerlink" title="å®éªŒä¸€ä¸ªè¡¨æ ¼ï¼Œæ²¡æœ‰ç°æˆçš„ï¼Œå…ˆæ”¾ä¸ªä¾‹å­ï¼Œå›å¤´æœ‰çš„æ—¶å€™å†åš"></a>å®éªŒä¸€ä¸ªè¡¨æ ¼ï¼Œæ²¡æœ‰ç°æˆçš„ï¼Œå…ˆæ”¾ä¸ªä¾‹å­ï¼Œå›å¤´æœ‰çš„æ—¶å€™å†åš</h2><blockquote><table><thead><tr><th>Tables</th><th style="text-align:center">Are</th><th style="text-align:right">Cool</th></tr></thead><tbody><tr><td>col 3 is</td><td style="text-align:center">right-aligned</td><td style="text-align:right">$1600</td></tr><tr><td>col 2 is</td><td style="text-align:center">centered</td><td style="text-align:right">$12</td></tr><tr><td>zebra stripes</td><td style="text-align:center">are neat</td><td style="text-align:right">$1</td></tr></tbody></table></blockquote>]]></content>
      
      <categories>
          
          <category> ç¬”è®° </category>
          
          <category> OpenTSDB </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>OpenTSDB-2</title>
      <link href="/2017/01/06/OpenTSDB-2/"/>
      <url>/2017/01/06/OpenTSDB-2/</url>
      <content type="html"><![CDATA[<p>æµ‹è¯•OpenTSDBçš„WebApiæ¥å£ï¼Œè¡¨ç¤ºä¸ä¼šå†™JSå¾ˆæ˜¯è´¹åŠ²ï¼Œå¥½ä¸å®¹æ˜“ç™¾åº¦äº†ajaxçš„å†™æ³•ï¼Œåˆé‡åˆ°è·¨åŸŸé—®é¢˜å’Œpostæ•°æ®å¤§å°çš„é™åˆ¶â€¦â€¦è¿™ä¸ªç ´çƒ‚é¡µé¢è®°ä¸€ä¸‹ï¼Œä»¥åé‡åˆ°è¦postæ•°æ®çš„åœ°æ–¹å¯ä»¥æ¥è¿™é‡Œç¿»<br><a id="more"></a><br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./jquery-1.10.2.min.js"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    $(document).ready(function () &#123;</span></span><br><span class="line"><span class="undefined">        $("button").click(function () &#123;</span></span><br><span class="line"><span class="undefined">            var uri="http://128.1.10.20:4242/api/put?summary";</span></span><br><span class="line"><span class="undefined">            var i = 0;</span></span><br><span class="line"><span class="undefined">            var j = 0;</span></span><br><span class="line"><span class="undefined">            var start = new Date();</span></span><br><span class="line"><span class="undefined">            document.getElementById("start").innerHTML = (start).toLocaleTimeString() + start.getMilliseconds();</span></span><br><span class="line"><span class="undefined">            while (i++ &lt; 10000) &#123;</span></span><br><span class="line"><span class="undefined">                $.ajax(&#123;</span></span><br><span class="line"><span class="undefined">                    type: "POST",</span></span><br><span class="line"><span class="undefined">                    url: uri,</span></span><br><span class="line"><span class="undefined">                    contentType: "application/json; charset=utf-8",</span></span><br><span class="line"><span class="undefined">                    data: JSON.stringify(&#123;</span></span><br><span class="line"><span class="undefined">    "metric": "mysql.bytes_received",</span></span><br><span class="line"><span class="undefined">    "timestamp": i,</span></span><br><span class="line"><span class="undefined">    "value": 1,</span></span><br><span class="line"><span class="undefined">    "tags": &#123;</span></span><br><span class="line"><span class="undefined">       "host": "web01",</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined">&#125;),</span></span><br><span class="line"><span class="undefined">                    dataType: "json",</span></span><br><span class="line"><span class="undefined">                    success: function (message) &#123;</span></span><br><span class="line"><span class="undefined">                        //alert(message.StatusCode==200?"Success":"Failed");</span></span><br><span class="line"><span class="undefined">                        document.getElementById("count").innerHTML = (message.success == 1 ? j++ : alert( JSON.stringify(message)));</span></span><br><span class="line"><span class="undefined">                        document.getElementById("end").innerHTML = (end).toLocaleTimeString() + end.getMilliseconds();</span></span><br><span class="line"><span class="undefined">                        //message.StatusCode==200?alert("ç¬¬"+i+"æ¡æ•°æ®æˆåŠŸ"):null;</span></span><br><span class="line"><span class="undefined">                    &#125;,</span></span><br><span class="line"><span class="undefined">                    error: function (message) &#123;</span></span><br><span class="line"><span class="undefined">                        $("#request-process-patent").html("æäº¤æ•°æ®å¤±è´¥ï¼");</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                &#125;);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            var end = new Date();</span></span><br><span class="line"><span class="undefined">            document.getElementById("end").innerHTML = (end).toLocaleTimeString() + end.getMilliseconds();</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">å¼€å§‹æ—¶é—´<span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"start"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"count"</span>&gt;</span>æˆåŠŸæ¬¡æ•°<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">ç»“æŸæ—¶é—´<span class="tag">&lt;<span class="name">p</span> <span class="attr">id</span>=<span class="string">"end"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span>&gt;</span>å‘é¡µé¢å‘é€ HTTP POST è¯·æ±‚ï¼Œå¹¶è·å¾—è¿”å›çš„ç»“æœ<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></p>]]></content>
      
      
    </entry>
    
    <entry>
      <title>OpenTSDBæœåŠ¡å™¨å¯åŠ¨æ“ä½œ</title>
      <link href="/2017/01/06/OpenTSDB-1/"/>
      <url>/2017/01/06/OpenTSDB-1/</url>
      <content type="html"><![CDATA[<p>å…¬å¸çš„è™šæ‹Ÿæœºå…³äº†ä¹‹åOpenTSDBçš„æ—¶å€™å„ç§æŠ¥é”™â€¦â€¦æŠ˜è…¾äº†ä¸€ä¼šå„¿æ‰æƒ³èµ·æ¥åŸºç¡€çš„Hadoop/Zookeeper/HBaseæœåŠ¡è²Œä¼¼æ²¡èµ·â€¦â€¦<br>å¯åŠ¨æœåŠ¡çš„å‘½ä»¤è®°ä¸€ä¸‹ï¼Œè™½ç„¶æäº†ä¸¤æ¬¡å¤§æ¦‚è®°ä½äº†<br><a id="more"></a><br>æ‰€æœ‰æ“ä½œéƒ½åœ¨masterä¸Šè¿›è¡Œ</p><p>å¯åŠ¨Hadoop<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">start-dfs.sh</span><br><span class="line">start-yarn.sh</span><br><span class="line">#mr-jobhistory-daemon.sh start historyserver</span><br></pre></td></tr></table></figure></p><p>å¯åŠ¨HBase(è‡ªå¸¦å¯åŠ¨Zookeeper)<br>åˆ‡æ¢è‡³HBaseå®‰è£…è·¯å¾„<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./bin/start-hbase-sh</span><br></pre></td></tr></table></figure></p><p>å¯åŠ¨OpenTSDB<br>åˆ‡æ¢è‡³OpenTSDBå®‰è£…è·¯å¾„(build)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./tsdb tsd</span><br></pre></td></tr></table></figure></p>]]></content>
      
      <categories>
          
          <category> ç¬”è®° </category>
          
          <category> OpenTSDB </category>
          
      </categories>
      
      
    </entry>
    
    <entry>
      <title>Hello World</title>
      <link href="/2016/12/11/hello-world/"/>
      <url>/2016/12/11/hello-world/</url>
      <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
      
      
    </entry>
    
  
  
</search>
